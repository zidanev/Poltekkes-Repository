"use strict";exports.id=8504,exports.ids=[8504],exports.modules={58504:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(21870),notify_info_guard=__webpack_require__(38533),site_administrator_guard=__webpack_require__(22658),common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),app_config_interface=__webpack_require__(59945),shared_operators=__webpack_require__(82656),search_service=__webpack_require__(3435),search_configuration_service=__webpack_require__(90435),my_dspace_configuration_service=__webpack_require__(3581),pagination_component_options_model=__webpack_require__(64694),paginated_search_options_model=__webpack_require__(80780),view_mode_model=__webpack_require__(97849),tslib_es6=__webpack_require__(31635),core=__webpack_require__(68014),admin_notify_message_search_result_model=__webpack_require__(69008),hover_class_directive=__webpack_require__(14541),listable_object_decorator=__webpack_require__(98228);const _c0=a0=>({"background-color":a0}),_c1=a0=>({color:a0});function NotificationBoxComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onClick(ctx_r1.boxConfig))}),core.j41(2,"div",2)(3,"div",3),core.EFF(4),core.k0s(),core.j41(5,"div",4),core.EFF(6),core.nI1(7,"translate"),core.k0s()()()}if(2&rf){let tmp_5_0;const ctx_r1=core.XpG();core.Y8G("ngStyle",core.eq3(10,_c0,ctx_r1.boxConfig.color))("dsHoverClass","shadow-lg")("title",core.bMT(1,6,ctx_r1.boxConfig.description)),core.R7$(2),core.Y8G("ngStyle",core.eq3(12,_c1,ctx_r1.boxConfig.textColor)),core.R7$(2),core.JRh(null!==(tmp_5_0=ctx_r1.boxConfig.count)&&void 0!==tmp_5_0?tmp_5_0:0),core.R7$(2),core.JRh(core.bMT(7,8,ctx_r1.boxConfig.title))}}let NotificationBoxComponent=class NotificationBoxComponent2{constructor(){this.selectedBoxConfig=new core.bkB}onClick(boxConfig){this.selectedBoxConfig.emit(boxConfig.config)}static#_=this.\u0275fac=function(t){return new(t||NotificationBoxComponent2)};static#_2=this.\u0275cmp=core.VBU({type:NotificationBoxComponent2,selectors:[["ds-notification-box"]],inputs:{boxConfig:"boxConfig"},outputs:{selectedBoxConfig:"selectedBoxConfig"},standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[["role","button","class","w-100 h-100 pt-4 pb-3 px-2 box-container",3,"ngStyle","dsHoverClass","title","click",4,"ngIf"],["role","button",1,"w-100","h-100","pt-4","pb-3","px-2","box-container",3,"click","ngStyle","dsHoverClass","title"],[1,"d-flex","flex-column","justify-content-center","align-items-center",3,"ngStyle"],[1,"mb-3","font-weight-bold","box-counter"],[1,"font-weight-bold","d-flex","justify-content-center","w-100"]],template:function(rf,ctx){1&rf&&core.DNE(0,NotificationBoxComponent_div_0_Template,8,14,"div",0),2&rf&&core.Y8G("ngIf",ctx.boxConfig)},dependencies:[common.B3,hover_class_directive.k,ngx_translate_core.h,ngx_translate_core.D9,common.bT],styles:[".box-container[_ngcontent-%COMP%]{min-width:max-content}.box-counter[_ngcontent-%COMP%]{font-size:calc(var(--bs-font-size-lg) * 1.5)}"]})};function AdminNotifyMetricsComponent_div_0_div_5_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",5)(1,"ds-notification-box",6),core.bIt("selectedBoxConfig",function($event){core.eBV(_r1);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.navigateToSelectedSearchConfig($event))}),core.k0s()()}if(2&rf){const box_r3=ctx.$implicit;core.R7$(),core.Y8G("boxConfig",box_r3)}}function AdminNotifyMetricsComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"div",2),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",3),core.DNE(5,AdminNotifyMetricsComponent_div_0_div_5_Template,2,1,"div",4),core.k0s()()),2&rf){const row_r4=ctx.$implicit;core.R7$(2),core.JRh(core.bMT(3,2,row_r4.title)),core.R7$(3),core.Y8G("ngForOf",row_r4.boxes)}}NotificationBoxComponent=(0,tslib_es6.Cg)([(0,listable_object_decorator.VK)(admin_notify_message_search_result_model.o,view_mode_model.n.ListElement)],NotificationBoxComponent);let AdminNotifyMetricsComponent=(()=>{class AdminNotifyMetricsComponent2{constructor(router2){this.router=router2,this.incomingConfiguration="NOTIFY.incoming",this.involvedItemsSuffix="involvedItems",this.inboundPath="/inbound",this.outboundPath="/outbound",this.adminSearchPath="/admin/search"}navigateToSelectedSearchConfig(searchConfig){if(searchConfig.endsWith(this.involvedItemsSuffix))return void this.router.navigate([this.adminSearchPath],{queryParams:{configuration:searchConfig,view:view_mode_model.n.ListElement}});const selectedPath=searchConfig.startsWith(this.incomingConfiguration)?this.inboundPath:this.outboundPath;this.router.navigate([`${this.router.url}${selectedPath}`],{queryParams:{configuration:searchConfig,view:view_mode_model.n.Table}})}static#_=this.\u0275fac=function(t){return new(t||AdminNotifyMetricsComponent2)(core.rXU(router.Ix))};static#_2=this.\u0275cmp=core.VBU({type:AdminNotifyMetricsComponent2,selectors:[["ds-admin-notify-metrics"]],inputs:{boxesConfig:"boxesConfig"},standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],[1,"mb-2"],[1,"row","justify-content-between"],["class","col-sm",4,"ngFor","ngForOf"],[1,"col-sm"],[3,"selectedBoxConfig","boxConfig"]],template:function(rf,ctx){1&rf&&core.DNE(0,AdminNotifyMetricsComponent_div_0_Template,6,4,"div",0),2&rf&&core.Y8G("ngForOf",ctx.boxesConfig)},dependencies:[NotificationBoxComponent,ngx_translate_core.h,ngx_translate_core.D9,common.Sq],encapsulation:2})}return AdminNotifyMetricsComponent2})();const admin_notify_dashboard_component_c0=()=>({view:"table"});function AdminNotifyDashboardComponent_ds_admin_notify_metrics_24_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-admin-notify-metrics",11),core.nI1(1,"async")),2&rf){const ctx_r0=core.XpG();core.Y8G("boxesConfig",core.bMT(1,1,ctx_r0.notifyMetricsRows$))}}let AdminNotifyDashboardComponent=(()=>{class AdminNotifyDashboardComponent2{constructor(appConfig,searchService){this.appConfig=appConfig,this.searchService=searchService,this.notifyMetricsRows$=new cjs.BehaviorSubject([]),this.singleResultOptions=Object.assign(new pagination_component_options_model.W,{id:"single-result-options",pageSize:1})}ngOnInit(){this.metricsConfig=this.appConfig.notifyMetrics;const mertricsRowsConfigurations=this.metricsConfig.map(row=>row.boxes).map(boxes=>boxes.map(box=>box.config).filter(config=>!!config)),searchConfigurations=[].concat(...mertricsRowsConfigurations.map(config=>config)).map(config=>Object.assign(new paginated_search_options_model.C({}),{configuration:config,pagination:this.singleResultOptions}));(0,cjs.forkJoin)(searchConfigurations.map(config=>this.searchService.search(config).pipe((0,shared_operators.qD)(),(0,operators.Tj)(response=>this.mapSearchObjectsToMetricsBox(config.configuration,response.payload))))).pipe((0,operators.Tj)(metricBoxes=>this.mapUpdatedBoxesToMetricsRows(metricBoxes))).subscribe(metricBoxes=>{this.notifyMetricsRows$.next(metricBoxes)})}mapSearchObjectsToMetricsBox(configuration,searchObject){const count=searchObject.pageInfo.totalElements;return{...[].concat(...this.metricsConfig.map(config=>config.boxes)).find(box=>box.config===configuration),count}}mapUpdatedBoxesToMetricsRows(boxesWithCount){return this.metricsConfig.map(row=>({...row,boxes:row.boxes.map(rowBox=>boxesWithCount.find(boxWithCount=>boxWithCount.config===rowBox.config))}))}static#_=this.\u0275fac=function(t){return new(t||AdminNotifyDashboardComponent2)(core.rXU(app_config_interface.vQ),core.rXU(search_service.S))};static#_2=this.\u0275cmp=core.VBU({type:AdminNotifyDashboardComponent2,selectors:[["ds-admin-notify-dashboard"]],standalone:!0,features:[core.Jv_([{provide:my_dspace_configuration_service.EN,useClass:search_configuration_service.g}]),core.aNF],decls:26,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"my-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active"],[1,"nav-link",3,"routerLink","queryParams"],[1,"mt-2"],[3,"boxesConfig",4,"ngIf"],[3,"boxesConfig"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div",4),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"div")(10,"ul",5)(11,"li",6)(12,"a",7),core.EFF(13),core.nI1(14,"translate"),core.k0s()(),core.j41(15,"li",6)(16,"a",8),core.EFF(17),core.nI1(18,"translate"),core.k0s()(),core.j41(19,"li",6)(20,"a",8),core.EFF(21),core.nI1(22,"translate"),core.k0s()()(),core.j41(23,"div",9),core.DNE(24,AdminNotifyDashboardComponent_ds_admin_notify_metrics_24_Template,2,3,"ds-admin-notify-metrics",10),core.nI1(25,"async"),core.k0s()()()()()),2&rf){let tmp_9_0;core.R7$(4),core.JRh(core.bMT(5,10,"admin-notify-dashboard.title")),core.R7$(3),core.JRh(core.bMT(8,12,"admin-notify-dashboard.description")),core.R7$(6),core.JRh(core.bMT(14,14,"admin-notify-dashboard.metrics")),core.R7$(3),core.Y8G("routerLink","inbound")("queryParams",core.lJ4(22,admin_notify_dashboard_component_c0)),core.R7$(),core.JRh(core.bMT(18,16,"admin.notify.dashboard.inbound-logs")),core.R7$(3),core.Y8G("routerLink","outbound")("queryParams",core.lJ4(23,admin_notify_dashboard_component_c0)),core.R7$(),core.JRh(core.bMT(22,18,"admin.notify.dashboard.outbound-logs")),core.R7$(3),core.Y8G("ngIf",null==(tmp_9_0=core.bMT(25,20,ctx.notifyMetricsRows$))?null:tmp_9_0.length)}},dependencies:[AdminNotifyMetricsComponent,router.Wk,common.bT,ngx_translate_core.h,ngx_translate_core.D9,common.Jj],encapsulation:2})}return AdminNotifyDashboardComponent2})();var context_model=__webpack_require__(34069),search_labels_component=__webpack_require__(80652),themed_search_component=__webpack_require__(84057);function AdminNotifyLogsResultComponent_button_8_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",8),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.resetDefaultConfiguration())}),core.EFF(1),core.nI1(2,"async"),core.nI1(3,"translate"),core.j41(4,"span"),core.EFF(5," \xd7"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(),core.SpI(" ",core.bMT(3,3,"admin-notify-logs."+core.bMT(2,1,ctx_r1.selectedSearchConfig$))," ")}}let AdminNotifyLogsResultComponent=(()=>{class AdminNotifyLogsResultComponent2{constructor(searchConfigService,router2,route){this.searchConfigService=searchConfigService,this.router=router2,this.route=route,this.context=context_model.o.CoarNotify}ngOnInit(){this.selectedSearchConfig$=this.searchConfigService.getCurrentConfiguration(this.defaultConfiguration),this.isInbound$=this.selectedSearchConfig$.pipe((0,operators.Tj)(config=>config.startsWith("NOTIFY.incoming")))}resetDefaultConfiguration(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([this.getResolvedUrl(this.route.snapshot)],{queryParams:{configuration:this.defaultConfiguration,view:view_mode_model.n.Table}})})}getResolvedUrl(route){return route.pathFromRoot.map(v=>v.url.map(segment=>segment.toString()).join("/")).join("/")}static#_=this.\u0275fac=function(t){return new(t||AdminNotifyLogsResultComponent2)(core.rXU(my_dspace_configuration_service.EN),core.rXU(router.Ix),core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:AdminNotifyLogsResultComponent2,selectors:[["ds-admin-notify-logs-result"]],inputs:{defaultConfiguration:"defaultConfiguration"},standalone:!0,features:[core.Jv_([{provide:my_dspace_configuration_service.EN,useClass:search_configuration_service.g}]),core.aNF],decls:14,vars:15,consts:[[1,"container","my-4"],[1,"row"],[1,"col-12","col-md-3","text-left","h4"],[1,"col-md-9"],[1,"h4"],["class","badge badge-primary mr-1 mb-1",3,"click",4,"ngIf"],[3,"inPlaceSearch"],[3,"configuration","showViewModes","searchEnabled","context"],[1,"badge","badge-primary","mr-1","mb-1",3,"click"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2),core.EFF(3),core.nI1(4,"async"),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div",3)(7,"div",4),core.DNE(8,AdminNotifyLogsResultComponent_button_8_Template,6,5,"button",5),core.nI1(9,"async"),core.k0s(),core.nrm(10,"ds-search-labels",6),core.k0s()()(),core.j41(11,"div"),core.nrm(12,"ds-search",7),core.nI1(13,"async"),core.k0s()),2&rf&&(core.R7$(3),core.JRh(core.bMT(5,9,core.bMT(4,7,ctx.isInbound$)?"admin.notify.dashboard.inbound":"admin.notify.dashboard.outbound")),core.R7$(5),core.Y8G("ngIf",core.bMT(9,11,ctx.selectedSearchConfig$)!==ctx.defaultConfiguration),core.R7$(2),core.Y8G("inPlaceSearch",!0),core.R7$(2),core.Y8G("configuration",core.bMT(13,13,ctx.selectedSearchConfig$))("showViewModes",!1)("searchEnabled",!1)("context",ctx.context))},dependencies:[search_labels_component.L,themed_search_component.N,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,common.bT],encapsulation:2})}return AdminNotifyLogsResultComponent2})();const admin_notify_incoming_component_c0=()=>({view:"table",configuration:"NOTIFY.outgoing"}),admin_notify_outgoing_component_c0=()=>({view:"table",configuration:"NOTIFY.incoming"}),ROUTES=[{canActivate:[site_administrator_guard.Y,notify_info_guard.x],path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},component:AdminNotifyDashboardComponent,pathMatch:"full",data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}},{path:"inbound",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},component:(()=>{class AdminNotifyIncomingComponent2{constructor(searchConfigService){this.searchConfigService=searchConfigService}static#_=this.\u0275fac=function(t){return new(t||AdminNotifyIncomingComponent2)(core.rXU(my_dspace_configuration_service.EN))};static#_2=this.\u0275cmp=core.VBU({type:AdminNotifyIncomingComponent2,selectors:[["ds-admin-notify-incoming"]],standalone:!0,features:[core.Jv_([{provide:my_dspace_configuration_service.EN,useClass:search_configuration_service.g}]),core.aNF],decls:22,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link","active"],[1,"nav-link",3,"routerLink","queryParams"],[3,"defaultConfiguration"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div")(7,"div")(8,"ul",4)(9,"li",5)(10,"a",6),core.EFF(11),core.nI1(12,"translate"),core.k0s()(),core.j41(13,"li",5)(14,"a",7),core.EFF(15),core.nI1(16,"translate"),core.k0s()(),core.j41(17,"li",5)(18,"a",8),core.EFF(19),core.nI1(20,"translate"),core.k0s()()(),core.nrm(21,"ds-admin-notify-logs-result",9),core.k0s()()()()()),2&rf&&(core.R7$(4),core.JRh(core.bMT(5,8,"admin-notify-dashboard.title")),core.R7$(6),core.Y8G("routerLink","../"),core.R7$(),core.JRh(core.bMT(12,10,"admin-notify-dashboard.metrics")),core.R7$(4),core.JRh(core.bMT(16,12,"admin.notify.dashboard.inbound-logs")),core.R7$(3),core.Y8G("routerLink","../outbound")("queryParams",core.lJ4(16,admin_notify_incoming_component_c0)),core.R7$(),core.JRh(core.bMT(20,14,"admin.notify.dashboard.outbound-logs")),core.R7$(2),core.Y8G("defaultConfiguration","NOTIFY.incoming"))},dependencies:[router.Wk,AdminNotifyLogsResultComponent,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}return AdminNotifyIncomingComponent2})(),canActivate:[site_administrator_guard.Y,notify_info_guard.x],data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}},{path:"outbound",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},component:(()=>{class AdminNotifyOutgoingComponent2{constructor(searchConfigService){this.searchConfigService=searchConfigService}static#_=this.\u0275fac=function(t){return new(t||AdminNotifyOutgoingComponent2)(core.rXU(my_dspace_configuration_service.EN))};static#_2=this.\u0275cmp=core.VBU({type:AdminNotifyOutgoingComponent2,selectors:[["ds-admin-notify-outgoing"]],standalone:!0,features:[core.Jv_([{provide:my_dspace_configuration_service.EN,useClass:search_configuration_service.g}]),core.aNF],decls:22,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link",3,"routerLink","queryParams"],[1,"nav-link","active"],[3,"defaultConfiguration"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div")(7,"div")(8,"ul",4)(9,"li",5)(10,"a",6),core.EFF(11),core.nI1(12,"translate"),core.k0s()(),core.j41(13,"li",5)(14,"a",7),core.EFF(15),core.nI1(16,"translate"),core.k0s()(),core.j41(17,"li",5)(18,"a",8),core.EFF(19),core.nI1(20,"translate"),core.k0s()()(),core.nrm(21,"ds-admin-notify-logs-result",9),core.k0s()()()()()),2&rf&&(core.R7$(4),core.JRh(core.bMT(5,8,"admin-notify-dashboard.title")),core.R7$(6),core.Y8G("routerLink","../"),core.R7$(),core.JRh(core.bMT(12,10,"admin-notify-dashboard.metrics")),core.R7$(3),core.Y8G("routerLink","../inbound")("queryParams",core.lJ4(16,admin_notify_outgoing_component_c0)),core.R7$(),core.JRh(core.bMT(16,12,"admin.notify.dashboard.inbound-logs")),core.R7$(4),core.JRh(core.bMT(20,14,"admin.notify.dashboard.outbound-logs")),core.R7$(2),core.Y8G("defaultConfiguration","NOTIFY.outgoing"))},dependencies:[router.Wk,AdminNotifyLogsResultComponent,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}return AdminNotifyOutgoingComponent2})(),canActivate:[site_administrator_guard.Y,notify_info_guard.x],data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}}]},38533:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>notifyInfoGuard});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(64247),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10743),_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3075);const notifyInfoGuard=(route,state,notifyInfoService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_2__.Ix))=>notifyInfoService.isCoarConfigEnabled().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(isEnabled=>!!isEnabled||router.parseUrl("/404")))}};