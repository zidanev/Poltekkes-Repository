"use strict";exports.id=2913,exports.ids=[2913,1813,5858],exports.modules={92913:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(21870),admin_registries_routing_paths=__webpack_require__(30606),common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),pagination_service=__webpack_require__(39304),registry_service=__webpack_require__(10893),shared_operators=__webpack_require__(82656),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),pagination_component=__webpack_require__(91904),find_list_options_model=__webpack_require__(97570);function toFindListOptions(pagination,original){return Object.assign(new find_list_options_model._,original,{currentPage:pagination.currentPage,elementsPerPage:pagination.pageSize})}var pagination_component_options_model=__webpack_require__(64694),core=__webpack_require__(68014),fesm2020_core=__webpack_require__(71508),metadata_schema_model=__webpack_require__(38853),form_builder_service=__webpack_require__(80152),form_component=__webpack_require__(49148);function MetadataSchemaFormComponent_div_0_Template(rf,ctx){1&rf&&core.nrm(0,"div")}function MetadataSchemaFormComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"h2"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.JRh(core.bMT(2,1,ctx_r1.messagePrefix+".create"))}}function MetadataSchemaFormComponent_ng_template_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"h2"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.JRh(core.bMT(2,1,ctx_r1.messagePrefix+".edit"))}}let MetadataSchemaFormComponent=(()=>{class MetadataSchemaFormComponent2{constructor(registryService,formBuilderService,translateService){this.registryService=registryService,this.formBuilderService=formBuilderService,this.translateService=translateService,this.formId="metadata-schema-form",this.messagePrefix="admin.registries.metadata.form",this.formLayout={name:{grid:{host:"col col-sm-6 d-inline-block"}},namespace:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new core.bkB}ngOnInit(){(0,cjs.combineLatest)([this.translateService.get(`${this.messagePrefix}.name`),this.translateService.get(`${this.messagePrefix}.namespace`)]).subscribe(([name,namespace])=>{this.name=new fesm2020_core.rA_({id:"name",label:name,name:"name",validators:{required:null,pattern:"^[^. ,]*$",maxLength:32},required:!0,errorMessages:{pattern:"error.validation.metadata.name.invalid-pattern",maxLength:"error.validation.metadata.name.max-length"}}),this.namespace=new fesm2020_core.rA_({id:"namespace",label:namespace,name:"namespace",validators:{required:null,maxLength:256},required:!0,errorMessages:{maxLength:"error.validation.metadata.namespace.max-length"}}),this.formModel=[new fesm2020_core.iO5({id:"metadatadataschemagroup",group:[this.namespace,this.name]})],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.registryService.getActiveMetadataSchema().subscribe(schema=>{null==schema?this.clearFields():(this.formGroup.patchValue({metadatadataschemagroup:{name:schema.prefix,namespace:schema.namespace}}),this.name.disabled=!0)})})}onCancel(){this.registryService.cancelEditMetadataSchema()}onSubmit(){this.registryService.getActiveMetadataSchema().pipe((0,operators.s)(1),(0,operators.nx)(schema=>{const metadataValues={prefix:this.name.value,namespace:this.namespace.value};let createOrUpdate$;if(null==schema)createOrUpdate$=this.registryService.createOrUpdateMetadataSchema(Object.assign(new metadata_schema_model.p,metadataValues));else{const updatedSchema=Object.assign(new metadata_schema_model.p,schema,{namespace:metadataValues.namespace});createOrUpdate$=this.registryService.createOrUpdateMetadataSchema(updatedSchema)}return createOrUpdate$}),(0,operators.Mi)(()=>{this.registryService.clearMetadataSchemaRequests().subscribe()})).subscribe(updatedOrCreatedSchema=>{this.submitForm.emit(updatedOrCreatedSchema),this.clearFields(),this.registryService.cancelEditMetadataSchema()})}clearFields(){this.formGroup.reset("metadatadataschemagroup"),this.name.disabled=!1}ngOnDestroy(){this.onCancel()}static#_=this.\u0275fac=function(t){return new(t||MetadataSchemaFormComponent2)(core.rXU(registry_service.x),core.rXU(form_builder_service.j),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:MetadataSchemaFormComponent2,selectors:[["ds-metadata-schema-form"]],outputs:{submitForm:"submitForm"},standalone:!0,features:[core.aNF],decls:7,vars:9,consts:[["createHeader",""],["editheader",""],[4,"ngIf","ngIfThen","ngIfElse"],[3,"cancel","submitForm","formId","formModel","formGroup","formLayout"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.DNE(0,MetadataSchemaFormComponent_div_0_Template,1,0,"div",2),core.nI1(1,"async"),core.DNE(2,MetadataSchemaFormComponent_ng_template_2_Template,3,3,"ng-template",null,0,core.C5r)(4,MetadataSchemaFormComponent_ng_template_4_Template,3,3,"ng-template",null,1,core.C5r),core.j41(6,"ds-form",3),core.bIt("cancel",function(){return core.eBV(_r1),core.Njj(ctx.onCancel())})("submitForm",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit())}),core.k0s()}if(2&rf){const createHeader_r3=core.sdS(3),editheader_r4=core.sdS(5);core.Y8G("ngIf",core.bMT(1,7,ctx.registryService.getActiveMetadataSchema()))("ngIfThen",editheader_r4)("ngIfElse",createHeader_r3),core.R7$(6),core.Y8G("formId",ctx.formId)("formModel",ctx.formModel)("formGroup",ctx.formGroup)("formLayout",ctx.formLayout)}},dependencies:[common.bT,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,form_component.s],encapsulation:2})}return MetadataSchemaFormComponent2})();const _c0=a0=>({"table-primary":a0}),_c1=a0=>[a0];function MetadataRegistryComponent_ds_pagination_10_tr_20_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"tr",15),core.nI1(1,"async"),core.j41(2,"td")(3,"label",16)(4,"input",17),core.nI1(5,"async"),core.bIt("change",function($event){const schema_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.selectMetadataSchema(schema_r2,$event))}),core.k0s(),core.j41(6,"span",13),core.EFF(7),core.nI1(8,"async"),core.nI1(9,"translate"),core.k0s()()(),core.j41(10,"td",18),core.bIt("click",function(){const schema_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.editSchema(schema_r2))}),core.j41(11,"a",19),core.EFF(12),core.k0s()(),core.j41(13,"td",18),core.bIt("click",function(){const schema_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.editSchema(schema_r2))}),core.j41(14,"a",19),core.EFF(15),core.k0s()(),core.j41(16,"td",18),core.bIt("click",function(){const schema_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.editSchema(schema_r2))}),core.j41(17,"a",19),core.EFF(18),core.k0s()()()}if(2&rf){const schema_r2=ctx.$implicit,ctx_r2=core.XpG(2);core.Y8G("ngClass",core.eq3(17,_c0,core.bMT(1,9,ctx_r2.isActive(schema_r2)))),core.R7$(4),core.Y8G("checked",core.bMT(5,11,ctx_r2.isSelected(schema_r2))),core.R7$(3),core.JRh(core.bMT(9,15,core.bMT(8,13,ctx_r2.isSelected(schema_r2))?"admin.registries.metadata.schemas.deselect":"admin.registries.metadata.schemas.select")),core.R7$(4),core.Y8G("routerLink",core.eq3(19,_c1,schema_r2.prefix)),core.R7$(),core.JRh(schema_r2.id),core.R7$(2),core.Y8G("routerLink",core.eq3(21,_c1,schema_r2.prefix)),core.R7$(),core.JRh(schema_r2.namespace),core.R7$(2),core.Y8G("routerLink",core.eq3(23,_c1,schema_r2.prefix)),core.R7$(),core.JRh(schema_r2.prefix)}}function MetadataRegistryComponent_ds_pagination_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",9),core.nI1(1,"async"),core.j41(2,"div",10)(3,"table",11)(4,"thead")(5,"tr")(6,"th",12)(7,"span",13),core.EFF(8),core.nI1(9,"translate"),core.k0s()(),core.j41(10,"th",12),core.EFF(11),core.nI1(12,"translate"),core.k0s(),core.j41(13,"th",12),core.EFF(14),core.nI1(15,"translate"),core.k0s(),core.j41(16,"th",12),core.EFF(17),core.nI1(18,"translate"),core.k0s()()(),core.j41(19,"tbody"),core.DNE(20,MetadataRegistryComponent_ds_pagination_10_tr_20_Template,19,25,"tr",14),core.nI1(21,"async"),core.k0s()()()()),2&rf){let tmp_2_0,tmp_9_0;const ctx_r2=core.XpG();core.Y8G("paginationOptions",ctx_r2.config)("collectionSize",null==(tmp_2_0=core.bMT(1,9,ctx_r2.metadataSchemas))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core.R7$(8),core.JRh(core.bMT(9,11,"admin.registries.metadata.schemas.table.selected")),core.R7$(3),core.JRh(core.bMT(12,13,"admin.registries.metadata.schemas.table.id")),core.R7$(3),core.JRh(core.bMT(15,15,"admin.registries.metadata.schemas.table.namespace")),core.R7$(3),core.JRh(core.bMT(18,17,"admin.registries.metadata.schemas.table.name")),core.R7$(3),core.Y8G("ngForOf",null==(tmp_9_0=core.bMT(21,19,ctx_r2.metadataSchemas))||null==tmp_9_0.payload?null:tmp_9_0.payload.page)}}function MetadataRegistryComponent_div_12_Template(rf,ctx){1&rf&&(core.j41(0,"div",20),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"admin.registries.metadata.schemas.no-items")," "))}function MetadataRegistryComponent_button_15_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",21),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG();return core.Njj(ctx_r2.deleteSchemas())}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"admin.registries.metadata.schemas.table.delete")))}let MetadataRegistryComponent=(()=>{class MetadataRegistryComponent2{constructor(registryService,notificationsService,router2,paginationService,translateService){this.registryService=registryService,this.notificationsService=notificationsService,this.router=router2,this.paginationService=paginationService,this.translateService=translateService,this.config=Object.assign(new pagination_component_options_model.W,{id:"rm",pageSize:25}),this.needsUpdate$=new cjs.BehaviorSubject(!0),this.updateSchemas()}updateSchemas(){this.metadataSchemas=this.needsUpdate$.pipe((0,operators.pb)(update=>!0===update),(0,operators.nx)(()=>this.paginationService.getCurrentPagination(this.config.id,this.config)),(0,operators.nx)(currentPagination=>this.registryService.getMetadataSchemas(toFindListOptions(currentPagination))))}forceUpdateSchemas(){this.needsUpdate$.next(!0)}editSchema(schema){this.getActiveSchema().pipe((0,operators.s)(1)).subscribe(activeSchema=>{schema===activeSchema?this.registryService.cancelEditMetadataSchema():this.registryService.editMetadataSchema(schema)})}isActive(schema){return this.getActiveSchema().pipe((0,operators.Tj)(activeSchema=>schema===activeSchema))}getActiveSchema(){return this.registryService.getActiveMetadataSchema()}selectMetadataSchema(schema,event){event.target.checked?this.registryService.selectMetadataSchema(schema):this.registryService.deselectMetadataSchema(schema)}isSelected(schema){return this.registryService.getSelectedMetadataSchemas().pipe((0,operators.Tj)(schemas=>null!=schemas.find(selectedSchema=>selectedSchema===schema)))}deleteSchemas(){this.registryService.getSelectedMetadataSchemas().pipe((0,operators.s)(1)).subscribe(schemas=>{const tasks$=[];for(const schema of schemas)(0,empty_util.a4)(schema.id)&&tasks$.push(this.registryService.deleteMetadataSchema(schema.id).pipe((0,shared_operators.qD)()));(0,cjs.zip)(...tasks$).subscribe(responses=>{const successResponses=responses.filter(response=>response.hasSucceeded),failedResponses=responses.filter(response=>response.hasFailed);successResponses.length>0&&this.showNotification(!0,successResponses.length),failedResponses.length>0&&this.showNotification(!1,failedResponses.length),this.registryService.deselectAllMetadataSchema(),this.registryService.cancelEditMetadataSchema()})})}showNotification(success,amount){const prefix="admin.registries.schema.notification",suffix=success?"success":"failure";(0,cjs.combineLatest)(this.translateService.get(`${prefix}.${suffix}`),this.translateService.get(`${prefix}.deleted.${suffix}`,{amount})).subscribe(([head,content])=>{success?this.notificationsService.success(head,content):this.notificationsService.error(head,content)})}ngOnDestroy(){this.paginationService.clearPagination(this.config.id)}static#_=this.\u0275fac=function(t){return new(t||MetadataRegistryComponent2)(core.rXU(registry_service.x),core.rXU(notifications_service.I),core.rXU(router.Ix),core.rXU(pagination_service.m),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:MetadataRegistryComponent2,selectors:[["ds-metadata-registry"]],standalone:!0,features:[core.aNF],decls:17,vars:15,consts:[[1,"container"],[1,"metadata-registry","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description",1,"pb-2"],[3,"submitForm"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","metadata-schemas",1,"table","table-striped","table-hover"],["scope","col"],[1,"sr-only"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"mb-0"],["type","checkbox",3,"change","checked"],[1,"selectable-row",3,"click"],[3,"routerLink"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"p",4),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"ds-metadata-schema-form",5),core.bIt("submitForm",function(){return ctx.forceUpdateSchemas()}),core.k0s(),core.DNE(10,MetadataRegistryComponent_ds_pagination_10_Template,22,21,"ds-pagination",6),core.nI1(11,"async"),core.DNE(12,MetadataRegistryComponent_div_12_Template,3,3,"div",7),core.nI1(13,"async"),core.j41(14,"div"),core.DNE(15,MetadataRegistryComponent_button_15_Template,3,3,"button",8),core.nI1(16,"async"),core.k0s()()()()),2&rf){let tmp_2_0,tmp_3_0,tmp_4_0;core.R7$(4),core.JRh(core.bMT(5,5,"admin.registries.metadata.head")),core.R7$(3),core.JRh(core.bMT(8,7,"admin.registries.metadata.description")),core.R7$(3),core.Y8G("ngIf",(null==(tmp_2_0=core.bMT(11,9,ctx.metadataSchemas))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)>0),core.R7$(2),core.Y8G("ngIf",0===(null==(tmp_3_0=core.bMT(13,11,ctx.metadataSchemas))||null==tmp_3_0.payload?null:tmp_3_0.payload.totalElements)),core.R7$(3),core.Y8G("ngIf",(null==(tmp_4_0=core.bMT(16,13,ctx.metadataSchemas))||null==tmp_4_0.payload||null==tmp_4_0.payload.page?null:tmp_4_0.payload.page.length)>0)}},dependencies:[MetadataSchemaFormComponent,ngx_translate_core.h,ngx_translate_core.D9,common.Jj,pagination_component.e,common.bT,common.Sq,common.YU,router.Wk],styles:[".selectable-row[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]     #metadatadataschemagroup{display:flex}"]})}return MetadataRegistryComponent2})();var var_directive=__webpack_require__(45961),metadata_field_model=__webpack_require__(31026);function MetadataFieldFormComponent_div_0_Template(rf,ctx){1&rf&&core.nrm(0,"div")}function MetadataFieldFormComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"h2"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.JRh(core.bMT(2,1,ctx_r1.messagePrefix+".create"))}}function MetadataFieldFormComponent_ng_template_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"h2"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.JRh(core.bMT(2,1,ctx_r1.messagePrefix+".edit"))}}let MetadataFieldFormComponent=(()=>{class MetadataFieldFormComponent2{constructor(registryService,formBuilderService,translateService){this.registryService=registryService,this.formBuilderService=formBuilderService,this.translateService=translateService,this.formId="metadata-field-form",this.messagePrefix="admin.registries.schema.form",this.formLayout={element:{grid:{host:"col col-sm-6 d-inline-block"}},qualifier:{grid:{host:"col col-sm-6 d-inline-block"}},scopeNote:{grid:{host:"col col-sm-12 d-inline-block"}}},this.submitForm=new core.bkB}ngOnInit(){(0,cjs.combineLatest)([this.translateService.get(`${this.messagePrefix}.element`),this.translateService.get(`${this.messagePrefix}.qualifier`),this.translateService.get(`${this.messagePrefix}.scopenote`)]).subscribe(([element,qualifier,scopenote])=>{this.element=new fesm2020_core.rA_({id:"element",label:element,name:"element",validators:{required:null,pattern:"^[^. ,]*$",maxLength:64},required:!0,errorMessages:{pattern:"error.validation.metadata.element.invalid-pattern",maxLength:"error.validation.metadata.element.max-length"}}),this.qualifier=new fesm2020_core.rA_({id:"qualifier",label:qualifier,name:"qualifier",validators:{pattern:"^[^. ,]*$",maxLength:64},required:!1,errorMessages:{pattern:"error.validation.metadata.qualifier.invalid-pattern",maxLength:"error.validation.metadata.qualifier.max-length"}}),this.scopeNote=new fesm2020_core.Zex({id:"scopeNote",label:scopenote,name:"scopeNote",required:!1,rows:5}),this.formModel=[new fesm2020_core.iO5({id:"metadatadatafieldgroup",group:[this.element,this.qualifier,this.scopeNote]})],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.registryService.getActiveMetadataField().subscribe(field=>{null==field?this.clearFields():(this.formGroup.patchValue({metadatadatafieldgroup:{element:field.element,qualifier:field.qualifier,scopeNote:field.scopeNote}}),this.element.disabled=!0,this.qualifier.disabled=!0)})})}onCancel(){this.registryService.cancelEditMetadataField()}onSubmit(){this.registryService.getActiveMetadataField().pipe((0,operators.s)(1)).subscribe(field=>{null==field?this.registryService.createMetadataField(Object.assign(new metadata_field_model.A,{element:this.element.value,qualifier:this.qualifier.value,scopeNote:this.scopeNote.value}),this.metadataSchema).subscribe(newField=>{this.submitForm.emit(newField)}):this.registryService.updateMetadataField(Object.assign(new metadata_field_model.A,field,{id:field.id,element:field.element,qualifier:field.qualifier,scopeNote:this.scopeNote.value})).subscribe(updatedField=>{this.submitForm.emit(updatedField)}),this.clearFields(),this.registryService.cancelEditMetadataField()})}clearFields(){this.formGroup.reset("metadatadatafieldgroup"),this.element.disabled=!1,this.qualifier.disabled=!1}ngOnDestroy(){this.onCancel()}static#_=this.\u0275fac=function(t){return new(t||MetadataFieldFormComponent2)(core.rXU(registry_service.x),core.rXU(form_builder_service.j),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:MetadataFieldFormComponent2,selectors:[["ds-metadata-field-form"]],inputs:{metadataSchema:"metadataSchema"},outputs:{submitForm:"submitForm"},standalone:!0,features:[core.aNF],decls:7,vars:9,consts:[["createHeader",""],["editheader",""],[4,"ngIf","ngIfThen","ngIfElse"],[3,"cancel","submit","formId","formModel","formLayout","formGroup"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.DNE(0,MetadataFieldFormComponent_div_0_Template,1,0,"div",2),core.nI1(1,"async"),core.DNE(2,MetadataFieldFormComponent_ng_template_2_Template,3,3,"ng-template",null,0,core.C5r)(4,MetadataFieldFormComponent_ng_template_4_Template,3,3,"ng-template",null,1,core.C5r),core.j41(6,"ds-form",3),core.bIt("cancel",function(){return core.eBV(_r1),core.Njj(ctx.onCancel())})("submit",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit())}),core.k0s()}if(2&rf){const createHeader_r3=core.sdS(3),editheader_r4=core.sdS(5);core.Y8G("ngIf",core.bMT(1,7,ctx.registryService.getActiveMetadataField()))("ngIfThen",editheader_r4)("ngIfElse",createHeader_r3),core.R7$(6),core.Y8G("formId",ctx.formId)("formModel",ctx.formModel)("formLayout",ctx.formLayout)("formGroup",ctx.formGroup)}},dependencies:[common.bT,form_component.s,ngx_translate_core.h,ngx_translate_core.D9,common.Jj],encapsulation:2})}return MetadataFieldFormComponent2})();const metadata_schema_component_c0=a0=>({namespace:a0}),metadata_schema_component_c1=()=>["/admin/registries/metadata"],_c2=a0=>({"table-primary":a0});function MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_tr_19_td_2_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"td")(1,"input",20),core.nI1(2,"translate"),core.bIt("change",function($event){core.eBV(_r4);const field_r5=core.XpG().$implicit,ctx_r1=core.XpG(4);return core.Njj(ctx_r1.selectMetadataField(field_r5,$event))}),core.k0s()()}if(2&rf){const selected_r6=ctx.ngVar;core.R7$(),core.Y8G("checked",selected_r6),core.BMQ("aria-label",core.bMT(2,2,selected_r6?"admin.registries.schema.fields.deselect":"admin.registries.schema.fields.select"))}}function MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_tr_19_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"tr",18),core.nI1(1,"async"),core.DNE(2,MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_tr_19_td_2_Template,3,4,"td",7),core.nI1(3,"async"),core.j41(4,"td",19),core.bIt("click",function(){const field_r5=core.eBV(_r3).$implicit,ctx_r1=core.XpG(4);return core.Njj(ctx_r1.editField(field_r5))}),core.EFF(5),core.k0s(),core.j41(6,"td",19),core.bIt("click",function(){const field_r5=core.eBV(_r3).$implicit,ctx_r1=core.XpG(4);return core.Njj(ctx_r1.editField(field_r5))}),core.EFF(7),core.k0s(),core.j41(8,"td",19),core.bIt("click",function(){const field_r5=core.eBV(_r3).$implicit,ctx_r1=core.XpG(4);return core.Njj(ctx_r1.editField(field_r5))}),core.EFF(9),core.k0s()()}if(2&rf){const field_r5=ctx.$implicit,schema_r7=core.XpG(3).ngVar,ctx_r1=core.XpG();core.Y8G("ngClass",core.eq3(11,_c2,core.bMT(1,7,ctx_r1.isActive(field_r5)))),core.R7$(2),core.Y8G("ngVar",core.bMT(3,9,ctx_r1.isSelected(field_r5))),core.R7$(3),core.JRh(field_r5.id),core.R7$(2),core.E5c("",null==schema_r7?null:schema_r7.prefix,".",field_r5.element,"",field_r5.qualifier?"."+field_r5.qualifier:"",""),core.R7$(2),core.JRh(field_r5.scopeNote)}}function MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",12)(1,"div",13)(2,"table",14)(3,"thead")(4,"tr")(5,"th")(6,"span",15),core.EFF(7),core.nI1(8,"translate"),core.k0s()(),core.j41(9,"th",16),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",16),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"th",16),core.EFF(16),core.nI1(17,"translate"),core.k0s()()(),core.j41(18,"tbody"),core.DNE(19,MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_tr_19_Template,10,13,"tr",17),core.k0s()()()()),2&rf){const fields_r8=core.XpG().ngVar,ctx_r1=core.XpG(2);core.Y8G("paginationOptions",ctx_r1.config)("collectionSize",null==fields_r8?null:fields_r8.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!0),core.R7$(7),core.JRh(core.bMT(8,9,"admin.registries.schema.fields.table.selected")),core.R7$(3),core.JRh(core.bMT(11,11,"admin.registries.schema.fields.table.id")),core.R7$(3),core.JRh(core.bMT(14,13,"admin.registries.schema.fields.table.field")),core.R7$(3),core.JRh(core.bMT(17,15,"admin.registries.schema.fields.table.scopenote")),core.R7$(3),core.Y8G("ngForOf",null==fields_r8?null:fields_r8.page)}}function MetadataSchemaComponent_div_2_ng_container_11_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",21),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"admin.registries.schema.fields.no-items")," "))}function MetadataSchemaComponent_div_2_ng_container_11_button_7_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"button",22),core.bIt("click",function(){core.eBV(_r9);const ctx_r1=core.XpG(3);return core.Njj(ctx_r1.deleteFields())}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"admin.registries.schema.fields.table.delete")))}function MetadataSchemaComponent_div_2_ng_container_11_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,MetadataSchemaComponent_div_2_ng_container_11_ds_pagination_1_Template,20,17,"ds-pagination",8)(2,MetadataSchemaComponent_div_2_ng_container_11_div_2_Template,3,3,"div",9),core.j41(3,"div")(4,"button",10),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,MetadataSchemaComponent_div_2_ng_container_11_button_7_Template,3,3,"button",11),core.k0s(),core.bVm()),2&rf){const fields_r8=ctx.ngVar;core.R7$(),core.Y8G("ngIf",(null==fields_r8?null:fields_r8.totalElements)>0),core.R7$(),core.Y8G("ngIf",0===(null==fields_r8?null:fields_r8.totalElements)),core.R7$(2),core.Y8G("routerLink",core.lJ4(7,metadata_schema_component_c1)),core.R7$(),core.JRh(core.bMT(6,5,"admin.registries.schema.return")),core.R7$(2),core.Y8G("ngIf",(null==fields_r8||null==fields_r8.page?null:fields_r8.page.length)>0)}}function MetadataSchemaComponent_div_2_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",3)(1,"h1",4),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"p",5),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"ds-metadata-field-form",6),core.bIt("submitForm",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.forceUpdateFields())}),core.k0s(),core.j41(8,"h2"),core.EFF(9),core.nI1(10,"translate"),core.k0s(),core.DNE(11,MetadataSchemaComponent_div_2_ng_container_11_Template,8,8,"ng-container",7),core.nI1(12,"async"),core.k0s()}if(2&rf){let tmp_6_0;const schema_r7=ctx.ngVar,ctx_r1=core.XpG();core.R7$(2),core.Lme("",core.bMT(3,6,"admin.registries.schema.head"),': "',null==schema_r7?null:schema_r7.prefix,'"'),core.R7$(3),core.JRh(core.i5U(6,8,"admin.registries.schema.description",core.eq3(15,metadata_schema_component_c0,null==schema_r7?null:schema_r7.namespace))),core.R7$(2),core.Y8G("metadataSchema",schema_r7),core.R7$(2),core.JRh(core.bMT(10,11,"admin.registries.schema.fields.head")),core.R7$(2),core.Y8G("ngVar",null==(tmp_6_0=core.bMT(12,13,ctx_r1.metadataFields$))?null:tmp_6_0.payload)}}const ROUTES=[{path:"metadata",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"admin.registries.metadata.title",breadcrumbKey:"admin.registries.metadata"},children:[{path:"",component:MetadataRegistryComponent},{path:":schemaName",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},component:(()=>{class MetadataSchemaComponent2{constructor(registryService,route,notificationsService,paginationService,translateService){this.registryService=registryService,this.route=route,this.notificationsService=notificationsService,this.paginationService=paginationService,this.translateService=translateService,this.config=Object.assign(new pagination_component_options_model.W,{id:"rm",pageSize:25,pageSizeOptions:[25,50,100,200]}),this.needsUpdate$=new cjs.BehaviorSubject(!0)}ngOnInit(){this.route.params.subscribe(params=>{this.initialize(params)})}initialize(params){this.metadataSchema$=this.registryService.getMetadataSchemaByPrefix(params.schemaName).pipe((0,shared_operators.ak)()),this.updateFields()}updateFields(){this.metadataFields$=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe((0,operators.nx)(currentPagination=>(0,cjs.combineLatest)([this.metadataSchema$,this.needsUpdate$,(0,cjs.of)(currentPagination)])),(0,operators.nx)(([schema,update,currentPagination])=>(update&&this.needsUpdate$.next(!1),this.registryService.getMetadataFieldsBySchema(schema,toFindListOptions(currentPagination),!update,!0))))}forceUpdateFields(){this.registryService.clearMetadataFieldRequests(),this.needsUpdate$.next(!0)}editField(field){this.getActiveField().pipe((0,operators.s)(1)).subscribe(activeField=>{field===activeField?this.registryService.cancelEditMetadataField():this.registryService.editMetadataField(field)})}isActive(field){return this.getActiveField().pipe((0,operators.Tj)(activeField=>field===activeField))}getActiveField(){return this.registryService.getActiveMetadataField()}selectMetadataField(field,event){event.target.checked?this.registryService.selectMetadataField(field):this.registryService.deselectMetadataField(field)}isSelected(field){return this.registryService.getSelectedMetadataFields().pipe((0,operators.Tj)(fields=>null!=fields.find(selectedField=>selectedField===field)))}deleteFields(){this.registryService.getSelectedMetadataFields().pipe((0,operators.s)(1)).subscribe(fields=>{const tasks$=[];for(const field of fields)(0,empty_util.a4)(field.id)&&tasks$.push(this.registryService.deleteMetadataField(field.id).pipe((0,shared_operators.qD)()));(0,cjs.zip)(...tasks$).subscribe(responses=>{const successResponses=responses.filter(response=>response.hasSucceeded),failedResponses=responses.filter(response=>response.hasFailed);successResponses.length>0&&this.showNotification(!0,successResponses.length),failedResponses.length>0&&this.showNotification(!1,failedResponses.length),this.registryService.deselectAllMetadataField(),this.registryService.cancelEditMetadataField()})})}showNotification(success,amount){const prefix="admin.registries.schema.notification",suffix=success?"success":"failure";(0,cjs.combineLatest)([this.translateService.get(`${prefix}.${suffix}`),this.translateService.get(`${prefix}.field.deleted.${suffix}`,{amount})]).subscribe(([head,content])=>{success?this.notificationsService.success(head,content):this.notificationsService.error(head,content)})}ngOnDestroy(){this.paginationService.clearPagination(this.config.id),this.registryService.deselectAllMetadataField()}static#_=this.\u0275fac=function(t){return new(t||MetadataSchemaComponent2)(core.rXU(registry_service.x),core.rXU(router.nX),core.rXU(notifications_service.I),core.rXU(pagination_service.m),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:MetadataSchemaComponent2,selectors:[["ds-metadata-schema"]],standalone:!0,features:[core.aNF],decls:4,vars:3,consts:[[1,"container"],[1,"metadata-schema","row"],["class","col-12",4,"ngVar"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description",1,"pb-2"],[3,"submitForm","metadataSchema"],[4,"ngVar"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],["type","submit","class","btn btn-danger float-right",3,"click",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","metadata-fields",1,"table","table-striped","table-hover"],[1,"sr-only"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"selectable-row",3,"click"],["type","checkbox",3,"change","checked"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["type","submit",1,"btn","btn-danger","float-right",3,"click"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1),core.DNE(2,MetadataSchemaComponent_div_2_Template,13,17,"div",2),core.nI1(3,"async"),core.k0s()()),2&rf&&(core.R7$(2),core.Y8G("ngVar",core.bMT(3,1,ctx.metadataSchema$)))},dependencies:[common.Jj,var_directive.r,MetadataFieldFormComponent,ngx_translate_core.h,ngx_translate_core.D9,pagination_component.e,common.bT,common.Sq,common.YU,router.Wk],styles:[".selectable-row[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]     #metadatadatafieldgroup{display:flex;flex-wrap:wrap}"]})}return MetadataSchemaComponent2})(),data:{title:"admin.registries.schema.title",breadcrumbKey:"admin.registries.schema"}}]},{path:admin_registries_routing_paths.B,resolve:{breadcrumb:i18n_breadcrumb_resolver.S},loadChildren:()=>__webpack_require__.e(1808).then(__webpack_require__.bind(__webpack_require__,11808)).then(m=>m.ROUTES),data:{title:"admin.registries.bitstream-formats.title",breadcrumbKey:"admin.registries.bitstream-formats"}}]},30606:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>BITSTREAMFORMATS_MODULE_PATH,J:()=>getBitstreamFormatsModuleRoute});var _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1828),_admin_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6602);const BITSTREAMFORMATS_MODULE_PATH="bitstream-formats";function getBitstreamFormatsModuleRoute(){return new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__.t((0,_admin_routing_paths__WEBPACK_IMPORTED_MODULE_0__.P$)(),BITSTREAMFORMATS_MODULE_PATH).toString()}},55858:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MetadataFieldDataService:()=>MetadataFieldDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_base_create_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(85311),_base_delete_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(43626),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68134),_base_put_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(64034),_base_search_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(19399),_find_list_options_model__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(97570),_request_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(68014);let MetadataFieldDataService=(()=>{class MetadataFieldDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_6__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("metadatafields",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.searchBySchemaLinkPath="bySchema",this.searchByFieldNameLinkPath="byFieldName",this.createData=new _base_create_data__WEBPACK_IMPORTED_MODULE_4__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.searchData=new _base_search_data__WEBPACK_IMPORTED_MODULE_8__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.putData=new _base_put_data__WEBPACK_IMPORTED_MODULE_7__.W(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _base_delete_data__WEBPACK_IMPORTED_MODULE_5__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}findBySchema(schema,options={},useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const optionsWithSchema=Object.assign(new _find_list_options_model__WEBPACK_IMPORTED_MODULE_10__._,options,{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("schema",schema.prefix)]});return this.searchBy(this.searchBySchemaLinkPath,optionsWithSchema,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByFieldNameParams(schema,element,qualifier,query,exactName,options={},useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const optionParams=Object.assign(new _find_list_options_model__WEBPACK_IMPORTED_MODULE_10__._,options,{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("schema",(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(schema)?schema:""),new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("element",(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(element)?element:""),new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("qualifier",(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(qualifier)?qualifier:""),new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("query",(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(query)?query:""),new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_11__.x("exactName",(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(exactName)?exactName:"")]});return this.searchBy(this.searchByFieldNameLinkPath,optionParams,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}findByExactFieldName(exactFieldName){return this.searchByFieldNameParams(null,null,null,null,exactFieldName,null)}clearRequests(){this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.s)(1)).subscribe(href=>{this.requestService.setStaleByHrefSubstring(href)})}delete(objectId,copyVirtualMetadata){return this.deleteData.delete(objectId,copyVirtualMetadata)}deleteByHref(href,copyVirtualMetadata){return this.deleteData.deleteByHref(href,copyVirtualMetadata)}put(object){return this.putData.put(object)}create(object,...params){return this.createData.create(object,...params)}searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.searchData.searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||MetadataFieldDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_14__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_9__.B),_angular_core__WEBPACK_IMPORTED_MODULE_14__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_14__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_14__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_14__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_14__.jDH({token:MetadataFieldDataService2,factory:MetadataFieldDataService2.\u0275fac,providedIn:"root"})}return MetadataFieldDataService2})()},21813:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MetadataSchemaDataService:()=>MetadataSchemaDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_base_create_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(85311),_base_delete_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(43626),_base_find_all_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(89480),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(68134),_base_put_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(64034),_request_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014);let MetadataSchemaDataService=(()=>{class MetadataSchemaDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_7__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("metadataschemas",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.createData=new _base_create_data__WEBPACK_IMPORTED_MODULE_4__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.putData=new _base_put_data__WEBPACK_IMPORTED_MODULE_8__.W(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _base_delete_data__WEBPACK_IMPORTED_MODULE_5__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.findAllData=new _base_find_all_data__WEBPACK_IMPORTED_MODULE_6__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}createOrUpdateMetadataSchema(schema){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(schema.id)?this.putData.put(schema):this.createData.create(schema)}clearRequests(){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Mi)(href=>this.requestService.removeByHrefSubstring(href)))}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}delete(objectId,copyVirtualMetadata){return this.deleteData.delete(objectId,copyVirtualMetadata)}deleteByHref(href,copyVirtualMetadata){return this.deleteData.deleteByHref(href,copyVirtualMetadata)}static#_=this.\u0275fac=function(t){return new(t||MetadataSchemaDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_9__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:MetadataSchemaDataService2,factory:MetadataSchemaDataService2.\u0275fac,providedIn:"root"})}return MetadataSchemaDataService2})()},10893:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>RegistryService});var _ngrx_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5136),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34167),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10117),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(57699),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(97570),_data_metadata_field_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(55858),_data_metadata_schema_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21813),_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(43750);const metadataRegistryStateSelector=state=>state.metadataRegistry,editMetadataSchemaSelector=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Mz)(metadataRegistryStateSelector,metadataState=>metadataState.editSchema),selectedMetadataSchemasSelector=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Mz)(metadataRegistryStateSelector,metadataState=>metadataState.selectedSchemas),editMetadataFieldSelector=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Mz)(metadataRegistryStateSelector,metadataState=>metadataState.editField),selectedMetadataFieldsSelector=(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Mz)(metadataRegistryStateSelector,metadataState=>metadataState.selectedFields);let RegistryService=(()=>{class RegistryService2{constructor(store,notificationsService,translateService,metadataSchemaService,metadataFieldService){this.store=store,this.notificationsService=notificationsService,this.translateService=translateService,this.metadataSchemaService=metadataSchemaService,this.metadataFieldService=metadataFieldService}getMetadataSchemas(options={},useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return this.metadataSchemaService.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}getMetadataSchemaByPrefix(prefix,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=Object.assign(new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_6__._,{elementsPerPage:1e4});return this.getMetadataSchemas(options).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(schemas=>schemas.page),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.VT)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(schemas=>schemas.filter(schema=>schema.prefix===prefix)[0]),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.ZZ)(schema=>this.metadataSchemaService.findById(`${schema.id}`,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)))}getMetadataFieldsBySchema(schema,options={},useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return this.metadataFieldService.findBySchema(schema,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}editMetadataSchema(schema){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.w2(schema))}cancelEditMetadataSchema(){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.Wi)}getActiveMetadataSchema(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Lt)(editMetadataSchemaSelector))}selectMetadataSchema(schema){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.Q6(schema))}deselectMetadataSchema(schema){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.zn(schema))}deselectAllMetadataSchema(){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.Gr)}getSelectedMetadataSchemas(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Lt)(selectedMetadataSchemasSelector))}editMetadataField(field){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.dF(field))}cancelEditMetadataField(){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.Tf)}getActiveMetadataField(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Lt)(editMetadataFieldSelector))}selectMetadataField(field){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.jC(field))}deselectMetadataField(field){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.yb(field))}deselectAllMetadataField(){this.store.dispatch(new _admin_admin_registries_metadata_registry_metadata_registry_actions__WEBPACK_IMPORTED_MODULE_0__.TE)}getSelectedMetadataFields(){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.Lt)(selectedMetadataFieldsSelector))}createOrUpdateMetadataSchema(schema){const isUpdate=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(schema.id);return this.metadataSchemaService.createOrUpdateMetadataSchema(schema).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Mi)(()=>{this.showNotifications(!0,isUpdate,!1,{prefix:schema.prefix})}))}deleteMetadataSchema(id){return this.metadataSchemaService.delete(`${id}`)}clearMetadataSchemaRequests(){return this.metadataSchemaService.clearRequests()}createMetadataField(field,schema){return field.qualifier||(field.qualifier=null),this.metadataFieldService.create(field,new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.x("schemaId",schema.id)).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Mi)(()=>{this.showNotifications(!0,!1,!0,{field:field.toString()})}))}updateMetadataField(field){return field.qualifier||(field.qualifier=null),this.metadataFieldService.put(field).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Mi)(()=>{this.showNotifications(!0,!0,!0,{field:field.toString()})}))}deleteMetadataField(id){return this.metadataFieldService.delete(`${id}`)}clearMetadataFieldRequests(){this.metadataFieldService.clearRequests()}showNotifications(success,edited,isField,options){const prefix="admin.registries.schema.notification",editedString=edited?"edited":"created";(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.combineLatest)(this.translateService.get(`${prefix}.${success?"success":"failure"}`),this.translateService.get(`${prefix}${isField?".field":""}.${editedString}`,options)).subscribe(([head,content])=>{success?this.notificationsService.success(head,content):this.notificationsService.error(head,content)})}queryMetadataFields(query,options={},useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return this.metadataFieldService.searchByFieldNameParams(null,null,null,query,null,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||RegistryService2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.il),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.I),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_data_metadata_schema_data_service__WEBPACK_IMPORTED_MODULE_3__.MetadataSchemaDataService),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_data_metadata_field_data_service__WEBPACK_IMPORTED_MODULE_2__.MetadataFieldDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.jDH({token:RegistryService2,factory:RegistryService2.\u0275fac,providedIn:"root"})}return RegistryService2})()}};