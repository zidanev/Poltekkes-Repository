"use strict";exports.id=8656,exports.ids=[8656,7094,5592],exports.modules={48656:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(21870),cjs=__webpack_require__(74785),feature_id=__webpack_require__(29321);const communityAdministratorGuard=(0,__webpack_require__(67770).L)(()=>(0,cjs.of)(feature_id._.IsCommunityAdmin));var resource_policy_create_component=__webpack_require__(96315),resource_policy_edit_component=__webpack_require__(28319),resource_policy_resolver=__webpack_require__(48576),resource_policy_target_resolver=__webpack_require__(20312),common=__webpack_require__(84739),operators=__webpack_require__(10743),shared_operators=__webpack_require__(82656),access_control_form_container_component=__webpack_require__(61085),core=__webpack_require__(68014),router=__webpack_require__(64247);function CommunityAccessControlComponent_ds_access_control_form_container_0_Template(rf,ctx){1&rf&&core.nrm(0,"ds-access-control-form-container",1),2&rf&&core.Y8G("itemRD",ctx.ngIf)("showLimitToSpecificBitstreams",!1)}let CommunityAccessControlComponent=(()=>{class CommunityAccessControlComponent2{constructor(route){this.route=route}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe((0,operators.Tj)(data=>data.dso)).pipe((0,shared_operators.yd)())}static#_=this.\u0275fac=function(t){return new(t||CommunityAccessControlComponent2)(core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:CommunityAccessControlComponent2,selectors:[["ds-community-access-control"]],standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[["titleMessage","community-access-control-title",3,"itemRD","showLimitToSpecificBitstreams",4,"ngIf"],["titleMessage","community-access-control-title",3,"itemRD","showLimitToSpecificBitstreams"]],template:function(rf,ctx){1&rf&&(core.DNE(0,CommunityAccessControlComponent_ds_access_control_form_container_0_Template,1,2,"ds-access-control-form-container",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngIf",core.bMT(1,1,ctx.itemRD$))},dependencies:[access_control_form_container_component.o,common.bT,common.Jj]})}return CommunityAccessControlComponent2})();var resource_policies_component=__webpack_require__(67848);let CommunityAuthorizationsComponent=(()=>{class CommunityAuthorizationsComponent2{constructor(route){this.route=route}ngOnInit(){this.dsoRD$=this.route.parent.parent.data.pipe((0,operators.$1)(),(0,operators.Tj)(data=>data.dso))}static#_=this.\u0275fac=function(t){return new(t||CommunityAuthorizationsComponent2)(core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:CommunityAuthorizationsComponent2,selectors:[["ds-community-authorizations"]],standalone:!0,features:[core.aNF],decls:3,vars:4,consts:[[1,"container"],[3,"resourceType","resourceUUID"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0),core.nrm(1,"ds-resource-policies",1),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_1_0;core.R7$(),core.Y8G("resourceType","community")("resourceUUID",null==(tmp_1_0=core.bMT(2,2,ctx.dsoRD$))||null==tmp_1_0.payload?null:tmp_1_0.payload.id)}},dependencies:[resource_policies_component.e,common.Jj],encapsulation:2})}return CommunityAuthorizationsComponent2})();var ngx_translate_core=__webpack_require__(43750),dso_name_service=__webpack_require__(91735),curation_form_component=__webpack_require__(50797),empty_util=__webpack_require__(77028);const _c0=a0=>({community:a0});let CommunityCurateComponent=(()=>{class CommunityCurateComponent2{constructor(route,dsoNameService){this.route=route,this.dsoNameService=dsoNameService}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,operators.s)(1),(0,operators.Tj)(data=>data.dso)),this.communityName$=this.dsoRD$.pipe((0,operators.pb)(rd=>(0,empty_util.a4)(rd)),(0,operators.Tj)(rd=>this.dsoNameService.getName(rd.payload)))}static#_=this.\u0275fac=function(t){return new(t||CommunityCurateComponent2)(core.rXU(router.nX),core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:CommunityCurateComponent2,selectors:[["ds-community-curate"]],standalone:!0,features:[core.aNF],decls:7,vars:11,consts:[[1,"container"],[3,"dsoHandle"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"h2"),core.EFF(2),core.nI1(3,"async"),core.nI1(4,"translate"),core.k0s(),core.nrm(5,"ds-curation-form",1),core.nI1(6,"async"),core.k0s()),2&rf){let tmp_1_0;core.R7$(2),core.JRh(core.i5U(4,4,"community.curate.header",core.eq3(9,_c0,core.bMT(3,2,ctx.communityName$)))),core.R7$(3),core.Y8G("dsoHandle",null==(tmp_1_0=core.bMT(6,7,ctx.dsoRD$))?null:tmp_1_0.payload.handle)}},dependencies:[curation_form_component.X,ngx_translate_core.h,ngx_translate_core.D9,common.Jj],encapsulation:2})}return CommunityCurateComponent2})();var community_data_service=__webpack_require__(83591),community_model=__webpack_require__(61935),comcol_metadata_component=__webpack_require__(42804),notifications_service=__webpack_require__(10117),community_form_component=__webpack_require__(67259);let CommunityMetadataComponent=(()=>{class CommunityMetadataComponent2 extends comcol_metadata_component.W{constructor(communityDataService,router2,route,notificationsService,translate){super(communityDataService,router2,route,notificationsService,translate),this.communityDataService=communityDataService,this.router=router2,this.route=route,this.notificationsService=notificationsService,this.translate=translate,this.frontendURL="/communities/",this.type=community_model.E.type}static#_=this.\u0275fac=function(t){return new(t||CommunityMetadataComponent2)(core.rXU(community_data_service.CommunityDataService),core.rXU(router.Ix),core.rXU(router.nX),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:CommunityMetadataComponent2,selectors:[["ds-community-metadata"]],standalone:!0,features:[core.Vt3,core.aNF],decls:2,vars:4,consts:[[3,"submitForm","back","finish","dso","isCreation"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"ds-community-form",0),core.nI1(1,"async"),core.bIt("submitForm",function($event){return ctx.onSubmit($event)})("back",function(){return ctx.navigateToHomePage()})("finish",function(){return ctx.navigateToHomePage()}),core.k0s()),2&rf){let tmp_0_0;core.Y8G("dso",null==(tmp_0_0=core.bMT(1,2,ctx.dsoRD$))?null:tmp_0_0.payload)("isCreation",!1)}},dependencies:[community_form_component.p,common.Jj],encapsulation:2})}return CommunityMetadataComponent2})();var comcol_role_component=__webpack_require__(38992);function CommunityRolesComponent_ds_comcol_role_0_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-comcol-role",1),core.nI1(1,"async")),2&rf){const comcolRole_r1=ctx.$implicit,ctx_r1=core.XpG();core.Y8G("dso",core.bMT(1,2,ctx_r1.community$))("comcolRole",comcolRole_r1)}}let CommunityRolesComponent=(()=>{class CommunityRolesComponent2{constructor(route){this.route=route}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,operators.$1)(),(0,operators.Tj)(data=>data.dso)),this.community$=this.dsoRD$.pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)()),this.comcolRoles$=this.community$.pipe((0,operators.Tj)(community=>[{name:"community-admin",href:community._links.adminGroup.href}]))}static#_=this.\u0275fac=function(t){return new(t||CommunityRolesComponent2)(core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:CommunityRolesComponent2,selectors:[["ds-community-roles"]],standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[3,"dso","comcolRole",4,"ngFor","ngForOf"],[3,"dso","comcolRole"]],template:function(rf,ctx){1&rf&&(core.DNE(0,CommunityRolesComponent_ds_comcol_role_0_Template,2,4,"ds-comcol-role",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngForOf",core.bMT(1,1,ctx.comcolRoles$))},dependencies:[comcol_role_component.J,common.Jj,common.Sq],encapsulation:2})}return CommunityRolesComponent2})();var edit_comcol_page_component=__webpack_require__(76479),community_page_routing_paths=__webpack_require__(27546);const edit_community_page_component_c0=a0=>({active:a0}),_c1=a0=>[a0];function EditCommunityPageComponent_li_15_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",14)(1,"a",15),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const page_r1=ctx.$implicit,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngClass",core.eq3(7,edit_community_page_component_c0,page_r1===ctx_r1.currentPage))("routerLink",core.eq3(9,_c1,"./"+page_r1)),core.BMQ("aria-selected",page_r1===ctx_r1.currentPage)("data-test",page_r1),core.R7$(),core.SpI(" ",core.bMT(3,5,ctx_r1.type+".edit.tabs."+page_r1+".head")," ")}}function EditCommunityPageComponent_a_20_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",16),core.nI1(1,"async"),core.nrm(2,"i",17),core.EFF(3),core.nI1(4,"translate"),core.k0s()),2&rf){let tmp_1_0;const ctx_r1=core.XpG();core.Y8G("routerLink",ctx_r1.getPageUrl(null==(tmp_1_0=core.bMT(1,2,ctx_r1.dsoRD$))?null:tmp_1_0.payload)),core.R7$(3),core.SpI(" ",core.bMT(4,4,ctx_r1.type+".edit.return")," ")}}const ROUTES=[{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{breadcrumbKey:"community.edit"},component:(()=>{class EditCommunityPageComponent2 extends edit_comcol_page_component.M{constructor(router2,route){super(router2,route),this.router=router2,this.route=route,this.type="community"}getPageUrl(community){return(0,community_page_routing_paths.c5)(community.id)}static#_=this.\u0275fac=function(t){return new(t||EditCommunityPageComponent2)(core.rXU(router.Ix),core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:EditCommunityPageComponent2,selectors:[["ds-edit-community"]],standalone:!0,features:[core.Vt3,core.aNF],decls:21,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom"],[1,"my-auto"],["data-test","delete-button",1,"btn","btn-danger",3,"routerLink"],["aria-hidden","true",1,"fas","fa-trash"],[1,"pt-2"],["role","tablist",1,"nav","nav-tabs","justify-content-start","mb-2"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],[1,"tab-pane","active"],[1,"mb-4"],[1,"col-12","text-right"],["class","btn btn-outline-secondary",3,"routerLink",4,"ngIf"],["role","presentation",1,"nav-item"],["role","tab",1,"nav-link",3,"ngClass","routerLink"],[1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fas","fa-arrow-left"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div",4)(8,"a",5),core.nI1(9,"async"),core.nrm(10,"i",6),core.EFF(11),core.nI1(12,"translate"),core.k0s()()(),core.j41(13,"div",7)(14,"ul",8),core.DNE(15,EditCommunityPageComponent_li_15_Template,4,11,"li",9),core.k0s(),core.j41(16,"div",10)(17,"div",11),core.nrm(18,"router-outlet"),core.k0s(),core.j41(19,"div",12),core.DNE(20,EditCommunityPageComponent_a_20_Template,5,6,"a",13),core.k0s()()()()()()),2&rf){let tmp_1_0;core.R7$(5),core.JRh(core.bMT(6,5,ctx.type+".edit.head")),core.R7$(3),core.Y8G("routerLink",("community"===ctx.type?"/communities/":"/collections/")+(null==(tmp_1_0=core.bMT(9,7,ctx.dsoRD$))?null:tmp_1_0.payload.uuid)+"/delete"),core.R7$(3),core.SpI(" ",core.bMT(12,9,ctx.type+".edit.delete"),""),core.R7$(4),core.Y8G("ngForOf",ctx.pages),core.R7$(5),core.Y8G("ngIf",!ctx.hideReturnButton)}},dependencies:[router.Wk,ngx_translate_core.h,ngx_translate_core.D9,common.YU,common.Sq,router.n3,common.bT,common.Jj],encapsulation:2})}return EditCommunityPageComponent2})(),canActivate:[communityAdministratorGuard],children:[{path:"",redirectTo:"metadata",pathMatch:"full"},{path:"metadata",component:CommunityMetadataComponent,data:{title:"community.edit.tabs.metadata.title",hideReturnButton:!0,showBreadcrumbs:!0}},{path:"roles",component:CommunityRolesComponent,data:{title:"community.edit.tabs.roles.title",showBreadcrumbs:!0}},{path:"curate",component:CommunityCurateComponent,data:{title:"community.edit.tabs.curate.title",showBreadcrumbs:!0}},{path:"access-control",component:CommunityAccessControlComponent,data:{title:"collection.edit.tabs.access-control.title",showBreadcrumbs:!0}},{path:"authorizations",data:{showBreadcrumbs:!0},children:[{path:"create",resolve:{resourcePolicyTarget:resource_policy_target_resolver.Q},component:resource_policy_create_component.m,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:resource_policy_resolver.n},component:resource_policy_edit_component._,data:{title:"resource-policies.edit.page.title"}},{path:"",component:CommunityAuthorizationsComponent,data:{title:"community.edit.tabs.authorizations.title",showBreadcrumbs:!0,hideReturnButton:!0}}]}]}]},47094:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BulkAccessConfigDataService:()=>BulkAccessConfigDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_config_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55686),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);let BulkAccessConfigDataService=(()=>{class BulkAccessConfigDataService2 extends _config_data_service__WEBPACK_IMPORTED_MODULE_4__.O{constructor(requestService,rdbService,objectCache,halService){super("bulkaccessconditionoptions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}static#_=this.\u0275fac=function(t){return new(t||BulkAccessConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:BulkAccessConfigDataService2,factory:BulkAccessConfigDataService2.\u0275fac,providedIn:"root"})}return BulkAccessConfigDataService2})()},55686:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>ConfigDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68134),_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656);class ConfigDataService extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__.W{findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(rd=>{if(rd.hasFailed)throw new Error("Couldn't retrieve the config");return rd}))}findByName(name,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findById(name,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}}},55592:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ResourcePolicyDataService:()=>ResourcePolicyDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_create_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85311),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43626),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75467),_data_base_search_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19399),_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84237),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(97570),_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(87457),_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72744),_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(36191),_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(62120),_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(97195),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68014);let ResourcePolicyDataService=(()=>{class ResourcePolicyDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService,comparator,ePersonService,groupService){super("resourcepolicies",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.comparator=comparator,this.ePersonService=ePersonService,this.groupService=groupService,this.searchByEPersonMethod="eperson",this.searchByGroupMethod="group",this.searchByResourceMethod="resource",this.createData=new _data_base_create_data__WEBPACK_IMPORTED_MODULE_3__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_7__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.patchData=new _data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}create(resourcePolicy,resourceUUID,epersonUUID,groupUUID){const params=[];return params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(epersonUUID)?params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("eperson",epersonUUID)):(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(groupUUID)&&params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("group",groupUUID)),this.createData.create(resourcePolicy,...params)}delete(resourcePolicyID){return this.deleteData.delete(resourcePolicyID).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_15__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(response=>response.hasSucceeded))}update(object){return this.patchData.update(object)}getDefaultAccessConditionsFor(collection,findListOptions){return this.findListByHref(collection._links.defaultAccessConditions.href,findListOptions)}searchByEPerson(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByEPersonMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByGroup(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByGroupMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByResource(UUID,action,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(action)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("action",action)),this.searchData.searchBy(this.searchByResourceMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}updateTarget(resourcePolicyId,resourcePolicyHref,targetUUID,targetType){const targetEndpoint$=("eperson"===targetType?this.ePersonService:this.groupService).getIDHrefObs(targetUUID),options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_20__.Lr;headers=headers.append("Content-Type","text/uri-list"),options.headers=headers;const requestId=this.requestService.generateRequestId();return targetEndpoint$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.$1)()).subscribe(targetEndpoint=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.v_(requestId,resourcePolicyHref+"/"+targetType,targetEndpoint,options);Object.assign(request,{getResponseParser:()=>_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__.M}),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,()=>this.invalidateByHref(resourcePolicyHref))}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__.GroupDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_21__.jDH({token:ResourcePolicyDataService2,factory:ResourcePolicyDataService2.\u0275fac,providedIn:"root"})}return ResourcePolicyDataService2})()},50797:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>CurationFormComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84739),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(28955),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10743),_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44994),_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(54257),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(33549),_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(77028),_shared_handle_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27382),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(64247);function CurationFormComponent_option_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"option",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const task_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("value",task_r1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,2,"curation-task.task."+task_r1+".label")," ")}}function CurationFormComponent_div_9_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",3)(1,"label",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(4,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(5,"small",12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(3,2,"curation.form.handle.label")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(7,4,"curation.form.handle.hint")))}let CurationFormComponent=(()=>{class CurationFormComponent2{constructor(scriptDataService,configurationDataService,notificationsService,translateService,handleService,router,cdr){this.scriptDataService=scriptDataService,this.configurationDataService=configurationDataService,this.notificationsService=notificationsService,this.translateService=translateService,this.handleService=handleService,this.router=router,this.cdr=cdr,this.subs=[]}ngOnDestroy(){this.subs.forEach(sub=>sub.unsubscribe())}ngOnInit(){this.form=new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.J3({task:new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.hs(""),handle:new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.hs("")}),this.config=this.configurationDataService.findByPropertyName("plugin.named.org.dspace.curate.CurationTask"),this.subs.push(this.config.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ak)()).subscribe(configProperties=>{this.tasks=configProperties.values.filter(value=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.hj)(value)&&value.includes("=")).map(value=>value.split("=")[1].trim()),this.form.get("task").patchValue(this.tasks[0]),this.cdr.detectChanges()}))}hasHandleValue(){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.a4)(this.dsoHandle)}submit(){const taskName=this.form.get("task").value;let handle$;handle$=this.hasHandleValue()?this.handleService.normalizeHandle(this.dsoHandle).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(handle=>((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.Im)(handle)&&this.notificationsService.error(this.translateService.get("curation.form.submit.error.head"),this.translateService.get("curation.form.submit.error.invalid-handle")),handle))):this.handleService.normalizeHandle(this.form.get("handle").value).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(handle=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.Im)(handle)?"all":handle)),this.subs.push(handle$.subscribe(handle=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.a4)(handle)&&this.subs.push(this.scriptDataService.invoke("curate",[{name:"-t",value:taskName},{name:"-i",value:handle}],[]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("curation.form.submit.success.head"),this.translateService.get("curation.form.submit.success.content")),this.router.navigateByUrl((0,_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__.yJ)(rd.payload.processId))):this.notificationsService.error(this.translateService.get("curation.form.submit.error.head"),this.translateService.get("curation.form.submit.error.content"))}))}))}static#_=this.\u0275fac=function(t){return new(t||CurationFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_1__.ScriptDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_handle_service__WEBPACK_IMPORTED_MODULE_3__.e),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_11__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_5__.gRc))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:CurationFormComponent2,selectors:[["ds-curation-form"]],inputs:{dsoHandle:"dsoHandle"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:13,vars:9,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"row","mb-2"],[1,"col-12","col-sm-6"],["for","task",1,"font-weight-bold"],["id","task","formControlName","task",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","col-12 col-sm-6",4,"ngIf"],["type","submit",1,"btn","btn-default","btn-primary"],[3,"value"],["for","handle",1,"font-weight-bold"],["id","handle","formControlName","handle",1,"form-control"],[1,"text-muted"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"form",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("ngSubmit",function(){return ctx.submit()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(7,"select",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(8,CurationFormComponent_option_8_Template,3,4,"option",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(9,CurationFormComponent_div_9_Template,8,6,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(10,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(11),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("formGroup",ctx.form),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(6,5,"curation.form.task-select.label")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngForOf",ctx.tasks),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",!ctx.hasHandleValue()),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(12,7,"curation.form.submit")))},dependencies:[_angular_forms__WEBPACK_IMPORTED_MODULE_6__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.xH,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.y7,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.wz,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.X1,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.j4,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.JD,_angular_common__WEBPACK_IMPORTED_MODULE_12__.pM,_angular_common__WEBPACK_IMPORTED_MODULE_12__.bT,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}return CurationFormComponent2})()},61085:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>AccessControlFormContainerComponent});var common=__webpack_require__(84739),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),ngx_ui_switch=__webpack_require__(25702),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),bulk_access_config_data_service=__webpack_require__(47094),shared_operators=(__webpack_require__(4617),__webpack_require__(82656)),alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),selectable_list_service=__webpack_require__(1050),ng_bootstrap=__webpack_require__(71781),date_util=__webpack_require__(7840),core=__webpack_require__(68014);let ToDatePipe=(()=>{class ToDatePipe2{transform(dateValue){if(!dateValue)return null;const date=new Date(dateValue);return{year:date.getFullYear(),month:date.getMonth()+1,day:date.getDate()}}static#_=this.\u0275fac=function(t){return new(t||ToDatePipe2)};static#_2=this.\u0275pipe=core.EJ8({name:"toDate",type:ToDatePipe2,pure:!1,standalone:!0})}return ToDatePipe2})();const _c0=["ngForm"];function AccessControlArrayFormComponent_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",7),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"access-control-no-access-conditions-warning-message")," "))}function AccessControlArrayFormComponent_ng_container_3_option_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",20),core.EFF(1),core.k0s()),2&rf){const option_r5=ctx.$implicit;core.Y8G("value",option_r5.name),core.R7$(),core.SpI(" ",option_r5.name," ")}}function AccessControlArrayFormComponent_ng_container_3_div_13_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",21)(1,"label",10),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",17)(5,"input",22,1),core.nI1(7,"toDate"),core.mxI("ngModelChange",function($event){core.eBV(_r6);const control_r3=core.XpG().$implicit;return core.DH7(control_r3.startDate,$event)||(control_r3.startDate=$event),core.Njj($event)}),core.k0s(),core.j41(8,"div",23)(9,"button",24),core.bIt("click",function(){core.eBV(_r6);const d_r7=core.sdS(6);return core.Njj(d_r7.toggle())}),core.k0s()()(),core.j41(10,"small",14),core.EFF(11),core.nI1(12,"translate"),core.k0s()()}if(2&rf){const control_r3=core.XpG().$implicit;core.XpG();const ngForm_r8=core.sdS(1);core.R7$(),core.Mz_("for","accesscontrolstartdate-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(3,11,"access-control-option-start-date")," "),core.R7$(3),core.Mz_("id","accesscontrolstartdate-",control_r3.id,""),core.Mz_("name","startDate-",control_r3.id,""),core.R50("ngModel",control_r3.startDate),core.Y8G("maxDate",core.bMT(7,13,control_r3.maxStartDate)),core.R7$(4),core.Y8G("disabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(12,15,"access-control-option-start-date-note")," ")}}function AccessControlArrayFormComponent_ng_container_3_div_14_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div",21)(1,"label",10),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",17)(5,"input",22,2),core.nI1(7,"toDate"),core.mxI("ngModelChange",function($event){core.eBV(_r9);const control_r3=core.XpG().$implicit;return core.DH7(control_r3.endDate,$event)||(control_r3.endDate=$event),core.Njj($event)}),core.k0s(),core.j41(8,"div",23)(9,"button",24),core.bIt("click",function(){core.eBV(_r9);const d1_r10=core.sdS(6);return core.Njj(d1_r10.toggle())}),core.k0s()()(),core.j41(10,"small",14),core.EFF(11),core.nI1(12,"translate"),core.k0s()()}if(2&rf){const control_r3=core.XpG().$implicit;core.XpG();const ngForm_r8=core.sdS(1);core.R7$(),core.Mz_("for","accesscontrolenddate-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(3,11,"access-control-option-end-date")," "),core.R7$(3),core.Mz_("id","accesscontrolenddate-",control_r3.id,""),core.Mz_("name","endDate-",control_r3.id,""),core.R50("ngModel",control_r3.endDate),core.Y8G("maxDate",core.bMT(7,13,control_r3.maxEndDate)),core.R7$(4),core.Y8G("disabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(12,15,"access-control-option-end-date-note")," ")}}function AccessControlArrayFormComponent_ng_container_3_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.qex(0),core.j41(1,"div",8)(2,"div",9)(3,"div")(4,"label",10),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"select",11),core.mxI("ngModelChange",function($event){const control_r3=core.eBV(_r2).$implicit;return core.DH7(control_r3.itemName,$event)||(control_r3.itemName=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){const control_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.accessControlChanged(control_r3,$event))}),core.nrm(8,"option",12),core.DNE(9,AccessControlArrayFormComponent_ng_container_3_option_9_Template,2,2,"option",13),core.k0s(),core.j41(10,"small",14),core.EFF(11),core.nI1(12,"translate"),core.k0s()(),core.DNE(13,AccessControlArrayFormComponent_ng_container_3_div_13_Template,13,17,"div",15)(14,AccessControlArrayFormComponent_ng_container_3_div_14_Template,13,17,"div",15),core.k0s(),core.j41(15,"div")(16,"span",16),core.EFF(17,"\xa0"),core.k0s(),core.j41(18,"div",17)(19,"button",18),core.nI1(20,"translate"),core.bIt("click",function(){const control_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.removeAccessControlItem(control_r3.id))}),core.nrm(21,"i",19),core.k0s()()()(),core.bVm()}if(2&rf){const control_r3=ctx.$implicit,ctx_r3=core.XpG(),ngForm_r8=core.sdS(1);core.R7$(),core.Mz_("ngModelGroup","access-control-item-",control_r3.id,""),core.R7$(3),core.Mz_("for","accesscontroloption-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(6,17,"access-control-option-label")," "),core.R7$(2),core.Mz_("id","accesscontroloption-",control_r3.id,""),core.Mz_("name","itemName-",control_r3.id,""),core.Y8G("disabled",ngForm_r8.disabled),core.R50("ngModel",control_r3.itemName),core.R7$(2),core.Y8G("ngForOf",ctx_r3.dropdownOptions),core.R7$(2),core.SpI(" ",core.bMT(12,19,"access-control-option-note")," "),core.R7$(2),core.Y8G("ngIf",control_r3.hasStartDate),core.R7$(),core.Y8G("ngIf",control_r3.hasEndDate),core.R7$(5),core.Y8G("disabled",ngForm_r8.disabled||1===ctx_r3.form.accessControls.length),core.BMQ("aria-label",core.bMT(20,21,"access-control-remove"))}}let AccessControlArrayFormComponent=(()=>{class AccessControlArrayFormComponent2{constructor(){this.dropdownOptions=[],this.form={accessControls:[emptyAccessControlItem()]},this.formDisabled=!0,this.disable=()=>{this.ngForm.form.disable(),this.formDisabled=!0},this.enable=()=>{this.ngForm.form.enable(),this.formDisabled=!1}}ngOnInit(){this.disable()}get allControlsAreEmpty(){return this.form.accessControls.every(x=>null===x.itemName||""===x.itemName)}get showWarning(){return"replace"===this.mode&&this.allControlsAreEmpty&&!this.formDisabled}addAccessControlItem(itemName=null){this.form.accessControls=[...this.form.accessControls,{...emptyAccessControlItem(),itemName}]}removeAccessControlItem(id){this.form.accessControls=this.form.accessControls.filter(item=>item.id!==id)}getValue(){return this.form.accessControls.filter(x=>null!==x.itemName&&""!==x.itemName).map(x=>({name:x.itemName,startDate:x.startDate?(0,date_util.Sd)(x.startDate):null,endDate:x.endDate?(0,date_util.Sd)(x.endDate):null}))}reset(){this.form.accessControls=[],this.addAccessControlItem(),this.disable()}accessControlChanged(control,selectedItem){const item=this.dropdownOptions.find(x=>x.name===selectedItem);control.startDate=null,control.endDate=null,control.hasStartDate=item?.hasStartDate||!1,control.hasEndDate=item?.hasEndDate||!1,control.maxStartDate=item?.maxStartDate||null,control.maxEndDate=item?.maxEndDate||null}trackById(index,item){return item.id}static#_=this.\u0275fac=function(t){return new(t||AccessControlArrayFormComponent2)};static#_2=this.\u0275cmp=core.VBU({type:AccessControlArrayFormComponent2,selectors:[["ds-access-control-array-form"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(_c0,7),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.ngForm=_t.first)}},inputs:{dropdownOptions:"dropdownOptions",mode:"mode",type:"type"},exportAs:["accessControlArrayForm"],standalone:!0,features:[core.aNF],decls:8,vars:9,consts:[["ngForm","ngForm"],["d","ngbDatepicker"],["d1","ngbDatepicker"],["class","alert alert-warning",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-outline-primary","mt-3",3,"click","id","disabled"],[1,"fas","fa-plus"],[1,"alert","alert-warning"],[1,"access-control-item","mt-3",3,"ngModelGroup"],[1,"d-flex","flex-column"],[3,"for"],[1,"form-control",3,"ngModelChange","id","disabled","ngModel","name"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["class","mt-3",4,"ngIf"],["aria-hidden","true",1,"mb-2","d-inline-block"],[1,"input-group"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],[1,"fas","fa-trash"],[3,"value"],[1,"mt-3"],["placeholder","yyyy-mm-dd","ngbDatepicker","","placement","top-start top-end bottom-start bottom-end",1,"form-control",3,"ngModelChange","id","ngModel","name","maxDate"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","fas","fa-calendar",3,"click","disabled"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"form",null,0),core.DNE(2,AccessControlArrayFormComponent_div_2_Template,3,3,"div",3)(3,AccessControlArrayFormComponent_ng_container_3_Template,22,23,"ng-container",4),core.j41(4,"button",5),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.addAccessControlItem())}),core.nrm(5,"i",6),core.EFF(6),core.nI1(7,"translate"),core.k0s()()}if(2&rf){const ngForm_r8=core.sdS(1);core.R7$(2),core.Y8G("ngIf",ctx.showWarning),core.R7$(),core.Y8G("ngForOf",ctx.form.accessControls)("ngForTrackBy",ctx.trackById),core.R7$(),core.Mz_("id","add-btn-",ctx.type,""),core.Y8G("disabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(7,7,"access-control-add-more")," ")}},dependencies:[fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.me,fesm2022_forms.wz,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.vS,fesm2022_forms.Y4,fesm2022_forms.cV,common.bT,common.pM,ng_bootstrap.IQ,ng_bootstrap.cw,ngx_translate_core.h,ngx_translate_core.D9,ToDatePipe],styles:[".access-control-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 50px;grid-gap:10px;padding-bottom:15px;border-bottom:2px dotted gray}"]})}return AccessControlArrayFormComponent2})();const emptyAccessControlItem=()=>({id:randomID(),itemName:null,startDate:null,hasStartDate:!1,maxStartDate:null,endDate:null,hasEndDate:!1,maxEndDate:null}),randomID=()=>Math.floor(1e6*Math.random());var bulk_access_control_service=__webpack_require__(76415),context_model=__webpack_require__(34069),bitstream_data_service=__webpack_require__(36505),pagination_service=__webpack_require__(39304),empty_util=(__webpack_require__(6721),__webpack_require__(77028)),object_collection_component=__webpack_require__(60047),pagination_component_options_model=__webpack_require__(64694);const item_access_control_select_bitstreams_modal_component_c0=a0=>({repeatable:!0,listId:a0});function ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_ds_viewable_collection_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-viewable-collection",10),core.bIt("pageChange",function($event){core.eBV(_r1);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.loadForPage($event))}),core.k0s()}if(2&rf){const data_r3=core.XpG().ngIf,ctx_r1=core.XpG();core.Y8G("config",ctx_r1.paginationConfig)("context",ctx_r1.context)("objects",data_r3)("selectable",!0)("selectionConfig",core.eq3(6,item_access_control_select_bitstreams_modal_component_c0,ctx_r1.LIST_ID))("showPaginator",!0)}}function ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"access-control-select-bitstreams-modal.no-items")," "))}function ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_ds_viewable_collection_1_Template,1,8,"ds-viewable-collection",8)(2,ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_div_2_Template,3,3,"div",9),core.bVm()),2&rf){const data_r3=ctx.ngIf;core.R7$(),core.Y8G("ngIf",data_r3.payload.page.length>0),core.R7$(),core.Y8G("ngIf",data_r3&&0===data_r3.payload.page.length)}}let ItemAccessControlSelectBitstreamsModalComponent=(()=>{class ItemAccessControlSelectBitstreamsModalComponent2{constructor(bitstreamService,paginationService,translateService,activeModal){this.bitstreamService=bitstreamService,this.paginationService=paginationService,this.translateService=translateService,this.activeModal=activeModal,this.LIST_ID="item-access-control-select-bitstreams",this.selectedBitstreams=[],this.data$=new cjs.BehaviorSubject(null),this.pageSize=5,this.context=context_model.o.Bitstream}ngOnInit(){this.loadForPage(1),this.paginationConfig=new pagination_component_options_model.W,this.paginationConfig.id="iacsbm",this.paginationConfig.currentPage=1,(0,empty_util.a4)(this.pageSize)&&(this.paginationConfig.pageSize=this.pageSize)}loadForPage(page){this.bitstreamService.findAllByItemAndBundleName(this.item,"ORIGINAL",{currentPage:page},!1).pipe((0,shared_operators.qD)()).subscribe(this.data$)}static#_=this.\u0275fac=function(t){return new(t||ItemAccessControlSelectBitstreamsModalComponent2)(core.rXU(bitstream_data_service.BitstreamDataService),core.rXU(pagination_service.m),core.rXU(ngx_translate_core.c$),core.rXU(ng_bootstrap.Lw))};static#_2=this.\u0275cmp=core.VBU({type:ItemAccessControlSelectBitstreamsModalComponent2,selectors:[["ds-item-access-control-select-bitstreams-modal"]],inputs:{item:"item",selectedBitstreams:"selectedBitstreams"},standalone:!0,features:[core.aNF],decls:14,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"config","context","objects","selectable","selectionConfig","showPaginator","pageChange",4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[3,"pageChange","config","context","objects","selectable","selectionConfig","showPaginator"],["role","alert",1,"alert","alert-info","w-100"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h4",1),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",2),core.bIt("click",function(){return ctx.activeModal.dismiss("Cross click")}),core.j41(5,"span",3),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",4),core.DNE(8,ItemAccessControlSelectBitstreamsModalComponent_ng_container_8_Template,3,2,"ng-container",5),core.nI1(9,"async"),core.k0s(),core.j41(10,"div",6)(11,"button",7),core.bIt("click",function(){return ctx.activeModal.close("Close click")}),core.EFF(12),core.nI1(13,"translate"),core.k0s()()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,3,"access-control-select-bitstreams-modal.title")," "),core.R7$(6),core.Y8G("ngIf",core.bMT(9,5,ctx.data$)),core.R7$(4),core.SpI(" ",core.bMT(13,7,"access-control-select-bitstreams-modal.close")," "))},dependencies:[common.bT,object_collection_component.h,common.Jj,ngx_translate_core.h,ngx_translate_core.D9]})}return ItemAccessControlSelectBitstreamsModalComponent2})();const access_control_form_container_component_c0=["bitstreamAccessCmp"],_c1=["itemAccessCmp"],_c2=()=>[];function AccessControlFormContainerComponent_ds_alert_3_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-alert",29),2&rf){const ctx_r1=core.XpG();core.Y8G("type",ctx_r1.AlertType.Info)("content",ctx_r1.titleMessage)}}function AccessControlFormContainerComponent_div_43_button_15_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",37),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.openSelectBitstreamsModal(ctx_r1.itemRD.payload))}),core.nrm(2,"i",38),core.k0s()}if(2&rf){const ctx_r1=core.XpG(2);core.Y8G("disabled",!ctx_r1.state.bitstream.toggleStatus||"selected"!==ctx_r1.state.bitstream.changesLimit),core.BMQ("aria-label",core.bMT(1,2,"access-control-bitstreams-select"))}}function AccessControlFormContainerComponent_div_43_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"div",11)(1,"fieldset",30)(2,"legend",31),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",14)(6,"input",32),core.mxI("ngModelChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.DH7(ctx_r1.state.bitstream.changesLimit,$event)||(ctx_r1.state.bitstream.changesLimit=$event),core.Njj($event)}),core.k0s(),core.j41(7,"label",33),core.EFF(8),core.nI1(9,"translate"),core.k0s()(),core.j41(10,"div",14)(11,"input",34),core.mxI("ngModelChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.DH7(ctx_r1.state.bitstream.changesLimit,$event)||(ctx_r1.state.bitstream.changesLimit=$event),core.Njj($event)}),core.k0s(),core.j41(12,"label",35),core.EFF(13),core.nI1(14,"translate"),core.DNE(15,AccessControlFormContainerComponent_div_43_button_15_Template,3,4,"button",36),core.k0s()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(3),core.SpI(" ",core.bMT(4,9,"access-control-limit-to-specific")," "),core.R7$(3),core.Y8G("disabled",!ctx_r1.state.bitstream.toggleStatus),core.R50("ngModel",ctx_r1.state.bitstream.changesLimit),core.R7$(2),core.SpI(" ",core.bMT(9,11,"access-control-process-all-bitstreams")," "),core.R7$(3),core.Y8G("disabled",!ctx_r1.state.bitstream.toggleStatus),core.R50("ngModel",ctx_r1.state.bitstream.changesLimit),core.R7$(2),core.Lme(" ",ctx_r1.state.bitstream.selectedBitstreams.length," ",core.bMT(14,13,"access-control-bitstreams-selected")," "),core.R7$(2),core.Y8G("ngIf",ctx_r1.itemRD)}}function AccessControlFormContainerComponent_hr_66_Template(rf,ctx){1&rf&&core.nrm(0,"hr")}function AccessControlFormContainerComponent_div_67_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",39)(1,"button",40),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.reset())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",41),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.submit())}),core.EFF(5),core.nI1(6,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.SpI(" ",core.bMT(3,3,"access-control-cancel")," "),core.R7$(2),core.Y8G("disabled",!ctx_r1.state.item.toggleStatus&&!ctx_r1.state.bitstream.toggleStatus),core.R7$(),core.SpI(" ",core.bMT(6,5,"access-control-execute")," ")}}let AccessControlFormContainerComponent=(()=>{class AccessControlFormContainerComponent2{constructor(bulkAccessConfigService,bulkAccessControlService,selectableListService,modalService,cdr){this.bulkAccessConfigService=bulkAccessConfigService,this.bulkAccessControlService=bulkAccessControlService,this.selectableListService=selectableListService,this.modalService=modalService,this.cdr=cdr,this.showLimitToSpecificBitstreams=!1,this.titleMessage="",this.showSubmit=!0,this.AlertType=alert_type.v,this.state={item:{toggleStatus:!1,accessMode:"replace"},bitstream:{toggleStatus:!1,accessMode:"replace",changesLimit:"all",selectedBitstreams:[]}},this.dropdownData$=this.bulkAccessConfigService.findByName("default").pipe((0,shared_operators.qD)(),(0,operators.Tj)(configRD=>configRD.hasSucceeded?configRD.payload:null),(0,cjs.shareReplay)({refCount:!1,bufferSize:1}))}getFormValue(){return console.log({bitstream:this.bitstreamAccessCmp.getValue(),item:this.itemAccessCmp.getValue(),state:this.state}),{bitstream:this.bitstreamAccessCmp.getValue(),item:this.itemAccessCmp.getValue(),state:this.state}}reset(){this.bitstreamAccessCmp.reset(),this.itemAccessCmp.reset(),this.state={item:{toggleStatus:!1,accessMode:"replace"},bitstream:{toggleStatus:!1,accessMode:"replace",changesLimit:"all",selectedBitstreams:[]}}}submit(){const bitstreamAccess=this.bitstreamAccessCmp.getValue(),itemAccess=this.itemAccessCmp.getValue(),{file}=this.bulkAccessControlService.createPayloadFile({bitstreamAccess,itemAccess,state:this.state});this.bulkAccessControlService.executeScript([this.itemRD.payload.uuid],file).pipe((0,operators.s)(1)).subscribe(res=>{console.log("success",res)})}handleStatusChange(type,active){"bitstream"===type?active?this.bitstreamAccessCmp.enable():this.bitstreamAccessCmp.disable():"item"===type&&(active?this.itemAccessCmp.enable():this.itemAccessCmp.disable())}openSelectBitstreamsModal(item){const ref=this.modalService.open(ItemAccessControlSelectBitstreamsModalComponent);ref.componentInstance.selectedBitstreams=this.state.bitstream.selectedBitstreams,ref.componentInstance.item=item,ref.closed.pipe((0,cjs.concatMap)(()=>this.selectableListService.getSelectableList("item-access-control-select-bitstreams")),(0,operators.s)(1)).subscribe(list=>{this.state.bitstream.selectedBitstreams=list?.selection||[],this.cdr.detectChanges()})}ngOnDestroy(){this.selectableListService.deselectAll("item-access-control-select-bitstreams")}static#_=this.\u0275fac=function(t){return new(t||AccessControlFormContainerComponent2)(core.rXU(bulk_access_config_data_service.BulkAccessConfigDataService),core.rXU(bulk_access_control_service.r),core.rXU(selectable_list_service.K),core.rXU(ng_bootstrap.Bq),core.rXU(core.gRc))};static#_2=this.\u0275cmp=core.VBU({type:AccessControlFormContainerComponent2,selectors:[["ds-access-control-form-container"]],viewQuery:function(rf,ctx){if(1&rf&&(core.GBs(access_control_form_container_component_c0,7),core.GBs(_c1,7)),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.bitstreamAccessCmp=_t.first),core.mGM(_t=core.lsd())&&(ctx.itemAccessCmp=_t.first)}},inputs:{showLimitToSpecificBitstreams:"showLimitToSpecificBitstreams",titleMessage:"titleMessage",itemRD:"itemRD",showSubmit:"showSubmit"},exportAs:["dsAccessControlForm"],standalone:!0,features:[core.aNF],decls:68,vars:62,consts:[["itemAccessCmp",""],["bitstreamAccessCmp",""],[1,"container"],[1,"card","border-0"],[1,"card-body"],["class","d-block pb-3",3,"type","content",4,"ngIf"],[1,"row"],[1,"col-12","col-md-6","border-right","d-flex","flex-column","justify-content-between"],[1,"d-flex","align-items-center"],[1,"h3","mb-0","mr-4"],[3,"ngModelChange","ariaLabel","ngModel"],[1,"row","mt-3"],[1,"h4","col-12","col-md-3"],[1,"col-12","col-md-8"],[1,"form-check"],["type","radio","name","itemMode","id","itemReplace","value","replace",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","itemReplace",1,"form-check-label"],["type","radio","name","itemMode","id","itemAdd","value","add",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","itemAdd",1,"form-check-label"],[1,"h4","mt-3"],[3,"type","mode","dropdownOptions"],[1,"col-12","col-md-6","d-flex","flex-column","justify-content-between"],["class","row mt-3",4,"ngIf"],["type","radio","name","bitstreamMode","id","bitstreamReplace","value","replace",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","bitstreamReplace",1,"form-check-label"],["type","radio","name","bitstreamMode","id","bitstreamAdd","value","add",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","bitstreamAdd",1,"form-check-label"],[4,"ngIf"],["class","d-flex justify-content-end",4,"ngIf"],[1,"d-block","pb-3",3,"type","content"],[1,"col-12"],[1,"h4"],["type","radio","name","changesLimit","id","processAll","value","all",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","processAll",1,"form-check-label"],["type","radio","name","changesLimit","id","processSelected","value","selected",1,"form-check-input","mt-2",3,"ngModelChange","disabled","ngModel"],["for","processSelected",1,"form-check-label"],["class","btn btn-outline-dark border-0","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-outline-dark","border-0",3,"click","disabled"],[1,"fa","fa-search"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary","mr-3",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",2)(1,"div",3)(2,"div",4),core.DNE(3,AccessControlFormContainerComponent_ds_alert_3_Template,1,2,"ds-alert",5),core.j41(4,"div",6)(5,"div",7)(6,"div")(7,"div",8)(8,"h2",9),core.EFF(9),core.nI1(10,"translate"),core.k0s(),core.j41(11,"ui-switch",10),core.nI1(12,"translate"),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.toggleStatus,$event)||(ctx.state.item.toggleStatus=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.handleStatusChange("item",$event))}),core.k0s()(),core.j41(13,"fieldset",11)(14,"legend",12),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"div",13)(18,"div",14)(19,"input",15),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.accessMode,$event)||(ctx.state.item.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(20,"label",16),core.EFF(21),core.nI1(22,"translate"),core.k0s()(),core.j41(23,"div",14)(24,"input",17),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.accessMode,$event)||(ctx.state.item.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(25,"label",18),core.EFF(26),core.nI1(27,"translate"),core.k0s()()()()(),core.j41(28,"div")(29,"h3",19),core.EFF(30),core.nI1(31,"translate"),core.k0s(),core.nrm(32,"ds-access-control-array-form",20,0),core.nI1(34,"async"),core.k0s()(),core.j41(35,"div",21)(36,"div")(37,"div",8)(38,"h2",9),core.EFF(39),core.nI1(40,"translate"),core.k0s(),core.j41(41,"ui-switch",10),core.nI1(42,"translate"),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.toggleStatus,$event)||(ctx.state.bitstream.toggleStatus=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.handleStatusChange("bitstream",$event))}),core.k0s()(),core.DNE(43,AccessControlFormContainerComponent_div_43_Template,16,15,"div",22),core.k0s(),core.j41(44,"fieldset",11)(45,"legend",12),core.EFF(46),core.nI1(47,"translate"),core.k0s(),core.j41(48,"div",13)(49,"div",14)(50,"input",23),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.accessMode,$event)||(ctx.state.bitstream.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(51,"label",24),core.EFF(52),core.nI1(53,"translate"),core.k0s()(),core.j41(54,"div",14)(55,"input",25),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.accessMode,$event)||(ctx.state.bitstream.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(56,"label",26),core.EFF(57),core.nI1(58,"translate"),core.k0s()()()(),core.j41(59,"div")(60,"h3",19),core.EFF(61),core.nI1(62,"translate"),core.k0s(),core.nrm(63,"ds-access-control-array-form",20,1),core.nI1(65,"async"),core.k0s()()(),core.DNE(66,AccessControlFormContainerComponent_hr_66_Template,1,0,"hr",27)(67,AccessControlFormContainerComponent_div_67_Template,7,7,"div",28),core.k0s()()()}if(2&rf){let tmp_16_0,tmp_31_0;core.R7$(3),core.Y8G("ngIf",ctx.titleMessage),core.R7$(6),core.SpI(" ",core.bMT(10,32,"access-control-item-header-toggle")," "),core.R7$(2),core.Y8G("ariaLabel",core.bMT(12,34,ctx.state.bitstream.toggleStatus?"access-control-item-toggle.disable":"access-control-item-toggle.enable")),core.R50("ngModel",ctx.state.item.toggleStatus),core.R7$(4),core.SpI(" ",core.bMT(16,36,"access-control-mode")," "),core.R7$(4),core.Y8G("disabled",!ctx.state.item.toggleStatus),core.R50("ngModel",ctx.state.item.accessMode),core.R7$(2),core.SpI(" ",core.bMT(22,38,"access-control-replace-all")," "),core.R7$(3),core.Y8G("disabled",!ctx.state.item.toggleStatus),core.R50("ngModel",ctx.state.item.accessMode),core.R7$(2),core.SpI(" ",core.bMT(27,40,"access-control-add-to-existing")," "),core.R7$(4),core.JRh(core.bMT(31,42,"access-control-access-conditions")),core.R7$(2),core.Y8G("type","item")("mode",ctx.state.item.accessMode)("dropdownOptions",(null==(tmp_16_0=core.bMT(34,44,ctx.dropdownData$))?null:tmp_16_0.itemAccessConditionOptions)||core.lJ4(60,_c2)),core.R7$(7),core.SpI(" ",core.bMT(40,46,"access-control-bitstream-header-toggle")," "),core.R7$(2),core.Y8G("ariaLabel",core.bMT(42,48,ctx.state.bitstream.toggleStatus?"access-control-bitstream-toggle.disable":"access-control-bitstream-toggle.enable")),core.R50("ngModel",ctx.state.bitstream.toggleStatus),core.R7$(2),core.Y8G("ngIf",ctx.showLimitToSpecificBitstreams),core.R7$(3),core.SpI(" ",core.bMT(47,50,"access-control-mode")," "),core.R7$(4),core.Y8G("disabled",!ctx.state.bitstream.toggleStatus),core.R50("ngModel",ctx.state.bitstream.accessMode),core.R7$(2),core.SpI(" ",core.bMT(53,52,"access-control-replace-all")," "),core.R7$(3),core.Y8G("disabled",!ctx.state.bitstream.toggleStatus),core.R50("ngModel",ctx.state.bitstream.accessMode),core.R7$(2),core.SpI(" ",core.bMT(58,54,"access-control-add-to-existing")," "),core.R7$(4),core.JRh(core.bMT(62,56,"access-control-access-conditions")),core.R7$(2),core.Y8G("type","bitstream")("mode",ctx.state.bitstream.accessMode)("dropdownOptions",(null==(tmp_31_0=core.bMT(65,58,ctx.dropdownData$))?null:tmp_31_0.bitstreamAccessConditionOptions)||core.lJ4(61,_c2)),core.R7$(3),core.Y8G("ngIf",ctx.showSubmit),core.R7$(),core.Y8G("ngIf",ctx.showSubmit)}},dependencies:[common.bT,alert_component.C,ngx_ui_switch.z,fesm2022_forms.me,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.vS,ngx_ui_switch.S,fesm2022_forms.YN,AccessControlArrayFormComponent,common.Jj,ngx_translate_core.h,ngx_translate_core.D9]})}return AccessControlFormContainerComponent2})()},76415:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>BulkAccessControlService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10743),_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54257),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(33549),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(43750);let BulkAccessControlService=(()=>{class BulkAccessControlService2{constructor(notificationsService,router,scriptService,translationService){this.notificationsService=notificationsService,this.router=router,this.scriptService=scriptService,this.translationService=translationService}createPayloadFile(payload){const content=convertToBulkAccessControlFileModel(payload),blob=new Blob([JSON.stringify(content,null,2)],{type:"application/json"}),file=new File([blob],"data.json",{type:"application/json"});return{url:URL.createObjectURL(file),file}}executeScript(uuids,file){console.log("execute",{uuids,file});const params=[{name:"-f",value:file.name}];return uuids.forEach(uuid=>{params.push({name:"-u",value:uuid})}),this.scriptService.invoke("bulk-access-control",params,[file]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(rd=>{if(rd.hasSucceeded){const title=this.translationService.get("process.new.notification.success.title"),content=this.translationService.get("process.new.notification.success.content");return this.notificationsService.success(title,content),(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.hj)(rd.payload)&&this.router.navigateByUrl((0,_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_5__.yJ)(rd.payload.processId)),!0}{const title=this.translationService.get("process.new.notification.error.title"),content=this.translationService.get("process.new.notification.error.content");return this.notificationsService.error(title,content),!1}}))}static#_=this.\u0275fac=function(t){return new(t||BulkAccessControlService2)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.I),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_angular_router__WEBPACK_IMPORTED_MODULE_7__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_0__.ScriptDataService),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__.c$))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.jDH({token:BulkAccessControlService2,factory:BulkAccessControlService2.\u0275fac,providedIn:"root"})}return BulkAccessControlService2})();const convertToBulkAccessControlFileModel=payload=>{const finalPayload={},bitstreamEnabled=payload.state.bitstream.toggleStatus;if(payload.state.item.toggleStatus&&(finalPayload.item={mode:payload.state.item.accessMode,accessConditions:payload.itemAccess}),bitstreamEnabled){const constraints={uuid:[]};bitstreamEnabled&&"selected"===payload.state.bitstream.changesLimit&&(constraints.uuid=payload.state.bitstream.selectedBitstreams.map(x=>x.id)),finalPayload.bitstream={constraints,mode:payload.state.bitstream.accessMode,accessConditions:payload.bitstreamAccess}}return finalPayload}},42804:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>ComcolMetadataComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10743),_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65869),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(43750);let ComcolMetadataComponent=(()=>{class ComcolMetadataComponent2{constructor(dsoDataService,router,route,notificationsService,translate){this.dsoDataService=dsoDataService,this.router=router,this.route=route,this.notificationsService=notificationsService,this.translate=translate}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(data=>data.dso))}onSubmit(event){(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(event.operations)?this.router.navigate([this.frontendURL,event.dso.uuid]):this.dsoDataService.patch(event.dso,event.operations).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)()).subscribe(response=>{response.hasSucceeded?(this.router.navigate([this.frontendURL,event.dso.uuid]),this.notificationsService.success(null,this.translate.get(`${this.type.value}.edit.notifications.success`))):this.notificationsService.error(null,this.translate.get(403===response.statusCode?`${this.type.value}.edit.notifications.unauthorized`:`${this.type.value}.edit.notifications.error`))})}navigateToHomePage(){this.dsoRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.yd)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.s)(1)).subscribe(dsoRD=>{this.router.navigate([this.frontendURL+dsoRD.payload.id])})}static#_=this.\u0275fac=function(t){return new(t||ComcolMetadataComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_0__.x),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_6__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_6__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.c$))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ComcolMetadataComponent2,selectors:[["ds-comcol-metadata"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}return ComcolMetadataComponent2})()},38992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ComcolRoleComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(84739),_angular_router__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(60856),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91735),_core_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72744),_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(97195),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14467),_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77028),_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(32943),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10117),_utils_has_no_value_pipe__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(89705),_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45961),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);function ComcolRoleComponent_div_2_ds_loading_11_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(0,"ds-loading")}function ComcolRoleComponent_div_2_div_14_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"comcol-role.edit.no-group")," "))}function ComcolRoleComponent_div_2_div_16_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){let tmp_3_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,3,"comcol-role.edit."+(null==(tmp_3_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,ctx_r0.comcolRole$))?null:tmp_3_0.name)+".anonymous-group")," ")}}function ComcolRoleComponent_div_2_a_18_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"a",13),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){const group_r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG().ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(1,2,ctx_r0.editGroupLink$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",ctx_r0.dsoNameService.getName(group_r2)," ")}}function ComcolRoleComponent_div_2_button_21_Template(rf,ctx){if(1&rf){const _r3=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r3);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.create())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,1,"comcol-role.edit.create")," "))}function ComcolRoleComponent_div_2_button_23_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",16),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r4);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.create())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"comcol-role.edit.restrict")," "))}function ComcolRoleComponent_div_2_button_25_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r5);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.delete())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"i",18),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,1,"comcol-role.edit.delete")," "))}function ComcolRoleComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",1)(1,"h2",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"div",3)(5,"ds-alert",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(9,"div",5)(10,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(11,ComcolRoleComponent_div_2_ds_loading_11_Template,1,0,"ds-loading",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(13,"dsHasNoValue"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(14,ComcolRoleComponent_div_2_div_14_Template,3,3,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(16,ComcolRoleComponent_div_2_div_16_Template,4,5,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(18,ComcolRoleComponent_div_2_a_18_Template,3,4,"a",8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(19,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(20,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(21,ComcolRoleComponent_div_2_button_21_Template,4,3,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(23,ComcolRoleComponent_div_2_button_23_Template,3,3,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(24,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(25,ComcolRoleComponent_div_2_button_25_Template,4,3,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(26,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()()),2&rf){let tmp_4_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,10,ctx_r0.roleName$)," "),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(8,14,"comcol-role.edit."+(null==(tmp_4_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(7,12,ctx_r0.comcolRole$))?null:tmp_4_0.name)+".description")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(13,18,_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(12,16,ctx_r0.groupRD$))),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(15,20,ctx_r0.hasNoGroup$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(17,22,ctx_r0.hasAnonymousGroup$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(19,24,ctx_r0.hasCustomGroup$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(22,26,ctx_r0.hasNoGroup$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(24,28,ctx_r0.hasAnonymousGroup$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(26,30,ctx_r0.hasCustomGroup$))}}let ComcolRoleComponent=(()=>{class ComcolRoleComponent2{constructor(requestService,groupService,notificationsService,translateService,dsoNameService){this.requestService=requestService,this.groupService=groupService,this.notificationsService=notificationsService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.comcolRole$=new rxjs__WEBPACK_IMPORTED_MODULE_9__.BehaviorSubject(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(newRole){this.comcolRole$.next(newRole)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.translateService.get("comcol-role.edit.create.error.title",{role}))),`${rd.statusCode} ${rd.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.translateService.get("comcol-role.edit.delete.error.title",{role}))),rd.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.pb)(role=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(role)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.groupService.findByHref(role.href)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.bD)()),this.group$=this.groupRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(rd=>{if((0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(rd.payload))return rd.payload})),this.editGroupLink$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)?(0,_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_0__.xl)(group.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.Tn)(group))),this.hasAnonymousGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)&&"Anonymous"===group.name)),this.hasCustomGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)&&"Anonymous"!==group.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}static#_=this.\u0275fac=function(t){return new(t||ComcolRoleComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_3__.GroupDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ComcolRoleComponent2,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"h4","w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(2,ComcolRoleComponent_div_2_Template,27,32,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){let tmp_0_0;_angular_core__WEBPACK_IMPORTED_MODULE_8__.ZvI("card p-2 m-3 ",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(1,4,ctx.comcolRole$))?null:tmp_0_0.name,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,6,ctx.group$))}},dependencies:[_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__.v,_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_13__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_13__.bT,_angular_router__WEBPACK_IMPORTED_MODULE_14__.Wk,_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__.r,_utils_has_no_value_pipe__WEBPACK_IMPORTED_MODULE_16__.n]})}return ComcolRoleComponent2})()},76479:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>EditComColPageComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10743),_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(64247);let EditComColPageComponent=(()=>{class EditComColPageComponent2{constructor(router,route){this.router=router,this.route=route,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(child=>child.path).filter(path=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.hj)(path)),this.dsoRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Tj)(data=>data.dso))}getPageUrl(dso){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(child=>child.path===this.currentPage).data.hideReturnButton}static#_=this.\u0275fac=function(t){return new(t||EditComColPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_3__.nX))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:EditComColPageComponent2,selectors:[["ds-edit-comcol"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}return EditComColPageComponent2})()},96315:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>ResourcePolicyCreateComponent});var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10743),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(91735),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55592),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(62181),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10117),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7951),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(64247);let ResourcePolicyCreateComponent=(()=>{class ResourcePolicyCreateComponent2{constructor(dsoNameService,notificationsService,resourcePolicyService,route,router,translate){this.dsoNameService=dsoNameService,this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1)}ngOnInit(){this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(data=>data),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.s)(1)).subscribe(data=>{this.targetResourceUUID=data.resourcePolicyTarget.payload.id,this.targetResourceName=this.dsoNameService.getName(data.resourcePolicyTarget.payload)})}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.K4}`],{relativeTo:this.route})}createResourcePolicy(event){let response$;this.processing$.next(!0),response$="eperson"===event.target.type?this.resourcePolicyService.create(event.object,this.targetResourceUUID,event.target.uuid):this.resourcePolicyService.create(event.object,this.targetResourceUUID,null,event.target.uuid),response$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(responseRD=>{this.processing$.next(!1),responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.create.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.create.page.failure.content"))})}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyCreateComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__.f),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__.ResourcePolicyDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ResourcePolicyCreateComponent2,selectors:[["ds-resource-policy-create"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:5,vars:5,consts:[[1,"container"],[1,"mb-3"],[3,"reset","submit","isProcessing"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",0)(1,"h4",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("reset",function(){return ctx.redirectToAuthorizationsPage()})("submit",function($event){return ctx.createResourcePolicy($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,3,"resource-policies.create.page.heading")," ",ctx.targetResourceName,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("isProcessing",ctx.isProcessing()))},dependencies:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__.y,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}return ResourcePolicyCreateComponent2})()},28319:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>ResourcePolicyEditComponent});var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10743),_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46328),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55592),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(62181),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10117),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7951),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(64247);let ResourcePolicyEditComponent=(()=>{class ResourcePolicyEditComponent2{constructor(notificationsService,resourcePolicyService,route,router,translate){this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1)}ngOnInit(){this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(data=>data),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.s)(1)).subscribe(data=>{this.resourcePolicy=data.resourcePolicy.payload})}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.K4}`],{relativeTo:this.route})}updateResourcePolicy(event){this.processing$.next(!0);const updatedObject=Object.assign({},event.object,{id:this.resourcePolicy.id,type:_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_0__.O.value,_links:this.resourcePolicy._links}),updateTargetSucceeded$=event.updateTarget?this.resourcePolicyService.updateTarget(this.resourcePolicy.id,this.resourcePolicy._links.self.href,event.target.uuid,event.target.type).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(responseRD=>responseRD&&responseRD.hasSucceeded)):(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.of)(!0),updateResourcePolicySucceeded$=this.resourcePolicyService.update(updatedObject).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(responseRD=>responseRD&&responseRD.hasSucceeded));(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([updateTargetSucceeded$,updateResourcePolicySucceeded$]).subscribe(([updateTargetSucceeded,updateResourcePolicySucceeded])=>{this.processing$.next(!1),updateTargetSucceeded&&updateResourcePolicySucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.edit.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get(updateResourcePolicySucceeded?"resource-policies.edit.page.target-failure.content":updateTargetSucceeded?"resource-policies.edit.page.other-failure.content":"resource-policies.edit.page.failure.content"))})}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyEditComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__.ResourcePolicyDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ResourcePolicyEditComponent2,selectors:[["ds-resource-policy-edit"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:5,vars:6,consts:[[1,"container"],[1,"mb-3"],[3,"reset","submit","resourcePolicy","isProcessing"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",0)(1,"h1",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("reset",function(){return ctx.redirectToAuthorizationsPage()})("submit",function($event){return ctx.updateResourcePolicy($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,4,"resource-policies.edit.page.heading")," ",ctx.resourcePolicy.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("resourcePolicy",ctx.resourcePolicy)("isProcessing",ctx.isProcessing()))},dependencies:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__.y,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}return ResourcePolicyEditComponent2})()},7951:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>ResourcePolicyFormComponent});var common=__webpack_require__(84739),core=__webpack_require__(68014),ng_bootstrap=__webpack_require__(71781),fesm2020_core=__webpack_require__(71508),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),dso_name_service=__webpack_require__(91735),request_service=__webpack_require__(72744),eperson_data_service=__webpack_require__(62120),group_data_service=__webpack_require__(97195),resource_policy_model=__webpack_require__(12266),resource_policy_resource_type=__webpack_require__(46328),shared_operators=__webpack_require__(82656),date_util=__webpack_require__(7840),empty_util=__webpack_require__(77028),eperson_group_list_component=__webpack_require__(46846),ds_dynamic_input_model=__webpack_require__(13942),ds_dynamic_textarea_model=__webpack_require__(67044),form_component=__webpack_require__(49148),form_service=__webpack_require__(79181),action_type_model=__webpack_require__(22598),policy_type_model=__webpack_require__(38226);const policyTypeList=[{label:policy_type_model.t.TYPE_SUBMISSION,value:policy_type_model.t.TYPE_SUBMISSION},{label:policy_type_model.t.TYPE_WORKFLOW,value:policy_type_model.t.TYPE_WORKFLOW},{label:policy_type_model.t.TYPE_INHERITED,value:policy_type_model.t.TYPE_INHERITED},{label:policy_type_model.t.TYPE_CUSTOM,value:policy_type_model.t.TYPE_CUSTOM}],policyActionList=[{label:action_type_model.X.READ.toString(),value:action_type_model.X.READ},{label:action_type_model.X.WRITE.toString(),value:action_type_model.X.WRITE},{label:action_type_model.X.REMOVE.toString(),value:action_type_model.X.REMOVE},{label:action_type_model.X.ADMIN.toString(),value:action_type_model.X.ADMIN},{label:action_type_model.X.DELETE.toString(),value:action_type_model.X.DELETE},{label:action_type_model.X.WITHDRAWN_READ.toString(),value:action_type_model.X.WITHDRAWN_READ},{label:action_type_model.X.DEFAULT_BITSTREAM_READ.toString(),value:action_type_model.X.DEFAULT_BITSTREAM_READ},{label:action_type_model.X.DEFAULT_ITEM_READ.toString(),value:action_type_model.X.DEFAULT_ITEM_READ}],RESOURCE_POLICY_FORM_NAME_CONFIG={id:"name",label:"resource-policies.form.name.label",maxLength:30,hint:"resource-policies.form.name.hint",metadataFields:[],repeatable:!1,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG={id:"description",label:"resource-policies.form.description.label",metadataFields:[],repeatable:!1,rows:10,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG={id:"policyType",label:"resource-policies.form.policy-type.label",options:policyTypeList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.policy-type.required"}},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG={id:"action",label:"resource-policies.form.action-type.label",options:policyActionList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.action-type.required"}},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG={id:"date",group:[]},RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT={element:{control:"form-row"}},RESOURCE_POLICY_FORM_START_DATE_CONFIG={id:"start",label:"resource-policies.form.date.start.label",placeholder:"resource-policies.form.date.start.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_START_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},RESOURCE_POLICY_FORM_END_DATE_CONFIG={id:"end",label:"resource-policies.form.date.end.label",placeholder:"resource-policies.form.date.end.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_END_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},_c0=["content"];function ResourcePolicyFormComponent_ds_form_1_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-form",17,2),2&rf){const ctx_r1=core.XpG();core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}function ResourcePolicyFormComponent_ng_template_14_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-eperson-group-list",18),core.bIt("select",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateObjectSelected($event,!0))}),core.k0s()}}function ResourcePolicyFormComponent_ng_template_19_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"ds-eperson-group-list",19),core.bIt("select",function($event){core.eBV(_r4);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateObjectSelected($event,!1))}),core.k0s()}2&rf&&core.Y8G("isListOfEPerson",!1)}function ResourcePolicyFormComponent_span_32_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",20),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.workflow.tasks.generic.processing")," "))}function ResourcePolicyFormComponent_span_34_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"form.submit")," "))}function ResourcePolicyFormComponent_ng_template_36_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",21)(1,"h4",22),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",23),core.bIt("click",function(){const modal_r6=core.eBV(_r5).$implicit;return core.Njj(modal_r6.close())}),core.j41(5,"span",24),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",25)(8,"div",26)(9,"div",27),core.nrm(10,"i",28),core.k0s(),core.j41(11,"div"),core.nrm(12,"p",29),core.nI1(13,"translate"),core.nrm(14,"p",30),core.nI1(15,"translate"),core.k0s()()(),core.j41(16,"div",31)(17,"button",32),core.bIt("click",function(){const modal_r6=core.eBV(_r5).$implicit;return core.Njj(modal_r6.close())}),core.EFF(18),core.nI1(19,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.JRh(core.bMT(3,4,"resource-policies.form.eperson-group-list.modal.header")),core.R7$(10),core.Y8G("innerHTML",core.bMT(13,6,"eperson"===ctx_r1.navActiveId?"resource-policies.form.eperson-group-list.modal.text1.toGroup":"resource-policies.form.eperson-group-list.modal.text1.toEPerson"),core.npT),core.R7$(2),core.Y8G("innerHTML",core.bMT(15,8,"resource-policies.form.eperson-group-list.modal.text2"),core.npT),core.R7$(4),core.JRh(core.bMT(19,10,"resource-policies.form.eperson-group-list.modal.close"))}}let ResourcePolicyFormComponent=(()=>{class ResourcePolicyFormComponent2{constructor(dsoNameService,ePersonService,formService,groupService,requestService,modalService){this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.formService=formService,this.groupService=groupService,this.requestService=requestService,this.modalService=modalService,this.isProcessing=(0,cjs.of)(!1),this.reset=new core.bkB,this.submit=new core.bkB,this.resourcePolicyTargetName$=new cjs.BehaviorSubject(""),this.subs=[],this.resourcePolicyTargetUpdated=!1}ngOnInit(){if(this.isActive=!0,this.formId=this.formService.getUniqueId("resource-policy-form"),this.formModel=this.buildResourcePolicyForm(),this.isBeingEdited()){const epersonRD$=this.ePersonService.findByHref(this.resourcePolicy._links.eperson.href,!1).pipe((0,shared_operators.yd)()),groupRD$=this.groupService.findByHref(this.resourcePolicy._links.group.href,!1).pipe((0,shared_operators.yd)()),dsoRD$=(0,cjs.combineLatest)([epersonRD$,groupRD$]).pipe((0,operators.Tj)(rdArr=>rdArr.find(rd=>(0,empty_util.hj)(rd.payload))),(0,empty_util.Az)());this.subs.push(dsoRD$.pipe((0,operators.pb)(()=>this.isActive)).subscribe(dsoRD=>{this.resourcePolicyGrant=dsoRD.payload,this.navActiveId=String(dsoRD.payload.type),this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())}))}}isFormValid(){return this.formService.isValid(this.formId).pipe((0,operators.Tj)(isValid=>isValid&&(0,empty_util.hj)(this.resourcePolicyGrant)))}buildResourcePolicyForm(){const formModel=[];formModel.push(new ds_dynamic_input_model.C(RESOURCE_POLICY_FORM_NAME_CONFIG),new ds_dynamic_textarea_model.E(RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG),new fesm2020_core.z4z(RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG),new fesm2020_core.z4z(RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG));const startDateModel=new fesm2020_core.dku(RESOURCE_POLICY_FORM_START_DATE_CONFIG,RESOURCE_POLICY_FORM_START_DATE_LAYOUT),endDateModel=new fesm2020_core.dku(RESOURCE_POLICY_FORM_END_DATE_CONFIG,RESOURCE_POLICY_FORM_END_DATE_LAYOUT),dateGroupConfig=Object.assign({},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG,{group:[]});return dateGroupConfig.group.push(startDateModel,endDateModel),formModel.push(new fesm2020_core.iO5(dateGroupConfig,RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT)),this.initModelsValue(formModel),formModel}initModelsValue(formModel){return this.resourcePolicy&&formModel.forEach(model=>{"date"===model.id?((0,empty_util.a4)(this.resourcePolicy.startDate)&&(model.get(0).value=(0,date_util.PR)(this.resourcePolicy.startDate)),(0,empty_util.a4)(this.resourcePolicy.endDate)&&(model.get(1).value=(0,date_util.PR)(this.resourcePolicy.endDate))):this.resourcePolicy.hasOwnProperty(model.id)&&this.resourcePolicy[model.id]&&(model.value=this.resourcePolicy[model.id])}),formModel}isBeingEdited(){return!(0,empty_util.Im)(this.resourcePolicy)}getResourcePolicyTargetName(){return(0,empty_util.hj)(this.resourcePolicyGrant)?this.dsoNameService.getName(this.resourcePolicyGrant):""}updateObjectSelected(object,isEPerson){this.resourcePolicyTargetUpdated=!0,this.resourcePolicyGrant=object,this.resourcePolicyGrantType=isEPerson?"eperson":"group",this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())}onReset(){this.reset.emit()}onSubmit(){this.formService.getFormData(this.formId).pipe((0,operators.s)(1)).subscribe(data=>{const eventPayload=Object.create({});eventPayload.object=this.createResourcePolicyByFormData(data),eventPayload.target={type:this.resourcePolicyGrantType,uuid:this.resourcePolicyGrant.id},eventPayload.updateTarget=this.resourcePolicyTargetUpdated,this.submit.emit(eventPayload)})}createResourcePolicyByFormData(data){const resourcePolicy=new resource_policy_model.h;return resourcePolicy.name=data.name?data.name[0].value:null,resourcePolicy.description=data.description?data.description[0].value:null,resourcePolicy.policyType=data.policyType?data.policyType[0].value:null,resourcePolicy.action=data.action?data.action[0].value:null,resourcePolicy.startDate=data.date&&data.date.start?(0,date_util.Sd)(data.date.start[0].value):null,resourcePolicy.endDate=data.date&&data.date.end?(0,date_util.Sd)(data.date.end[0].value):null,resourcePolicy.type=resource_policy_resource_type.O,resourcePolicy}ngOnDestroy(){this.isActive=!1,this.formModel=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}onNavChange(changeEvent){this.isBeingEdited()&&(changeEvent.preventDefault(),this.modalService.open(this.content))}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyFormComponent2)(core.rXU(dso_name_service.f),core.rXU(eperson_data_service.EPersonDataService),core.rXU(form_service.u),core.rXU(group_data_service.GroupDataService),core.rXU(request_service.B),core.rXU(ng_bootstrap.Bq))};static#_2=this.\u0275cmp=core.VBU({type:ResourcePolicyFormComponent2,selectors:[["ds-resource-policy-form"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.content=_t.first)}},inputs:{resourcePolicy:"resourcePolicy",isProcessing:"isProcessing"},outputs:{reset:"reset",submit:"submit"},standalone:!0,features:[core.aNF],decls:38,vars:34,consts:[["nav","ngbNav"],["content",""],["formRef","formComponent"],[3,"formId","formModel","displaySubmit","displayCancel",4,"ngIf"],[1,"container-fluid"],["for","ResourcePolicyObject"],["id","ResourcePolicyObject","type","text",1,"form-control","mb-3",3,"value"],["ngbNav","",1,"nav-pills",3,"activeIdChange","navChange","activeId"],["role","presentation",3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"form-group","row"],[1,"col","text-right"],["type","reset",1,"btn","btn-default",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel"],[3,"select"],[3,"select","isListOfEPerson"],[1,"fas","fa-circle-notch","fa-spin"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"d-flex","flex-row"],[1,"mr-3"],[1,"fas","fa-info-circle","fa-2x","text-info"],[1,"font-weight-bold",3,"innerHTML"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div"),core.DNE(1,ResourcePolicyFormComponent_ds_form_1_Template,2,4,"ds-form",3),core.j41(2,"div",4)(3,"label",5),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.nrm(6,"input",6),core.nI1(7,"async"),core.j41(8,"ul",7,0),core.mxI("activeIdChange",function($event){return core.eBV(_r1),core.DH7(ctx.navActiveId,$event)||(ctx.navActiveId=$event),core.Njj($event)}),core.bIt("navChange",function($event){return core.eBV(_r1),core.Njj(ctx.onNavChange($event))}),core.j41(10,"li",8)(11,"a",9),core.EFF(12),core.nI1(13,"translate"),core.k0s(),core.DNE(14,ResourcePolicyFormComponent_ng_template_14_Template,1,0,"ng-template",10),core.k0s(),core.j41(15,"li",8)(16,"a",9),core.EFF(17),core.nI1(18,"translate"),core.k0s(),core.DNE(19,ResourcePolicyFormComponent_ng_template_19_Template,1,1,"ng-template",10),core.k0s()(),core.nrm(20,"div",11),core.j41(21,"div"),core.nrm(22,"hr"),core.j41(23,"div",12)(24,"div",13)(25,"button",14),core.nI1(26,"async"),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.onReset())}),core.EFF(27),core.nI1(28,"translate"),core.k0s(),core.j41(29,"button",15),core.nI1(30,"async"),core.nI1(31,"async"),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit())}),core.DNE(32,ResourcePolicyFormComponent_span_32_Template,4,3,"span",16),core.nI1(33,"async"),core.DNE(34,ResourcePolicyFormComponent_span_34_Template,3,3,"span",16),core.nI1(35,"async"),core.k0s()()()()()(),core.DNE(36,ResourcePolicyFormComponent_ng_template_36_Template,20,12,"ng-template",null,1,core.C5r)}if(2&rf){const nav_r7=core.sdS(9);core.R7$(),core.Y8G("ngIf",ctx.formModel),core.R7$(3),core.JRh(core.bMT(5,14,"resource-policies.form.eperson-group-list.label")),core.R7$(2),core.Y8G("value",core.bMT(7,16,ctx.resourcePolicyTargetName$)),core.R7$(2),core.R50("activeId",ctx.navActiveId),core.R7$(2),core.Y8G("ngbNavItem","eperson"),core.R7$(2),core.JRh(core.bMT(13,18,"resource-policies.form.eperson-group-list.tab.eperson")),core.R7$(3),core.Y8G("ngbNavItem","group"),core.R7$(2),core.JRh(core.bMT(18,20,"resource-policies.form.eperson-group-list.tab.group")),core.R7$(3),core.Y8G("ngbNavOutlet",nav_r7),core.R7$(5),core.Y8G("disabled",core.bMT(26,22,ctx.isProcessing)),core.R7$(2),core.JRh(core.bMT(28,24,"form.cancel")),core.R7$(2),core.Y8G("disabled",!0!==core.bMT(30,26,ctx.isFormValid())||core.bMT(31,28,ctx.isProcessing)),core.R7$(3),core.Y8G("ngIf",core.bMT(33,30,ctx.isProcessing)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(35,32,ctx.isProcessing))}},dependencies:[form_component.s,ng_bootstrap.Pv,ng_bootstrap.Um,ng_bootstrap.X9,ng_bootstrap.sy,ng_bootstrap.Ri,ng_bootstrap.m_,eperson_group_list_component.T,ngx_translate_core.h,ngx_translate_core.D9,common.Jj,common.bT],encapsulation:2})}return ResourcePolicyFormComponent2})()},20312:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>resourcePolicyTargetResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(64247),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59945),_core_lazy_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(56964),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_core_shared_resource_type__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(94554),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028);const resourcePolicyTargetResolver=(route,state,dataServiceMap=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.l9),parentInjector=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.zZn),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix))=>{const targetType=route.queryParamMap.get("targetType"),policyTargetId=route.queryParamMap.get("policyTargetId");((0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(targetType)||(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(policyTargetId))&&router.navigateByUrl("/404",{skipLocationChange:!0});const resourceType=new _core_shared_resource_type__WEBPACK_IMPORTED_MODULE_5__.v(targetType);return(0,_core_lazy_data_service__WEBPACK_IMPORTED_MODULE_6__.M)(dataServiceMap,resourceType.value,parentInjector).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(dataService=>dataService.findById(policyTargetId)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)())}},48576:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>resourcePolicyResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(64247),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55592),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(32181);const resourcePolicyResolver=(route,state,router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix),resourcePolicyService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_0__.ResourcePolicyDataService))=>{const policyId=route.queryParamMap.get("policyId");return(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(policyId)&&router.navigateByUrl("/404",{skipLocationChange:!0}),resourcePolicyService.findById(policyId,!0,!1,(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__.s)("eperson"),(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__.s)("group")).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)())}},67848:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>ResourcePoliciesComponent});var common=__webpack_require__(84739),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),dso_name_service=__webpack_require__(91735),request_service=__webpack_require__(72744),eperson_data_service=__webpack_require__(62120),group_data_service=__webpack_require__(97195),resource_policy_data_service=__webpack_require__(55592),shared_operators=__webpack_require__(82656),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),follow_link_config_model=__webpack_require__(32181),core=__webpack_require__(68014),fesm2022_forms=__webpack_require__(28955),access_control_routing_paths=__webpack_require__(60856),date_util=__webpack_require__(7840),has_value_pipe=__webpack_require__(10585),router=__webpack_require__(64247);const _c0=["ds-resource-policy-entry",""];function ResourcePolicyEntryComponent_button_30_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",7),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.redirectToGroupEditPage())}),core.nrm(2,"i",10),core.k0s()}2&rf&&core.Y8G("title",core.bMT(1,1,"resource-policies.table.headers.edit.group"))}let ResourcePolicyEntryComponent=(()=>{class ResourcePolicyEntryComponent2{constructor(dsoNameService,groupService,route,router2){this.dsoNameService=dsoNameService,this.groupService=groupService,this.route=route,this.router=router2,this.toggleCheckbox=new core.bkB}ngOnInit(){this.epersonName$=this.getName$(this.entry.policy.eperson),this.groupName$=this.getName$(this.entry.policy.group)}getName$(dso$){return dso$.pipe((0,shared_operators.v7)(),(0,operators.Tj)(rd=>{if((0,empty_util.a4)(rd?.payload))return this.dsoNameService.getName(rd.payload)}))}formatDate(date){return(0,empty_util.hj)(date)?(0,date_util.$T)((0,date_util.PR)(date)):""}redirectToResourcePolicyEditPage(){this.router.navigate(["./edit"],{relativeTo:this.route,queryParams:{policyId:this.entry.policy.id}})}redirectToGroupEditPage(){this.groupService.findByHref(this.entry.policy._links.group.href,!1).pipe((0,shared_operators.ak)(),(0,operators.Tj)(group=>group.id)).subscribe(groupUUID=>{this.router.navigate([(0,access_control_routing_paths.xl)(groupUUID)])})}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyEntryComponent2)(core.rXU(dso_name_service.f),core.rXU(group_data_service.GroupDataService),core.rXU(router.nX),core.rXU(router.Ix))};static#_2=this.\u0275cmp=core.VBU({type:ResourcePolicyEntryComponent2,selectors:[["tr","ds-resource-policy-entry",""]],inputs:{entry:"entry"},outputs:{toggleCheckbox:"toggleCheckbox"},standalone:!0,features:[core.aNF],attrs:_c0,decls:33,vars:26,consts:[[1,"text-center"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModelChange","id","ngModel"],[1,"custom-control-label",3,"for"],[1,"sr-only"],["scope","row"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"click","title"],["aria-hidden","true",1,"fas","fa-edit","fa-fw"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],["aria-hidden","true",1,"fas","fa-users","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"td",0)(1,"div",1)(2,"input",2),core.bIt("ngModelChange",function($event){return ctx.toggleCheckbox.emit($event)}),core.k0s(),core.j41(3,"label",3)(4,"span",4),core.EFF(5),core.nI1(6,"translate"),core.k0s()()()(),core.j41(7,"th",5),core.EFF(8),core.k0s(),core.j41(9,"td"),core.EFF(10),core.k0s(),core.j41(11,"td"),core.EFF(12),core.k0s(),core.j41(13,"td"),core.EFF(14),core.k0s(),core.j41(15,"td"),core.EFF(16),core.nI1(17,"async"),core.k0s(),core.j41(18,"td"),core.EFF(19),core.nI1(20,"async"),core.k0s(),core.j41(21,"td"),core.EFF(22),core.k0s(),core.j41(23,"td"),core.EFF(24),core.k0s(),core.j41(25,"td",0)(26,"div",6)(27,"button",7),core.nI1(28,"translate"),core.bIt("click",function(){return ctx.redirectToResourcePolicyEditPage()}),core.nrm(29,"i",8),core.k0s(),core.DNE(30,ResourcePolicyEntryComponent_button_30_Template,3,3,"button",9),core.nI1(31,"async"),core.nI1(32,"dsHasValue"),core.k0s()()),2&rf&&(core.R7$(2),core.Y8G("id",ctx.entry.id)("ngModel",ctx.entry.checked),core.R7$(),core.Y8G("for",ctx.entry.id),core.R7$(2),core.JRh(core.bMT(6,14,ctx.entry.checked?"resource-policies.table.headers.deselect":"resource-policies.table.headers.select")),core.R7$(3),core.SpI(" ",ctx.entry.id,"\n"),core.R7$(2),core.JRh(ctx.entry.policy.name),core.R7$(2),core.JRh(ctx.entry.policy.policyType),core.R7$(2),core.JRh(ctx.entry.policy.action),core.R7$(2),core.SpI(" ",core.bMT(17,16,ctx.epersonName$),"\n"),core.R7$(3),core.SpI(" ",core.bMT(20,18,ctx.groupName$),"\n"),core.R7$(3),core.JRh(ctx.formatDate(ctx.entry.policy.startDate)),core.R7$(2),core.JRh(ctx.formatDate(ctx.entry.policy.endDate)),core.R7$(3),core.Y8G("title",core.bMT(28,20,"resource-policies.table.headers.edit.policy")),core.R7$(3),core.Y8G("ngIf",core.bMT(32,24,core.bMT(31,22,ctx.groupName$))))},dependencies:[common.Jj,ngx_translate_core.h,ngx_translate_core.D9,fesm2022_forms.YN,fesm2022_forms.Zm,fesm2022_forms.BC,fesm2022_forms.vS,common.bT,has_value_pipe.a],encapsulation:2})}return ResourcePolicyEntryComponent2})();function ResourcePoliciesComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core.qex(0),core.EFF(1),core.bVm()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.SpI(" (",ctx_r0.resourceUUID,") ")}}function ResourcePoliciesComponent_span_17_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",12),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.workflow.tasks.generic.processing")," "))}function ResourcePoliciesComponent_span_19_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",13),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"resource-policies.delete.btn")," "))}function ResourcePoliciesComponent_tr_27_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"tr",14)(1,"th")(2,"div",15)(3,"input",16,0),core.bIt("change",function($event){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.selectAllCheckbox($event))}),core.k0s(),core.j41(5,"label",17)(6,"span",18),core.EFF(7),core.nI1(8,"translate"),core.k0s()()()(),core.j41(9,"th"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th"),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"th"),core.EFF(16),core.nI1(17,"translate"),core.k0s(),core.j41(18,"th"),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.j41(21,"th"),core.EFF(22),core.nI1(23,"translate"),core.k0s(),core.j41(24,"th"),core.EFF(25),core.nI1(26,"translate"),core.k0s(),core.j41(27,"th"),core.EFF(28),core.nI1(29,"translate"),core.k0s(),core.j41(30,"th"),core.EFF(31),core.nI1(32,"translate"),core.k0s(),core.j41(33,"th"),core.EFF(34),core.nI1(35,"translate"),core.k0s()()}if(2&rf){const selectAllBtn_r3=core.sdS(4),ctx_r0=core.XpG();core.R7$(3),core.Y8G("id","selectAll_"+ctx_r0.resourceUUID),core.R7$(2),core.Y8G("for","selectAll_"+ctx_r0.resourceUUID),core.R7$(2),core.JRh(core.bMT(8,12,selectAllBtn_r3.checked?"resource-policies.table.headers.deselect-all":"resource-policies.table.headers.select-all")),core.R7$(3),core.JRh(core.bMT(11,14,"resource-policies.table.headers.id")),core.R7$(3),core.JRh(core.bMT(14,16,"resource-policies.table.headers.name")),core.R7$(3),core.JRh(core.bMT(17,18,"resource-policies.table.headers.policyType")),core.R7$(3),core.JRh(core.bMT(20,20,"resource-policies.table.headers.action")),core.R7$(3),core.JRh(core.bMT(23,22,"resource-policies.table.headers.eperson")),core.R7$(3),core.JRh(core.bMT(26,24,"resource-policies.table.headers.group")),core.R7$(3),core.JRh(core.bMT(29,26,"resource-policies.table.headers.date.start")),core.R7$(3),core.JRh(core.bMT(32,28,"resource-policies.table.headers.date.end")),core.R7$(3),core.JRh(core.bMT(35,30,"resource-policies.table.headers.edit"))}}function ResourcePoliciesComponent_tbody_29_tr_1_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"tr",20),core.bIt("toggleCheckbox",function($event){const entry_r5=core.eBV(_r4).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.selectCheckbox(entry_r5,$event))}),core.k0s()}2&rf&&core.Y8G("entry",ctx.$implicit)}function ResourcePoliciesComponent_tbody_29_Template(rf,ctx){if(1&rf&&(core.j41(0,"tbody"),core.DNE(1,ResourcePoliciesComponent_tbody_29_tr_1_Template,1,1,"tr",19),core.nI1(2,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngForOf",core.bMT(2,1,ctx_r0.getResourcePolicies()))}}let ResourcePoliciesComponent=(()=>{class ResourcePoliciesComponent2{constructor(cdr,dsoNameService,ePersonService,groupService,notificationsService,requestService,resourcePolicyService,route,router2,translate){this.cdr=cdr,this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.groupService=groupService,this.notificationsService=notificationsService,this.requestService=requestService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router2,this.translate=translate,this.processingDelete$=new cjs.BehaviorSubject(!1),this.resourcePoliciesEntries$=new cjs.BehaviorSubject([]),this.subs=[]}ngOnInit(){this.isActive=!0,this.initResourcePolicyList()}canDelete(){return(0,cjs.from)(this.resourcePoliciesEntries$.value).pipe((0,operators.pb)(entry=>entry.checked),(0,operators.TS)((acc,value)=>[...acc,value],[]),(0,operators.Tj)(entries=>(0,empty_util.hj)(entries)),(0,operators.F)())}deleteSelectedResourcePolicies(){this.processingDelete$.next(!0);const policiesToDelete=this.resourcePoliciesEntries$.value.filter(entry=>entry.checked);this.subs.push((0,cjs.from)(policiesToDelete).pipe((0,operators.Hh)(entry=>this.resourcePolicyService.delete(entry.policy.id)),(0,operators.SQ)((acc,value)=>[...acc,value],[]),(0,operators.pb)(results=>results.length===policiesToDelete.length),(0,operators.s)(1)).subscribe(results=>{const failureResults=results.filter(result=>!result);(0,empty_util.Im)(failureResults)?this.notificationsService.success(null,this.translate.get("resource-policies.delete.success.content")):this.notificationsService.error(null,this.translate.get("resource-policies.delete.failure.content")),this.processingDelete$.next(!1)}))}getResourcePolicies(){return this.resourcePoliciesEntries$.asObservable()}initResourcePolicyList(){this.subs.push(this.resourcePolicyService.searchByResource(this.resourceUUID,null,!1,!0,(0,follow_link_config_model.s)("eperson"),(0,follow_link_config_model.s)("group")).pipe((0,operators.pb)(()=>this.isActive),(0,shared_operators.v7)()).subscribe(result=>{const entries=result.payload.page.map(policy=>({id:policy.id,policy,checked:!1}));this.resourcePoliciesEntries$.next(entries),this.cdr.detectChanges()}))}isProcessingDelete(){return this.processingDelete$.asObservable()}redirectToResourcePolicyCreatePage(){this.router.navigate(["./create"],{relativeTo:this.route,queryParams:{policyTargetId:this.resourceUUID,targetType:this.resourceType}})}selectAllCheckbox(event){const checked=event.target.checked;this.resourcePoliciesEntries$.value.forEach(entry=>entry.checked=checked)}selectCheckbox(policyEntry,checked){policyEntry.checked=checked}ngOnDestroy(){this.isActive=!1,this.resourcePoliciesEntries$=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||ResourcePoliciesComponent2)(core.rXU(core.gRc),core.rXU(dso_name_service.f),core.rXU(eperson_data_service.EPersonDataService),core.rXU(group_data_service.GroupDataService),core.rXU(notifications_service.I),core.rXU(request_service.B),core.rXU(resource_policy_data_service.ResourcePolicyDataService),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:ResourcePoliciesComponent2,selectors:[["ds-resource-policies"]],inputs:{resourceUUID:"resourceUUID",resourceType:"resourceType",resourceName:"resourceName"},standalone:!0,features:[core.aNF],decls:31,vars:34,consts:[["selectAllBtn",""],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],["colspan","10"],[1,"d-flex","justify-content-between","align-items-center","m-0"],[1,"text-info"],[4,"ngIf"],[1,"space-children-mr","flex-shrink-0"],[1,"btn","btn-danger","p-1",3,"click","disabled","title"],[1,"btn","btn-success","p-1",3,"click","disabled","title"],["aria-hidden","true",1,"fas","fa-plus"],["class","text-center",4,"ngIf"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],[1,"text-center"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"change","id"],[1,"custom-control-label",3,"for"],[1,"sr-only"],["ds-resource-policy-entry","",3,"entry","toggleCheckbox",4,"ngFor","ngForOf"],["ds-resource-policy-entry","",3,"toggleCheckbox","entry"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3)(5,"div",4)(6,"span"),core.EFF(7),core.nI1(8,"translate"),core.j41(9,"span",5),core.EFF(10),core.k0s(),core.DNE(11,ResourcePoliciesComponent_ng_container_11_Template,2,1,"ng-container",6),core.k0s(),core.j41(12,"div",7)(13,"button",8),core.nI1(14,"async"),core.nI1(15,"async"),core.nI1(16,"translate"),core.bIt("click",function(){return ctx.deleteSelectedResourcePolicies()}),core.DNE(17,ResourcePoliciesComponent_span_17_Template,4,3,"span",6),core.nI1(18,"async"),core.DNE(19,ResourcePoliciesComponent_span_19_Template,4,3,"span",6),core.nI1(20,"async"),core.k0s(),core.j41(21,"button",9),core.nI1(22,"async"),core.nI1(23,"translate"),core.bIt("click",function(){return ctx.redirectToResourcePolicyCreatePage()}),core.nrm(24,"i",10),core.EFF(25),core.nI1(26,"translate"),core.k0s()()()()(),core.DNE(27,ResourcePoliciesComponent_tr_27_Template,36,32,"tr",11),core.nI1(28,"async"),core.k0s(),core.DNE(29,ResourcePoliciesComponent_tbody_29_Template,3,3,"tbody",6),core.nI1(30,"async"),core.k0s()()),2&rf){let tmp_10_0,tmp_11_0;core.R7$(7),core.SpI(" ",core.bMT(8,12,"resource-policies.table.headers.title.for."+ctx.resourceType)," "),core.R7$(3),core.SpI(" ",ctx.resourceName," "),core.R7$(),core.Y8G("ngIf","item"!==ctx.resourceType),core.R7$(2),core.Y8G("disabled",!0!==core.bMT(14,14,ctx.canDelete())||core.bMT(15,16,ctx.isProcessingDelete()))("title",core.bMT(16,18,"resource-policies.delete.btn.title")),core.R7$(4),core.Y8G("ngIf",core.bMT(18,20,ctx.isProcessingDelete())),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(20,22,ctx.isProcessingDelete())),core.R7$(2),core.Y8G("disabled",core.bMT(22,24,ctx.isProcessingDelete()))("title",core.bMT(23,26,"resource-policies.add.for."+ctx.resourceType)),core.R7$(4),core.SpI(" ",core.bMT(26,28,"resource-policies.add.button")," "),core.R7$(2),core.Y8G("ngIf",(null==(tmp_10_0=core.bMT(28,30,ctx.getResourcePolicies()))?null:tmp_10_0.length)>0),core.R7$(2),core.Y8G("ngIf",(null==(tmp_11_0=core.bMT(30,32,ctx.getResourcePolicies()))?null:tmp_11_0.length)>0)}},dependencies:[ResourcePolicyEntryComponent,ngx_translate_core.h,ngx_translate_core.D9,common.bT,common.Jj,common.Sq],styles:["td[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:focus{box-shadow:none!important}"]})}return ResourcePoliciesComponent2})()},89705:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HasNoValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014);let HasNoValuePipe=(()=>{class HasNoValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.Tn)(value)}static#_=this.\u0275fac=function(t){return new(t||HasNoValuePipe2)};static#_2=this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasNoValue",type:HasNoValuePipe2,pure:!0,standalone:!0})}return HasNoValuePipe2})()},10585:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>HasValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014);let HasValuePipe=(()=>{class HasValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.a4)(value)}static#_=this.\u0275fac=function(t){return new(t||HasValuePipe2)};static#_2=this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasValue",type:HasValuePipe2,pure:!0,standalone:!0})}return HasValuePipe2})()},25702:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>UiSwitchComponent,z:()=>UiSwitchModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28955),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(84739);const _c0=["*"];function UiSwitchComponent_label_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"label",2)(1,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(3,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("checkedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("uncheckedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.uncheckedLabel)}}const UI_SWITCH_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.nKC("UI_SWITCH_OPTIONS"),UI_SWITCH_CONTROL_VALUE_ACCESSOR={provide:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.kq,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rfq)(()=>UiSwitchComponent),multi:!0};let UiSwitchComponent=(()=>{class UiSwitchComponent2{constructor(config={},cdr){this.cdr=cdr,this.change=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.changeEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.valueChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.onTouchedCallback=v=>{},this.onChangeCallback=v=>{},this.size=config&&config.size||"medium",this.color=config&&config.color,this.switchOffColor=config&&config.switchOffColor,this.switchColor=config&&config.switchColor,this.defaultBgColor=config&&config.defaultBgColor,this.defaultBoColor=config&&config.defaultBoColor,this.checkedLabel=config&&config.checkedLabel,this.uncheckedLabel=config&&config.uncheckedLabel,this.checkedTextColor=config&&config.checkedTextColor,this.uncheckedTextColor=config&&config.uncheckedTextColor}set checked(v){this._checked=!1!==v}get checked(){return this._checked}set disabled(v){this._disabled=!1!==v}get disabled(){return this._disabled}set reverse(v){this._reverse=!1!==v}get reverse(){return this._reverse}set loading(v){this._loading=!1!==v}get loading(){return this._loading}getColor(flag=""){return"borderColor"===flag?this.defaultBoColor:"switchColor"===flag?this.reverse?this.checked&&this.switchOffColor||this.switchColor:this.checked?this.switchColor:this.switchOffColor||this.switchColor:"checkedTextColor"===flag?this.reverse?this.uncheckedTextColor:this.checkedTextColor:"uncheckedTextColor"===flag?this.reverse?this.checkedTextColor:this.uncheckedTextColor:this.reverse?this.checked?this.defaultBgColor:this.color:this.checked?this.color:this.defaultBgColor}onClick(event){this.disabled||(this.checked=!this.checked,this.change.emit(this.checked),this.valueChange.emit(this.checked),this.changeEvent.emit(event),this.onChangeCallback(this.checked),this.onTouchedCallback(this.checked),this.cdr.markForCheck())}onToggle(event){this.disabled||(this.beforeChange?this._beforeChange=this.beforeChange.subscribe(confirm=>{confirm&&this.onClick(event)}):this.onClick(event))}writeValue(obj){obj!==this.checked&&(this.checked=!!obj),this.onChangeCallback(this.checked),this.cdr&&this.cdr.markForCheck()}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}ngOnDestroy(){this._beforeChange&&this._beforeChange.unsubscribe()}}return UiSwitchComponent2.\u0275fac=function(t){return new(t||UiSwitchComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(UI_SWITCH_OPTIONS,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_0__.gRc))},UiSwitchComponent2.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.VBU({type:UiSwitchComponent2,selectors:[["ui-switch"]],hostBindings:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.bIt("click",function($event){return ctx.onToggle($event)})},inputs:{size:"size",color:"color",switchOffColor:"switchOffColor",switchColor:"switchColor",defaultBgColor:"defaultBgColor",defaultBoColor:"defaultBoColor",checkedLabel:"checkedLabel",uncheckedLabel:"uncheckedLabel",checkedTextColor:"checkedTextColor",uncheckedTextColor:"uncheckedTextColor",beforeChange:"beforeChange",ariaLabel:"ariaLabel",checked:"checked",disabled:"disabled",reverse:"reverse",loading:"loading"},outputs:{change:"change",changeEvent:"changeEvent",valueChange:"valueChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jv_([UI_SWITCH_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:4,vars:21,consts:[["type","button","role","switch",1,"switch"],["class","switch-pane",4,"ngIf"],[1,"switch-pane"],[1,"switch-label-checked"],[1,"switch-label-unchecked"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"button",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.DNE(1,UiSwitchComponent_label_1_Template,5,8,"label",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(2,"small"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.SdG(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background-color",ctx.getColor())("border-color",ctx.getColor("borderColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.AVh("checked",ctx.checked)("disabled",ctx.disabled)("loading",ctx.loading)("switch-large","large"===ctx.size)("switch-medium","medium"===ctx.size)("switch-small","small"===ctx.size),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-checked",ctx.checked)("aria-label",ctx.ariaLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y8G("ngIf",ctx.checkedLabel||ctx.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background",ctx.getColor("switchColor")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.bT],encapsulation:2}),UiSwitchComponent2})(),UiSwitchModule=(()=>{class UiSwitchModule2{static forRoot(config){return{ngModule:UiSwitchModule2,providers:[{provide:UI_SWITCH_OPTIONS,useValue:config||{}}]}}}return UiSwitchModule2.\u0275fac=function(t){return new(t||UiSwitchModule2)},UiSwitchModule2.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.$C({type:UiSwitchModule2}),UiSwitchModule2.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.G2t({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.MD,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN]}),UiSwitchModule2})()}};