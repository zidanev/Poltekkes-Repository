exports.id=3905,exports.ids=[3905],exports.modules={22431:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>ItemRequestDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(59499),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);let ItemRequestDataService=(()=>{class ItemRequestDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService){super("itemrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getItemRequestEndpoint(){return this.halService.getEndpoint(this.linkPath)}getItemRequestEndpointByToken(token){return this.halService.getEndpoint(this.linkPath).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.pb)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.hj)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(href=>`${href}/${token}`))}requestACopy(itemRequest){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_5__.Qf(requestId,href,itemRequest);this.requestService.send(request)})).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)())}deny(token,email){return this.process(token,email,!1)}grant(token,email,suggestOpenAccess=!1){return this.process(token,email,!0,suggestOpenAccess)}process(token,email,grant,suggestOpenAccess=!1){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpointByToken(token).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.F)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.Lr;return headers=headers.append("Content-Type","application/json"),options.headers=headers,new _request_models__WEBPACK_IMPORTED_MODULE_5__.v_(requestId,endpointURL,JSON.stringify({acceptRequest:grant,responseMessage:email.message,subject:email.subject,suggestOpenAccess}),options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__.w$)(this.requestService)).subscribe(),this.rdbService.buildFromRequestUUID(requestId)}static#_=this.\u0275fac=function(t){return new(t||ItemRequestDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_6__.B),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.jDH({token:ItemRequestDataService2,factory:ItemRequestDataService2.\u0275fac,providedIn:"root"})}return ItemRequestDataService2})()},41499:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DenyRequestCopyComponent:()=>DenyRequestCopyComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41543),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91735),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94743),_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(22431),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(78911),_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(82656),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77028),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(32943),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10117),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45961),_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(50353),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(64247);function DenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_9__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_9__.j41(0,"div")(1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_9__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_9__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_9__.j41(4,"ds-email-request-copy",4),_angular_core__WEBPACK_IMPORTED_MODULE_9__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_9__.nI1(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_9__.bIt("send",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_9__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_9__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_9__.Njj(ctx_r1.deny($event))}),_angular_core__WEBPACK_IMPORTED_MODULE_9__.k0s()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_9__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_9__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_9__.bMT(3,3,"deny-request-copy.intro")),_angular_core__WEBPACK_IMPORTED_MODULE_9__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.Y8G("subject",_angular_core__WEBPACK_IMPORTED_MODULE_9__.bMT(5,5,ctx_r1.subject$))("message",_angular_core__WEBPACK_IMPORTED_MODULE_9__.bMT(6,7,ctx_r1.message$))}}function DenyRequestCopyComponent_div_0_ds_loading_5_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_9__.nrm(0,"ds-loading")}function DenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_9__.j41(0,"div",1)(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_9__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_9__.DNE(4,DenyRequestCopyComponent_div_0_div_4_Template,7,9,"div",3)(5,DenyRequestCopyComponent_div_0_ds_loading_5_Template,1,0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_9__.k0s()),2&rf){const itemRequestRD_r3=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_9__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_9__.bMT(3,3,"deny-request-copy.header")),_angular_core__WEBPACK_IMPORTED_MODULE_9__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_9__.Y8G("ngIf",itemRequestRD_r3&&itemRequestRD_r3.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_9__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_9__.Y8G("ngIf",!itemRequestRD_r3||(null==itemRequestRD_r3?null:itemRequestRD_r3.isLoading))}}let DenyRequestCopyComponent=(()=>{class DenyRequestCopyComponent2{constructor(router,route,authService,translateService,itemDataService,nameService,itemRequestService,notificationsService){this.router=router,this.route=route,this.authService=authService,this.translateService=translateService,this.itemDataService=itemDataService,this.nameService=nameService,this.itemRequestService=itemRequestService,this.notificationsService=notificationsService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(data=>data.request),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.qD)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_4__.QD)(this.router,this.authService));const msgParams$=(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this.itemRequestRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.ak)()),this.authService.getAuthenticatedUserFromStore()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(([itemRequest,user])=>this.itemDataService.findById(itemRequest.itemId).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(item=>{const uri=item.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:itemRequest.requestName,itemUrl:(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.hj)(uri)?uri:item.handle,itemName:this.nameService.getName(item),authorName:this.nameService.getName(user),authorEmail:user.email})}))));this.subject$=this.translateService.get("deny-request-copy.email.subject"),this.message$=msgParams$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(params=>this.translateService.get("deny-request-copy.email.message",params)))}deny(email){this.itemRequestRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(itemRequest=>this.itemRequestService.deny(itemRequest.token,email)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("deny-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("deny-request-copy.error"),rd.errorMessage)})}static#_=this.\u0275fac=function(t){return new(t||DenyRequestCopyComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_13__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_13__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_3__.W),_angular_core__WEBPACK_IMPORTED_MODULE_9__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.I))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_9__.VBU({type:DenyRequestCopyComponent2,selectors:[["ds-base-deny-request-copy"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_9__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"send","subject","message"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_9__.DNE(0,DenyRequestCopyComponent_div_0_Template,6,5,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_9__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_9__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_9__.bMT(1,1,ctx.itemRequestRD$))},dependencies:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__.r,_angular_common__WEBPACK_IMPORTED_MODULE_16__.bT,_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_8__.r,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__.v,_angular_common__WEBPACK_IMPORTED_MODULE_16__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__.D9]})}return DenyRequestCopyComponent2})()},50353:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>ThemedEmailRequestCopyComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),src_app_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31260);const _c0=["*"];function ThemedEmailRequestCopyComponent_ng_template_0_Template(rf,ctx){}let ThemedEmailRequestCopyComponent=(()=>{class ThemedEmailRequestCopyComponent2 extends src_app_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{constructor(){super(...arguments),this.send=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.bkB,this.inAndOutputNames=["send","subject","message"]}getComponentName(){return"EmailRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(16292)(`./${themeName}/app/request-copy/email-request-copy/email-request-copy.component`)}importUnthemedComponent(){return __webpack_require__.e(8146).then(__webpack_require__.bind(__webpack_require__,8146))}static#_=this.\u0275fac=(()=>{let \u0275ThemedEmailRequestCopyComponent_BaseFactory;return function(t){return(\u0275ThemedEmailRequestCopyComponent_BaseFactory||(\u0275ThemedEmailRequestCopyComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.xGo(ThemedEmailRequestCopyComponent2)))(t||ThemedEmailRequestCopyComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.VBU({type:ThemedEmailRequestCopyComponent2,selectors:[["ds-email-request-copy"]],inputs:{subject:"subject",message:"message"},outputs:{send:"send"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_1__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(0,ThemedEmailRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s())},encapsulation:2})}return ThemedEmailRequestCopyComponent2})()},85337:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{GrantRequestCopyComponent:()=>GrantRequestCopyComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84739),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(28955),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41543),_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22431),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(78911),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(32943),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10117),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(45961),_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(50353),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(64247);function GrantRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_7__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(0,"div")(1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(4,"ds-email-request-copy",4),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.bIt("send",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_7__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_7__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_7__.Njj(ctx_r1.grant($event))}),_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(7,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(10,"form",5)(11,"div",6)(12,"input",7),_angular_core__WEBPACK_IMPORTED_MODULE_7__.mxI("ngModelChange",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_7__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_7__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_7__.DH7(ctx_r1.suggestOpenAccess,$event)||(ctx_r1.suggestOpenAccess=$event),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Njj($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(13,"label",8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.EFF(14),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(15,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s()()()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_7__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(3,6,"grant-request-copy.intro")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y8G("subject",_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(5,8,ctx_r1.subject$))("message",_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(6,10,ctx_r1.message$)),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_7__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(9,12,"grant-deny-request-copy.email.permissions.info")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R50("ngModel",ctx_r1.suggestOpenAccess),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(15,14,"grant-deny-request-copy.email.permissions.label"))}}function GrantRequestCopyComponent_div_0_ds_loading_5_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_7__.nrm(0,"ds-loading")}function GrantRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.j41(0,"div",1)(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.DNE(4,GrantRequestCopyComponent_div_0_div_4_Template,16,16,"div",3)(5,GrantRequestCopyComponent_div_0_ds_loading_5_Template,1,0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_7__.k0s()),2&rf){const itemRequestRD_r3=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(3,3,"grant-request-copy.header")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y8G("ngIf",itemRequestRD_r3&&itemRequestRD_r3.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_7__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y8G("ngIf",!itemRequestRD_r3||(null==itemRequestRD_r3?null:itemRequestRD_r3.isLoading))}}let GrantRequestCopyComponent=(()=>{class GrantRequestCopyComponent2{constructor(router,route,authService,translateService,itemRequestService,notificationsService){this.router=router,this.route=route,this.authService=authService,this.translateService=translateService,this.itemRequestService=itemRequestService,this.notificationsService=notificationsService,this.suggestOpenAccess=!1}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(data=>data.request),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_2__.QD)(this.router,this.authService)),this.subject$=this.translateService.get("grant-request-copy.email.subject")}grant(email){this.itemRequestRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.nx)(itemRequest=>this.itemRequestService.grant(itemRequest.token,email,this.suggestOpenAccess)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("grant-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("grant-request-copy.error"),rd.errorMessage)})}static#_=this.\u0275fac=function(t){return new(t||GrantRequestCopyComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR),_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_core_data_item_request_data_service__WEBPACK_IMPORTED_MODULE_1__.W),_angular_core__WEBPACK_IMPORTED_MODULE_7__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.I))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_7__.VBU({type:GrantRequestCopyComponent2,selectors:[["ds-base-grant-request-copy"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_7__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"send","subject","message"],[1,"mb-3"],[1,"form-check"],["type","checkbox","value","","id","permissions","name","permissions",1,"form-check-input",3,"ngModelChange","ngModel"],["for","permissions",1,"form-check-label"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.DNE(0,GrantRequestCopyComponent_div_0_Template,6,5,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_7__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_7__.bMT(1,1,ctx.itemRequestRD$))},dependencies:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_11__.r,_angular_common__WEBPACK_IMPORTED_MODULE_12__.bT,_email_request_copy_themed_email_request_copy_component__WEBPACK_IMPORTED_MODULE_6__.r,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Zm,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.vS,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.cV,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_4__.v,_angular_common__WEBPACK_IMPORTED_MODULE_12__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9]})}return GrantRequestCopyComponent2})()},83905:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var themed_component=__webpack_require__(31260),core=(__webpack_require__(41499),__webpack_require__(68014));const _c0=["*"];function ThemedDenyRequestCopyComponent_ng_template_0_Template(rf,ctx){}let ThemedDenyRequestCopyComponent=(()=>{class ThemedDenyRequestCopyComponent2 extends themed_component.J{getComponentName(){return"DenyRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(67026)(`./${themeName}/app/request-copy/deny-request-copy/deny-request-copy.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,41499))}static#_=this.\u0275fac=(()=>{let \u0275ThemedDenyRequestCopyComponent_BaseFactory;return function(t){return(\u0275ThemedDenyRequestCopyComponent_BaseFactory||(\u0275ThemedDenyRequestCopyComponent_BaseFactory=core.xGo(ThemedDenyRequestCopyComponent2)))(t||ThemedDenyRequestCopyComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedDenyRequestCopyComponent2,selectors:[["ds-deny-request-copy"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedDenyRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedDenyRequestCopyComponent2})();var common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),operators=__webpack_require__(10743),auth_service=__webpack_require__(41543),dso_name_service=__webpack_require__(91735),item_data_service=__webpack_require__(94743),authorized_operators=__webpack_require__(78911),shared_operators=__webpack_require__(82656),item_page_routing_paths=__webpack_require__(63254),themed_loading_component=__webpack_require__(32943),var_directive=__webpack_require__(45961),app_routing_paths=__webpack_require__(45930),url_combiner=__webpack_require__(1828);function getRequestCopyRoute(token){return new url_combiner.t((0,app_routing_paths.EI)(),token).toString()}const grant_deny_request_copy_component_c0=(a0,a1)=>({url:a0,name:a1});function GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.nrm(1,"p",5),core.nI1(2,"async"),core.nI1(3,"async"),core.nI1(4,"translate"),core.j41(5,"p"),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"div",6)(9,"a",7),core.nI1(10,"translate"),core.nI1(11,"async"),core.EFF(12),core.nI1(13,"translate"),core.k0s(),core.j41(14,"a",8),core.nI1(15,"translate"),core.nI1(16,"async"),core.EFF(17),core.nI1(18,"translate"),core.k0s()()()),2&rf){const ctx_r0=core.XpG(3);core.R7$(),core.Y8G("innerHTML",core.i5U(4,12,"grant-deny-request-copy.intro1",core.l_i(29,grant_deny_request_copy_component_c0,core.bMT(2,8,ctx_r0.itemUrl$),core.bMT(3,10,ctx_r0.itemName$))),core.npT),core.R7$(5),core.JRh(core.bMT(7,15,"grant-deny-request-copy.intro2")),core.R7$(3),core.FS9("title",core.bMT(10,17,"grant-deny-request-copy.grant")),core.Y8G("routerLink",core.bMT(11,19,ctx_r0.grantRoute$)),core.R7$(3),core.SpI(" ",core.bMT(13,21,"grant-deny-request-copy.grant")," "),core.R7$(2),core.FS9("title",core.bMT(15,23,"grant-deny-request-copy.deny")),core.Y8G("routerLink",core.bMT(16,25,ctx_r0.denyRoute$)),core.R7$(3),core.SpI(" ",core.bMT(18,27,"grant-deny-request-copy.deny")," ")}}function GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",9)(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"p",10)(5,"a",11),core.EFF(6),core.nI1(7,"translate"),core.k0s()()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,2,"grant-deny-request-copy.processed")),core.R7$(4),core.JRh(core.bMT(7,4,"grant-deny-request-copy.home-page")))}function GrantDenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template,19,32,"div",3)(2,GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template,8,6,"div",4),core.k0s()),2&rf){const itemRequestRD_r2=core.XpG().ngVar;core.R7$(),core.Y8G("ngIf",!itemRequestRD_r2.payload.decisionDate),core.R7$(),core.Y8G("ngIf",itemRequestRD_r2.payload.decisionDate)}}function GrantDenyRequestCopyComponent_div_0_ds_loading_5_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function GrantDenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"h3",2),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,GrantDenyRequestCopyComponent_div_0_div_4_Template,3,2,"div",3)(5,GrantDenyRequestCopyComponent_div_0_ds_loading_5_Template,1,0,"ds-loading",3),core.k0s()),2&rf){const itemRequestRD_r2=ctx.ngVar;core.R7$(2),core.JRh(core.bMT(3,3,"grant-deny-request-copy.header")),core.R7$(2),core.Y8G("ngIf",itemRequestRD_r2&&itemRequestRD_r2.hasSucceeded),core.R7$(),core.Y8G("ngIf",!itemRequestRD_r2||(null==itemRequestRD_r2?null:itemRequestRD_r2.isLoading))}}let GrantDenyRequestCopyComponent=(()=>{class GrantDenyRequestCopyComponent2{constructor(router2,route,authService,itemDataService,nameService){this.router=router2,this.route=route,this.authService=authService,this.itemDataService=itemDataService,this.nameService=nameService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,operators.Tj)(data=>data.request),(0,shared_operators.qD)(),(0,authorized_operators.QD)(this.router,this.authService)),this.itemRD$=this.itemRequestRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(itemRequest=>this.itemDataService.findById(itemRequest.itemId))),this.itemName$=this.itemRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>this.nameService.getName(item))),this.itemUrl$=this.itemRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>(0,item_page_routing_paths._o)(item))),this.denyRoute$=this.itemRequestRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(itemRequest=>function getRequestCopyDenyRoute(token){return new url_combiner.t(getRequestCopyRoute(token),"deny").toString()}(itemRequest.token))),this.grantRoute$=this.itemRequestRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(itemRequest=>function getRequestCopyGrantRoute(token){return new url_combiner.t(getRequestCopyRoute(token),"grant").toString()}(itemRequest.token)))}static#_=this.\u0275fac=function(t){return new(t||GrantDenyRequestCopyComponent2)(core.rXU(router.Ix),core.rXU(router.nX),core.rXU(auth_service.uR),core.rXU(item_data_service.ItemDataService),core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:GrantDenyRequestCopyComponent2,selectors:[["ds-grant-deny-request-copy"]],standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],["class","processed-message",4,"ngIf"],[3,"innerHTML"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"routerLink","title"],[1,"btn","btn-outline-danger",3,"routerLink","title"],[1,"processed-message"],[1,"text-center"],["routerLink","/home",1,"btn","btn-primary"]],template:function(rf,ctx){1&rf&&(core.DNE(0,GrantDenyRequestCopyComponent_div_0_Template,6,5,"div",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.itemRequestRD$))},dependencies:[var_directive.r,common.bT,router.Wk,themed_loading_component.v,common.Jj,ngx_translate_core.h,ngx_translate_core.D9]})}return GrantDenyRequestCopyComponent2})();__webpack_require__(85337);const themed_grant_request_copy_component_c0=["*"];function ThemedGrantRequestCopyComponent_ng_template_0_Template(rf,ctx){}let ThemedGrantRequestCopyComponent=(()=>{class ThemedGrantRequestCopyComponent2 extends themed_component.J{getComponentName(){return"GrantRequestCopyComponent"}importThemedComponent(themeName){return __webpack_require__(63572)(`./${themeName}/app/request-copy/grant-request-copy/grant-request-copy.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,85337))}static#_=this.\u0275fac=(()=>{let \u0275ThemedGrantRequestCopyComponent_BaseFactory;return function(t){return(\u0275ThemedGrantRequestCopyComponent_BaseFactory||(\u0275ThemedGrantRequestCopyComponent_BaseFactory=core.xGo(ThemedGrantRequestCopyComponent2)))(t||ThemedGrantRequestCopyComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedGrantRequestCopyComponent2,selectors:[["ds-grant-request-copy"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_grant_request_copy_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedGrantRequestCopyComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedGrantRequestCopyComponent2})();var item_request_data_service=__webpack_require__(22431);const ROUTES=[{path:":token",resolve:{request:(route,state,itemRequestDataService=(0,core.WQX)(item_request_data_service.W))=>itemRequestDataService.findById(route.params.token).pipe((0,shared_operators.qD)())},children:[{path:"",component:GrantDenyRequestCopyComponent},{path:"deny",component:ThemedDenyRequestCopyComponent},{path:"grant",component:ThemedGrantRequestCopyComponent}]}]},67026:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/deny-request-copy/deny-request-copy.component":[90834,834]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=67026,module.exports=webpackAsyncContext},16292:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/email-request-copy/email-request-copy.component":[85828,5828]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=16292,module.exports=webpackAsyncContext},63572:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/request-copy/grant-request-copy/grant-request-copy.component":[59332,9332]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=63572,module.exports=webpackAsyncContext}};