"use strict";exports.id=475,exports.ids=[475,7441],exports.modules={37441:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProcessDataService:()=>ProcessDataService,TIMER_FACTORY:()=>TIMER_FACTORY});var _angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(10743),src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19896),_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(82656),_base_delete_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(43626),_base_find_all_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(89480),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68134),_base_search_data__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(19399),_bitstream_data_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(36505),_request_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(72744);const TIMER_FACTORY=new _angular_core__WEBPACK_IMPORTED_MODULE_12__.nKC("timer",{providedIn:"root",factory:()=>setTimeout});let ProcessDataService=(()=>{class ProcessDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_8__.W{constructor(requestService,rdbService,objectCache,halService,bitstreamDataService,notificationsService,zone,timer){super("processes",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.bitstreamDataService=bitstreamDataService,this.notificationsService=notificationsService,this.zone=zone,this.timer=timer,this.activelyBeingPolled=new Map,this.subs=new Map,this.findAllData=new _base_find_all_data__WEBPACK_IMPORTED_MODULE_7__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _base_delete_data__WEBPACK_IMPORTED_MODULE_6__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new _base_search_data__WEBPACK_IMPORTED_MODULE_9__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}static statusIs(process,status){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(process)&&process.processStatus===status}static hasCompletedOrFailed(process){return ProcessDataService2.statusIs(process,src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__.K.COMPLETED)||ProcessDataService2.statusIs(process,src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__.K.FAILED)}getFilesEndpoint(processId){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.nx)(href=>this.halService.getEndpoint("files",`${href}/${processId}`)))}getFiles(processId){const href$=this.getFilesEndpoint(processId);return this.bitstreamDataService.findListByHref(href$)}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.searchData.searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}autoRefreshingSearchBy(id,searchMethod,options,pollingIntervalInMs=5e3,...linksToFollow){const result$=this.searchBy(searchMethod,options,!0,!0,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.bD)()),sub=result$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.pb)(()=>!this.activelyBeingPolled.has(id))).subscribe(processListRd=>{this.clearCurrentTimeout(id);const nextTimeout=this.timer(()=>{this.activelyBeingPolled.delete(id),this.requestService.setStaleByHrefSubstring(processListRd.payload._links.self.href)},pollingIntervalInMs);this.activelyBeingPolled.set(id,nextTimeout)});return this.subs.set(id,sub),result$}stopAutoRefreshing(id){this.clearCurrentTimeout(id),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(this.subs.get(id))&&(this.subs.get(id).unsubscribe(),this.subs.delete(id))}delete(objectId,copyVirtualMetadata){return this.deleteData.delete(objectId,copyVirtualMetadata)}deleteByHref(href,copyVirtualMetadata){return this.deleteData.deleteByHref(href,copyVirtualMetadata)}clearCurrentTimeout(id){const timeout=this.activelyBeingPolled.get(id);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(timeout)&&clearTimeout(timeout),this.activelyBeingPolled.delete(id)}autoRefreshUntilCompletion(processId,pollingIntervalInMs=5e3,...linksToFollow){const process$=this.findById(processId,!0,!0,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.bD)()),sub=process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.pb)(processRD=>!ProcessDataService2.hasCompletedOrFailed(processRD.payload)&&!this.activelyBeingPolled.has(processId))).subscribe(processRD=>{if(this.clearCurrentTimeout(processId),processRD.hasSucceeded){const nextTimeout=this.timer(()=>{this.activelyBeingPolled.delete(processId),this.invalidateByHref(processRD.payload._links.self.href)},pollingIntervalInMs);this.activelyBeingPolled.set(processId,nextTimeout)}});return this.subs.set(processId,sub),process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.I6)(processRD=>ProcessDataService2.hasCompletedOrFailed(processRD.payload))).subscribe(()=>{this.stopAutoRefreshing(processId)}),process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.F)((previous,current)=>previous.payload?.processStatus===current.payload?.processStatus))}static#_=this.\u0275fac=function(t){return new(t||ProcessDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_11__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_2__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_3__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_4__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_bitstream_data_service__WEBPACK_IMPORTED_MODULE_10__.BitstreamDataService),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.I),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_angular_core__WEBPACK_IMPORTED_MODULE_12__.SKi),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(TIMER_FACTORY))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:ProcessDataService2,factory:ProcessDataService2.\u0275fac,providedIn:"root"})}return ProcessDataService2})()},80475:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var authenticated_guard=__webpack_require__(98234),i18n_breadcrumb_resolver=__webpack_require__(21870),common=__webpack_require__(84739),core=__webpack_require__(68014),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),auth_service=__webpack_require__(41543),dso_name_service=__webpack_require__(91735),bitstream_data_service=__webpack_require__(36505),process_data_service=__webpack_require__(37441),authorized_operators=__webpack_require__(78911),dspace_object_model=__webpack_require__(48168),shared_operators=__webpack_require__(82656),url_combiner=__webpack_require__(1828),alert_type=__webpack_require__(82555),empty_util=__webpack_require__(77028),themed_file_download_link_component=__webpack_require__(99565),themed_loading_component=__webpack_require__(32943),notifications_service=__webpack_require__(10117),file_size_pipe=__webpack_require__(49192),has_no_value_pipe=__webpack_require__(89705),var_directive=__webpack_require__(45961),follow_link_config_model=__webpack_require__(32181);const PROCESS_PAGE_FOLLOW_LINKS=[(0,follow_link_config_model.s)("files")];var process_page_routing_paths=__webpack_require__(33549),process_status_model=__webpack_require__(19896);const _c0=["*"];let ProcessDetailFieldComponent=(()=>{class ProcessDetailFieldComponent2{static#_=this.\u0275fac=function(t){return new(t||ProcessDetailFieldComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ProcessDetailFieldComponent2,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},standalone:!0,features:[core.aNF],ngContentSelectors:_c0,decls:4,vars:3,consts:[[1,"h3","mt-4"]],template:function(rf,ctx){1&rf&&(core.NAR(),core.j41(0,"h2",0),core.EFF(1),core.nI1(2,"translate"),core.k0s(),core.SdG(3)),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,ctx.title)))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}return ProcessDetailFieldComponent2})();var http=__webpack_require__(38068),ng_bootstrap=__webpack_require__(71781);const process_detail_component_c0=(a0,a1)=>({id:a0,name:a1}),_c1=a0=>({id:a0});function ProcessDetailComponent_div_0_div_6_Template(rf,ctx){1&rf&&(core.j41(0,"div",20),core.EFF(1),core.nI1(2,"translate"),core.nrm(3,"i",21),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.detail.refreshing")," "))}function ProcessDetailComponent_div_0_ds_process_detail_field_11_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.EFF(1),core.k0s()),2&rf){const argument_r1=ctx.$implicit;core.R7$(),core.Lme("",null==argument_r1?null:argument_r1.name," ",null==argument_r1?null:argument_r1.value,"")}}function ProcessDetailComponent_div_0_ds_process_detail_field_11_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",22),core.DNE(1,ProcessDetailComponent_div_0_ds_process_detail_field_11_div_1_Template,2,2,"div",23),core.k0s()),2&rf){const process_r2=core.XpG().ngIf;core.Y8G("title","process.detail.arguments"),core.R7$(),core.Y8G("ngForOf",null==process_r2?null:process_r2.parameters)}}function ProcessDetailComponent_div_0_div_12_ds_process_detail_field_1_ds_file_download_link_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-file-download-link",28)(1,"span"),core.EFF(2),core.k0s(),core.j41(3,"span"),core.EFF(4),core.nI1(5,"dsFileSize"),core.k0s()()),2&rf){const file_r3=ctx.$implicit,ctx_r3=core.XpG(4);core.Y8G("bitstream",file_r3),core.R7$(2),core.JRh(ctx_r3.getFileName(file_r3)),core.R7$(2),core.SpI("(",core.bMT(5,3,null==file_r3?null:file_r3.sizeBytes),")")}}function ProcessDetailComponent_div_0_div_12_ds_process_detail_field_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",25)(1,"div",26),core.DNE(2,ProcessDetailComponent_div_0_div_12_ds_process_detail_field_1_ds_file_download_link_2_Template,6,5,"ds-file-download-link",27),core.k0s()()),2&rf){const files_r5=core.XpG().ngVar;core.Y8G("title","process.detail.output-files"),core.R7$(2),core.Y8G("ngForOf",files_r5)}}function ProcessDetailComponent_div_0_div_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ProcessDetailComponent_div_0_div_12_ds_process_detail_field_1_Template,3,2,"ds-process-detail-field",24),core.k0s()),2&rf){const files_r5=ctx.ngVar;core.R7$(),core.Y8G("ngIf",files_r5&&(null==files_r5?null:files_r5.length)>0)}}function ProcessDetailComponent_div_0_ds_process_detail_field_14_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",29),core.nI1(1,"translate"),core.j41(2,"div"),core.EFF(3),core.nI1(4,"date"),core.k0s()()),2&rf){const process_r2=core.XpG().ngIf,ctx_r3=core.XpG();core.Y8G("title",core.bMT(1,2,"process.detail.start-time")),core.R7$(3),core.JRh(core.brH(4,4,process_r2.startTime,ctx_r3.dateFormat,"UTC"))}}function ProcessDetailComponent_div_0_ds_process_detail_field_15_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",30),core.nI1(1,"translate"),core.j41(2,"div"),core.EFF(3),core.nI1(4,"date"),core.k0s()()),2&rf){const process_r2=core.XpG().ngIf,ctx_r3=core.XpG();core.Y8G("title",core.bMT(1,2,"process.detail.end-time")),core.R7$(3),core.JRh(core.brH(4,4,process_r2.endTime,ctx_r3.dateFormat,"UTC"))}}function ProcessDetailComponent_div_0_ds_process_detail_field_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",31),core.nI1(1,"translate"),core.j41(2,"div"),core.EFF(3),core.k0s()()),2&rf){const process_r2=core.XpG().ngIf;core.Y8G("title",core.bMT(1,2,"process.detail.status")),core.R7$(3),core.JRh(process_r2.processStatus)}}function ProcessDetailComponent_div_0_ds_process_detail_field_17_button_1_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"button",37),core.bIt("click",function(){core.eBV(_r6);const ctx_r3=core.XpG(3);return core.Njj(ctx_r3.showProcessOutputLogs())}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.detail.logs.button")," "))}function ProcessDetailComponent_div_0_ds_process_detail_field_17_ds_loading_2_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",38),core.nI1(1,"translate")),2&rf&&core.FS9("message",core.bMT(1,1,"process.detail.logs.loading"))}function ProcessDetailComponent_div_0_ds_process_detail_field_17_pre_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"pre",39),core.EFF(1),core.nI1(2,"async"),core.k0s()),2&rf){const ctx_r3=core.XpG(3);core.R7$(),core.JRh(core.bMT(2,1,ctx_r3.outputLogs$))}}function ProcessDetailComponent_div_0_ds_process_detail_field_17_p_6_Template(rf,ctx){1&rf&&(core.j41(0,"p",40),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.detail.logs.none")," "))}function ProcessDetailComponent_div_0_ds_process_detail_field_17_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-process-detail-field",32),core.DNE(1,ProcessDetailComponent_div_0_ds_process_detail_field_17_button_1_Template,3,3,"button",33)(2,ProcessDetailComponent_div_0_ds_process_detail_field_17_ds_loading_2_Template,2,3,"ds-loading",34),core.nI1(3,"async"),core.DNE(4,ProcessDetailComponent_div_0_ds_process_detail_field_17_pre_4_Template,3,3,"pre",35),core.nI1(5,"async"),core.DNE(6,ProcessDetailComponent_div_0_ds_process_detail_field_17_p_6_Template,3,3,"p",36),core.nI1(7,"async"),core.nI1(8,"async"),core.nI1(9,"dsHasNoValue"),core.nI1(10,"async"),core.k0s()),2&rf){let tmp_7_0,tmp_8_0;const process_r2=core.XpG().ngIf,ctx_r3=core.XpG();core.Y8G("title","process.detail.output"),core.R7$(),core.Y8G("ngIf",!ctx_r3.showOutputLogs&&void 0!==(null==process_r2||null==process_r2._links||null==process_r2._links.output?null:process_r2._links.output.href)),core.R7$(),core.Y8G("ngIf",core.bMT(3,5,ctx_r3.retrievingOutputLogs$)),core.R7$(2),core.Y8G("ngIf",ctx_r3.showOutputLogs&&(null==(tmp_7_0=core.bMT(5,7,ctx_r3.outputLogs$))?null:tmp_7_0.length)>0),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(7,9,ctx_r3.retrievingOutputLogs$)&&ctx_r3.showOutputLogs&&core.bMT(9,13,core.bMT(8,11,ctx_r3.outputLogs$))||0===(null==(tmp_8_0=core.bMT(10,15,ctx_r3.outputLogs$))?null:tmp_8_0.length)||!process_r2._links.output)}}function ProcessDetailComponent_div_0_button_23_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"button",41),core.bIt("click",function(){core.eBV(_r7);const ctx_r3=core.XpG(2),deleteModal_r8=core.sdS(3);return core.Njj(ctx_r3.openDeleteModal(deleteModal_r8))}),core.nrm(1,"i",42),core.EFF(2),core.nI1(3,"translate"),core.k0s()}2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,1,"process.detail.delete.button")," "))}function ProcessDetailComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.DNE(6,ProcessDetailComponent_div_0_div_6_Template,4,3,"div",6),core.nI1(7,"async"),core.k0s(),core.j41(8,"ds-process-detail-field",7)(9,"div"),core.EFF(10),core.k0s()(),core.DNE(11,ProcessDetailComponent_div_0_ds_process_detail_field_11_Template,2,2,"ds-process-detail-field",8)(12,ProcessDetailComponent_div_0_div_12_Template,2,1,"div",9),core.nI1(13,"async"),core.DNE(14,ProcessDetailComponent_div_0_ds_process_detail_field_14_Template,5,8,"ds-process-detail-field",10)(15,ProcessDetailComponent_div_0_ds_process_detail_field_15_Template,5,8,"ds-process-detail-field",11)(16,ProcessDetailComponent_div_0_ds_process_detail_field_16_Template,4,4,"ds-process-detail-field",12)(17,ProcessDetailComponent_div_0_ds_process_detail_field_17_Template,11,17,"ds-process-detail-field",13),core.j41(18,"ds-process-detail-field",14)(19,"button",15),core.nrm(20,"i",16),core.EFF(21),core.nI1(22,"translate"),core.k0s(),core.DNE(23,ProcessDetailComponent_div_0_button_23_Template,4,3,"button",17),core.k0s(),core.j41(24,"div",18)(25,"a",19),core.EFF(26),core.nI1(27,"translate"),core.k0s()()()),2&rf){let tmp_8_0;const process_r2=ctx.ngIf,ctx_r3=core.XpG();core.R7$(4),core.SpI(" ",core.i5U(5,16,"process.detail.title",core.l_i(27,process_detail_component_c0,null==process_r2?null:process_r2.processId,null==process_r2?null:process_r2.scriptName))," "),core.R7$(2),core.Y8G("ngIf",core.bMT(7,19,ctx_r3.isRefreshing$)),core.R7$(2),core.Y8G("title","process.detail.script"),core.R7$(2),core.JRh(null==process_r2?null:process_r2.scriptName),core.R7$(),core.Y8G("ngIf",(null==process_r2?null:process_r2.parameters)&&(null==process_r2||null==process_r2.parameters?null:process_r2.parameters.length)>0),core.R7$(),core.Y8G("ngVar",null==(tmp_8_0=core.bMT(13,21,ctx_r3.filesRD$))||null==tmp_8_0.payload?null:tmp_8_0.payload.page),core.R7$(2),core.Y8G("ngIf",process_r2&&process_r2.startTime),core.R7$(),core.Y8G("ngIf",process_r2&&process_r2.endTime),core.R7$(),core.Y8G("ngIf",process_r2&&process_r2.processStatus),core.R7$(),core.Y8G("ngIf",ctx_r3.isProcessFinished(process_r2)),core.R7$(),core.Y8G("title","process.detail.actions"),core.R7$(),core.Y8G("queryParams",core.eq3(30,_c1,null==process_r2?null:process_r2.processId)),core.R7$(2),core.JRh(core.bMT(22,23,"process.detail.create")),core.R7$(2),core.Y8G("ngIf",ctx_r3.isProcessFinished(process_r2)),core.R7$(2),core.Y8G("routerLink","/processes"),core.R7$(),core.JRh(core.bMT(27,25,"process.detail.back"))}}function ProcessDetailComponent_ng_template_2_div_0_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div")(1,"div",44)(2,"div")(3,"h4"),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"button",45),core.bIt("click",function(){core.eBV(_r9);const ctx_r3=core.XpG(2);return core.Njj(ctx_r3.closeModal())}),core.j41(7,"span",46),core.EFF(8,"\xd7"),core.k0s()()(),core.j41(9,"div",47)(10,"div"),core.EFF(11),core.nI1(12,"translate"),core.k0s(),core.j41(13,"div",48)(14,"button",49),core.bIt("click",function(){core.eBV(_r9);const ctx_r3=core.XpG(2);return core.Njj(ctx_r3.closeModal())}),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"button",50),core.bIt("click",function(){const process_r10=core.eBV(_r9).ngIf,ctx_r3=core.XpG(2);return core.Njj(ctx_r3.deleteProcess(process_r10))}),core.EFF(18),core.nI1(19,"translate"),core.k0s()()()()}2&rf&&(core.R7$(4),core.JRh(core.bMT(5,4,"process.detail.delete.header")),core.R7$(7),core.JRh(core.bMT(12,6,"process.detail.delete.body")),core.R7$(4),core.JRh(core.bMT(16,8,"process.detail.delete.cancel")),core.R7$(3),core.SpI("",core.bMT(19,10,"process.detail.delete.confirm")," "))}function ProcessDetailComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(core.DNE(0,ProcessDetailComponent_ng_template_2_div_0_Template,20,12,"div",43),core.nI1(1,"async")),2&rf){let tmp_2_0;const ctx_r3=core.XpG();core.Y8G("ngIf",null==(tmp_2_0=core.bMT(1,1,ctx_r3.processRD$))?null:tmp_2_0.payload)}}let ProcessDetailComponent=(()=>{class ProcessDetailComponent2{constructor(platformId,route,router2,processService,bitstreamDataService,nameService,zone,authService,http2,modalService,notificationsService,translateService){this.platformId=platformId,this.route=route,this.router=router2,this.processService=processService,this.bitstreamDataService=bitstreamDataService,this.nameService=nameService,this.zone=zone,this.authService=authService,this.http=http2,this.modalService=modalService,this.notificationsService=notificationsService,this.translateService=translateService,this.AlertTypeEnum=alert_type.v,this.outputLogs$=new cjs.BehaviorSubject(void 0),this.showOutputLogs=!1,this.retrievingOutputLogs$=new cjs.BehaviorSubject(!1),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.processRD$=this.route.data.pipe((0,operators.nx)(data=>(0,common.UE)(this.platformId)?(this.autoRefreshingID=this.route.snapshot.params.id,this.processService.autoRefreshUntilCompletion(this.autoRefreshingID,5e3,...PROCESS_PAGE_FOLLOW_LINKS)):[data.process]),(0,operators.pb)(()=>!this.isDeleting),(0,authorized_operators.QD)(this.router,this.authService)),this.isRefreshing$=this.processRD$.pipe((0,operators.I6)(processRD=>process_data_service.ProcessDataService.hasCompletedOrFailed(processRD.payload)),(0,operators.Tj)(()=>!1),(0,operators.ql)(!0)),this.filesRD$=this.processRD$.pipe((0,shared_operators.Hz)(),(0,operators.nx)(process=>process.files))}ngOnDestroy(){(0,empty_util.a4)(this.autoRefreshingID)&&this.processService.stopAutoRefreshing(this.autoRefreshingID)}getFileName(bitstream){return bitstream instanceof dspace_object_model.M?this.nameService.getName(bitstream):"unknown"}showProcessOutputLogs(){this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const processOutputRD$=this.processRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(process=>this.bitstreamDataService.findByHref(process._links.output.href,!1)));this.outputLogFileUrl$=processOutputRD$.pipe((0,shared_operators.yd)(),(0,operators.Mi)(processOutputFileRD=>{204===processOutputFileRD.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,operators.nx)(processOutput=>{const url=processOutput.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,operators.s)(1),(0,operators.Tj)(token=>(0,empty_util.a4)(token)?new url_combiner.t(url,`?authentication-token=${token}`).toString():url))}))}),this.outputLogFileUrl$.pipe((0,operators.s)(1),(0,operators.nx)(url=>this.getTextFile(url)),(0,operators.jE)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(logs=>{this.outputLogs$.next(logs)})}getTextFile(filename){return this.http.get(filename,{responseType:"text"}).pipe((0,operators.jE)(()=>{this.showOutputLogs=!0}))}isProcessFinished(process){return(0,empty_util.a4)(process)&&(0,empty_util.a4)(process.processStatus)&&(process.processStatus.toString()===process_status_model.K[process_status_model.K.COMPLETED].toString()||process.processStatus.toString()===process_status_model.K[process_status_model.K.FAILED].toString())}deleteProcess(process){this.isDeleting=!0,this.processService.delete(process.processId).pipe((0,shared_operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("process.detail.delete.success")),this.closeModal(),this.router.navigateByUrl((0,process_page_routing_paths.JO)())):(this.notificationsService.error(this.translateService.get("process.detail.delete.error")),this.isDeleting=!1)})}openDeleteModal(content){this.modalRef=this.modalService.open(content)}closeModal(){this.modalRef.close()}static#_=this.\u0275fac=function(t){return new(t||ProcessDetailComponent2)(core.rXU(core.Agw),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(process_data_service.ProcessDataService),core.rXU(bitstream_data_service.BitstreamDataService),core.rXU(dso_name_service.f),core.rXU(core.SKi),core.rXU(auth_service.uR),core.rXU(http.Qq),core.rXU(ng_bootstrap.Bq),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:ProcessDetailComponent2,selectors:[["ds-process-detail"]],standalone:!0,features:[core.aNF],decls:4,vars:3,consts:[["deleteModal",""],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-10"],[1,"flex-grow-1"],["class","col-2 refresh-counter",4,"ngIf"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],["id","process-actions",3,"title"],["routerLink","/processes/new",1,"btn","btn-success","mr-2",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","delete","class","btn btn-danger",3,"click",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],[1,"col-2","refresh-counter"],[1,"fas","fa-sync-alt","fa-spin"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[1,"d-flex","flex-column"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-themed-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3","tabindex","0",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-themed-loading",3,"message"],["tabindex","0",1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"],["id","delete",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","pr-2"],[4,"ngIf"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ProcessDetailComponent_div_0_Template,28,32,"div",1),core.nI1(1,"async"),core.DNE(2,ProcessDetailComponent_ng_template_2_Template,2,3,"ng-template",null,0,core.C5r)),2&rf){let tmp_1_0;core.Y8G("ngIf",null==(tmp_1_0=core.bMT(1,1,ctx.processRD$))?null:tmp_1_0.payload)}},dependencies:[common.bT,ProcessDetailFieldComponent,common.pM,var_directive.r,themed_file_download_link_component.z,themed_loading_component.v,router.Wk,common.Jj,common.vh,file_size_pipe.s,ngx_translate_core.h,ngx_translate_core.D9,has_no_value_pipe.n],encapsulation:2})}return ProcessDetailComponent2})();var link_service=__webpack_require__(48614),has_value_pipe=__webpack_require__(10585),fesm2022_forms=__webpack_require__(28955),script_data_service=__webpack_require__(54257),process_model=__webpack_require__(44930),process_parameter_model=(__webpack_require__(38266),__webpack_require__(80145));function controlContainerFactory(controlContainer){return controlContainer}var ScriptParameterType=function(ScriptParameterType2){return ScriptParameterType2.STRING="String",ScriptParameterType2.DATE="date",ScriptParameterType2.BOOLEAN="boolean",ScriptParameterType2.FILE="InputStream",ScriptParameterType2.OUTPUT="OutputStream",ScriptParameterType2}(ScriptParameterType||{});let ValueInputComponent=(()=>{class ValueInputComponent2{constructor(){this.updateValue=new core.bkB}static#_=this.\u0275fac=function(t){return new(t||ValueInputComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ValueInputComponent2,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}return ValueInputComponent2})(),BooleanValueInputComponent=(()=>{class BooleanValueInputComponent2 extends ValueInputComponent{ngOnInit(){this.updateValue.emit(!0)}static#_=this.\u0275fac=(()=>{let \u0275BooleanValueInputComponent_BaseFactory;return function(t){return(\u0275BooleanValueInputComponent_BaseFactory||(\u0275BooleanValueInputComponent_BaseFactory=core.xGo(BooleanValueInputComponent2)))(t||BooleanValueInputComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:BooleanValueInputComponent2,selectors:[["ds-boolean-value-input"]],standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.Vt3,core.aNF],decls:2,vars:7,consts:[["type","hidden","value","true",3,"name","id"]],template:function(rf,ctx){1&rf&&(core.nrm(0,"input",0),core.nI1(1,"translate")),2&rf&&(core.Mz_("name","boolean-value-",ctx.index,""),core.Mz_("id","boolean-value-",ctx.index,""),core.BMQ("aria-label",core.bMT(1,5,"process.new.parameter.label")))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9]})}return BooleanValueInputComponent2})();function DateValueInputComponent_div_3_div_1_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.new.parameter.string.required")," "))}function DateValueInputComponent_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3),core.DNE(1,DateValueInputComponent_div_3_div_1_Template,3,3,"div",4),core.k0s()),2&rf){core.XpG();const string_r2=core.sdS(1);core.R7$(),core.Y8G("ngIf",string_r2.errors.required)}}let DateValueInputComponent=(()=>{class DateValueInputComponent2 extends ValueInputComponent{ngOnInit(){this.value=this.initialValue}setValue(value){this.value=value,this.updateValue.emit(value)}static#_=this.\u0275fac=(()=>{let \u0275DateValueInputComponent_BaseFactory;return function(t){return(\u0275DateValueInputComponent_BaseFactory||(\u0275DateValueInputComponent_BaseFactory=core.xGo(DateValueInputComponent2)))(t||DateValueInputComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:DateValueInputComponent2,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.Vt3,core.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error mb-0",4,"ngIf"],[1,"alert","alert-danger","validation-error","mb-0"],[4,"ngIf"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"input",1,0),core.nI1(2,"translate"),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.setValue($event))}),core.k0s(),core.DNE(3,DateValueInputComponent_div_3_Template,2,1,"div",2)}if(2&rf){const string_r2=core.sdS(1);core.Mz_("name","date-value-",ctx.index,""),core.Mz_("id","date-value-",ctx.index,""),core.Y8G("ngModel",ctx.value),core.BMQ("aria-label",core.bMT(2,7,"process.new.parameter.label")),core.R7$(3),core.Y8G("ngIf",string_r2.invalid&&(string_r2.dirty||string_r2.touched))}},dependencies:[fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.YS,fesm2022_forms.vS,common.bT,ngx_translate_core.h,ngx_translate_core.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}return DateValueInputComponent2})(),FileValueAccessorDirective=(()=>{class FileValueAccessorDirective2{constructor(){this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}static#_=this.\u0275fac=function(t){return new(t||FileValueAccessorDirective2)};static#_2=this.\u0275dir=core.FsC({type:FileValueAccessorDirective2,selectors:[["input","type","file"]],hostBindings:function(rf,ctx){1&rf&&core.bIt("change",function($event){return ctx.onChange($event.target.files)})("blur",function(){return ctx.onTouched()})},standalone:!0,features:[core.Jv_([{provide:fesm2022_forms.kq,useExisting:FileValueAccessorDirective2,multi:!0}])]})}return FileValueAccessorDirective2})();var require_file_validator=__webpack_require__(2823);function FileValueInputComponent_div_8_div_1_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.new.parameter.file.required")," "))}function FileValueInputComponent_div_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",6),core.DNE(1,FileValueInputComponent_div_8_div_1_Template,3,3,"div",7),core.k0s()),2&rf){core.XpG();const file_r2=core.sdS(7);core.R7$(),core.Y8G("ngIf",file_r2.errors.required)}}let FileValueInputComponent=(()=>{class FileValueInputComponent2 extends ValueInputComponent{setFile(files){this.fileObject=files.length>0?files[0]:void 0,this.updateValue.emit(this.fileObject)}static#_=this.\u0275fac=(()=>{let \u0275FileValueInputComponent_BaseFactory;return function(t){return(\u0275FileValueInputComponent_BaseFactory||(\u0275FileValueInputComponent_BaseFactory=core.xGo(FileValueInputComponent2)))(t||FileValueInputComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:FileValueInputComponent2,selectors:[["ds-file-value-input"]],standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.Vt3,core.aNF],decls:9,vars:12,consts:[["file","ngModel"],[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-primary"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"label",1)(1,"span",2),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"span",3),core.EFF(5),core.k0s()(),core.j41(6,"input",4,0),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.setFile($event))}),core.k0s(),core.DNE(8,FileValueInputComponent_div_8_Template,2,1,"div",5)}if(2&rf){const file_r2=core.sdS(7);core.Mz_("for","file-upload-",ctx.index,""),core.R7$(2),core.SpI(" ",core.bMT(3,10,"process.new.parameter.file.upload-button")," "),core.R7$(3),core.JRh(null==ctx.fileObject?null:ctx.fileObject.name),core.R7$(),core.Mz_("name","file-upload-",ctx.index,""),core.Mz_("id","file-upload-",ctx.index,""),core.Y8G("ngModel",ctx.fileObject),core.R7$(2),core.Y8G("ngIf",file_r2.invalid&&(file_r2.dirty||file_r2.touched))}},dependencies:[FileValueAccessorDirective,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,require_file_validator.R,common.bT,ngx_translate_core.h,ngx_translate_core.D9],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return FileValueInputComponent2})();function StringValueInputComponent_div_3_div_1_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.new.parameter.string.required")," "))}function StringValueInputComponent_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3),core.DNE(1,StringValueInputComponent_div_3_div_1_Template,3,3,"div",4),core.k0s()),2&rf){core.XpG();const string_r2=core.sdS(1);core.R7$(),core.Y8G("ngIf",string_r2.errors.required)}}let StringValueInputComponent=(()=>{class StringValueInputComponent2 extends ValueInputComponent{ngOnInit(){this.value=this.initialValue}setValue(value){this.value=value,this.updateValue.emit(value)}static#_=this.\u0275fac=(()=>{let \u0275StringValueInputComponent_BaseFactory;return function(t){return(\u0275StringValueInputComponent_BaseFactory||(\u0275StringValueInputComponent_BaseFactory=core.xGo(StringValueInputComponent2)))(t||StringValueInputComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:StringValueInputComponent2,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.Vt3,core.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error mb-0",4,"ngIf"],[1,"alert","alert-danger","validation-error","mb-0"],[4,"ngIf"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"input",1,0),core.nI1(2,"translate"),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.setValue($event))}),core.k0s(),core.DNE(3,StringValueInputComponent_div_3_Template,2,1,"div",2)}if(2&rf){const string_r2=core.sdS(1);core.Mz_("name","string-value-",ctx.index,""),core.Mz_("id","string-value-",ctx.index,""),core.Y8G("ngModel",ctx.value),core.BMQ("aria-label",core.bMT(2,7,"process.new.parameter.label")),core.R7$(3),core.Y8G("ngIf",string_r2.invalid&&(string_r2.dirty||string_r2.touched))}},dependencies:[fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.YS,fesm2022_forms.vS,common.bT,ngx_translate_core.h,ngx_translate_core.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}return StringValueInputComponent2})();function ParameterValueInputComponent_ds_string_value_input_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-string-value-input",3),core.bIt("updateValue",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateValue.emit($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("initialValue",ctx_r1.initialValue)("index",ctx_r1.index)}}function ParameterValueInputComponent_ds_string_value_input_2_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-string-value-input",3),core.bIt("updateValue",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateValue.emit($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("initialValue",ctx_r1.initialValue)("index",ctx_r1.index)}}function ParameterValueInputComponent_ds_date_value_input_3_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"ds-date-value-input",3),core.bIt("updateValue",function($event){core.eBV(_r4);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateValue.emit($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("initialValue",ctx_r1.initialValue)("index",ctx_r1.index)}}function ParameterValueInputComponent_ds_file_value_input_4_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"ds-file-value-input",4),core.bIt("updateValue",function($event){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateValue.emit($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("index",ctx_r1.index)}}function ParameterValueInputComponent_ds_boolean_value_input_5_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"ds-boolean-value-input",4),core.bIt("updateValue",function($event){core.eBV(_r6);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateValue.emit($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("index",ctx_r1.index)}}let ParameterValueInputComponent=(()=>{class ParameterValueInputComponent2{constructor(){this.updateValue=new core.bkB,this.parameterTypes=ScriptParameterType}static#_=this.\u0275fac=function(t){return new(t||ParameterValueInputComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ParameterValueInputComponent2,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.aNF],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"updateValue","initialValue","index"],[3,"updateValue","index"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,ParameterValueInputComponent_ds_string_value_input_1_Template,1,2,"ds-string-value-input",1)(2,ParameterValueInputComponent_ds_string_value_input_2_Template,1,2,"ds-string-value-input",1)(3,ParameterValueInputComponent_ds_date_value_input_3_Template,1,2,"ds-date-value-input",1)(4,ParameterValueInputComponent_ds_file_value_input_4_Template,1,1,"ds-file-value-input",2)(5,ParameterValueInputComponent_ds_boolean_value_input_5_Template,1,1,"ds-boolean-value-input",2),core.k0s()),2&rf&&(core.Y8G("ngSwitch",null==ctx.parameter?null:ctx.parameter.type),core.R7$(),core.Y8G("ngSwitchCase",ctx.parameterTypes.STRING),core.R7$(),core.Y8G("ngSwitchCase",ctx.parameterTypes.OUTPUT),core.R7$(),core.Y8G("ngSwitchCase",ctx.parameterTypes.DATE),core.R7$(),core.Y8G("ngSwitchCase",ctx.parameterTypes.FILE),core.R7$(),core.Y8G("ngSwitchCase",ctx.parameterTypes.BOOLEAN))},dependencies:[common.ux,common.e1,StringValueInputComponent,DateValueInputComponent,FileValueInputComponent,BooleanValueInputComponent]})}return ParameterValueInputComponent2})();function ParameterSelectComponent_option_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",3),core.EFF(1),core.k0s()),2&rf){const param_r2=ctx.$implicit;core.Y8G("ngValue",param_r2.name),core.R7$(),core.SpI(" ",param_r2.nameLong||param_r2.name," ")}}function ParameterSelectComponent_button_9_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",8),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r3);const ctx_r3=core.XpG();return core.Njj(ctx_r3.removeParameter.emit(ctx_r3.parameterValue))}),core.nrm(2,"i",9),core.k0s()}2&rf&&core.BMQ("aria-label",core.bMT(1,1,"process.new.delete-parameter"))}function ParameterSelectComponent_span_10_Template(rf,ctx){1&rf&&core.nrm(0,"span",10)}let ParameterSelectComponent=(()=>{class ParameterSelectComponent2{constructor(){this.parameterValue=new process_parameter_model.p,this.removeParameter=new core.bkB,this.changeParameter=new core.bkB}get selectedScriptParameter(){return this.parameters.find(parameter=>parameter.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(value){this.parameterValue.name=value,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(value){this.parameterValue.value=value,this.changeParameter.emit(this.parameterValue)}static#_=this.\u0275fac=function(t){return new(t||ParameterSelectComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ParameterSelectComponent2,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.aNF],decls:11,vars:16,consts:[["param","ngModel"],[1,"form-row","gap-2","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"ngModelChange","name","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col","px-0",3,"updateValue","initialValue","parameter","index"],["class","btn btn-danger col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-danger","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"select",2,0),core.nI1(3,"translate"),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.selectedParameter,$event)||(ctx.selectedParameter=$event),core.Njj($event)}),core.j41(4,"option",3),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,ParameterSelectComponent_option_7_Template,2,2,"option",4),core.k0s(),core.j41(8,"ds-parameter-value-input",5),core.bIt("updateValue",function($event){return core.eBV(_r1),core.Njj(ctx.selectedParameterValue=$event)}),core.k0s(),core.DNE(9,ParameterSelectComponent_button_9_Template,3,3,"button",6)(10,ParameterSelectComponent_span_10_Template,1,0,"span",7),core.k0s()}2&rf&&(core.R7$(),core.Mz_("name","parameter-",ctx.index,""),core.R50("ngModel",ctx.selectedParameter),core.BMQ("aria-label",core.bMT(3,12,"process.new.select-parameter")),core.R7$(3),core.Y8G("ngValue",void 0),core.R7$(),core.JRh(core.bMT(6,14,"process.new.add-parameter")),core.R7$(2),core.Y8G("ngForOf",ctx.parameters),core.R7$(),core.Y8G("initialValue",ctx.parameterValue.value)("parameter",ctx.selectedScriptParameter)("index",ctx.index),core.R7$(),core.Y8G("ngIf",ctx.removable),core.R7$(),core.Y8G("ngIf",!ctx.removable))},dependencies:[fesm2022_forms.YN,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.wz,fesm2022_forms.BC,fesm2022_forms.vS,common.pM,ParameterValueInputComponent,common.bT,ngx_translate_core.h,ngx_translate_core.D9]})}return ParameterSelectComponent2})();function ProcessParametersComponent_div_0_ds_parameter_select_4_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-parameter-select",3),core.bIt("removeParameter",function(){const i_r2=core.eBV(_r1).index,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.removeParameter(i_r2))})("changeParameter",function($event){const i_r2=core.eBV(_r1).index,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.updateParameter($event,i_r2))}),core.k0s()}if(2&rf){const value_r4=ctx.$implicit,i_r2=ctx.index,last_r5=ctx.last,ctx_r2=core.XpG(2);core.Y8G("parameters",ctx_r2.script.parameters)("parameterValue",value_r4)("removable",!last_r5)("index",i_r2)}}function ProcessParametersComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"label"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,ProcessParametersComponent_div_0_ds_parameter_select_4_Template,1,4,"ds-parameter-select",2),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(2),core.JRh(core.bMT(3,2,"process.new.select-parameters")),core.R7$(2),core.Y8G("ngForOf",ctx_r2.parameterValues)}}let ProcessParametersComponent=(()=>{class ProcessParametersComponent2{constructor(){this.updateParameters=new core.bkB}ngOnInit(){(0,empty_util.a4)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(changes){changes.script&&this.initParameters()}initParameters(){(0,empty_util.a4)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(processParameter,index){this.parameterValues[index]=processParameter,index===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(param=>(0,empty_util.a4)(param.name)))}removeParameter(index){this.parameterValues=this.parameterValues.filter((value,i)=>i!==index),this.updateParameters.emit(this.parameterValues.filter(param=>(0,empty_util.a4)(param.name)))}initializeParameter(){(0,empty_util.a4)(this.script)&&(this.parameterValues=this.script.parameters.filter(param=>param.mandatory).map(parameter=>Object.assign(new process_parameter_model.p,{name:parameter.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new process_parameter_model.p]}static#_=this.\u0275fac=function(t){return new(t||ProcessParametersComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ProcessParametersComponent2,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.OA$,core.aNF],decls:1,vars:1,consts:[["class","form-group","data-testID","parameters-select-container",4,"ngIf"],["data-testID","parameters-select-container",1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"removeParameter","changeParameter","parameters","parameterValue","removable","index"]],template:function(rf,ctx){1&rf&&core.DNE(0,ProcessParametersComponent_div_0_Template,5,4,"div",0),2&rf&&core.Y8G("ngIf",null==ctx.script||null==ctx.script.parameters?null:ctx.script.parameters.length)},dependencies:[common.bT,common.pM,ParameterSelectComponent,ngx_translate_core.h,ngx_translate_core.D9]})}return ProcessParametersComponent2})();function ScriptHelpComponent_tr_6_ng_container_3_Template(rf,ctx){1&rf&&core.eu8(0)}function ScriptHelpComponent_tr_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"tr")(1,"td",4),core.EFF(2),core.DNE(3,ScriptHelpComponent_tr_6_ng_container_3_Template,1,0,"ng-container",5),core.k0s(),core.j41(4,"td"),core.EFF(5),core.k0s()()),2&rf){const param_r1=ctx.$implicit;core.XpG();const type_r2=core.sdS(8);core.R7$(2),core.Lme("",param_r1.name," ",param_r1.nameLong," "),core.R7$(),core.Y8G("ngTemplateOutlet",type_r2)("ngTemplateOutletContext",param_r1),core.R7$(2),core.JRh(param_r1.description)}}function ScriptHelpComponent_ng_template_7_span_1_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI("<",core.bMT(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_2_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI("<",core.bMT(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_3_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI("<",core.bMT(2,1,"process.new.parameter.type.value"),">"))}function ScriptHelpComponent_ng_template_7_span_4_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI("<",core.bMT(2,1,"process.new.parameter.type.file"),">"))}function ScriptHelpComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.qex(0,6),core.DNE(1,ScriptHelpComponent_ng_template_7_span_1_Template,3,3,"span",7)(2,ScriptHelpComponent_ng_template_7_span_2_Template,3,3,"span",7)(3,ScriptHelpComponent_ng_template_7_span_3_Template,3,3,"span",7)(4,ScriptHelpComponent_ng_template_7_span_4_Template,3,3,"span",7),core.bVm()),2&rf){const type_r3=ctx.type,ctx_r3=core.XpG();core.Y8G("ngSwitch",type_r3),core.R7$(),core.Y8G("ngSwitchCase",ctx_r3.parameterTypes.DATE),core.R7$(),core.Y8G("ngSwitchCase",ctx_r3.parameterTypes.STRING),core.R7$(),core.Y8G("ngSwitchCase",ctx_r3.parameterTypes.OUTPUT),core.R7$(),core.Y8G("ngSwitchCase",ctx_r3.parameterTypes.FILE)}}let ScriptHelpComponent=(()=>{class ScriptHelpComponent2{constructor(){this.parameterTypes=ScriptParameterType}static#_=this.\u0275fac=function(t){return new(t||ScriptHelpComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ScriptHelpComponent2,selectors:[["ds-script-help"]],inputs:{script:"script"},standalone:!0,features:[core.aNF],decls:9,vars:3,consts:[["type",""],[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",1)(1,"h2"),core.EFF(2),core.k0s(),core.j41(3,"span"),core.EFF(4),core.k0s(),core.j41(5,"table",2),core.DNE(6,ScriptHelpComponent_tr_6_Template,6,5,"tr",3),core.k0s()(),core.DNE(7,ScriptHelpComponent_ng_template_7_Template,5,5,"ng-template",null,0,core.C5r)),2&rf&&(core.R7$(2),core.JRh(null==ctx.script?null:ctx.script.name),core.R7$(2),core.JRh(null==ctx.script?null:ctx.script.description),core.R7$(2),core.Y8G("ngForOf",null==ctx.script?null:ctx.script.parameters))},dependencies:[common.pM,common.T3,common.ux,common.e1,ngx_translate_core.h,ngx_translate_core.D9]})}return ScriptHelpComponent2})();function ScriptsSelectComponent_div_0_option_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",5),core.EFF(1),core.k0s()),2&rf){const script_r3=ctx.$implicit;core.Y8G("ngValue",script_r3.id),core.R7$(),core.SpI(" ",script_r3.name," ")}}function ScriptsSelectComponent_div_0_div_11_div_1_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"process.new.select-script.required")," "))}function ScriptsSelectComponent_div_0_div_11_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",8),core.DNE(1,ScriptsSelectComponent_div_0_div_11_div_1_Template,3,3,"div",9),core.k0s()),2&rf){core.XpG();const script_r4=core.sdS(5);core.R7$(),core.Y8G("ngIf",script_r4.errors.required)}}function ScriptsSelectComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",2)(1,"label",3),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"select",4,0),core.mxI("ngModelChange",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.DH7(ctx_r1.selectedScript,$event)||(ctx_r1.selectedScript=$event),core.Njj($event)}),core.j41(6,"option",5),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.DNE(9,ScriptsSelectComponent_div_0_option_9_Template,2,2,"option",6),core.nI1(10,"async"),core.k0s(),core.DNE(11,ScriptsSelectComponent_div_0_div_11_Template,2,1,"div",7),core.k0s()}if(2&rf){const script_r4=core.sdS(5),ctx_r1=core.XpG();core.R7$(2),core.JRh(core.bMT(3,6,"process.new.select-script")),core.R7$(2),core.R50("ngModel",ctx_r1.selectedScript),core.R7$(2),core.Y8G("ngValue",void 0),core.R7$(),core.JRh(core.bMT(8,8,"process.new.select-script.placeholder")),core.R7$(2),core.Y8G("ngForOf",core.bMT(10,10,ctx_r1.scripts$)),core.R7$(2),core.Y8G("ngIf",script_r4.invalid&&(script_r4.dirty||script_r4.touched))}}let ScriptsSelectComponent=(()=>{class ScriptsSelectComponent2{constructor(scriptService,router2,route){this.scriptService=scriptService,this.router=router2,this.route=route,this.select=new core.bkB}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)(),(0,operators.Tj)(paginatedList=>paginatedList.page)),this.routeSub=this.route.queryParams.pipe((0,operators.pb)(params=>(0,empty_util.Tn)(params.id)),(0,operators.Tj)(params=>params.script),(0,operators.F)(),(0,operators.nx)(id=>this.scripts$.pipe((0,operators.s)(1),(0,operators.Tj)(scripts=>scripts.find(script=>script.id===id))))).subscribe(script=>{this._selectedScript=script,this.select.emit(script)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(value){this.router.navigate([],{queryParams:{script:value}})}set script(value){this._selectedScript=value}ngOnDestroy(){(0,empty_util.a4)(this.routeSub)&&this.routeSub.unsubscribe()}static#_=this.\u0275fac=function(t){return new(t||ScriptsSelectComponent2)(core.rXU(script_data_service.ScriptDataService),core.rXU(router.Ix),core.rXU(router.nX))};static#_2=this.\u0275cmp=core.VBU({type:ScriptsSelectComponent2,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},standalone:!0,features:[core.Jv_([],[{provide:fesm2022_forms.ZU,useFactory:controlContainerFactory,deps:[[new core.Xx1,fesm2022_forms.cV]]}]),core.aNF],decls:2,vars:3,consts:[["script","ngModel"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(rf,ctx){1&rf&&(core.DNE(0,ScriptsSelectComponent_div_0_Template,12,12,"div",1),core.nI1(1,"async")),2&rf&&core.Y8G("ngIf",core.bMT(1,1,ctx.scripts$))},dependencies:[common.bT,fesm2022_forms.YN,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.wz,fesm2022_forms.BC,fesm2022_forms.YS,fesm2022_forms.vS,common.pM,common.Jj,ngx_translate_core.h,ngx_translate_core.D9]})}return ScriptsSelectComponent2})();const process_form_component_c0=()=>["/processes"];function ProcessFormComponent_ds_script_help_17_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-script-help",13),2&rf){const ctx_r2=core.XpG();core.Y8G("script",ctx_r2.selectedScript)}}function ProcessFormComponent_div_18_li_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"li"),core.EFF(1),core.k0s()),2&rf){const missing_r4=ctx.$implicit;core.R7$(),core.JRh(missing_r4)}}function ProcessFormComponent_div_18_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",14),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"ul"),core.DNE(4,ProcessFormComponent_div_18_li_4_Template,2,1,"li",15),core.k0s()()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.SpI(" ",core.bMT(2,2,"process.new.parameter.required.missing")," "),core.R7$(3),core.Y8G("ngForOf",ctx_r2.missingParameters)}}let ProcessFormComponent=(()=>{class ProcessFormComponent2{constructor(scriptService,notificationsService,translationService,router2){this.scriptService=scriptService,this.notificationsService=notificationsService,this.translationService=translationService,this.router=router2,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new process_model.M}submitForm(form){if((0,empty_util.Im)(this.parameters)&&(this.parameters=[]),!this.validateForm(form)||this.isRequiredMissing())return;const stringParameters=this.parameters.map(parameter=>({name:parameter.name,value:this.checkValue(parameter)}));this.scriptService.invoke(this.selectedScript.id,stringParameters,this.files).pipe((0,shared_operators.qD)()).subscribe(rd=>{if(rd.hasSucceeded){const title=this.translationService.get("process.new.notification.success.title"),content=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(title,content),this.sendBack(rd.payload)}else{const title=this.translationService.get("process.new.notification.error.title"),content=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(title,content)}})}checkValue(processParameter){return"object"==typeof processParameter.value?(this.files=[...this.files,processParameter.value],processParameter.value.name):processParameter.value}validateForm(form){let valid=!0;return Object.keys(form.controls).forEach(key=>{form.controls[key].invalid&&(form.controls[key].markAsDirty(),valid=!1)}),valid}isRequiredMissing(){this.missingParameters=[];const setParams=this.parameters.map(param=>param.name),requiredParams=this.selectedScript.parameters.filter(param=>param.mandatory);for(const rp of requiredParams)setParams.includes(rp.name)||this.missingParameters.push(rp.name);return this.missingParameters.length>0}sendBack(newProcess){const extras={queryParams:{new_process_id:newProcess.processId}};this.router.navigate([(0,process_page_routing_paths.JO)()],extras)}updateScript($event){this.selectedScript=$event,this.parameters=void 0}get generatedProcessName(){const paramsString=this.parameters?.map(p=>{const value=this.parseValue(p.value);return(0,empty_util.Im)(value)?p.name:`${p.name} ${value}`}).join(" ")||"";return(0,empty_util.Im)(paramsString)?this.selectedScript.name:`${this.selectedScript.name} ${paramsString}`}parseValue(value){if("boolean"!=typeof value)return value instanceof File?value.name:value?.toString()}static#_=this.\u0275fac=function(t){return new(t||ProcessFormComponent2)(core.rXU(script_data_service.ScriptDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(router.Ix))};static#_2=this.\u0275cmp=core.VBU({type:ProcessFormComponent2,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},standalone:!0,features:[core.aNF],decls:19,vars:16,consts:[["form","ngForm"],[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6","mb-2"],[3,"ngSubmit"],[3,"select","script"],[3,"updateParameters","initialParams","script"],[1,"btn","btn-danger","float-left",3,"routerLink"],["type","submit",1,"btn","btn-primary","float-right"],[1,"col-12","col-md-6"],[3,"script",4,"ngIf"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[3,"script"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"div",2)(2,"h1",3),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",4)(6,"form",5,0),core.bIt("ngSubmit",function(){core.eBV(_r1);const form_r2=core.sdS(7);return core.Njj(ctx.submitForm(form_r2))}),core.j41(8,"ds-scripts-select",6),core.bIt("select",function($event){return core.eBV(_r1),ctx.selectedScript=$event,core.Njj(ctx.parameters=void 0)}),core.k0s(),core.j41(9,"ds-process-parameters",7),core.bIt("updateParameters",function($event){return core.eBV(_r1),core.Njj(ctx.parameters=$event)}),core.k0s(),core.j41(10,"a",8),core.EFF(11),core.nI1(12,"translate"),core.k0s(),core.j41(13,"button",9),core.EFF(14),core.nI1(15,"translate"),core.k0s()()(),core.j41(16,"div",10),core.DNE(17,ProcessFormComponent_ds_script_help_17_Template,1,1,"ds-script-help",11),core.k0s()(),core.DNE(18,ProcessFormComponent_div_18_Template,5,4,"div",12),core.k0s()}2&rf&&(core.R7$(3),core.SpI(" ",core.bMT(4,9,ctx.headerKey)," "),core.R7$(5),core.Y8G("script",ctx.selectedScript),core.R7$(),core.Y8G("initialParams",ctx.parameters)("script",ctx.selectedScript),core.R7$(),core.Y8G("routerLink",core.lJ4(15,process_form_component_c0)),core.R7$(),core.JRh(core.bMT(12,11,"process.new.cancel")),core.R7$(3),core.JRh(core.bMT(15,13,"process.new.submit")),core.R7$(3),core.Y8G("ngIf",ctx.selectedScript),core.R7$(),core.Y8G("ngIf",ctx.missingParameters.length>0))},dependencies:[fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.cb,fesm2022_forms.cV,ScriptsSelectComponent,ProcessParametersComponent,router.Wk,ScriptHelpComponent,common.bT,common.pM,ngx_translate_core.h,ngx_translate_core.D9]})}return ProcessFormComponent2})();function NewProcessComponent_ng_container_0_ds_process_form_1_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-process-form",3),core.nI1(1,"async")),2&rf){const process_r1=ctx.ngVar,ctx_r1=core.XpG(2);core.Y8G("selectedScript",core.bMT(1,2,ctx_r1.script$))("parameters",process_r1.parameters)}}function NewProcessComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,NewProcessComponent_ng_container_0_ds_process_form_1_Template,2,4,"ds-process-form",2),core.nI1(2,"async"),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngVar",core.bMT(2,1,ctx_r1.fromExisting$))}}function NewProcessComponent_ng_template_3_Template(rf,ctx){1&rf&&core.nrm(0,"ds-process-form",4)}let NewProcessComponent=(()=>{class NewProcessComponent2{constructor(route,processService,linkService){this.route=route,this.processService=processService,this.linkService=linkService}ngOnInit(){const id=this.route.snapshot.queryParams.id;id&&(this.fromExisting$=this.processService.findById(id).pipe((0,shared_operators.ak)()),this.script$=this.fromExisting$.pipe((0,operators.Tj)(process=>this.linkService.resolveLink(process,(0,follow_link_config_model.s)("script"))),(0,operators.nx)(process=>process.script),(0,shared_operators.ak)()))}static#_=this.\u0275fac=function(t){return new(t||NewProcessComponent2)(core.rXU(router.nX),core.rXU(process_data_service.ProcessDataService),core.rXU(link_service._))};static#_2=this.\u0275cmp=core.VBU({type:NewProcessComponent2,selectors:[["ds-new-process"]],standalone:!0,features:[core.aNF],decls:5,vars:6,consts:[["newProcess",""],[4,"ngIf","ngIfElse"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,NewProcessComponent_ng_container_0_Template,3,3,"ng-container",1),core.nI1(1,"async"),core.nI1(2,"dsHasValue"),core.DNE(3,NewProcessComponent_ng_template_3_Template,1,0,"ng-template",null,0,core.C5r)),2&rf){const newProcess_r3=core.sdS(4);core.Y8G("ngIf",core.bMT(2,4,core.bMT(1,2,ctx.fromExisting$)))("ngIfElse",newProcess_r3)}},dependencies:[common.bT,var_directive.r,ProcessFormComponent,common.Jj,has_value_pipe.a]})}return NewProcessComponent2})(),ProcessBulkDeleteService=(()=>{class ProcessBulkDeleteService2{constructor(processDataService,notificationsService,translateService){this.processDataService=processDataService,this.notificationsService=notificationsService,this.translateService=translateService,this.processesToDelete=[],this.isProcessingBehaviorSubject=new cjs.BehaviorSubject(!1)}toggleDelete(processId){this.isToBeDeleted(processId)?this.processesToDelete.splice(this.processesToDelete.indexOf(processId),1):this.processesToDelete.push(processId)}isToBeDeleted(processId){return this.processesToDelete.includes(processId)}clearAllProcesses(){this.processesToDelete.splice(0)}getAmountOfSelectedProcesses(){return this.processesToDelete.length}isProcessing$(){return this.isProcessingBehaviorSubject}hasSelected(){return(0,empty_util.hj)(this.processesToDelete)}deleteSelectedProcesses(){this.isProcessingBehaviorSubject.next(!0),(0,cjs.from)([...this.processesToDelete]).pipe((0,operators.Hh)(processId=>this.processDataService.delete(processId).pipe((0,shared_operators.qD)(),(0,operators.Mi)(rd=>{rd.hasFailed?this.notificationsService.error(this.translateService.get("process.bulk.delete.error.head"),this.translateService.get("process.bulk.delete.error.body",{processId})):this.toggleDelete(processId)}))),(0,operators.pb)(rd=>rd.hasSucceeded),(0,cjs.count)()).subscribe(value=>{this.notificationsService.success(this.translateService.get("process.bulk.delete.success",{count:value})),this.isProcessingBehaviorSubject.next(!1)})}static#_=this.\u0275fac=function(t){return new(t||ProcessBulkDeleteService2)(core.KVO(process_data_service.ProcessDataService),core.KVO(notifications_service.I),core.KVO(ngx_translate_core.c$))};static#_2=this.\u0275prov=core.jDH({token:ProcessBulkDeleteService2,factory:ProcessBulkDeleteService2.\u0275fac,providedIn:"root"})}return ProcessBulkDeleteService2})();var request_param_model=__webpack_require__(57699),sort_options_model=__webpack_require__(80685),find_list_options_model=__webpack_require__(97570),ProcessSortField=function(ProcessSortField2){return ProcessSortField2.creationTime="creationTime",ProcessSortField2.startTime="startTime",ProcessSortField2.endTime="endTime",ProcessSortField2}(ProcessSortField||{});let ProcessOverviewService=(()=>{class ProcessOverviewService2{constructor(processDataService){this.processDataService=processDataService,this.dateFormat="yyyy-MM-dd HH:mm:ss",this.datePipe=new common.vh("en-US"),this.timeCreated=process=>this.datePipe.transform(process.creationTime,this.dateFormat,"UTC"),this.timeCompleted=process=>this.datePipe.transform(process.endTime,this.dateFormat,"UTC"),this.timeStarted=process=>this.datePipe.transform(process.startTime,this.dateFormat,"UTC")}getProcessesByProcessStatus(processStatus,findListOptions,autoRefreshingIntervalInMs=null){const requestParam=new request_param_model.x("processStatus",processStatus),options=Object.assign(new find_list_options_model._,{searchParams:[requestParam],elementsPerPage:5},findListOptions);return(0,empty_util.a4)(autoRefreshingIntervalInMs)&&autoRefreshingIntervalInMs>0?(this.processDataService.stopAutoRefreshing(processStatus),this.processDataService.autoRefreshingSearchBy(processStatus,"byProperty",options,autoRefreshingIntervalInMs)):this.processDataService.searchBy("byProperty",options)}stopAutoRefreshing(processStatus){this.processDataService.stopAutoRefreshing(processStatus)}getFindListOptions(paginationOptions,sortField){const sortOptions=new sort_options_model.z(sortField,sort_options_model.U.DESC);return Object.assign(new find_list_options_model._,{currentPage:paginationOptions.currentPage,elementsPerPage:paginationOptions.pageSize,sort:sortOptions})}static#_=this.\u0275fac=function(t){return new(t||ProcessOverviewService2)(core.KVO(process_data_service.ProcessDataService))};static#_2=this.\u0275prov=core.jDH({token:ProcessOverviewService2,factory:ProcessOverviewService2.\u0275fac,providedIn:"root"})}return ProcessOverviewService2})();var pagination_service=__webpack_require__(39304),paginated_list_model=__webpack_require__(12383),eperson_data_service=__webpack_require__(62120),route_service=__webpack_require__(86759),pagination_component=__webpack_require__(91904),pagination_component_options_model=__webpack_require__(64694);const process_overview_table_component_c0=a0=>["/processes/",a0];function ProcessOverviewTableComponent_span_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"span",9),core.EFF(1),core.k0s()),2&rf){const processesRD_r3=ctx.ngIf;core.R7$(),core.SpI(" ",null==processesRD_r3||null==processesRD_r3.payload?null:processesRD_r3.payload.totalElements," ")}}function ProcessOverviewTableComponent_ng_container_11_ds_loading_1_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function ProcessOverviewTableComponent_ng_container_11_ds_pagination_2_tr_22_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"tr")(1,"td")(2,"a",21),core.EFF(3),core.k0s()(),core.j41(4,"td")(5,"a",21),core.EFF(6),core.k0s()(),core.j41(7,"td"),core.EFF(8),core.k0s(),core.j41(9,"td"),core.EFF(10),core.k0s(),core.j41(11,"td")(12,"button",22),core.nI1(13,"translate"),core.bIt("click",function(){const tableEntry_r5=core.eBV(_r4).$implicit,ctx_r5=core.XpG(3);return core.Njj(ctx_r5.processBulkDeleteService.toggleDelete(tableEntry_r5.process.processId))}),core.nrm(14,"i",23),core.k0s()()()}if(2&rf){const tableEntry_r5=ctx.$implicit,ctx_r5=core.XpG(3);core.HbH(ctx_r5.getRowClass(tableEntry_r5.process)),core.R7$(2),core.Y8G("routerLink",core.eq3(11,process_overview_table_component_c0,tableEntry_r5.process.processId)),core.R7$(),core.JRh(tableEntry_r5.process.processId),core.R7$(2),core.Y8G("routerLink",core.eq3(13,process_overview_table_component_c0,tableEntry_r5.process.processId)),core.R7$(),core.JRh(tableEntry_r5.process.scriptName),core.R7$(2),core.JRh(tableEntry_r5.user),core.R7$(2),core.JRh(tableEntry_r5.info),core.R7$(2),core.BMQ("aria-label",core.bMT(13,9,"process.overview.delete-process"))}}function ProcessOverviewTableComponent_ng_container_11_ds_pagination_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",12),core.nI1(1,"async"),core.j41(2,"div",13)(3,"table",14)(4,"thead")(5,"tr")(6,"th",15),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"th",16),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",17),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"th",18),core.EFF(16),core.nI1(17,"translate"),core.k0s(),core.j41(18,"th",19),core.EFF(19),core.nI1(20,"translate"),core.k0s()()(),core.j41(21,"tbody"),core.DNE(22,ProcessOverviewTableComponent_ng_container_11_ds_pagination_2_tr_22_Template,15,15,"tr",20),core.k0s()()()()),2&rf){const processesRD_r7=core.XpG().ngVar,ctx_r5=core.XpG();core.Y8G("paginationOptions",core.bMT(1,10,ctx_r5.paginationOptions$))("collectionSize",null==processesRD_r7||null==processesRD_r7.payload?null:processesRD_r7.payload.totalElements)("retainScrollPosition",!0)("hideGear",!0),core.R7$(7),core.JRh(core.bMT(8,12,"process.overview.table.id")),core.R7$(3),core.JRh(core.bMT(11,14,"process.overview.table.name")),core.R7$(3),core.JRh(core.bMT(14,16,"process.overview.table.user")),core.R7$(3),core.JRh(core.bMT(17,18,"process.overview.table."+ctx_r5.processStatus.toLowerCase()+".info")),core.R7$(3),core.JRh(core.bMT(20,20,"process.overview.table.actions")),core.R7$(3),core.Y8G("ngForOf",null==processesRD_r7||null==processesRD_r7.payload?null:processesRD_r7.payload.page)}}function ProcessOverviewTableComponent_ng_container_11_div_3_Template(rf,ctx){1&rf&&(core.j41(0,"div")(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,1,"process.overview.table.empty")))}function ProcessOverviewTableComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,ProcessOverviewTableComponent_ng_container_11_ds_loading_1_Template,1,0,"ds-loading",10)(2,ProcessOverviewTableComponent_ng_container_11_ds_pagination_2_Template,23,22,"ds-pagination",11)(3,ProcessOverviewTableComponent_ng_container_11_div_3_Template,4,3,"div",10),core.bVm()),2&rf){const processesRD_r7=ctx.ngVar;core.R7$(),core.Y8G("ngIf",!processesRD_r7||processesRD_r7.isLoading),core.R7$(),core.Y8G("ngIf",(null==processesRD_r7||null==processesRD_r7.payload?null:processesRD_r7.payload.totalElements)>0),core.R7$(),core.Y8G("ngIf",0===(null==processesRD_r7||null==processesRD_r7.payload?null:processesRD_r7.payload.totalElements))}}let ProcessOverviewTableComponent=(()=>{class ProcessOverviewTableComponent2{constructor(processOverviewService,processBulkDeleteService,ePersonDataService,dsoNameService,paginationService,routeService,router2,auth,translateService,platformId){this.processOverviewService=processOverviewService,this.processBulkDeleteService=processBulkDeleteService,this.ePersonDataService=ePersonDataService,this.dsoNameService=dsoNameService,this.paginationService=paginationService,this.routeService=routeService,this.router=router2,this.auth=auth,this.translateService=translateService,this.platformId=platformId,this.sortField=ProcessSortField.creationTime,this.useAutoRefreshingSearchBy=!1,this.autoRefreshInterval=5e3,this.isCollapsed=!1,this.subs=[]}ngOnInit(){(0,common.UE)(this.platformId)||(this.useAutoRefreshingSearchBy=!1),this.routeService.getQueryParameterValue("new_process_id").pipe((0,operators.s)(1)).subscribe(id=>{this.newProcessId=id}),this.paginationId=this.processStatus.toLowerCase().substring(0,2);const defaultPaginationOptions=Object.assign(new pagination_component_options_model.W,{id:this.paginationId,pageSize:5});this.paginationOptions$=this.paginationService.getCurrentPagination(this.paginationId,defaultPaginationOptions),this.processesRD$=new cjs.BehaviorSubject(void 0),this.subs.push(this.paginationOptions$.pipe((0,operators.Tj)(paginationOptions=>this.processOverviewService.getFindListOptions(paginationOptions,this.sortField)),(0,operators.nx)(findListOptions=>this.processOverviewService.getProcessesByProcessStatus(this.processStatus,findListOptions,this.useAutoRefreshingSearchBy?this.autoRefreshInterval:null)),(0,authorized_operators.QD)(this.router,this.auth),(0,shared_operators.bD)(),(0,operators.nx)(processesRD=>(0,cjs.from)(processesRD.payload.page).pipe((0,cjs.mergeMap)(process=>this.getEPersonName(process.userId).pipe((0,operators.Tj)(name=>({process,user:name,info:this.getInfoValueMethod(process)})))),(0,operators.$r)(),(0,operators.Tj)(entries=>{const entriesPL=Object.assign(new paginated_list_model.O,processesRD.payload,{page:entries});return Object.assign({},processesRD,{payload:entriesPL})})))).subscribe(next=>{this.processesRD$.next(next)})),this.subs.push(this.processesRD$.pipe((0,operators.pb)(processListRd=>(0,empty_util.a4)(processListRd)),(0,operators.s)(1)).subscribe(processesRD=>{processesRD.payload.totalElements>0||(this.isCollapsed=!0)}))}getEPersonName(id){return(0,empty_util.hj)(id)?this.ePersonDataService.findById(id).pipe((0,shared_operators.qD)(),(0,operators.nx)(rd=>rd.hasSucceeded?[this.dsoNameService.getName(rd.payload)]:this.translateService.get("process.overview.unknown.user"))):this.translateService.get("process.overview.unknown.user")}getRowClass(process){return this.processBulkDeleteService.isToBeDeleted(process.processId)?"table-danger":this.newProcessId===process.processId?"table-info":""}ngOnDestroy(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe()),this.processOverviewService.stopAutoRefreshing(this.processStatus)}static#_=this.\u0275fac=function(t){return new(t||ProcessOverviewTableComponent2)(core.rXU(ProcessOverviewService),core.rXU(ProcessBulkDeleteService),core.rXU(eperson_data_service.EPersonDataService),core.rXU(dso_name_service.f),core.rXU(pagination_service.m),core.rXU(route_service.v$),core.rXU(router.Ix),core.rXU(auth_service.uR),core.rXU(ngx_translate_core.c$),core.rXU(core.Agw))};static#_2=this.\u0275cmp=core.VBU({type:ProcessOverviewTableComponent2,selectors:[["ds-process-overview-table"]],inputs:{processStatus:"processStatus",sortField:"sortField",useAutoRefreshingSearchBy:"useAutoRefreshingSearchBy",autoRefreshInterval:"autoRefreshInterval",getInfoValueMethod:"getInfoValueMethod"},standalone:!0,features:[core.aNF],decls:13,vars:12,consts:[["collapse","ngbCollapse"],[1,"mb-4"],["role","button",1,"d-flex",3,"click"],[1,"flex-grow-1"],["class","badge badge-pill badge-primary badge-nb-processes",4,"ngIf"],[1,"ml-2","toggle-icon"],[1,"fas",3,"ngClass"],["ngbCollapse","",3,"ngbCollapse"],[4,"ngVar"],[1,"badge","badge-pill","badge-primary","badge-nb-processes"],[4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive","mt-1"],[1,"table","table-striped","table-hover"],["scope","col",1,"id-header"],["scope","col",1,"name-header"],["scope","col",1,"user-header"],["scope","col",1,"info-header"],["scope","col",1,"actions-header"],[3,"class",4,"ngFor","ngForOf"],[3,"routerLink"],["aria-hidden","true",1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"div",2),core.bIt("click",function(){core.eBV(_r1);const collapse_r2=core.sdS(10);return core.Njj(collapse_r2.toggle())}),core.j41(2,"h2",3),core.EFF(3),core.nI1(4,"translate"),core.DNE(5,ProcessOverviewTableComponent_span_5_Template,2,1,"span",4),core.nI1(6,"async"),core.j41(7,"span",5),core.nrm(8,"i",6),core.k0s()()(),core.j41(9,"div",7,0),core.DNE(11,ProcessOverviewTableComponent_ng_container_11_Template,4,3,"ng-container",8),core.nI1(12,"async"),core.k0s()()}if(2&rf){const collapse_r2=core.sdS(10);core.R7$(),core.BMQ("aria-expanded",!collapse_r2.collapsed),core.R7$(2),core.SpI(" ",core.bMT(4,6,"process.overview.table."+ctx.processStatus.toLowerCase()+".title")," "),core.R7$(2),core.Y8G("ngIf",core.bMT(6,8,ctx.processesRD$)),core.R7$(3),core.Y8G("ngClass",collapse_r2.collapsed?"fa-angle-right":"fa-angle-down"),core.R7$(),core.Y8G("ngbCollapse",ctx.isCollapsed),core.R7$(2),core.Y8G("ngVar",core.bMT(12,10,ctx.processesRD$))}},dependencies:[common.YU,ng_bootstrap.HC,ng_bootstrap.$G,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,pagination_component.e,router.Wk,common.Sq,common.bT,themed_loading_component.v,var_directive.r],styles:[".toggle-icon[_ngcontent-%COMP%]{font-size:calc(var(--bs-small-font-size) * .6)}.badge-nb-processes[_ngcontent-%COMP%]{font-size:var(--ds-process-overview-table-nb-processes-badge-size);vertical-align:middle}.id-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-id-column-width)}.name-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-name-column-width)}.user-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-user-column-width)}.info-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-info-column-width)}.actions-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-actions-column-width)}"]})}return ProcessOverviewTableComponent2})();const process_overview_component_c0=a0=>({count:a0});function ProcessOverviewComponent_ng_container_5_Template(rf,ctx){1&rf&&core.eu8(0)}function ProcessOverviewComponent_ng_container_11_Template(rf,ctx){1&rf&&core.eu8(0)}function ProcessOverviewComponent_ng_template_12_button_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",14),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.processBulkDeleteService.clearAllProcesses())}),core.nrm(1,"i",15),core.EFF(2),core.nI1(3,"translate"),core.k0s()}2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,1,"process.overview.delete.clear")," "))}function ProcessOverviewComponent_ng_template_12_button_2_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",16),core.bIt("click",function(){core.eBV(_r3);const ctx_r1=core.XpG(2),deleteModal_r4=core.sdS(15);return core.Njj(ctx_r1.openDeleteModal(deleteModal_r4))}),core.nrm(1,"i",17),core.EFF(2),core.nI1(3,"translate"),core.k0s()}if(2&rf){const ctx_r1=core.XpG(2);core.R7$(2),core.SpI("",core.i5U(3,1,"process.overview.delete",core.eq3(4,process_overview_component_c0,ctx_r1.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}function ProcessOverviewComponent_ng_template_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",9),core.DNE(1,ProcessOverviewComponent_ng_template_12_button_1_Template,4,3,"button",10)(2,ProcessOverviewComponent_ng_template_12_button_2_Template,4,6,"button",11),core.j41(3,"button",12),core.nrm(4,"i",13),core.EFF(5),core.nI1(6,"translate"),core.k0s()()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r1.processBulkDeleteService.hasSelected()),core.R7$(),core.Y8G("ngIf",ctx_r1.processBulkDeleteService.hasSelected()),core.R7$(3),core.JRh(core.bMT(6,3,"process.overview.new"))}}function ProcessOverviewComponent_ng_template_14_div_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG(2);core.R7$(),core.JRh(core.i5U(2,1,"process.overview.delete.body",core.eq3(4,process_overview_component_c0,ctx_r1.processBulkDeleteService.getAmountOfSelectedProcesses())))}}function ProcessOverviewComponent_ng_template_14_div_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",27),core.nrm(1,"span",28),core.j41(2,"span"),core.EFF(3),core.nI1(4,"translate"),core.k0s()()),2&rf){const ctx_r1=core.XpG(2);core.R7$(3),core.SpI(" ",core.i5U(4,1,"process.overview.delete.processing",core.eq3(4,process_overview_component_c0,ctx_r1.processBulkDeleteService.getAmountOfSelectedProcesses())),"")}}function ProcessOverviewComponent_ng_template_14_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div")(1,"div",18)(2,"div")(3,"h4"),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"button",19),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.closeModal())}),core.j41(7,"span",20),core.EFF(8,"\xd7"),core.k0s()()(),core.j41(9,"div",21),core.DNE(10,ProcessOverviewComponent_ng_template_14_div_10_Template,3,6,"div",22),core.nI1(11,"async"),core.DNE(12,ProcessOverviewComponent_ng_template_14_div_12_Template,5,6,"div",23),core.nI1(13,"async"),core.j41(14,"div",24)(15,"button",25),core.nI1(16,"async"),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.closeModal())}),core.EFF(17),core.nI1(18,"translate"),core.k0s(),core.j41(19,"button",26),core.nI1(20,"async"),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.deleteSelected())}),core.EFF(21),core.nI1(22,"translate"),core.k0s()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(4),core.JRh(core.bMT(5,7,"process.overview.delete.header")),core.R7$(6),core.Y8G("ngIf",!0!==core.bMT(11,9,ctx_r1.processBulkDeleteService.isProcessing$())),core.R7$(2),core.Y8G("ngIf",core.bMT(13,11,ctx_r1.processBulkDeleteService.isProcessing$())),core.R7$(3),core.Y8G("disabled",core.bMT(16,13,ctx_r1.processBulkDeleteService.isProcessing$())),core.R7$(2),core.JRh(core.bMT(18,15,"process.detail.delete.cancel")),core.R7$(2),core.Y8G("disabled",core.bMT(20,17,ctx_r1.processBulkDeleteService.isProcessing$())),core.R7$(2),core.SpI("",core.i5U(22,19,"process.overview.delete",core.eq3(22,process_overview_component_c0,ctx_r1.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}let ProcessOverviewComponent=(()=>{class ProcessOverviewComponent2{constructor(processOverviewService,modalService,processBulkDeleteService){this.processOverviewService=processOverviewService,this.modalService=modalService,this.processBulkDeleteService=processBulkDeleteService,this.ProcessStatus=process_status_model.K,this.ProcessSortField=ProcessSortField}ngOnInit(){this.processBulkDeleteService.clearAllProcesses()}ngOnDestroy(){(0,empty_util.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(content){this.modalRef=this.modalService.open(content)}closeModal(){this.modalRef.close()}deleteSelected(){this.processBulkDeleteService.deleteSelectedProcesses(),(0,empty_util.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe(),this.isProcessingSub=this.processBulkDeleteService.isProcessing$().subscribe(isProcessing=>{isProcessing||this.closeModal()})}static#_=this.\u0275fac=function(t){return new(t||ProcessOverviewComponent2)(core.rXU(ProcessOverviewService),core.rXU(ng_bootstrap.Bq),core.rXU(ProcessBulkDeleteService))};static#_2=this.\u0275cmp=core.VBU({type:ProcessOverviewComponent2,selectors:[["ds-process-overview"]],standalone:!0,features:[core.aNF],decls:16,vars:19,consts:[["buttons",""],["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[4,"ngTemplateOutlet"],[1,"sections"],[3,"processStatus","useAutoRefreshingSearchBy","getInfoValueMethod"],[3,"processStatus","sortField","useAutoRefreshingSearchBy","getInfoValueMethod"],[1,"d-flex","justify-content-end","mb-2"],["class","btn btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-danger mr-2",3,"click",4,"ngIf"],["routerLink","/processes/new",1,"btn","btn-success"],[1,"fas","fa-plus","pr-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-undo","pr-2"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"fas","fa-trash","pr-2"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click","disabled"],["id","delete-confirm",1,"btn","btn-danger",3,"click","disabled"],[1,"alert","alert-info"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"h1",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.DNE(5,ProcessOverviewComponent_ng_container_5_Template,1,0,"ng-container",5),core.j41(6,"div",6),core.nrm(7,"ds-process-overview-table",7)(8,"ds-process-overview-table",7)(9,"ds-process-overview-table",8)(10,"ds-process-overview-table",8),core.k0s(),core.DNE(11,ProcessOverviewComponent_ng_container_11_Template,1,0,"ng-container",5),core.k0s(),core.DNE(12,ProcessOverviewComponent_ng_template_12_Template,7,5,"ng-template",null,0,core.C5r)(14,ProcessOverviewComponent_ng_template_14_Template,23,24,"ng-template",null,1,core.C5r)),2&rf){const buttons_r6=core.sdS(13);core.R7$(3),core.JRh(core.bMT(4,17,"process.overview.title")),core.R7$(2),core.Y8G("ngTemplateOutlet",buttons_r6),core.R7$(2),core.Y8G("processStatus",ctx.ProcessStatus.RUNNING)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",ctx.processOverviewService.timeStarted),core.R7$(),core.Y8G("processStatus",ctx.ProcessStatus.SCHEDULED)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",ctx.processOverviewService.timeCreated),core.R7$(),core.Y8G("processStatus",ctx.ProcessStatus.COMPLETED)("sortField",ctx.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",ctx.processOverviewService.timeCompleted),core.R7$(),core.Y8G("processStatus",ctx.ProcessStatus.FAILED)("sortField",ctx.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",ctx.processOverviewService.timeCompleted),core.R7$(),core.Y8G("ngTemplateOutlet",buttons_r6)}},dependencies:[common.bT,router.Wk,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,common.T3,ProcessOverviewTableComponent],encapsulation:2})}return ProcessOverviewComponent2})();var breadcrumb_model=__webpack_require__(96622);let ProcessBreadcrumbsService=(()=>{class ProcessBreadcrumbsService2{getBreadcrumbs(key,url){return(0,empty_util.a4)(key)?(0,cjs.of)([new breadcrumb_model.Q(key.processId+" - "+key.scriptName,url)]):(0,cjs.of)([])}static#_=this.\u0275fac=function(t){return new(t||ProcessBreadcrumbsService2)};static#_2=this.\u0275prov=core.jDH({token:ProcessBreadcrumbsService2,factory:ProcessBreadcrumbsService2.\u0275fac,providedIn:"root"})}return ProcessBreadcrumbsService2})();const ROUTES=[{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{breadcrumbKey:"process.overview"},canActivate:[authenticated_guard.t],children:[{path:"",component:ProcessOverviewComponent,data:{title:"process.overview.title"}},{path:"new",component:NewProcessComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:ProcessDetailComponent,resolve:{process:(route,state,processService=(0,core.WQX)(process_data_service.ProcessDataService))=>processService.findById(route.params.id,!1,!0,...PROCESS_PAGE_FOLLOW_LINKS).pipe((0,shared_operators.qD)()),breadcrumb:(route,state,breadcrumbService=(0,core.WQX)(ProcessBreadcrumbsService),processService=(0,core.WQX)(process_data_service.ProcessDataService))=>{const id=route.params.id;return processService.findById(route.params.id,!0,!1,(0,follow_link_config_model.s)("script")).pipe((0,shared_operators.qD)(),(0,operators.Tj)(object=>{const fullPath=state.url,url=fullPath.substring(0,fullPath.indexOf(id)).concat(id);return{provider:breadcrumbService,key:object.payload,url}}))}}}]}]},89705:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HasNoValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014);let HasNoValuePipe=(()=>{class HasNoValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.Tn)(value)}static#_=this.\u0275fac=function(t){return new(t||HasNoValuePipe2)};static#_2=this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasNoValue",type:HasNoValuePipe2,pure:!0,standalone:!0})}return HasNoValuePipe2})()},10585:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>HasValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014);let HasValuePipe=(()=>{class HasValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.a4)(value)}static#_=this.\u0275fac=function(t){return new(t||HasValuePipe2)};static#_2=this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasValue",type:HasValuePipe2,pure:!0,standalone:!0})}return HasValuePipe2})()},2823:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>FileValidator});var _angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28955),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68014);let FileValidator=(()=>{class FileValidator2{static validate(c){return null==c.value||0===c.value.length?{required:!0}:null}validate(c){return FileValidator2.validate(c)}static#_=this.\u0275fac=function(t){return new(t||FileValidator2)};static#_2=this.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__.FsC({type:FileValidator2,selectors:[["","requireFile",""]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jv_([{provide:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.cz,useExisting:FileValidator2,multi:!0}])]})}return FileValidator2})()}};