exports.id=504,exports.ids=[504],exports.modules={2195:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>EpersonRegistrationService});var http=__webpack_require__(38068),operators=__webpack_require__(10743),empty_util=__webpack_require__(77028),remote_data_build_service=__webpack_require__(86786),hal_endpoint_service=__webpack_require__(91365),shared_operators=__webpack_require__(82656),registration_model=__webpack_require__(16212),response_models=__webpack_require__(50979),core=__webpack_require__(68014);let RegistrationResponseParsingService=(()=>{class RegistrationResponseParsingService2{parse(request,data){const payload=data.payload,registration=Object.assign(new registration_model.c,payload);return new response_models.hT(data.statusCode,void 0,registration)}static#_=this.\u0275fac=function(t){return new(t||RegistrationResponseParsingService2)};static#_2=this.\u0275prov=core.jDH({token:RegistrationResponseParsingService2,factory:RegistrationResponseParsingService2.\u0275fac,providedIn:"root"})}return RegistrationResponseParsingService2})();var request_models=__webpack_require__(87457),request_service=__webpack_require__(72744);let EpersonRegistrationService=(()=>{class EpersonRegistrationService2{constructor(requestService,rdbService,halService){this.requestService=requestService,this.rdbService=rdbService,this.halService=halService,this.linkPath="registrations",this.searchByTokenPath="/search/findByToken?token="}getRegistrationEndpoint(){return this.halService.getEndpoint(this.linkPath)}getTokenSearchEndpoint(token){return this.halService.getEndpoint(this.linkPath).pipe((0,operators.pb)(href=>(0,empty_util.hj)(href)),(0,operators.Tj)(href=>`${href}${this.searchByTokenPath}${token}`))}registerEmail(email,captchaToken=null,type){const registration=new registration_model.c;registration.email=email;const requestId=this.requestService.generateRequestId(),href$=this.getRegistrationEndpoint(),options=Object.create({});let headers=new http.Lr;return captchaToken&&(headers=headers.append("x-recaptcha-token",captchaToken)),options.headers=headers,(0,empty_util.a4)(type)&&(options.params=type?new http.Nl({fromString:"accountRequestType="+type}):new http.Nl),href$.pipe((0,operators.I6)(href=>(0,empty_util.a4)(href)),(0,operators.Tj)(href=>{const request=new request_models.Qf(requestId,href,registration,options);this.requestService.send(request)})).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe((0,shared_operators.qD)())}searchByToken(token){const requestId=this.requestService.generateRequestId(),href$=this.getTokenSearchEndpoint(token).pipe((0,operators.I6)(href=>(0,empty_util.a4)(href)));return href$.subscribe(href=>{const request=new request_models.IP(requestId,href);Object.assign(request,{getResponseParser:()=>RegistrationResponseParsingService}),this.requestService.send(request,!0)}),this.rdbService.buildSingle(href$).pipe((0,operators.Tj)(rd=>rd.hasSucceeded&&(0,empty_util.a4)(rd.payload)?Object.assign(rd,{payload:Object.assign(rd.payload,{token})}):rd))}static#_=this.\u0275fac=function(t){return new(t||EpersonRegistrationService2)(core.KVO(request_service.B),core.KVO(remote_data_build_service.o),core.KVO(hal_endpoint_service.Y))};static#_2=this.\u0275prov=core.jDH({token:EpersonRegistrationService2,factory:EpersonRegistrationService2.\u0275fac,providedIn:"root"})}return EpersonRegistrationService2})()},7411:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ForgotEmailComponent:()=>ForgotEmailComponent});var src_app_register_email_form_themed_registry_email_form_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5089),_register_email_form_register_email_form_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59081),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68014);let ForgotEmailComponent=(()=>{class ForgotEmailComponent2{constructor(){this.typeRequest=_register_email_form_register_email_form_component__WEBPACK_IMPORTED_MODULE_1__.TYPE_REQUEST_FORGOT}static#_=this.\u0275fac=function(t){return new(t||ForgotEmailComponent2)};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ForgotEmailComponent2,selectors:[["ds-base-forgot-email"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],decls:1,vars:2,consts:[[3,"MESSAGE_PREFIX","typeRequest"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__.nrm(0,"ds-register-email-form",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y8G("MESSAGE_PREFIX","forgot-email.form")("typeRequest",ctx.typeRequest)},dependencies:[src_app_register_email_form_themed_registry_email_form_component__WEBPACK_IMPORTED_MODULE_0__.I]})}return ForgotEmailComponent2})()},531:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ForgotPasswordFormComponent:()=>ForgotPasswordFormComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10743),_core_auth_auth_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1927),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(62120),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_profile_page_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25501),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10117),_shared_utils_browser_only_pipe__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(87154),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_ngrx_store__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5136),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(64247);function ForgotPasswordFormComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",1)(1,"h1",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(4,"div",3)(5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(8,"div",5)(9,"div",6)(10,"div",7)(11,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(14,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(15,"dsBrowserOnly"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(16),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(18,"div",3)(19,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(20),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(22,"div",5)(23,"ds-profile-page-security-form",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("isInvalid",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(ctx_r1.setInValid($event))})("passwordValue",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(ctx_r1.setPasswordValue($event))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(24,"div",6)(25,"div",7)(26,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(ctx_r1.submit())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(3,10,"forgot-password.form.head")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(7,12,"forgot-password.form.identification.header")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.SpI("",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(13,14,"forgot-password.form.identification.email")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.BMQ("data-test",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(15,16,"email")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(17,18,ctx_r1.registration$).email),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(21,20,"forgot-password.form.card.security")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("passwordCanBeEmpty",!1)("FORM_PREFIX","forgot-password.form."),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("disabled",ctx_r1.isInValid),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(28,22,"forgot-password.form.submit"))}}let ForgotPasswordFormComponent=(()=>{class ForgotPasswordFormComponent2{constructor(ePersonDataService,translateService,notificationsService,store,router,route){this.ePersonDataService=ePersonDataService,this.translateService=translateService,this.notificationsService=notificationsService,this.store=store,this.router=router,this.route=route,this.isInValid=!0,this.NOTIFICATIONS_PREFIX="forgot-password.form.notification"}ngOnInit(){this.registration$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(data=>data.registration),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ak)()),this.registration$.subscribe(registration=>{this.email=registration.email,this.token=registration.token,this.user=registration.user})}setInValid($event){this.isInValid=$event}setPasswordValue($event){this.password=$event}submit(){this.isInValid||this.ePersonDataService.patchPasswordWithToken(this.user,this.token,this.password).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(response=>{response.hasSucceeded?(this.notificationsService.success(this.translateService.instant(this.NOTIFICATIONS_PREFIX+".success.title"),this.translateService.instant(this.NOTIFICATIONS_PREFIX+".success.content")),this.store.dispatch(new _core_auth_auth_actions__WEBPACK_IMPORTED_MODULE_0__.Sn(this.email,this.password)),this.router.navigate(["/home"])):this.notificationsService.error(this.translateService.instant(this.NOTIFICATIONS_PREFIX+".error.title"),response.errorMessage)})}static#_=this.\u0275fac=function(t){return new(t||ForgotPasswordFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_1__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.il),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ForgotPasswordFormComponent2,selectors:[["ds-base-forgot-password-form"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"font-weight-bold"],[3,"isInvalid","passwordValue","passwordCanBeEmpty","FORM_PREFIX"],[1,"btn","btn-default","btn-primary",3,"click","disabled"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(0,ForgotPasswordFormComponent_div_0_Template,29,24,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,1,ctx.registration$))},dependencies:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.D9,_shared_utils_browser_only_pipe__WEBPACK_IMPORTED_MODULE_10__.L,_profile_page_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_3__.q,_angular_common__WEBPACK_IMPORTED_MODULE_11__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_11__.bT]})}return ForgotPasswordFormComponent2})()},10504:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var registration_guard=__webpack_require__(12809),themed_component=__webpack_require__(31260),core=(__webpack_require__(7411),__webpack_require__(68014));const _c0=["*"];function ThemedForgotEmailComponent_ng_template_0_Template(rf,ctx){}let ThemedForgotEmailComponent=(()=>{class ThemedForgotEmailComponent2 extends themed_component.J{getComponentName(){return"ForgotEmailComponent"}importThemedComponent(themeName){return __webpack_require__(67646)(`./${themeName}/app/forgot-password/forgot-password-email/forgot-email.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7411))}static#_=this.\u0275fac=(()=>{let \u0275ThemedForgotEmailComponent_BaseFactory;return function(t){return(\u0275ThemedForgotEmailComponent_BaseFactory||(\u0275ThemedForgotEmailComponent_BaseFactory=core.xGo(ThemedForgotEmailComponent2)))(t||ThemedForgotEmailComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedForgotEmailComponent2,selectors:[["ds-forgot-email"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedForgotEmailComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedForgotEmailComponent2})();__webpack_require__(531);const themed_forgot_password_form_component_c0=["*"];function ThemedForgotPasswordFormComponent_ng_template_0_Template(rf,ctx){}const ROUTES=[{path:"",component:ThemedForgotEmailComponent,data:{title:"forgot-password.title"}},{path:":token",component:(()=>{class ThemedForgotPasswordFormComponent2 extends themed_component.J{getComponentName(){return"ForgotPasswordFormComponent"}importThemedComponent(themeName){return __webpack_require__(15706)(`./${themeName}/app/forgot-password/forgot-password-form/forgot-password-form.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,531))}static#_=this.\u0275fac=(()=>{let \u0275ThemedForgotPasswordFormComponent_BaseFactory;return function(t){return(\u0275ThemedForgotPasswordFormComponent_BaseFactory||(\u0275ThemedForgotPasswordFormComponent_BaseFactory=core.xGo(ThemedForgotPasswordFormComponent2)))(t||ThemedForgotPasswordFormComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedForgotPasswordFormComponent2,selectors:[["ds-forgot-password-form"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_forgot_password_form_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedForgotPasswordFormComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedForgotPasswordFormComponent2})(),canActivate:[registration_guard.r]}]},25501:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>ProfilePageSecurityFormComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(71508),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62120),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14467),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(49148),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10117);function ProfilePageSecurityFormComponent_ds_form_3_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-form",4),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("formId",ctx_r0.FORM_PREFIX)("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function ProfilePageSecurityFormComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.matching-passwords"))}}function ProfilePageSecurityFormComponent_div_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.empty-password"))}}let ProfilePageSecurityFormComponent=(()=>{class ProfilePageSecurityFormComponent2{constructor(formService,translate,epersonService,notificationsService){this.formService=formService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.isInvalid=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.passwordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.currentPasswordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"password",name:"password",inputType:"password",autoComplete:"new-password"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"passwordrepeat",name:"passwordrepeat",inputType:"password",autoComplete:"new-password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){"profile.security.form."===this.FORM_PREFIX&&this.formModel.unshift(new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"current-password",name:"current-password",inputType:"password",required:!0,autoComplete:"current-password"})),this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual]}:{validators:[this.checkPasswordsEqual,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(status=>"VALID"!==status)).subscribe(status=>this.isInvalid.emit(status))),this.subs.push(this.formGroup.valueChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300)).subscribe(valueChange=>{this.passwordValue.emit(valueChange.password),"profile.security.form."===this.FORM_PREFIX&&this.currentPasswordValue.emit(valueChange["current-password"])}))}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.FORM_PREFIX+"label."+fieldModel.id)})}checkPasswordsEqual(group){return group.get("password").value===group.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordEmpty(group){const pass=group.get("password").value;return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Im)(pass)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||ProfilePageSecurityFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.J9r),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ProfilePageSecurityFormComponent2,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue",currentPasswordValue:"currentPasswordValue"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:6,vars:7,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(3,ProfilePageSecurityFormComponent_ds_form_3_Template,1,5,"ds-form",1)(4,ProfilePageSecurityFormComponent_div_4_Template,3,3,"div",2)(5,ProfilePageSecurityFormComponent_div_5_Template,3,3,"div",3)),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,ctx.FORM_PREFIX+"info")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",ctx.formModel),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",ctx.formGroup.hasError("notSame")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",(ctx.formGroup.dirty||ctx.formGroup.touched)&&ctx.formGroup.hasError("emptyPassword")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__.s,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__.C,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.D9],encapsulation:2})}return ProfilePageSecurityFormComponent2})()},59081:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RegisterEmailFormComponent:()=>RegisterEmailFormComponent,TYPE_REQUEST_FORGOT:()=>TYPE_REQUEST_FORGOT,TYPE_REQUEST_REGISTER:()=>TYPE_REQUEST_REGISTER});var common=__webpack_require__(84739),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),configuration_data_service=__webpack_require__(44994),eperson_registration_service=__webpack_require__(2195),empty_util=__webpack_require__(77028),cookie_service=__webpack_require__(52161),window_service=__webpack_require__(25955),shared_operators=__webpack_require__(82656),core=__webpack_require__(68014);let GoogleRecaptchaService=(()=>{class GoogleRecaptchaService2{captchaKey(){return this.captchaKeySubject$.asObservable()}captchaMode(){return this.captchaModeSubject$.asObservable()}captchaVersion(){return this.captchaVersionSubject$.asObservable()}constructor(cookieService,_document,_window,rendererFactory,configService){this.cookieService=cookieService,this._document=_document,this._window=_window,this.configService=configService,this.captchaVersionSubject$=new cjs.BehaviorSubject(null),this.captchaKeySubject$=new cjs.BehaviorSubject(null),this.captchaModeSubject$=new cjs.BehaviorSubject(null),this.refreshCaptchaScript=()=>{this.loadRecaptchaProperties().subscribe()},this._window.nativeWindow&&(this._window.nativeWindow.refreshCaptchaScript=this.refreshCaptchaScript),this.renderer=rendererFactory.createRenderer(null,null),this.configService.findByPropertyName("registration.verification.enabled").pipe((0,operators.s)(1),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res.hasSucceeded&&res.payload&&(0,empty_util.hj)(res.payload.values)&&"true"===res.payload.values[0].toLowerCase())).pipe((0,operators.nx)(registrationVerification=>registrationVerification?this.loadRecaptchaProperties():cjs.EMPTY)).subscribe()}loadRecaptchaProperties(){const recaptchaKeyRD$=this.configService.findByPropertyName("google.recaptcha.key.site").pipe((0,shared_operators.qD)()),recaptchaVersionRD$=this.configService.findByPropertyName("google.recaptcha.version").pipe((0,shared_operators.qD)()),recaptchaModeRD$=this.configService.findByPropertyName("google.recaptcha.mode").pipe((0,shared_operators.qD)());return(0,cjs.combineLatest)([recaptchaVersionRD$,recaptchaModeRD$,recaptchaKeyRD$]).pipe((0,operators.Mi)(([recaptchaVersionRD,recaptchaModeRD,recaptchaKeyRD])=>{if(this.cookieService.get("klaro-anonymous")&&this.cookieService.get("klaro-anonymous")["google-recaptcha"]&&recaptchaKeyRD.hasSucceeded&&recaptchaVersionRD.hasSucceeded&&(0,empty_util.hj)(recaptchaVersionRD.payload?.values)&&(0,empty_util.hj)(recaptchaKeyRD.payload?.values)){const key=recaptchaKeyRD.payload?.values[0],version=recaptchaVersionRD.payload?.values[0];let captchaUrl;switch(this.captchaKeySubject$.next(key),this.captchaVersionSubject$.next(version),version){case"v3":recaptchaKeyRD.hasSucceeded&&(0,empty_util.hj)(recaptchaKeyRD.payload?.values)&&(captchaUrl=this.buildCaptchaUrl(key),this.captchaModeSubject$.next("invisible"));break;case"v2":recaptchaModeRD.hasSucceeded&&(0,empty_util.hj)(recaptchaModeRD.payload?.values)&&(captchaUrl=this.buildCaptchaUrl(),this.captchaModeSubject$.next(recaptchaModeRD.payload?.values[0]))}captchaUrl&&this.loadScript(captchaUrl)}}))}getRecaptchaToken(action){return this.captchaKey().pipe((0,operators.nx)(key=>grecaptcha.execute(key,{action})))}executeRecaptcha(){return(0,cjs.of)(grecaptcha.execute())}getRecaptchaTokenResponse(){return grecaptcha.getResponse()}buildCaptchaUrl(key){const apiUrl="https://www.google.com/recaptcha/api.js";return key?`${apiUrl}?render=${key}`:apiUrl}loadScript(url){return new Promise((resolve,reject)=>{const script=this.renderer.createElement("script");script.type="text/javascript",script.src=url,script.text="",script.onload=resolve,script.onerror=reject,this.renderer.appendChild(this._document.head,script)})}static#_=this.\u0275fac=function(t){return new(t||GoogleRecaptchaService2)(core.KVO(cookie_service.O),core.KVO(common.qQ),core.KVO(window_service.lc),core.KVO(core._9s),core.KVO(configuration_data_service.ConfigurationDataService))};static#_2=this.\u0275prov=core.jDH({token:GoogleRecaptchaService2,factory:GoogleRecaptchaService2.\u0275fac,providedIn:"root"})}return GoogleRecaptchaService2})();var alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),google_recaptcha_component=__webpack_require__(49579),notifications_service=__webpack_require__(10117),router=__webpack_require__(64247),klaro_service=__webpack_require__(72069);const _c0=a0=>({domains:a0});function RegisterEmailFormComponent_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Lme(" ",core.bMT(2,2,ctx_r0.MESSAGE_PREFIX+".info.maildomain")," ",ctx_r0.validMailDomains.join(", ")," ")}}function RegisterEmailFormComponent_div_16_span_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.SpI(" ",core.bMT(2,1,ctx_r0.MESSAGE_PREFIX+".email.error.required")," ")}}function RegisterEmailFormComponent_div_16_span_2_ng_container_3_Template(rf,ctx){if(1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"translate"),core.bVm()),2&rf){const ctx_r0=core.XpG(3);core.R7$(),core.SpI(" ",core.i5U(2,1,ctx_r0.MESSAGE_PREFIX+".email.error.not-valid-domain",core.eq3(4,_c0,ctx_r0.validMailDomains.join(", ")))," ")}}function RegisterEmailFormComponent_div_16_span_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.DNE(3,RegisterEmailFormComponent_div_16_span_2_ng_container_3_Template,3,6,"ng-container",2),core.k0s()),2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.SpI(" ",core.bMT(2,2,ctx_r0.MESSAGE_PREFIX+".email.error.not-email-form")," "),core.R7$(2),core.Y8G("ngIf",ctx_r0.validMailDomains.length>0)}}function RegisterEmailFormComponent_div_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",13),core.DNE(1,RegisterEmailFormComponent_div_16_span_1_Template,3,3,"span",2)(2,RegisterEmailFormComponent_div_16_span_2_Template,4,4,"span",2),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r0.email.errors&&ctx_r0.email.errors.required),core.R7$(),core.Y8G("ngIf",ctx_r0.email.errors&&(ctx_r0.email.errors.pattern&&ctx_r0.typeRequest===ctx_r0.TYPE_REQUEST_REGISTER||ctx_r0.email.errors.email))}}function RegisterEmailFormComponent_ds_alert_20_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"ds-alert",14),core.nrm(1,"p",15),core.nI1(2,"translate"),core.j41(3,"p",16)(4,"a",17),core.bIt("click",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.klaroService.showSettings())}),core.EFF(5),core.nI1(6,"translate"),core.k0s()()()}if(2&rf){const ctx_r0=core.XpG();core.Y8G("type",ctx_r0.AlertTypeEnum.Warning),core.R7$(),core.Y8G("innerHTML",core.bMT(2,3,ctx_r0.MESSAGE_PREFIX+".google-recaptcha.must-accept-cookies"),core.npT),core.R7$(4),core.JRh(core.bMT(6,5,ctx_r0.MESSAGE_PREFIX+".google-recaptcha.open-cookie-settings"))}}function RegisterEmailFormComponent_div_21_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"div",18)(1,"ds-google-recaptcha",19),core.nI1(2,"async"),core.bIt("executeRecaptcha",function($event){core.eBV(_r3);const ctx_r0=core.XpG();return core.Njj(ctx_r0.register($event))})("checkboxChecked",function($event){core.eBV(_r3);const ctx_r0=core.XpG();return core.Njj(ctx_r0.onCheckboxChecked($event))})("showNotification",function($event){core.eBV(_r3);const ctx_r0=core.XpG();return core.Njj(ctx_r0.showNotification($event))}),core.k0s()()}if(2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("captchaMode",core.bMT(2,1,ctx_r0.googleRecaptchaService.captchaMode()))}}function RegisterEmailFormComponent_ng_container_23_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.qex(0),core.j41(1,"button",20),core.bIt("click",function(){core.eBV(_r4);const ctx_r0=core.XpG();return core.Njj(ctx_r0.register())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("disabled",ctx_r0.form.invalid||ctx_r0.registrationVerification&&!ctx_r0.isRecaptchaCookieAccepted()||ctx_r0.disableUntilChecked),core.R7$(),core.SpI(" ",core.bMT(3,2,ctx_r0.MESSAGE_PREFIX+".submit")," ")}}function RegisterEmailFormComponent_ng_template_26_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",20),core.bIt("click",function(){core.eBV(_r5);const ctx_r0=core.XpG();return core.Njj(ctx_r0.executeRecaptcha())}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}if(2&rf){const ctx_r0=core.XpG();core.Y8G("disabled",ctx_r0.form.invalid),core.R7$(),core.SpI(" ",core.bMT(2,2,ctx_r0.MESSAGE_PREFIX+".submit")," ")}}const TYPE_REQUEST_FORGOT="forgot",TYPE_REQUEST_REGISTER="register";let RegisterEmailFormComponent=(()=>{class RegisterEmailFormComponent2{captchaVersion(){return this.googleRecaptchaService.captchaVersion()}captchaMode(){return this.googleRecaptchaService.captchaMode()}constructor(epersonRegistrationService,notificationService,translateService,router2,formBuilder,configService,googleRecaptchaService,cookieService,klaroService,changeDetectorRef,notificationsService){this.epersonRegistrationService=epersonRegistrationService,this.notificationService=notificationService,this.translateService=translateService,this.router=router2,this.formBuilder=formBuilder,this.configService=configService,this.googleRecaptchaService=googleRecaptchaService,this.cookieService=cookieService,this.klaroService=klaroService,this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.typeRequest=null,this.AlertTypeEnum=alert_type.v,this.registrationVerification=!1,this.checkboxCheckedSubject$=new cjs.BehaviorSubject(!1),this.disableUntilChecked=!0,this.TYPE_REQUEST_REGISTER=TYPE_REQUEST_REGISTER,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(sub=>sub.unsubscribe())}ngOnInit(){const validators=[fesm2022_forms.k0.required,fesm2022_forms.k0.email,fesm2022_forms.k0.pattern("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$")];this.form=this.formBuilder.group({email:new fesm2022_forms.hs("",{validators})}),this.validMailDomains=[],this.typeRequest===TYPE_REQUEST_REGISTER&&this.subscriptions.push(this.configService.findByPropertyName("authentication-password.domain.valid").pipe((0,shared_operators.Hz)()).subscribe(remoteData=>{this.validMailDomains=remoteData.values;for(const remoteValue of remoteData.values)0!==this.validMailDomains.length&&(this.form.get("email").setValidators([...validators,fesm2022_forms.k0.pattern(this.validMailDomains.map(domain=>"(^.*"+domain.replace(new RegExp("\\.","g"),"\\.")+"$)").join("|"))]),this.form.updateValueAndValidity());this.changeDetectorRef.detectChanges()})),this.subscriptions.push(this.configService.findByPropertyName("registration.verification.enabled").pipe((0,shared_operators.ak)(),(0,operators.Tj)(res=>"true"===res?.values[0].toLowerCase())).subscribe(res=>{this.registrationVerification=res})),this.subscriptions.push(this.disableUntilCheckedFcn().subscribe(res=>{this.disableUntilChecked=res,this.changeDetectorRef.detectChanges()}))}executeRecaptcha(){this.googleRecaptchaService.executeRecaptcha()}register(tokenV2){this.form.invalid||(this.registrationVerification?this.subscriptions.push((0,cjs.combineLatest)([this.captchaVersion(),this.captchaMode()]).pipe((0,cjs.switchMap)(([captchaVersion,captchaMode])=>"v3"===captchaVersion?this.googleRecaptchaService.getRecaptchaToken("register_email"):"v2"===captchaVersion&&"checkbox"===captchaMode?(0,cjs.of)(this.googleRecaptchaService.getRecaptchaTokenResponse()):"v2"===captchaVersion&&"invisible"===captchaMode?(0,cjs.of)(tokenV2):(console.error(`Invalid reCaptcha configuration: version = ${captchaVersion}, mode = ${captchaMode}`),void this.showNotification("error"))),(0,operators.s)(1)).subscribe(token=>{(0,empty_util.hj)(token)?this.registration(token):(console.error("reCaptcha error"),this.showNotification("error"))})):this.registration())}registration(captchaToken=null){const registerEmail$=this.epersonRegistrationService.registerEmail(this.email.value,captchaToken||null,this.typeRequest);this.subscriptions.push(registerEmail$.subscribe(response=>{response.hasSucceeded?(this.notificationService.success(this.translateService.get(`${this.MESSAGE_PREFIX}.success.head`),this.translateService.get(`${this.MESSAGE_PREFIX}.success.content`,{email:this.email.value})),this.router.navigate(["/home"])):this.notificationService.error(this.translateService.get(`${this.MESSAGE_PREFIX}.error.head`),422===response.statusCode?this.translateService.get(`${this.MESSAGE_PREFIX}.error.maildomain`,{domains:this.validMailDomains.join(", ")}):this.translateService.get(`${this.MESSAGE_PREFIX}.error.content`,{email:this.email.value}))}))}isRecaptchaCookieAccepted(){const klaroAnonymousCookie=this.cookieService.get("klaro-anonymous");return!!(0,empty_util.hj)(klaroAnonymousCookie)&&klaroAnonymousCookie["google-recaptcha"]}disableUntilCheckedFcn(){const checked$=this.checkboxCheckedSubject$.asObservable();return(0,cjs.combineLatest)([this.captchaVersion(),this.captchaMode(),checked$]).pipe((0,cjs.switchMap)(([captchaVersion,captchaMode,checked])=>(0,cjs.of)("v2"===captchaVersion&&"checkbox"===captchaMode&&!checked)),(0,operators.ql)(!0))}get email(){return this.form.get("email")}onCheckboxChecked(checked){this.checkboxCheckedSubject$.next(checked)}showNotification(key){const notificationTitle=this.translateService.get(this.MESSAGE_PREFIX+".google-recaptcha.notification.title"),notificationErrorMsg=this.translateService.get(this.MESSAGE_PREFIX+".google-recaptcha.notification.message.error"),notificationExpiredMsg=this.translateService.get(this.MESSAGE_PREFIX+".google-recaptcha.notification.message.expired");switch(key){case"expired":this.notificationsService.warning(notificationTitle,notificationExpiredMsg);break;case"error":this.notificationsService.error(notificationTitle,notificationErrorMsg);break;default:console.warn(`Unimplemented notification '${key}' from reCaptcha service`)}}static#_=this.\u0275fac=function(t){return new(t||RegisterEmailFormComponent2)(core.rXU(eperson_registration_service.f),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(router.Ix),core.rXU(fesm2022_forms.ze),core.rXU(configuration_data_service.ConfigurationDataService),core.rXU(GoogleRecaptchaService),core.rXU(cookie_service.O),core.rXU(klaro_service.$,8),core.rXU(core.gRc),core.rXU(notifications_service.I))};static#_2=this.\u0275cmp=core.VBU({type:RegisterEmailFormComponent2,selectors:[["ds-base-register-email-form"]],inputs:{MESSAGE_PREFIX:"MESSAGE_PREFIX",typeRequest:"typeRequest"},standalone:!0,features:[core.aNF],decls:28,vars:28,consts:[["v2Invisible",""],[1,"container"],[4,"ngIf"],[3,"formGroup"],[1,"form-group"],[1,"row"],[1,"col-12"],["for","email",1,"font-weight-bold"],["type","text","id","email","formControlName","email",3,"className"],["class","invalid-feedback show-feedback",4,"ngIf"],[3,"type",4,"ngIf"],["class","my-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"invalid-feedback","show-feedback"],[3,"type"],[1,"m-0",3,"innerHTML"],[1,"m-0"],["href","javascript:void(0);",3,"click"],[1,"my-3"],[3,"executeRecaptcha","checkboxChecked","showNotification","captchaMode"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"h1"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"p"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,RegisterEmailFormComponent_p_7_Template,3,4,"p",2),core.j41(8,"form",3)(9,"div",4)(10,"div",5)(11,"div",6)(12,"label",7),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.nrm(15,"input",8),core.DNE(16,RegisterEmailFormComponent_div_16_Template,3,2,"div",9),core.k0s(),core.j41(17,"div",6),core.EFF(18),core.nI1(19,"translate"),core.k0s()()(),core.DNE(20,RegisterEmailFormComponent_ds_alert_20_Template,7,7,"ds-alert",10)(21,RegisterEmailFormComponent_div_21_Template,3,3,"div",11),core.nI1(22,"async"),core.DNE(23,RegisterEmailFormComponent_ng_container_23_Template,4,4,"ng-container",12),core.nI1(24,"async"),core.nI1(25,"async"),core.DNE(26,RegisterEmailFormComponent_ng_template_26_Template,3,4,"ng-template",null,0,core.C5r),core.k0s()()),2&rf){const v2Invisible_r6=core.sdS(27);core.R7$(2),core.JRh(core.bMT(3,14,ctx.MESSAGE_PREFIX+".header")),core.R7$(3),core.JRh(core.bMT(6,16,ctx.MESSAGE_PREFIX+".info")),core.R7$(2),core.Y8G("ngIf",0!==ctx.validMailDomains.length&&ctx.typeRequest===ctx.TYPE_REQUEST_REGISTER),core.R7$(),core.HbH("ng-invalid"),core.Y8G("formGroup",ctx.form),core.R7$(5),core.JRh(core.bMT(14,18,ctx.MESSAGE_PREFIX+".email")),core.R7$(2),core.Y8G("className",ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)?"form-control is-invalid":"form-control"),core.R7$(),core.Y8G("ngIf",ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)),core.R7$(2),core.SpI(" ",core.bMT(19,20,ctx.MESSAGE_PREFIX+".email.hint")," "),core.R7$(2),core.Y8G("ngIf",ctx.registrationVerification&&!ctx.isRecaptchaCookieAccepted()),core.R7$(),core.Y8G("ngIf",ctx.isRecaptchaCookieAccepted()&&"v2"===core.bMT(22,22,ctx.googleRecaptchaService.captchaVersion())),core.R7$(2),core.Y8G("ngIf",!ctx.registrationVerification||"v2"!==core.bMT(24,24,ctx.googleRecaptchaService.captchaVersion())&&"invisible"===core.bMT(25,26,ctx.googleRecaptchaService.captchaMode()))("ngIfElse",v2Invisible_r6)}},dependencies:[common.bT,fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.X1,fesm2022_forms.j4,fesm2022_forms.JD,alert_component.C,google_recaptcha_component.U,common.Jj,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}return RegisterEmailFormComponent2})()},5089:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>ThemedRegisterEmailFormComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(59081),__webpack_require__(68014));const _c0=["*"];function ThemedRegisterEmailFormComponent_ng_template_0_Template(rf,ctx){}let ThemedRegisterEmailFormComponent=(()=>{class ThemedRegisterEmailFormComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{constructor(){super(...arguments),this.inAndOutputNames=["MESSAGE_PREFIX","typeRequest"]}getComponentName(){return"RegisterEmailFormComponent"}importThemedComponent(themeName){return __webpack_require__(41546)(`./${themeName}/app/register-email-form/register-email-form.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,59081))}static#_=this.\u0275fac=(()=>{let \u0275ThemedRegisterEmailFormComponent_BaseFactory;return function(t){return(\u0275ThemedRegisterEmailFormComponent_BaseFactory||(\u0275ThemedRegisterEmailFormComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_2__.xGo(ThemedRegisterEmailFormComponent2)))(t||ThemedRegisterEmailFormComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ThemedRegisterEmailFormComponent2,selectors:[["ds-register-email-form"]],inputs:{MESSAGE_PREFIX:"MESSAGE_PREFIX",typeRequest:"typeRequest"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.DNE(0,ThemedRegisterEmailFormComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_2__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.k0s())},encapsulation:2})}return ThemedRegisterEmailFormComponent2})()},12809:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>registrationGuard});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(64247),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41543),_core_data_eperson_registration_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2195),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(78911),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656);const registrationGuard=(route,state,authService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.WQX)(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR),epersonRegistrationService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.WQX)(_core_data_eperson_registration_service__WEBPACK_IMPORTED_MODULE_1__.f),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_5__.Ix))=>epersonRegistrationService.searchByToken(route.params.token).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_2__.QD)(router,authService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(rd=>(route.data={...route.data,registration:rd},rd.hasSucceeded)))},49579:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>GoogleRecaptchaComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68014),src_app_core_services_window_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25955),_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44994),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028);let GoogleRecaptchaComponent=(()=>{class GoogleRecaptchaComponent2{constructor(_window,configService){this._window=_window,this.configService=configService,this.executeRecaptcha=new _angular_core__WEBPACK_IMPORTED_MODULE_3__.bkB,this.checkboxChecked=new _angular_core__WEBPACK_IMPORTED_MODULE_3__.bkB,this.showNotification=new _angular_core__WEBPACK_IMPORTED_MODULE_3__.bkB,this.dataCallbackFcn=$event=>{switch(this.captchaMode){case"invisible":this.executeRecaptcha.emit($event);break;case"checkbox":this.checkboxChecked.emit((0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.hj)($event));break;default:console.error(`Invalid reCaptcha mode '${this.captchaMode}`),this.showNotification.emit("error")}},this.expiredCallbackFcn=()=>{this.checkboxChecked.emit(!1),this.showNotification.emit("expired")},this.errorCallbackFcn=()=>{this.showNotification.emit("error")}}ngOnInit(){this.recaptchaKey$=this.configService.findByPropertyName("google.recaptcha.key.site").pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ak)()),this._window.nativeWindow.dataCallback=this.dataCallbackFcn,this._window.nativeWindow.expiredCallback=this.expiredCallbackFcn,this._window.nativeWindow.errorCallback=this.errorCallbackFcn}static#_=this.\u0275fac=function(t){return new(t||GoogleRecaptchaComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(src_app_core_services_window_service__WEBPACK_IMPORTED_MODULE_0__.lc),_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_1__.ConfigurationDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:GoogleRecaptchaComponent2,selectors:[["ds-google-recaptcha"]],inputs:{captchaMode:"captchaMode"},outputs:{executeRecaptcha:"executeRecaptcha",checkboxChecked:"checkboxChecked",showNotification:"showNotification"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],decls:2,vars:7,consts:[[1,"g-recaptcha"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.nrm(0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.nI1(1,"async")),2&rf){let tmp_3_0;_angular_core__WEBPACK_IMPORTED_MODULE_3__.BMQ("data-callback","dataCallback")("data-expired-callback","expiredCallback")("data-error-callback","errorCallback")("data-sitekey",null==(tmp_3_0=_angular_core__WEBPACK_IMPORTED_MODULE_3__.bMT(1,5,ctx.recaptchaKey$))?null:tmp_3_0.values[0])("data-size","invisible"===ctx.captchaMode?"invisible":null)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.Jj]})}return GoogleRecaptchaComponent2})()},67646:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/forgot-password/forgot-password-email/forgot-email.component":[11054,1054]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=67646,module.exports=webpackAsyncContext},15706:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/forgot-password/forgot-password-form/forgot-password-form.component":[20184,184]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=15706,module.exports=webpackAsyncContext},41546:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/register-email-form/register-email-form.component":[39638,9638]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=41546,module.exports=webpackAsyncContext}};