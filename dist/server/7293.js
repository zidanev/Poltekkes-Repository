exports.id=7293,exports.ids=[7293,8870,1502,6739,1555,148,9969,7231,1870],exports.modules={20550:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>DSOBreadcrumbResolver,o:()=>DSOBreadcrumbResolverByUuid});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45930),_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(77028),_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656);const DSOBreadcrumbResolver=(route,state,breadcrumbService,dataService,...linksToFollow)=>DSOBreadcrumbResolverByUuid(route,state,route.params.id,breadcrumbService,dataService,...linksToFollow),DSOBreadcrumbResolverByUuid=(route,state,uuid,breadcrumbService,dataService,...linksToFollow)=>dataService.findById(uuid,!0,!1,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(object=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.a4)(object))return{provider:breadcrumbService,key:object,url:(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(object)}}))},15446:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>DSOBreadcrumbsService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10743),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45930),_breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96622),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77028),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(32181),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(48614),_dso_name_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91735),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);let DSOBreadcrumbsService=(()=>{class DSOBreadcrumbsService2{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__.Q(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)(propertyName))[propertyName].pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.I6)(parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.nx)(parentRD=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(parent))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([])}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(breadcrumbs=>[...breadcrumbs,crumb]))}static#_=this.\u0275fac=function(t){return new(t||DSOBreadcrumbsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__._),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_dso_name_service__WEBPACK_IMPORTED_MODULE_2__.f))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:DSOBreadcrumbsService2,factory:DSOBreadcrumbsService2.\u0275fac,providedIn:"root"})}return DSOBreadcrumbsService2})()},96293:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>dsoPageSingleFeatureGuard});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10743),_dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39833);const dsoPageSingleFeatureGuard=(getResolveFn,getFeatureID)=>(0,_dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__.FO)(getResolveFn,(route,state)=>getFeatureID(route,state).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Tj)(featureID=>[featureID])))},39833:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FO:()=>dsoPageSomeFeatureGuard});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(77028),_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82656),_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(90254);const defaultDSOGetObjectUrl=resolve=>(route,state)=>{const routeWithObjectID=(route=>{let routeWithDSOId=route;for(;(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.Tn)(routeWithDSOId.params.id)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a4)(routeWithDSOId.parent);)routeWithDSOId=routeWithDSOId.parent;return routeWithDSOId})(route);return resolve(routeWithObjectID,state).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Hz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(dso=>dso.self))},dsoPageSomeFeatureGuard=(getResolveFn,getFeatureIDs,getObjectUrl=defaultDSOGetObjectUrl,getEPersonUuid)=>(0,_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_1__.h)((route,state)=>getFeatureIDs(route,state),getObjectUrl(getResolveFn()),getEPersonUuid)},22431:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>ItemRequestDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(59499),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);let ItemRequestDataService=(()=>{class ItemRequestDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService){super("itemrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getItemRequestEndpoint(){return this.halService.getEndpoint(this.linkPath)}getItemRequestEndpointByToken(token){return this.halService.getEndpoint(this.linkPath).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.pb)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.hj)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(href=>`${href}/${token}`))}requestACopy(itemRequest){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_5__.Qf(requestId,href,itemRequest);this.requestService.send(request)})).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)())}deny(token,email){return this.process(token,email,!1)}grant(token,email,suggestOpenAccess=!1){return this.process(token,email,!0,suggestOpenAccess)}process(token,email,grant,suggestOpenAccess=!1){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpointByToken(token).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.F)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.Lr;return headers=headers.append("Content-Type","application/json"),options.headers=headers,new _request_models__WEBPACK_IMPORTED_MODULE_5__.v_(requestId,endpointURL,JSON.stringify({acceptRequest:grant,responseMessage:email.message,subject:email.subject,suggestOpenAccess}),options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_10__.w$)(this.requestService)).subscribe(),this.rdbService.buildFromRequestUUID(requestId)}static#_=this.\u0275fac=function(t){return new(t||ItemRequestDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_6__.B),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.jDH({token:ItemRequestDataService2,factory:ItemRequestDataService2.\u0275fac,providedIn:"root"})}return ItemRequestDataService2})()},19969:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NotifyRequestsStatusDataService:()=>NotifyRequestsStatusDataService});var rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74785),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(68014);let NotifyRequestsStatusDataService=(()=>{class NotifyRequestsStatusDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService){super("notifyrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getNotifyRequestsStatus(itemUuid){const href$=this.getEndpoint().pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)(url=>url+"/"+itemUuid));return href$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.take)(1)).subscribe(url=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_4__.IP(this.requestService.generateRequestId(),url);this.requestService.send(request,!0)}),this.rdbService.buildFromHref(href$)}static#_=this.\u0275fac=function(t){return new(t||NotifyRequestsStatusDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_5__.B),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.jDH({token:NotifyRequestsStatusDataService2,factory:NotifyRequestsStatusDataService2.\u0275fac,providedIn:"root"})}return NotifyRequestsStatusDataService2})()},92203:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>SignpostingDataService});var rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59945),_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26597),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68014);let SignpostingDataService=(()=>{class SignpostingDataService2{constructor(appConfig,restService){this.appConfig=appConfig,this.restService=restService}getLinks(uuid){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${uuid}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.WL)(err=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)([])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(res=>200===res.statusCode?res.payload:[]))}static#_=this.\u0275fac=function(t){return new(t||SignpostingDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ),_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.jDH({token:SignpostingDataService2,factory:SignpostingDataService2.\u0275fac,providedIn:"root"})}return SignpostingDataService2})()},80148:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionDataService:()=>VersionDataService});var rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_base_patch_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(75467),_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(84237),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014);let VersionDataService=(()=>{class VersionDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,comparator){super("versions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.comparator=comparator,this.patchData=new _base_patch_data__WEBPACK_IMPORTED_MODULE_5__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint)}getHistoryFromVersion(version,useCachedVersionIfAvailable=!1,reRequestOnStale=!0){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.hj)(version)?this.findById(version.id,useCachedVersionIfAvailable,reRequestOnStale,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()):rxjs__WEBPACK_IMPORTED_MODULE_11__.EMPTY}getHistoryIdFromVersion(version){return this.getHistoryFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(versionHistory=>versionHistory.id))}patch(object,operations){return this.patchData.patch(object,operations)}update(object){return this.patchData.update(object)}commitUpdates(method){this.patchData.commitUpdates(method)}createPatchFromCache(object){return this.patchData.createPatchFromCache(object)}static#_=this.\u0275fac=function(t){return new(t||VersionDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:VersionDataService2,factory:VersionDataService2.\u0275fac,providedIn:"root"})}return VersionDataService2})()},1555:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionHistoryDataService:()=>VersionHistoryDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(38068),rxjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77028),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(64694),_shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80780),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_version_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(80148),_angular_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(68014);let VersionHistoryDataService=(()=>{class VersionHistoryDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,versionDataService){super("versionhistories",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.versionDataService=versionDataService,this.versionsEndpoint="versions"}getBrowseEndpoint(options={},linkPath){return this.halService.getEndpoint(this.linkPath)}getVersionsEndpoint(versionHistoryId){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(href=>this.halService.getEndpoint(this.versionsEndpoint,`${href}/${versionHistoryId}`)))}getVersions(versionHistoryId,searchOptions,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const hrefObs=this.getVersionsEndpoint(versionHistoryId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(href=>searchOptions?searchOptions.toRestUrl(href):href));return this.versionDataService.findListByHref(hrefObs,void 0,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}createVersion(itemHref,summary){const requestId=this.requestService.generateRequestId(),requestOptions=Object.create({});let requestHeaders=new _angular_common_http__WEBPACK_IMPORTED_MODULE_10__.Lr;return requestHeaders=requestHeaders.append("Content-Type","text/uri-list"),requestOptions.headers=requestHeaders,this.halService.getEndpoint(this.versionsEndpoint).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(endpointUrl=>summary?.length>0?`${endpointUrl}?summary=${summary}`:`${endpointUrl}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(href))).subscribe(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_6__.Qf(requestId,href,itemHref,requestOptions);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,versionRD=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([this.requestService.setStaleByHrefSubstring(versionRD.payload._links.self.href),this.requestService.setStaleByHrefSubstring(versionRD.payload._links.versionhistory.href)])).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)())}getLatestVersionFromHistory$(versionHistory){const latestVersionOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__.W,{id:"item-newest-version-options",currentPage:1,pageSize:1}),latestVersionSearch=new _shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__.C({pagination:latestVersionOptions});return this.getVersions(versionHistory.id,latestVersionSearch,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("item")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.v7)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.pb)(versions=>versions.page.length>0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versions=>versions.page[0]))}getLatestVersion$(version){return version.id?this.versionDataService.findById(version.id,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionHistoryRD=>this.getLatestVersionFromHistory$(versionHistoryRD))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}isLatest$(version){return version?this.getLatestVersion$(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(latestVersion=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(version.version===latestVersion.version))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}hasDraftVersion$(versionHref){return this.versionDataService.findByHref(versionHref,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionRD=>versionRD.hasSucceeded&&!versionRD.hasNoContent?versionRD.payload.versionhistory.pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versionHistoryRD=>!(!versionHistoryRD.hasSucceeded||versionHistoryRD.hasNoContent)&&versionHistoryRD.payload.draftVersion)):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(!1)))}getLatestVersionItemFromHistory$(versionHistory){return this.getLatestVersionFromHistory$(versionHistory).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(newLatestVersion=>newLatestVersion.item),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}getVersionHistoryFromVersion$(version){return this.versionDataService.getHistoryIdFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>this.findById(res)),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}invalidateVersionHistoryCache(versionHistoryID){this.requestService.setStaleByHrefSubstring("versioning/versionhistories/"+versionHistoryID)}static#_=this.\u0275fac=function(t){return new(t||VersionHistoryDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_version_data_service__WEBPACK_IMPORTED_MODULE_8__.VersionDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_15__.jDH({token:VersionHistoryDataService2,factory:VersionHistoryDataService2.\u0275fac,providedIn:"root"})}return VersionHistoryDataService2})()},77231:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{QualityAssuranceEventDataService:()=>QualityAssuranceEventDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_create_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85311),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43626),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75467),_data_base_search_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19399),_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84237),_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(87457),_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(91365),_angular_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(68014);let QualityAssuranceEventDataService=(()=>{class QualityAssuranceEventDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService,comparator){super("qualityassuranceevents",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.comparator=comparator,this.createData=new _data_base_create_data__WEBPACK_IMPORTED_MODULE_3__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.patchData=new _data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_7__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getEventsByTopic(topic,options={},...linksToFollow){return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_12__.x("topic",topic)],this.searchData.searchBy("findByTopic",options,!0,!0,...linksToFollow)}searchEventsByTopic(options={},...linksToFollow){return this.searchData.searchBy("findByTopic",options,!0,!0,...linksToFollow)}clearFindByTopicRequests(){this.requestService.setStaleByHrefSubstring("findByTopic")}getEvent(id,...linksToFollow){return this.findById(id,!0,!0,...linksToFollow)}patchEvent(status,dso,reason){return this.patchData.patch(dso,[{path:"/status",op:"replace",value:status}])}boundProject(itemId,projectId){return this.postOnRelated(itemId,projectId)}removeProject(itemId){return this.deleteOnRelated(itemId)}deleteOnRelated(objectId){const requestId=this.requestService.generateRequestId();return this.getIDHrefObs(objectId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(href))).subscribe(href=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Dk(requestId,href+"/related",objectId);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUID(requestId)}postOnRelated(objectId,relatedItemId,body){const requestId=this.requestService.generateRequestId();return this.getIDHrefObs(objectId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.s)(1)).subscribe(href=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Qf(requestId,href+"/related?item="+relatedItemId,body);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUID(requestId)}postData(target,correctionType,related,reason){const requestId=this.requestService.generateRequestId();return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(href=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_15__.Lr;headers=headers.append("Content-Type","application/json"),options.headers=headers;let params=new _angular_common_http__WEBPACK_IMPORTED_MODULE_15__.Nl;params=params.append("target",target).append("correctionType",correctionType),options.params=params;const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Qf(requestId,href,{reason},options);return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request),this.rdbService.buildFromRequestUUID(requestId)}))}deleteQAEvent(qaEvent){return this.deleteData.delete(qaEvent.id)}static#_=this.\u0275fac=function(t){return new(t||QualityAssuranceEventDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_11__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_16__.jDH({token:QualityAssuranceEventDataService2,factory:QualityAssuranceEventDataService2.\u0275fac,providedIn:"root"})}return QualityAssuranceEventDataService2})()},62958:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>OrcidAuthService});var rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(77028),_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44994),_profile_researcher_profile_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64961),_services_window_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25955),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1828),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(64247);let OrcidAuthService=(()=>{class OrcidAuthService2{constructor(_window,configurationService,researcherProfileService,router){this._window=_window,this.configurationService=configurationService,this.researcherProfileService=researcherProfileService,this.router=router}isLinkedToOrcid(item){return item.hasMetadata("dspace.orcid.authenticated")}onlyAdminCanDisconnectProfileFromOrcid(){return this.getOrcidDisconnectionAllowedUsersConfiguration().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded&&propertyRD.payload.values.map(value=>value.toLowerCase()).includes("only_admin")))}ownerCanDisconnectProfileFromOrcid(){return this.getOrcidDisconnectionAllowedUsersConfiguration().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded&&propertyRD.payload.values.map(value=>value.toLowerCase()).includes("admin_and_owner")))}linkOrcidByItem(person,code){const operations=[{path:"/orcid",op:"add",value:code}];return this.researcherProfileService.findById(person.firstMetadata("dspace.object.owner").authority).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.nx)(profileRD=>this.researcherProfileService.patch(profileRD.payload,operations)))}unlinkOrcidByItem(person){const operations=[{path:"/orcid",op:"remove"}];return this.researcherProfileService.findById(person.firstMetadata("dspace.object.owner").authority).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.nx)(profileRD=>this.researcherProfileService.patch(profileRD.payload,operations)))}getOrcidAuthorizeUrl(profile){return(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this.configurationService.findByPropertyName("orcid.authorize-url").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()),this.configurationService.findByPropertyName("orcid.application-client-id").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()),this.configurationService.findByPropertyName("orcid.scope").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)())]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(([authorizeUrl,clientId,scopes])=>{const redirectUri=new _url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_6__.t(this._window.nativeWindow.origin,encodeURIComponent(this.router.url.split("?")[0]));return authorizeUrl.values[0]+"?client_id="+clientId.values[0]+"&redirect_uri="+redirectUri+"&response_type=code&scope="+scopes.values.join(" ")}))}getOrcidAuthorizationScopesByItem(item){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.hj)(item)?item.allMetadataValues("dspace.orcid.scope"):[]}getOrcidAuthorizationScopes(){return this.configurationService.findByPropertyName("orcid.scope").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded?propertyRD.payload.values:[]))}getOrcidDisconnectionAllowedUsersConfiguration(){return this.configurationService.findByPropertyName("orcid.disconnection.allowed-users").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)())}static#_=this.\u0275fac=function(t){return new(t||OrcidAuthService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_services_window_service__WEBPACK_IMPORTED_MODULE_2__.lc),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_profile_researcher_profile_data_service__WEBPACK_IMPORTED_MODULE_1__.ResearcherProfileDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:OrcidAuthService2,factory:OrcidAuthService2.\u0275fac,providedIn:"root"})}return OrcidAuthService2})()},36739:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrcidHistoryDataService:()=>OrcidHistoryDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10743),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68134),_data_request_models__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(87457),_data_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(91365),_shared_request_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59499),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68014);let OrcidHistoryDataService=(()=>{class OrcidHistoryDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_2__.W{constructor(requestService,rdbService,objectCache,halService){super("orcidhistories",requestService,rdbService,objectCache,halService,1e4),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}sendToORCID(orcidQueue){const requestId=this.requestService.generateRequestId();return this.getEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_7__.Lr;return headers=headers.append("Content-Type","text/uri-list"),options.headers=headers,new _data_request_models__WEBPACK_IMPORTED_MODULE_3__.Qf(requestId,endpointURL,orcidQueue._links.self.href,options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_8__.w$)(this.requestService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.nx)(request=>this.rdbService.buildFromRequestUUID(request.uuid)))}static#_=this.\u0275fac=function(t){return new(t||OrcidHistoryDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_4__.B),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__.jDH({token:OrcidHistoryDataService2,factory:OrcidHistoryDataService2.\u0275fac,providedIn:"root"})}return OrcidHistoryDataService2})()},91502:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrcidQueueDataService:()=>OrcidQueueDataService});var _shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43626),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_data_base_search_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(19399),_data_request_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91365),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68014);let OrcidQueueDataService=(()=>{class OrcidQueueDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("orcidqueues",requestService,rdbService,objectCache,halService,1e4),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_5__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}searchByProfileItemId(itemId,paginationOptions,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){return this.searchData.searchBy("findByProfileItem",{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__.x("profileItemId",itemId)],elementsPerPage:paginationOptions.pageSize,currentPage:paginationOptions.currentPage},useCachedVersionIfAvailable,reRequestOnStale)}deleteById(orcidQueueId){return this.deleteData.delete(orcidQueueId.toString())}clearFindByProfileItemRequests(){this.requestService.setStaleByHrefSubstring(this.linkPath+"/search/findByProfileItem")}static#_=this.\u0275fac=function(t){return new(t||OrcidQueueDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_6__.B),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_7__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__.jDH({token:OrcidQueueDataService2,factory:OrcidQueueDataService2.\u0275fac,providedIn:"root"})}return OrcidQueueDataService2})()},71012:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>ResolvedAction2});const ResolverActionTypes={RESOLVED:(0,__webpack_require__(38299).N)("dspace/resolver/RESOLVED")};class ResolvedAction2{constructor(url,dso){this.type=ResolverActionTypes.RESOLVED,this.payload={url,dso}}}},71870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CorrectionTypeDataService:()=>CorrectionTypeDataService});var rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(74785),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68134),_data_base_search_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19399),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(97570),_data_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);let CorrectionTypeDataService=(()=>{class CorrectionTypeDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("correctiontypes",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.linkPath="correctiontypes",this.searchByTopic="findByTopic",this.searchFindByItem="findByItem",this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_4__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getCorrectionTypeById(id,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){return this.findById(id,useCachedVersionIfAvailable,reRequestOnStale)}findByItem(itemUuid,useCachedVersionIfAvailable){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.x("uuid",itemUuid)],this.searchData.searchBy(this.searchFindByItem,options,useCachedVersionIfAvailable)}findByTopic(topic,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.x("topic",topic)],this.searchData.searchBy(this.searchByTopic,options,useCachedVersionIfAvailable,reRequestOnStale).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_7__.Hz)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_7__.W8)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.map)(list=>list[0]))}static#_=this.\u0275fac=function(t){return new(t||CorrectionTypeDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_5__.B),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_6__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.jDH({token:CorrectionTypeDataService2,factory:CorrectionTypeDataService2.\u0275fac,providedIn:"root"})}return CorrectionTypeDataService2})()},11897:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemAlertsComponent:()=>ItemAlertsComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74785),src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82656),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29321),_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(6721),__webpack_require__(71870)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14467),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82555),_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19941),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);function ItemAlertsComponent_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"ds-alert",3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning)("content",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,2,"item.alerts.private"))}}function ItemAlertsComponent_div_2_a_10_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"a",11),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r2);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.openReinstateModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"item.alerts.reinstate-request")))}function ItemAlertsComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",4)(1,"ds-alert",5)(2,"div",6)(3,"span",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(6,"div",8)(7,"a",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(10,ItemAlertsComponent_div_2_a_10_Template,3,3,"a",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(5,4,"item.alerts.withdrawn")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(9,6,"404.link.home-page")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(11,8,ctx_r0.showReinstateButton$()))}}let ItemAlertsComponent=(()=>{class ItemAlertsComponent2{constructor(authService,dsoWithdrawnReinstateModalService,correctionTypeDataService){this.authService=authService,this.dsoWithdrawnReinstateModalService=dsoWithdrawnReinstateModalService,this.correctionTypeDataService=correctionTypeDataService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__.v}showReinstateButton$(){const correction$=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(correctionTypeRD=>correctionTypeRD.hasSucceeded?correctionTypeRD.payload.page:[])),isAdmin$=this.authService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf);return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([isAdmin$,correction$]).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(([isAdmin,correction])=>!isAdmin&&correction.some(correctionType=>correctionType.topic===_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static#_=this.\u0275fac=function(t){return new(t||ItemAlertsComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.Ee),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__.CorrectionTypeDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ItemAlertsComponent2,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:3,vars:2,consts:[["class","private-warning",4,"ngIf"],["class","withdrawn-warning",4,"ngIf"],[1,"private-warning"],[3,"type","content"],[1,"withdrawn-warning"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home",1,"btn","btn-primary","btn-sm"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(1,ItemAlertsComponent_div_1_Template,3,4,"div",0)(2,ItemAlertsComponent_div_2_Template,12,10,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.item&&!ctx.item.isDiscoverable),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.item&&ctx.item.isWithdrawn))},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.D9,_angular_router__WEBPACK_IMPORTED_MODULE_12__.Wk,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj]})}return ItemAlertsComponent2})()},78895:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>ThemedItemAlertsComponent}),__webpack_require__(6721);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(11897),__webpack_require__(68014));const _c0=["*"];function ThemedItemAlertsComponent_ng_template_0_Template(rf,ctx){}let ThemedItemAlertsComponent=(()=>{class ThemedItemAlertsComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(themeName){return __webpack_require__(42176)(`./${themeName}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,11897))}static#_=this.\u0275fac=(()=>{let \u0275ThemedItemAlertsComponent_BaseFactory;return function(t){return(\u0275ThemedItemAlertsComponent_BaseFactory||(\u0275ThemedItemAlertsComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedItemAlertsComponent2)))(t||ThemedItemAlertsComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedItemAlertsComponent2,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedItemAlertsComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}return ThemedItemAlertsComponent2})()},92733:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullFileSectionComponent:()=>FullFileSectionComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10743),src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59945),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91735),_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(36505),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39304),_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(6721),__webpack_require__(77028)),_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99565),_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(64365),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10117),_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91904),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(64694),_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(49192),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32181),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(45961),_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(80661),_simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(95422),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);function FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_ng_container_23_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(1,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.bVm()),2&rf){const file_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(file_r1.firstMetadataValue("dc.description"))}}function FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",7)(1,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",10)(5,"dl",11)(6,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(23,FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_ng_container_23_Template,6,4,"ng-container",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(24,"div",14)(25,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(26),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()),2&rf){let tmp_6_0,tmp_12_0;const file_r1=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,11,file_r1.thumbnail))?null:tmp_6_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,13,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r1)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,15,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,17,file_r1.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,19,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(null==(tmp_12_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,21,file_r1.format))||null==tmp_12_0.payload?null:tmp_12_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",file_r1.hasMetadata("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("bitstream",file_r1)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(27,23,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_2_div_1_ds_pagination_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_Template,28,25,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.originalOptions)("collectionSize",null==originals_r3?null:originals_r3.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngForOf",null==originals_r3?null:originals_r3.page)}}function FullFileSectionComponent_div_2_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_2_div_1_ds_pagination_4_Template,2,6,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.original.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",(null==originals_r3||null==originals_r3.page?null:originals_r3.page.length)>0)}}function FullFileSectionComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_2_div_1_Template,5,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",ctx_r1.hasValuesInBundle(originals_r3))}}function FullFileSectionComponent_div_4_div_1_ds_pagination_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",17)(1,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",10)(5,"dl",11)(6,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(23,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(24),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(26,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(28,"div",14)(29,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(30),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(31,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()),2&rf){let tmp_6_0,tmp_12_0;const file_r4=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,12,file_r4.thumbnail))?null:tmp_6_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,14,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r4)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,16,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,18,file_r4.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,20,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(null==(tmp_12_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,22,file_r4.format))||null==tmp_12_0.payload?null:tmp_12_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(25,24,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(file_r4.firstMetadataValue("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("bitstream",file_r4)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(31,26,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_4_div_1_ds_pagination_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_4_div_1_ds_pagination_4_div_1_Template,32,28,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.licenseOptions)("collectionSize",null==licenses_r5?null:licenses_r5.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngForOf",null==licenses_r5?null:licenses_r5.page)}}function FullFileSectionComponent_div_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_div_1_ds_pagination_4_Template,2,6,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.license.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",(null==licenses_r5||null==licenses_r5.page?null:licenses_r5.page.length)>0)}}function FullFileSectionComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_4_div_1_Template,5,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",ctx_r1.hasValuesInBundle(licenses_r5))}}let FullFileSectionComponent=(()=>{class FullFileSectionComponent2 extends _simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__.FileSectionComponent{constructor(bitstreamDataService,notificationsService,translateService,paginationService,dsoNameService,appConfig){super(bitstreamDataService,notificationsService,translateService,dsoNameService,appConfig),this.notificationsService=notificationsService,this.translateService=translateService,this.paginationService=paginationService,this.dsoNameService=dsoNameService,this.appConfig=appConfig,this.originalOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)}))}hasValuesInBundle(bundle){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(bundle)&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.Im)(bundle.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static#_=this.\u0275fac=function(t){return new(t||FullFileSectionComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__.BitstreamDataService),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.I),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__.m),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_11__.VBU({type:FullFileSectionComponent2,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_11__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_11__.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-metadata-field-wrapper",0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(2,FullFileSectionComponent_div_2_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){let tmp_1_0,tmp_2_0;_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("label",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(1,3,ctx.label)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,5,ctx.originals$))?null:tmp_1_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(5,7,ctx.licenses$))?null:tmp_2_0.payload)}},dependencies:[_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__.e,_angular_common__WEBPACK_IMPORTED_MODULE_17__.bT,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_17__.Jj,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__.r,_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__.T,_angular_common__WEBPACK_IMPORTED_MODULE_17__.Sq,_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__.z,_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__.s,_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_19__.Q],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}return FullFileSectionComponent2})()},95457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ThemedFullFileSectionComponent}),__webpack_require__(6721);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(92733),__webpack_require__(68014));const _c0=["*"];function ThemedFullFileSectionComponent_ng_template_0_Template(rf,ctx){}let ThemedFullFileSectionComponent=(()=>{class ThemedFullFileSectionComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(themeName){return __webpack_require__(63614)(`./${themeName}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,92733))}static#_=this.\u0275fac=(()=>{let \u0275ThemedFullFileSectionComponent_BaseFactory;return function(t){return(\u0275ThemedFullFileSectionComponent_BaseFactory||(\u0275ThemedFullFileSectionComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedFullFileSectionComponent2)))(t||ThemedFullFileSectionComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedFullFileSectionComponent2,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedFullFileSectionComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}return ThemedFullFileSectionComponent2})()},63399:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullItemPageComponent:()=>FullItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10743),_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3075),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94743),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92203),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(42180),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28107),_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(92254),_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(77028),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(36159),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(32943),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(45961),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(27657),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(78895),_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(94403),_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(96),_simple_item_page_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7760),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(25006),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(8237),_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(95457),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(44072);const _c0=a0=>[a0];function FullItemPageComponent_div_0_div_1_div_1_div_4_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",18)(1,"a",19),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_17__.eq3(6,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(2,2,ctx_r0.itemPageRoute$))),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(4,4,"item.page.link.simple")," ")}}function FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_tr_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"tr")(1,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(3,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(5,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const mdValue_r2=ctx.$implicit,mdEntry_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdEntry_r3.key),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdValue_r2.value),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdValue_r2.language)}}function FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_tr_1_Template,7,3,"tr",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bVm()),2&rf){const mdEntry_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngForOf",mdEntry_r3.value)}}function FullItemPageComponent_div_0_div_1_div_1_div_4_div_14_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_17__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",20)(1,"div",21)(2,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r4);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(5);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r0.back())}),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(3,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(5,1,"item.page.return"),""))}function FullItemPageComponent_div_0_div_1_div_1_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",9)(1,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(2,"ds-item-page-title-field",11)(3,"ds-dso-edit-menu"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(4,FullItemPageComponent_div_0_div_1_div_1_div_4_div_4_Template,5,8,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(5,"div",13)(6,"table",14)(7,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(8,FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_Template,2,1,"ng-container",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(10,"keyvalue"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(11,"ds-item-page-full-file-section",6)(12,"ds-item-page-collections",6)(13,"ds-item-versions",16),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(14,FullItemPageComponent_div_0_div_1_div_1_div_4_div_14_Template,6,3,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const item_r5=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngIf,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",!ctx_r0.fromSubmissionObject),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(10,9,_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(9,7,ctx_r0.metadata$))),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",ctx_r0.fromSubmissionObject)}}function FullItemPageComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(1,"ds-item-alerts",6)(2,"ds-item-versions-notice",6)(3,"ds-view-tracker",7),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(4,FullItemPageComponent_div_0_div_1_div_1_div_4_Template,15,11,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const item_r5=ctx.ngIf,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("object",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",!item_r5.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(5,4,ctx_r0.isAdmin$))}}function FullItemPageComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_div_1_Template,6,6,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const itemRD_r6=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.payload)}}function FullItemPageComponent_div_0_ds_error_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-error",24),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,"error.item"))}function FullItemPageComponent_div_0_ds_loading_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-loading",24),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,"loading.item"))}function FullItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_Template,2,2,"div",2)(2,FullItemPageComponent_div_0_ds_error_2_Template,2,3,"ds-error",3)(3,FullItemPageComponent_div_0_ds_loading_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const itemRD_r6=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.isLoading)}}let FullItemPageComponent=(()=>{class FullItemPageComponent2 extends _simple_item_page_component__WEBPACK_IMPORTED_MODULE_13__.ItemPageComponent{constructor(route,router,items,authorizationService,_location,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){super(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId),this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this._location=_location,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(rd=>rd.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.pb)(item=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(item)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(item=>item.metadata)),this.subs.push(this.route.data.subscribe(data=>{this.fromSubmissionObject=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(data.wfi)||(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(data.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||FullItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_20__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_20__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_common__WEBPACK_IMPORTED_MODULE_21__.aZ),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__.w),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__.z),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_22__.m),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_17__.Agw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_17__.VBU({type:FullItemPageComponent2,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_17__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_17__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],["class","full-item-info",4,"ngIf"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],["class","simple-view-link my-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-right"],[1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,FullItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,ctx.itemRD$))},dependencies:[_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__.A,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.D9,_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__.n,_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_11__.r,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__.I,_angular_common__WEBPACK_IMPORTED_MODULE_21__.bT,_angular_common__WEBPACK_IMPORTED_MODULE_21__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_21__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_21__.lG,_angular_router__WEBPACK_IMPORTED_MODULE_20__.Wk,_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_12__.V,_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__.T,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__.s,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_9__.H,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_10__.R,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__.Ws]},changeDetection:0})}return FullItemPageComponent2})()},89485:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ThemedFullItemPageComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(63399),__webpack_require__(68014));const _c0=["*"];function ThemedFullItemPageComponent_ng_template_0_Template(rf,ctx){}let ThemedFullItemPageComponent=(()=>{class ThemedFullItemPageComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(themeName){return __webpack_require__(4872)(`./${themeName}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,63399))}static#_=this.\u0275fac=(()=>{let \u0275ThemedFullItemPageComponent_BaseFactory;return function(t){return(\u0275ThemedFullItemPageComponent_BaseFactory||(\u0275ThemedFullItemPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_2__.xGo(ThemedFullItemPageComponent2)))(t||ThemedFullItemPageComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ThemedFullItemPageComponent2,selectors:[["ds-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.DNE(0,ThemedFullItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_2__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.k0s())},encapsulation:2})}return ThemedFullItemPageComponent2})()},27293:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var app_routing_paths=__webpack_require__(45930),authenticated_guard=__webpack_require__(98234),core=__webpack_require__(68014),item_resolver=__webpack_require__(88336),item_data_service=__webpack_require__(94743),dso_breadcrumb_resolver=__webpack_require__(20550),dso_breadcrumbs_service=__webpack_require__(15446),dso_edit_menu_resolver=__webpack_require__(34615),common=__webpack_require__(84739),fesm2022_forms=__webpack_require__(28955),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),auth_service=__webpack_require__(41543),dso_name_service=__webpack_require__(91735),bitstream_data_service=__webpack_require__(36505),authorization_data_service=__webpack_require__(30289),feature_id=__webpack_require__(29321),item_request_data_service=__webpack_require__(22431),item_request_model=__webpack_require__(10503),shared_operators=__webpack_require__(82656),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),item_page_routing_paths=__webpack_require__(63254);function BitstreamRequestACopyPageComponent_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",27)(1,"span"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"a",3),core.EFF(5),core.nI1(6,"translate"),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(2),core.JRh(core.bMT(3,3,"bitstream-request-a-copy.alert.canDownload1")),core.R7$(2),core.Y8G("routerLink",ctx_r0.getBitstreamLink()),core.R7$(),core.JRh(core.bMT(6,5,"bitstream-request-a-copy.alert.canDownload2"))}}function BitstreamRequestACopyPageComponent_p_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Lme("",core.bMT(2,2,"bitstream-request-a-copy.intro.bitstream.one")," ",ctx_r0.bitstreamName,"")}}function BitstreamRequestACopyPageComponent_p_13_Template(rf,ctx){1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"bitstream-request-a-copy.intro.bitstream.all")))}function BitstreamRequestACopyPageComponent_div_22_span_1_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"bitstream-request-a-copy.name.error")," "))}function BitstreamRequestACopyPageComponent_div_22_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",28),core.DNE(1,BitstreamRequestACopyPageComponent_div_22_span_1_Template,3,3,"span",4),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r0.name.errors&&ctx_r0.name.errors.required)}}function BitstreamRequestACopyPageComponent_div_29_span_1_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"bitstream-request-a-copy.email.error")," "))}function BitstreamRequestACopyPageComponent_div_29_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",28),core.DNE(1,BitstreamRequestACopyPageComponent_div_29_span_1_Template,3,3,"span",4),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r0.email.errors)}}let BitstreamRequestACopyPageComponent=(()=>{class BitstreamRequestACopyPageComponent2{constructor(location,translateService,route,router2,authorizationService,auth,formBuilder,itemRequestDataService,notificationsService,dsoNameService,bitstreamService){this.location=location,this.translateService=translateService,this.route=route,this.router=router2,this.authorizationService=authorizationService,this.auth=auth,this.formBuilder=formBuilder,this.itemRequestDataService=itemRequestDataService,this.notificationsService=notificationsService,this.dsoNameService=dsoNameService,this.bitstreamService=bitstreamService,this.subs=[]}ngOnInit(){this.requestCopyForm=this.formBuilder.group({name:new fesm2022_forms.hs("",{validators:[fesm2022_forms.k0.required]}),email:new fesm2022_forms.hs("",{validators:[fesm2022_forms.k0.required,fesm2022_forms.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]}),allfiles:new fesm2022_forms.hs(""),message:new fesm2022_forms.hs("")}),this.item$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,shared_operators.ak)()),this.subs.push(this.item$.subscribe(item=>{this.item=item,this.itemName=this.dsoNameService.getName(item)})),this.bitstream$=this.route.queryParams.pipe((0,operators.pb)(params=>(0,empty_util.a4)(params)&&(0,empty_util.a4)(params.bitstream)),(0,operators.nx)(params=>this.bitstreamService.findById(params.bitstream)),(0,shared_operators.ak)()),this.subs.push(this.bitstream$.subscribe(bitstream=>{this.bitstream=bitstream,this.bitstreamName=this.dsoNameService.getName(bitstream)})),this.canDownload$=this.bitstream$.pipe((0,operators.nx)(bitstream=>this.authorizationService.isAuthorized(feature_id._.CanDownload,(0,empty_util.hj)(bitstream)?bitstream.self:void 0)));const canRequestCopy$=this.bitstream$.pipe((0,operators.nx)(bitstream=>this.authorizationService.isAuthorized(feature_id._.CanRequestACopy,(0,empty_util.hj)(bitstream)?bitstream.self:void 0)));this.subs.push((0,cjs.combineLatest)([this.canDownload$,canRequestCopy$]).subscribe(([canDownload,canRequestCopy])=>{!canDownload&&!canRequestCopy&&this.router.navigateByUrl((0,app_routing_paths.bZ)(),{skipLocationChange:!0})})),this.initValues()}get name(){return this.requestCopyForm.get("name")}get email(){return this.requestCopyForm.get("email")}get message(){return this.requestCopyForm.get("message")}get allfiles(){return this.requestCopyForm.get("allfiles")}initValues(){this.getCurrentUser().pipe((0,operators.s)(1)).subscribe(user=>{this.requestCopyForm.patchValue({allfiles:"true"}),(0,empty_util.a4)(user)&&this.requestCopyForm.patchValue({name:user.name,email:user.email})}),this.bitstream$.pipe((0,operators.s)(1)).subscribe(bitstream=>{this.requestCopyForm.patchValue({allfiles:"false"})})}getCurrentUser(){return this.auth.isAuthenticated().pipe((0,operators.nx)(authenticated=>authenticated?this.auth.getAuthenticatedUserFromStore():(0,cjs.of)(void 0)))}onSubmit(){const itemRequest=new item_request_model.b;(0,empty_util.a4)(this.bitstream)&&(itemRequest.bitstreamId=this.bitstream.uuid),itemRequest.itemId=this.item.uuid,itemRequest.allfiles=this.allfiles.value,itemRequest.requestEmail=this.email.value,itemRequest.requestName=this.name.value,itemRequest.requestMessage=this.message.value,this.itemRequestDataService.requestACopy(itemRequest).pipe((0,shared_operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("bitstream-request-a-copy.submit.success")),this.navigateBack()):this.notificationsService.error(this.translateService.get("bitstream-request-a-copy.submit.error"))})}ngOnDestroy(){(0,empty_util.a4)(this.subs)&&this.subs.forEach(sub=>{(0,empty_util.a4)(sub)&&sub.unsubscribe()})}navigateBack(){this.location.back()}getItemPath(){return[(0,item_page_routing_paths._o)(this.item)]}getBitstreamLink(){return[(0,app_routing_paths.hV)(this.bitstream)]}static#_=this.\u0275fac=function(t){return new(t||BitstreamRequestACopyPageComponent2)(core.rXU(common.aZ),core.rXU(ngx_translate_core.c$),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(auth_service.uR),core.rXU(fesm2022_forms.ze),core.rXU(item_request_data_service.W),core.rXU(notifications_service.I),core.rXU(dso_name_service.f),core.rXU(bitstream_data_service.BitstreamDataService))};static#_2=this.\u0275cmp=core.VBU({type:BitstreamRequestACopyPageComponent2,selectors:[["ds-bitstream-request-a-copy-page"]],standalone:!0,features:[core.aNF],decls:64,vars:52,consts:[[1,"container"],[1,"mb-4"],["class","alert alert-success",4,"ngIf"],[3,"routerLink"],[4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"row","mb-4"],[1,"col-12"],["for","name"],["type","text","id","name","formControlName","name",3,"className"],["class","invalid-feedback show-feedback",4,"ngIf"],["for","email"],["id","email","formControlName","email",3,"className"],[1,"text-muted","ds-hint"],[1,"ml-4"],["type","radio","id","allfiles-true","formControlName","allfiles","value","true",3,"className"],["for","allfiles-true",1,"form-check-label"],["type","radio","id","allfiles-false","formControlName","allfiles","value","false",3,"className"],["for","allfiles-false",1,"form-check-label"],["for","message"],["rows","5","id","message","formControlName","message",3,"className"],[1,"row"],[1,"col-12","text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[1,"btn","btn-default","btn-primary",3,"click","disabled"],[1,"alert","alert-success"],[1,"invalid-feedback","show-feedback"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h1",1),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,BitstreamRequestACopyPageComponent_div_4_Template,7,7,"div",2),core.nI1(5,"async"),core.j41(6,"div")(7,"p"),core.EFF(8),core.nI1(9,"translate"),core.j41(10,"a",3),core.EFF(11),core.k0s()(),core.DNE(12,BitstreamRequestACopyPageComponent_p_12_Template,3,4,"p",4)(13,BitstreamRequestACopyPageComponent_p_13_Template,3,3,"p",4),core.k0s(),core.j41(14,"form",5),core.bIt("ngSubmit",function(){return ctx.onSubmit()}),core.j41(15,"div",6)(16,"div",7)(17,"div",8)(18,"label",9),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.nrm(21,"input",10),core.DNE(22,BitstreamRequestACopyPageComponent_div_22_Template,2,1,"div",11),core.k0s()(),core.j41(23,"div",7)(24,"div",8)(25,"label",12),core.EFF(26),core.nI1(27,"translate"),core.k0s(),core.nrm(28,"input",13),core.DNE(29,BitstreamRequestACopyPageComponent_div_29_Template,2,1,"div",11),core.j41(30,"small",14),core.EFF(31),core.nI1(32,"translate"),core.k0s()()(),core.j41(33,"div",7)(34,"div",8)(35,"div"),core.EFF(36),core.nI1(37,"translate"),core.k0s(),core.j41(38,"div",15),core.nrm(39,"input",16),core.j41(40,"label",17),core.EFF(41),core.nI1(42,"translate"),core.k0s()(),core.j41(43,"div",15),core.nrm(44,"input",18),core.j41(45,"label",19),core.EFF(46),core.nI1(47,"translate"),core.k0s()()()(),core.j41(48,"div",7)(49,"div",8)(50,"label",20),core.EFF(51),core.nI1(52,"translate"),core.k0s(),core.nrm(53,"textarea",21),core.k0s()()()(),core.nrm(54,"hr"),core.j41(55,"div",22)(56,"div",23)(57,"a",24),core.bIt("click",function(){return ctx.navigateBack()}),core.nrm(58,"i",25),core.EFF(59),core.nI1(60,"translate"),core.k0s(),core.j41(61,"button",26),core.bIt("click",function(){return ctx.onSubmit()}),core.EFF(62),core.nI1(63,"translate"),core.k0s()()()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,28,"bitstream-request-a-copy.header")),core.R7$(2),core.Y8G("ngIf",core.bMT(5,30,ctx.canDownload$)),core.R7$(4),core.SpI("",core.bMT(9,32,"bitstream-request-a-copy.intro")," "),core.R7$(2),core.Y8G("routerLink",ctx.getItemPath()),core.R7$(),core.JRh(ctx.itemName),core.R7$(),core.Y8G("ngIf",void 0!==ctx.bitstream&&"false"===ctx.allfiles.value),core.R7$(),core.Y8G("ngIf","true"===ctx.allfiles.value),core.R7$(),core.HbH("ng-invalid"),core.Y8G("formGroup",ctx.requestCopyForm),core.R7$(5),core.JRh(core.bMT(20,34,"bitstream-request-a-copy.name.label")),core.R7$(2),core.Y8G("className",ctx.name.invalid&&(ctx.name.dirty||ctx.name.touched)?"form-control is-invalid":"form-control"),core.R7$(),core.Y8G("ngIf",ctx.name.invalid&&(ctx.name.dirty||ctx.name.touched)),core.R7$(4),core.JRh(core.bMT(27,36,"bitstream-request-a-copy.email.label")),core.R7$(2),core.Y8G("className",ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)?"form-control is-invalid":"form-control"),core.R7$(),core.Y8G("ngIf",ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)),core.R7$(2),core.JRh(core.bMT(32,38,"bitstream-request-a-copy.email.hint")),core.R7$(5),core.JRh(core.bMT(37,40,"bitstream-request-a-copy.allfiles.label")),core.R7$(3),core.Y8G("className","form-check-input"),core.R7$(2),core.JRh(core.bMT(42,42,"bitstream-request-a-copy.files-all-true.label")),core.R7$(3),core.Y8G("className","form-check-input"),core.BMQ("disabled",void 0===ctx.bitstream||null),core.R7$(2),core.JRh(core.bMT(47,44,"bitstream-request-a-copy.files-all-false.label")),core.R7$(5),core.JRh(core.bMT(52,46,"bitstream-request-a-copy.message.label")),core.R7$(2),core.Y8G("className","form-control"),core.R7$(6),core.SpI(" ",core.bMT(60,48,"bitstream-request-a-copy.return")," "),core.R7$(2),core.Y8G("disabled",ctx.requestCopyForm.invalid),core.R7$(),core.JRh(core.bMT(63,50,"bitstream-request-a-copy.submit")))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,router.Wk,common.Jj,fesm2022_forms.X1,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.j4,fesm2022_forms.JD,common.bT],encapsulation:2})}return BitstreamRequestACopyPageComponent2})();var environment=__webpack_require__(72035),bundle_data_service=__webpack_require__(78330),request_service=__webpack_require__(72744),bundle_model=__webpack_require__(69910),view_mode_model=__webpack_require__(97849),collection_element_link_type=__webpack_require__(61064),listable_object_component_loader_component=__webpack_require__(95776),click_outside_directive=__webpack_require__(48442),debounce_directive=__webpack_require__(51615),input_suggestions_component=__webpack_require__(83163);const _c0=a0=>({"is-invalid":a0}),_c1=()=>({standalone:!0}),_c2=a0=>({show:a0});function DsoInputSuggestionsComponent_div_10_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div")(1,"button",9,2),core.bIt("click",function(){const suggestionOption_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.onClickSuggestion(suggestionOption_r3))}),core.nrm(3,"ds-listable-object-component-loader",10),core.k0s()()}if(2&rf){const suggestionOption_r3=ctx.$implicit,ctx_r3=core.XpG();core.R7$(3),core.Y8G("object",suggestionOption_r3)("viewMode",ctx_r3.viewMode)("linkType",ctx_r3.linkTypes.None)}}let DsoInputSuggestionsComponent=(()=>{class DsoInputSuggestionsComponent2 extends input_suggestions_component.t{constructor(dsoNameService){super(),this.dsoNameService=dsoNameService,this.viewMode=view_mode_model.n.ListElement,this.linkTypes=collection_element_link_type.n,this.suggestions=[]}onSubmit(data){(0,empty_util.a4)(data)&&(this.value=this.dsoNameService.getName(data),this.currentObject=data,this.submitSuggestion.emit(data))}onClickSuggestion(data){return this.value=this.dsoNameService.getName(data),this.currentObject=data,this.clickSuggestion.emit(data),this.close(),this.blockReopen=!0,this.queryInput.nativeElement.focus(),!1}static#_=this.\u0275fac=function(t){return new(t||DsoInputSuggestionsComponent2)(core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:DsoInputSuggestionsComponent2,selectors:[["ds-dso-input-suggestions"]],inputs:{suggestions:"suggestions"},standalone:!0,features:[core.Jv_([{provide:fesm2022_forms.kq,useExisting:(0,core.Rfq)(()=>DsoInputSuggestionsComponent2),multi:!0}]),core.Vt3,core.aNF],decls:11,vars:19,consts:[["form","ngForm"],["inputField",""],["suggestion",""],[3,"ngSubmit","keydown.arrowdown","keydown.arrowup","keydown.esc","dsClickOutside","action"],["type","text","autocomplete","off",1,"form-control","suggestion_input","mb-2",3,"ngModelChange","onDebounce","ngModel","name","ngClass","dsDebounce","placeholder","ngModelOptions"],["type","submit",1,"sr-only"],[1,"autocomplete","dropdown-menu",3,"ngClass"],[1,"dropdown-list"],[4,"ngFor","ngForOf"],[1,"d-block","dropdown-item",3,"click"],[3,"object","viewMode","linkType"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"form",3,0),core.bIt("ngSubmit",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit(ctx.currentObject))})("keydown.arrowdown",function($event){return core.eBV(_r1),core.Njj(ctx.shiftFocusDown($event))})("keydown.arrowup",function($event){return core.eBV(_r1),core.Njj(ctx.shiftFocusUp($event))})("keydown.esc",function(){return core.eBV(_r1),core.Njj(ctx.close())})("dsClickOutside",function(){return core.eBV(_r1),core.Njj(ctx.close())}),core.j41(2,"input",4,1),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.value,$event)||(ctx.value=$event),core.Njj($event)}),core.bIt("onDebounce",function($event){return core.eBV(_r1),core.Njj(ctx.find($event))}),core.k0s(),core.j41(4,"button",5),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div",6),core.nI1(8,"async"),core.j41(9,"div",7),core.DNE(10,DsoInputSuggestionsComponent_div_10_Template,4,3,"div",8),core.k0s()()()}2&rf&&(core.Y8G("action",ctx.action,core.B4B),core.R7$(2),core.R50("ngModel",ctx.value),core.Y8G("name",ctx.name)("ngClass",core.eq3(14,_c0,!ctx.valid))("dsDebounce",ctx.debounceTime)("placeholder",ctx.placeholder)("ngModelOptions",core.lJ4(16,_c1)),core.R7$(3),core.SpI(" ",core.bMT(6,10,"search.filters.search.submit")," "),core.R7$(2),core.Y8G("ngClass",core.eq3(17,_c2,core.bMT(8,12,ctx.show)&&ctx.isNotEmpty(ctx.suggestions))),core.R7$(3),core.Y8G("ngForOf",ctx.suggestions))},dependencies:[fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.vS,fesm2022_forms.cV,click_outside_directive.z,debounce_directive.R,common.YU,common.pM,listable_object_component_loader_component.v,common.Jj,ngx_translate_core.h,ngx_translate_core.D9],styles:[".autocomplete[_ngcontent-%COMP%]{width:100%}.autocomplete[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{white-space:normal;word-break:break-word;padding:var(--bs-input-padding-y) var(--bs-input-padding-x)}.autocomplete[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus{outline:none}form[_ngcontent-%COMP%]{position:relative}"]})}return DsoInputSuggestionsComponent2})();var uploader_component=__webpack_require__(55361),uploader_options_model=__webpack_require__(32034),var_directive=__webpack_require__(45961);function UploadBitstreamComponent_ng_container_1_ng_container_6_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"span",7),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"span"),core.EFF(5),core.k0s()()),2&rf){const item_r2=core.XpG().ngVar,ctx_r2=core.XpG(2);core.R7$(2),core.JRh(core.bMT(3,2,"item.bitstreams.upload.item")),core.R7$(3),core.JRh(ctx_r2.dsoNameService.getName(item_r2))}}function UploadBitstreamComponent_ng_container_1_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,UploadBitstreamComponent_ng_container_1_ng_container_6_div_1_Template,6,4,"div",2),core.bVm()),2&rf){const item_r2=ctx.ngVar;core.R7$(),core.Y8G("ngIf",item_r2)}}function UploadBitstreamComponent_ng_container_1_button_15_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",12),core.bIt("click",function(){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.createBundle())}),core.nrm(1,"i",13),core.EFF(2),core.nI1(3,"translate"),core.k0s()}2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"item.bitstreams.upload.bundle.new")," "))}function UploadBitstreamComponent_ng_container_1_ds_uploader_16_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"ds-uploader",14),core.bIt("onCompleteItem",function($event){core.eBV(_r6);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onCompleteItem($event))})("onUploadError",function(){core.eBV(_r6);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onUploadError())}),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.Y8G("dropMsg","item.bitstreams.upload.drop-message")("dropOverDocumentMsg","item.bitstreams.upload.drop-message")("enableDragOverDocument",!0)("uploadFilesOptions",ctx_r2.uploadFilesOptions)}}function UploadBitstreamComponent_ng_container_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.qex(0),core.j41(1,"div",3)(2,"div",4)(3,"h1"),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.DNE(6,UploadBitstreamComponent_ng_container_1_ng_container_6_Template,2,1,"ng-container",5),core.nI1(7,"async"),core.k0s(),core.j41(8,"div",6)(9,"label",7),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"ds-dso-input-suggestions",8,0),core.nI1(14,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.DH7(ctx_r2.selectedBundleName,$event)||(ctx_r2.selectedBundleName=$event),core.Njj($event)}),core.bIt("typeSuggestion",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.bundleNameChange())})("clickSuggestion",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onClick($event))})("click",function(){core.eBV(_r1);const f_r4=core.sdS(13);return core.Njj(f_r4.open())}),core.k0s(),core.DNE(15,UploadBitstreamComponent_ng_container_1_button_15_Template,4,3,"button",9)(16,UploadBitstreamComponent_ng_container_1_ds_uploader_16_Template,1,4,"ds-uploader",10),core.j41(17,"button",11),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onCancel())}),core.EFF(18),core.nI1(19,"translate"),core.k0s()()(),core.bVm()}if(2&rf){let tmp_3_0;const ctx_r2=core.XpG();core.R7$(4),core.JRh(core.bMT(5,12,"item.bitstreams.upload.title")),core.R7$(2),core.Y8G("ngVar",null==(tmp_3_0=core.bMT(7,14,ctx_r2.itemRD$))?null:tmp_3_0.payload),core.R7$(4),core.JRh(core.bMT(11,16,"item.bitstreams.upload.bundle")),core.R7$(2),core.Y8G("suggestions",ctx_r2.bundles)("placeholder",core.bMT(14,18,"item.bitstreams.upload.bundle.placeholder"))("action",ctx_r2.getCurrentUrl())("name","bundle-select")("debounceTime",50),core.R50("ngModel",ctx_r2.selectedBundleName),core.R7$(3),core.Y8G("ngIf",!ctx_r2.selectedBundleId&&(null==ctx_r2.selectedBundleName?null:ctx_r2.selectedBundleName.length)>0),core.R7$(),core.Y8G("ngIf",ctx_r2.selectedBundleId),core.R7$(2),core.JRh(core.bMT(19,20,"item.bitstreams.upload.cancel"))}}let UploadBitstreamComponent=(()=>{class UploadBitstreamComponent2{constructor(route,router2,itemService,bundleService,authService,notificationsService,translate,requestService,dsoNameService){this.route=route,this.router=router2,this.itemService=itemService,this.bundleService=bundleService,this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService,this.dsoNameService=dsoNameService,this.bundles=[],this.uploadFilesOptions=Object.assign(new uploader_options_model.H,{url:"placeholder",authToken:null,disableMultipart:!1,itemAlias:null}),this.NOTIFICATIONS_PREFIX="item.bitstreams.upload.notifications.",this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.params.id,this.entityType=this.route.snapshot.params["entity-type"],this.itemRD$=this.route.data.pipe((0,operators.Tj)(data=>data.dso));const bundlesRD$=this.itemService.getBundles(this.itemId).pipe((0,shared_operators.qD)(),(0,operators.nx)(remoteData=>{if(remoteData.hasSucceeded){if(remoteData.payload.page){this.bundles=remoteData.payload.page;for(const defaultBundle of environment.c.bundle.standardBundles){let check=!0;remoteData.payload.page.forEach(bundle=>{defaultBundle===bundle.name&&(check=!1)}),check&&this.bundles.push(Object.assign(new bundle_model.N,{_name:defaultBundle,type:"bundle"}))}}else this.bundles=environment.c.bundle.standardBundles.map(defaultBundle=>Object.assign(new bundle_model.N,{_name:defaultBundle,type:"bundle"}));return(0,cjs.of)(remoteData.payload.page)}}));this.selectedBundleId=this.route.snapshot.queryParams.bundle,(0,empty_util.hj)(this.selectedBundleId)&&(this.subs.push(this.bundleService.findById(this.selectedBundleId).pipe((0,shared_operators.ak)()).subscribe(bundle=>{this.selectedBundleName=bundle.name})),this.setUploadUrl()),this.subs.push(bundlesRD$.subscribe())}createBundle(){this.itemService.createBundle(this.itemId,this.selectedBundleName).pipe((0,shared_operators.ak)()).subscribe(bundle=>{this.selectedBundleId=bundle.id,this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.content")),this.setUploadUrl()})}bundleNameChange(){this.selectedBundleId=void 0;for(const bundle of this.bundles)if(this.selectedBundleName===bundle.name){this.selectedBundleId=bundle.id;break}}setUploadUrl(){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,operators.s)(1)).subscribe(href=>{this.uploadFilesOptions.url=href,(0,empty_util.Im)(this.uploadFilesOptions.authToken)&&(this.uploadFilesOptions.authToken=this.authService.buildAuthHeader()),this.uploaderComponent&&(this.uploaderComponent.ngOnInit(),this.uploaderComponent.ngAfterViewInit())})}onCompleteItem(bitstream){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,operators.s)(1)).subscribe(href=>{this.requestService.removeByHrefSubstring(href)});const queryParams={itemId:this.itemId,entityType:this.entityType};this.router.navigate([(0,app_routing_paths.dF)(),bitstream.id,"edit"],{queryParams})}onUploadError(){this.notificationsService.error(null,this.translate.get(this.NOTIFICATIONS_PREFIX+"upload.failed"))}onClick(bundle){this.selectedBundleId=bundle.id,this.selectedBundleName=bundle.name,bundle.id&&this.setUploadUrl()}onCancel(){this.router.navigate([(0,item_page_routing_paths.DL)(this.entityType,this.itemId),"bitstreams"])}getCurrentUrl(){return this.router.url}ngOnDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||UploadBitstreamComponent2)(core.rXU(router.nX),core.rXU(router.Ix),core.rXU(item_data_service.ItemDataService),core.rXU(bundle_data_service.BundleDataService),core.rXU(auth_service.uR),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(request_service.B),core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:UploadBitstreamComponent2,selectors:[["ds-upload-bitstream"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(uploader_component.y,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.uploaderComponent=_t.first)}},standalone:!0,features:[core.aNF],decls:2,vars:1,consts:[["f",""],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-12","mb-2"],[4,"ngVar"],[1,"col-12"],[1,"font-weight-bold"],["id","search-form","ngDefaultControl","",3,"ngModelChange","typeSuggestion","clickSuggestion","click","suggestions","placeholder","action","name","debounceTime","ngModel"],["class","btn btn-success mr-2",3,"click",4,"ngIf"],["class","w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-success","mr-2",3,"click"],[1,"fa","fa-plus"],[1,"w-100",3,"onCompleteItem","onUploadError","dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",1),core.DNE(1,UploadBitstreamComponent_ng_container_1_Template,20,22,"ng-container",2),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",ctx.bundles))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,common.Jj,var_directive.r,common.bT,DsoInputSuggestionsComponent,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,uploader_component.y],encapsulation:2})}return UploadBitstreamComponent2})();var themed_full_item_page_component=__webpack_require__(89485),item_page_resolver=__webpack_require__(60498),orcid_auth_service=__webpack_require__(62958),authorized_operators=__webpack_require__(78911),alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),themed_loading_component=__webpack_require__(32943),window_service=__webpack_require__(25955);function OrcidAuthComponent_ng_container_4_Template(rf,ctx){1&rf&&core.eu8(0)}function OrcidAuthComponent_ng_template_6_div_2_li_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",19),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const auth_r1=ctx.$implicit,ctx_r1=core.XpG(3);core.R7$(),core.SpI(" ",core.bMT(2,1,ctx_r1.getAuthorizationDescription(auth_r1))," ")}}function OrcidAuthComponent_ng_template_6_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",16)(1,"div",8)(2,"div",9),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",10)(6,"div",17)(7,"ul"),core.DNE(8,OrcidAuthComponent_ng_template_6_div_2_li_8_Template,3,3,"li",18),core.nI1(9,"async"),core.k0s()()()()()),2&rf){const ctx_r1=core.XpG(2);core.R7$(3),core.JRh(core.bMT(4,2,"person.page.orcid.granted-authorizations")),core.R7$(5),core.Y8G("ngForOf",core.bMT(9,4,ctx_r1.getOrcidAuthorizations()))}}function OrcidAuthComponent_ng_template_6_ds_alert_11_Template(rf,ctx){1&rf&&(core.j41(0,"ds-alert",20),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.Y8G("type","alert-success"),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.no-missing-authorizations-message")," "))}function OrcidAuthComponent_ng_template_6_ds_alert_13_li_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",23),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const auth_r3=ctx.$implicit,ctx_r1=core.XpG(3);core.R7$(),core.SpI(" ",core.bMT(2,1,ctx_r1.getAuthorizationDescription(auth_r3))," ")}}function OrcidAuthComponent_ng_template_6_ds_alert_13_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",21),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"ul"),core.DNE(4,OrcidAuthComponent_ng_template_6_ds_alert_13_li_4_Template,3,3,"li",22),core.nI1(5,"async"),core.k0s()()),2&rf){const ctx_r1=core.XpG(2);core.Y8G("type","alert-warning"),core.R7$(),core.SpI(" ",core.bMT(2,3,"person.page.orcid.missing-authorizations-message")," "),core.R7$(3),core.Y8G("ngForOf",core.bMT(5,5,ctx_r1.getMissingOrcidAuthorizations()))}}function OrcidAuthComponent_ng_template_6_ds_alert_15_Template(rf,ctx){1&rf&&(core.j41(0,"ds-alert",24),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.Y8G("type","alert-warning"),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.remove-orcid-message")," "))}function OrcidAuthComponent_ng_template_6_div_18_span_4_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",30),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"person.page.orcid.unlink"),""))}function OrcidAuthComponent_ng_template_6_div_18_span_6_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",31),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"person.page.orcid.unlink.processing"),""))}function OrcidAuthComponent_ng_template_6_div_18_button_8_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",32),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG(3);return core.Njj(ctx_r1.linkOrcid())}),core.j41(1,"span"),core.nrm(2,"i",33),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI(" ",core.bMT(4,1,"person.page.orcid.grant-authorizations"),""))}function OrcidAuthComponent_ng_template_6_div_18_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",25)(1,"div",26)(2,"button",27),core.nI1(3,"async"),core.bIt("click",function(){core.eBV(_r4);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.unlinkOrcid())}),core.DNE(4,OrcidAuthComponent_ng_template_6_div_18_span_4_Template,4,3,"span",28),core.nI1(5,"async"),core.DNE(6,OrcidAuthComponent_ng_template_6_div_18_span_6_Template,4,3,"span",28),core.nI1(7,"async"),core.k0s(),core.DNE(8,OrcidAuthComponent_ng_template_6_div_18_button_8_Template,5,3,"button",29),core.nI1(9,"async"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG(2);core.R7$(2),core.Y8G("disabled",core.bMT(3,4,ctx_r1.unlinkProcessing)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(5,6,ctx_r1.unlinkProcessing)),core.R7$(2),core.Y8G("ngIf",core.bMT(7,8,ctx_r1.unlinkProcessing)),core.R7$(2),core.Y8G("ngIf",core.bMT(9,10,ctx_r1.hasMissingOrcidAuthorizations()))}}function OrcidAuthComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4)(1,"div",5),core.DNE(2,OrcidAuthComponent_ng_template_6_div_2_Template,10,6,"div",6),core.nI1(3,"async"),core.j41(4,"div",7)(5,"div",8)(6,"div",9),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"div",10)(10,"div",11),core.DNE(11,OrcidAuthComponent_ng_template_6_ds_alert_11_Template,3,4,"ds-alert",12),core.nI1(12,"async"),core.DNE(13,OrcidAuthComponent_ng_template_6_ds_alert_13_Template,6,7,"ds-alert",13),core.nI1(14,"async"),core.k0s()()()()(),core.DNE(15,OrcidAuthComponent_ng_template_6_ds_alert_15_Template,3,4,"ds-alert",14),core.nI1(16,"async"),core.nI1(17,"async"),core.DNE(18,OrcidAuthComponent_ng_template_6_div_18_Template,10,12,"div",15),core.nI1(19,"async"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(2),core.Y8G("ngIf",core.bMT(3,6,ctx_r1.hasOrcidAuthorizations())),core.R7$(5),core.JRh(core.bMT(8,8,"person.page.orcid.missing-authorizations")),core.R7$(4),core.Y8G("ngIf",!0!==core.bMT(12,10,ctx_r1.hasMissingOrcidAuthorizations())),core.R7$(2),core.Y8G("ngIf",core.bMT(14,12,ctx_r1.hasMissingOrcidAuthorizations())),core.R7$(2),core.Y8G("ngIf",core.bMT(16,14,ctx_r1.onlyAdminCanDisconnectProfileFromOrcid())&&!0!==core.bMT(17,16,ctx_r1.ownerCanDisconnectProfileFromOrcid())),core.R7$(3),core.Y8G("ngIf",core.bMT(19,18,ctx_r1.ownerCanDisconnectProfileFromOrcid()))}}function OrcidAuthComponent_ng_template_8_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",34)(1,"div",5)(2,"div",35),core.nrm(3,"img",36),core.k0s(),core.j41(4,"div",26)(5,"ds-alert",37),core.EFF(6),core.nI1(7,"async"),core.k0s()()(),core.j41(8,"div",5)(9,"div",26)(10,"button",38),core.bIt("click",function(){core.eBV(_r6);const ctx_r1=core.XpG();return core.Njj(ctx_r1.linkOrcid())}),core.nrm(11,"i",39),core.EFF(12),core.nI1(13,"translate"),core.k0s()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(5),core.Y8G("type","alert-info"),core.R7$(),core.JRh(core.bMT(7,3,ctx_r1.getOrcidNotLinkedMessage())),core.R7$(6),core.SpI(" ",core.bMT(13,5,"person.page.orcid.link")," ")}}__webpack_require__(6721);let OrcidAuthComponent=(()=>{class OrcidAuthComponent2{constructor(orcidAuthService,translateService,notificationsService,_window){this.orcidAuthService=orcidAuthService,this.translateService=translateService,this.notificationsService=notificationsService,this._window=_window,this.profileAuthorizationScopes=new cjs.BehaviorSubject([]),this.missingAuthorizationScopes=new cjs.BehaviorSubject([]),this.orcidAuthorizationScopes=new cjs.BehaviorSubject([]),this.unlinkProcessing=new cjs.BehaviorSubject(!1),this.isOrcidLinked$=new cjs.BehaviorSubject(!1),this.onlyAdminCanDisconnectProfileFromOrcid$=new cjs.BehaviorSubject(!1),this.ownerCanDisconnectProfileFromOrcid$=new cjs.BehaviorSubject(!1),this.unlink=new core.bkB}ngOnInit(){this.orcidAuthService.getOrcidAuthorizationScopes().subscribe(scopes=>{this.orcidAuthorizationScopes.next(scopes),this.initOrcidAuthSettings()})}ngOnChanges(changes){!changes.item.isFirstChange()&&changes.item.currentValue!==changes.item.previousValue&&this.initOrcidAuthSettings()}hasOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable().pipe((0,operators.Tj)(scopes=>scopes.length>0))}getOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable()}hasMissingOrcidAuthorizations(){return this.missingAuthorizationScopes.asObservable().pipe((0,operators.Tj)(scopes=>scopes.length>0))}getMissingOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable()}isLinkedToOrcid(){return this.isOrcidLinked$.asObservable()}getOrcidNotLinkedMessage(){const orcid=this.item.firstMetadataValue("person.identifier.orcid");return orcid?this.translateService.get("person.page.orcid.orcid-not-linked-message",{orcid}):this.translateService.get("person.page.orcid.no-orcid-message")}getAuthorizationDescription(scope){return"person.page.orcid.scope."+scope.substring(1).replace("/","-")}onlyAdminCanDisconnectProfileFromOrcid(){return this.onlyAdminCanDisconnectProfileFromOrcid$.asObservable()}ownerCanDisconnectProfileFromOrcid(){return this.ownerCanDisconnectProfileFromOrcid$.asObservable()}linkOrcid(){this.orcidAuthService.getOrcidAuthorizeUrl(this.item).subscribe(authorizeUrl=>{this._window.nativeWindow.location.href=authorizeUrl})}unlinkOrcid(){this.unlinkProcessing.next(!0),this.orcidAuthService.unlinkOrcidByItem(this.item).pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.unlinkProcessing.next(!1),remoteData.isSuccess?(this.notificationsService.success(this.translateService.get("person.page.orcid.unlink.success")),this.unlink.emit()):this.notificationsService.error(this.translateService.get("person.page.orcid.unlink.error"))})}initOrcidAuthSettings(){this.setOrcidAuthorizationsFromItem(),this.setMissingOrcidAuthorizations(),this.orcidAuthService.onlyAdminCanDisconnectProfileFromOrcid().subscribe(result=>{this.onlyAdminCanDisconnectProfileFromOrcid$.next(result)}),this.orcidAuthService.ownerCanDisconnectProfileFromOrcid().subscribe(result=>{this.ownerCanDisconnectProfileFromOrcid$.next(result)}),this.isOrcidLinked$.next(this.orcidAuthService.isLinkedToOrcid(this.item))}setMissingOrcidAuthorizations(){const profileScopes=this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item),missingScopes=this.orcidAuthorizationScopes.value.filter(scope=>!profileScopes.includes(scope));this.missingAuthorizationScopes.next(missingScopes)}setOrcidAuthorizationsFromItem(){this.profileAuthorizationScopes.next(this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item))}static#_=this.\u0275fac=function(t){return new(t||OrcidAuthComponent2)(core.rXU(orcid_auth_service.r),core.rXU(ngx_translate_core.c$),core.rXU(notifications_service.I),core.rXU(window_service.lc))};static#_2=this.\u0275cmp=core.VBU({type:OrcidAuthComponent2,selectors:[["ds-orcid-auth"]],inputs:{item:"item"},outputs:{unlink:"unlink"},standalone:!0,features:[core.OA$,core.aNF],decls:10,vars:8,consts:[["orcidLinked",""],["orcidNotLinked",""],[1,"container","mb-5"],[4,"ngIf","ngIfThen","ngIfElse"],["data-test","orcidLinked"],[1,"row"],["class","col-sm-6 mb-3","data-test","hasOrcidAuthorizations",4,"ngIf"],[1,"col-sm-6","mb-3"],[1,"card","h-100"],[1,"card-header"],[1,"card-body"],[1,"container"],["data-test","noMissingOrcidAuthorizations",3,"type",4,"ngIf"],["data-test","missingOrcidAuthorizations",3,"type",4,"ngIf"],["data-test","unlinkOnlyAdmin",3,"type",4,"ngIf"],["class","row","data-test","unlinkOwner",4,"ngIf"],["data-test","hasOrcidAuthorizations",1,"col-sm-6","mb-3"],[1,"container","p-0"],["data-test","orcidAuthorization",4,"ngFor","ngForOf"],["data-test","orcidAuthorization"],["data-test","noMissingOrcidAuthorizations",3,"type"],["data-test","missingOrcidAuthorizations",3,"type"],["data-test","missingOrcidAuthorization",4,"ngFor","ngForOf"],["data-test","missingOrcidAuthorization"],["data-test","unlinkOnlyAdmin",3,"type"],["data-test","unlinkOwner",1,"row"],[1,"col"],["type","submit",1,"btn","btn-danger","float-right",3,"click","disabled"],[4,"ngIf"],["type","submit","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"fas","fa-unlink"],[1,"fas","fa-circle-notch","fa-spin"],["type","submit",1,"btn","btn-primary","float-right",3,"click"],[1,"fas","fa-check"],["data-test","orcidNotLinked"],[1,"col-2"],["alt","orcid-logo","src","../../../../assets/images/orcid.logo.icon.svg"],[3,"type"],[1,"btn","btn-primary","float-right",3,"click"],[1,"fas","fa-link"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"h1"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,OrcidAuthComponent_ng_container_4_Template,1,0,"ng-container",3),core.nI1(5,"async"),core.k0s(),core.DNE(6,OrcidAuthComponent_ng_template_6_Template,20,20,"ng-template",null,0,core.C5r)(8,OrcidAuthComponent_ng_template_8_Template,14,7,"ng-template",null,1,core.C5r)),2&rf){const orcidLinked_r7=core.sdS(7),orcidNotLinked_r8=core.sdS(9);core.R7$(2),core.JRh(core.bMT(3,4,"person.orcid.registry.auth")),core.R7$(2),core.Y8G("ngIf",core.bMT(5,6,ctx.isLinkedToOrcid()))("ngIfThen",orcidLinked_r7)("ngIfElse",orcidNotLinked_r8)}},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,common.Jj,common.bT,common.Sq,alert_component.C]})}return OrcidAuthComponent2})();var ng_bootstrap=__webpack_require__(71781),orcid_history_data_service=__webpack_require__(36739),orcid_queue_data_service=__webpack_require__(91502),pagination_service=__webpack_require__(39304),pagination_component=__webpack_require__(91904),pagination_component_options_model=__webpack_require__(64694);function OrcidQueueComponent_ds_loading_1_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function OrcidQueueComponent_ds_alert_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",4),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.Y8G("type",ctx_r0.AlertTypeEnum.Info),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.sync-queue.empty-message")," ")}}function OrcidQueueComponent_ds_pagination_10_tr_16_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"tr",10)(1,"td",11),core.nrm(2,"i",12),core.nI1(3,"translate"),core.k0s(),core.j41(4,"td",8),core.EFF(5),core.k0s(),core.j41(6,"td",13)(7,"div",14)(8,"button",15),core.nI1(9,"translate"),core.bIt("click",function(){const entry_r4=core.eBV(_r3).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.send(entry_r4))}),core.nrm(10,"span",16),core.j41(11,"span",17),core.EFF(12),core.nI1(13,"translate"),core.k0s()(),core.j41(14,"button",18),core.nI1(15,"translate"),core.bIt("click",function(){const entry_r4=core.eBV(_r3).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.discardEntry(entry_r4))}),core.nrm(16,"span",19),core.j41(17,"span",17),core.EFF(18),core.nI1(19,"translate"),core.k0s()()()()()}if(2&rf){const entry_r4=ctx.$implicit,ctx_r0=core.XpG(2);core.R7$(2),core.Y8G("ngClass",ctx_r0.getIconClass(entry_r4))("ngbTooltip",core.bMT(3,8,ctx_r0.getIconTooltip(entry_r4))),core.R7$(3),core.SpI(" ",entry_r4.description," "),core.R7$(3),core.Y8G("ngbTooltip",core.bMT(9,10,ctx_r0.getOperationTooltip(entry_r4))),core.R7$(2),core.Y8G("ngClass",ctx_r0.getOperationClass(entry_r4)),core.R7$(2),core.JRh(core.bMT(13,12,ctx_r0.getOperationTooltip(entry_r4))),core.R7$(2),core.Y8G("ngbTooltip",core.bMT(15,14,"person.page.orcid.sync-queue.discard")),core.R7$(4),core.JRh(core.bMT(19,16,"person.page.orcid.sync-queue.discard"))}}function OrcidQueueComponent_ds_pagination_10_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"ds-pagination",5),core.nI1(1,"async"),core.bIt("paginationChange",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.updateList())}),core.j41(2,"div",6)(3,"table",7)(4,"thead")(5,"tr",8)(6,"th"),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"th"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th"),core.EFF(13),core.nI1(14,"translate"),core.k0s()()(),core.j41(15,"tbody"),core.DNE(16,OrcidQueueComponent_ds_pagination_10_tr_16_Template,20,18,"tr",9),core.nI1(17,"async"),core.k0s()()()()}if(2&rf){let tmp_2_0,tmp_8_0;const ctx_r0=core.XpG();core.Y8G("paginationOptions",ctx_r0.paginationOptions)("collectionSize",null==(tmp_2_0=core.bMT(1,8,ctx_r0.getList()))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("retainScrollPosition",!1)("hideGear",!0),core.R7$(7),core.JRh(core.bMT(8,10,"person.page.orcid.sync-queue.table.header.type")),core.R7$(3),core.JRh(core.bMT(11,12,"person.page.orcid.sync-queue.table.header.description")),core.R7$(3),core.JRh(core.bMT(14,14,"person.page.orcid.sync-queue.table.header.action")),core.R7$(3),core.Y8G("ngForOf",null==(tmp_8_0=core.bMT(17,16,ctx_r0.getList()))||null==tmp_8_0.payload?null:tmp_8_0.payload.page)}}let OrcidQueueComponent=(()=>{class OrcidQueueComponent2{constructor(orcidAuthService,orcidQueueService,translateService,paginationService,notificationsService,orcidHistoryService){this.orcidAuthService=orcidAuthService,this.orcidQueueService=orcidQueueService,this.translateService=translateService,this.paginationService=paginationService,this.notificationsService=notificationsService,this.orcidHistoryService=orcidHistoryService,this.paginationOptions=Object.assign(new pagination_component_options_model.W,{id:"oqp",pageSize:5}),this.processing$=new cjs.BehaviorSubject(!1),this.list$=new cjs.BehaviorSubject({}),this.AlertTypeEnum=alert_type.v,this.subs=[]}ngOnInit(){this.updateList()}ngOnChanges(changes){!changes.item.isFirstChange()&&changes.item.currentValue!==changes.item.previousValue&&this.updateList()}updateList(){this.subs.push(this.paginationService.getCurrentPagination(this.paginationOptions.id,this.paginationOptions).pipe((0,operators.BL)(100),(0,operators.F)(),(0,operators.Mi)(()=>this.processing$.next(!0)),(0,operators.nx)(config=>this.orcidQueueService.searchByProfileItemId(this.item.id,config,!1)),(0,shared_operators.qD)()).subscribe(result=>{this.processing$.next(!1),this.list$.next(result),this.orcidQueueService.clearFindByProfileItemRequests()}))}getList(){return this.list$.asObservable()}getIconClass(orcidQueue){if(!orcidQueue.recordType)return"fa fa-user";switch(orcidQueue.recordType.toLowerCase()){case"publication":return"fas fa-book";case"project":return"fas fa-wallet";case"education":return"fas fa-school";case"affiliation":return"fas fa-university";case"country":return"fas fa-globe-europe";case"external_ids":case"researcher_urls":return"fas fa-external-link-alt";default:return"fa fa-user"}}getIconTooltip(orcidQueue){return orcidQueue.recordType?"person.page.orcid.sync-queue.tooltip."+orcidQueue.recordType.toLowerCase():""}getOperationTooltip(orcidQueue){return orcidQueue.operation?"person.page.orcid.sync-queue.tooltip."+orcidQueue.operation.toLowerCase():""}getOperationClass(orcidQueue){if(!orcidQueue.operation)return"";switch(orcidQueue.operation.toLowerCase()){case"insert":return"fas fa-plus";case"update":return"fas fa-edit";case"delete":return"fas fa-trash-alt";default:return""}}discardEntry(orcidQueue){this.processing$.next(!0),this.subs.push(this.orcidQueueService.deleteById(orcidQueue.id).pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processing$.next(!1),remoteData.isSuccess?(this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.discard.success")),this.updateList()):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.discard.error"))}))}send(orcidQueue){this.processing$.next(!0),this.subs.push(this.orcidHistoryService.sendToORCID(orcidQueue).pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processing$.next(!1),remoteData.isSuccess?this.handleOrcidHistoryRecordCreation(remoteData.payload):422===remoteData.statusCode?this.handleValidationErrors(remoteData):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"))}))}getUnauthorizedErrorContent(){return this.orcidAuthService.getOrcidAuthorizeUrl(this.item).pipe((0,operators.nx)(authorizeUrl=>this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.content",{orcid:authorizeUrl})))}handleOrcidHistoryRecordCreation(orcidHistory){switch(orcidHistory.status){case 200:case 201:case 204:this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.send.success")),this.updateList();break;case 400:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.bad-request-error"),null,{timeOut:0});break;case 401:(0,cjs.combineLatest)([this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.title"),this.getUnauthorizedErrorContent()]).subscribe(([title,content])=>{this.notificationsService.error(title,content,{timeOut:0},!0)});break;case 404:this.notificationsService.warning(this.translateService.get("person.page.orcid.sync-queue.send.not-found-warning"));break;case 409:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.conflict-error"),null,{timeOut:0});break;default:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"),null,{timeOut:0})}}handleValidationErrors(remoteData){const translations=[this.translateService.get("person.page.orcid.sync-queue.send.validation-error")],errorMessage=remoteData.errorMessage;errorMessage&&errorMessage.indexOf("Error codes:")>0&&errorMessage.substring(errorMessage.indexOf(":")+1).trim().split(",").forEach(error=>translations.push(this.translateService.get("person.page.orcid.sync-queue.send.validation-error."+error))),(0,cjs.combineLatest)(translations).subscribe(messages=>{const title=messages.shift(),content="<ul>"+messages.map(message=>`<li>${message}</li>`).join("")+"</ul>";this.notificationsService.error(title,content,{timeOut:0},!0)})}ngOnDestroy(){this.list$=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||OrcidQueueComponent2)(core.rXU(orcid_auth_service.r),core.rXU(orcid_queue_data_service.OrcidQueueDataService),core.rXU(ngx_translate_core.c$),core.rXU(pagination_service.m),core.rXU(notifications_service.I),core.rXU(orcid_history_data_service.OrcidHistoryDataService))};static#_2=this.\u0275cmp=core.VBU({type:OrcidQueueComponent2,selectors:[["ds-orcid-queue"]],inputs:{item:"item"},standalone:!0,features:[core.OA$,core.aNF],decls:13,vars:16,consts:[[4,"ngIf"],[1,"container"],[3,"type",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear","paginationChange",4,"ngIf"],[3,"type"],[3,"paginationChange","paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive"],["id","groups",1,"table","table-sm","table-striped","table-hover","table-bordered"],[1,"text-center","align-middle"],["data-test","orcidQueueElementRow",4,"ngFor","ngForOf"],["data-test","orcidQueueElementRow"],[1,"text-center","align-middle",2,"width","15%"],["aria-hidden","true",1,"fa-2x",3,"ngClass","ngbTooltip"],[1,"text-center",2,"width","20%"],[1,"btn-group","edit-field"],["container","body",1,"btn","btn-outline-primary","my-1","col-md",3,"click","ngbTooltip"],[3,"ngClass"],[1,"sr-only"],["container","body",1,"btn","btn-outline-danger","my-1","col-md",3,"click","ngbTooltip"],[1,"fas","fa-unlink"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,OrcidQueueComponent_ds_loading_1_Template,1,0,"ds-loading",0),core.nI1(2,"async"),core.j41(3,"div",1)(4,"h2"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,OrcidQueueComponent_ds_alert_7_Template,3,4,"ds-alert",2),core.nI1(8,"async"),core.nI1(9,"async"),core.DNE(10,OrcidQueueComponent_ds_pagination_10_Template,18,18,"ds-pagination",3),core.nI1(11,"async"),core.nI1(12,"async"),core.k0s()()),2&rf){let tmp_2_0,tmp_3_0;core.R7$(),core.Y8G("ngIf",core.bMT(2,4,ctx.processing$)),core.R7$(4),core.JRh(core.bMT(6,6,"person.orcid.registry.queue")),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(8,8,ctx.processing$)&&0===(null==(tmp_2_0=core.bMT(9,10,ctx.getList()))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)),core.R7$(3),core.Y8G("ngIf",!0!==core.bMT(11,12,ctx.processing$)&&(null==(tmp_3_0=core.bMT(12,14,ctx.getList()))||null==tmp_3_0.payload?null:tmp_3_0.payload.totalElements)>0)}},dependencies:[common.MD,common.YU,common.Sq,common.bT,common.Jj,ng_bootstrap.n8,ng_bootstrap.md,ngx_translate_core.h,ngx_translate_core.D9,themed_loading_component.v,alert_component.C,pagination_component.e]})}return OrcidQueueComponent2})();var researcher_profile_data_service=__webpack_require__(64961);function OrcidSyncSettingsComponent_option_23_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",24),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const syncMode_r3=ctx.$implicit;core.Y8G("value",syncMode_r3.value),core.R7$(),core.JRh(core.bMT(2,2,syncMode_r3.label))}}function OrcidSyncSettingsComponent_div_37_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",25)(1,"input",26),core.mxI("ngModelChange",function($event){core.eBV(_r4);const ctx_r4=core.XpG();return core.DH7(ctx_r4.currentSyncPublications,$event)||(ctx_r4.currentSyncPublications=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",27),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r6=ctx.$implicit,ctx_r4=core.XpG();core.R7$(),core.Mz_("id","publicationOption_",option_r6.value,""),core.R50("ngModel",ctx_r4.currentSyncPublications),core.Y8G("value",option_r6.value),core.R7$(),core.Mz_("for","publicationOption_",option_r6.value,""),core.R7$(),core.JRh(core.bMT(4,7,option_r6.label))}}function OrcidSyncSettingsComponent_div_50_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"div",25)(1,"input",28),core.mxI("ngModelChange",function($event){core.eBV(_r7);const ctx_r4=core.XpG();return core.DH7(ctx_r4.currentSyncFunding,$event)||(ctx_r4.currentSyncFunding=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",27),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r8=ctx.$implicit,ctx_r4=core.XpG();core.R7$(),core.Mz_("id","fundingOption_",option_r8.value,""),core.R50("ngModel",ctx_r4.currentSyncFunding),core.Y8G("value",option_r8.value),core.R7$(),core.Mz_("for","fundingOption_",option_r8.value,""),core.R7$(),core.JRh(core.bMT(4,7,option_r8.label))}}function OrcidSyncSettingsComponent_div_63_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div",25)(1,"input",29),core.mxI("ngModelChange",function($event){const option_r10=core.eBV(_r9).$implicit;return core.DH7(option_r10.checked,$event)||(option_r10.checked=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",27),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r10=ctx.$implicit;core.R7$(),core.Mz_("name","syncProfile_",option_r10.value,""),core.Mz_("id","profileOption_",option_r10.value,""),core.R50("ngModel",option_r10.checked),core.Y8G("value",option_r10.value),core.R7$(),core.Mz_("for","profileOption_",option_r10.value,""),core.R7$(),core.JRh(core.bMT(4,9,option_r10.label))}}let OrcidSyncSettingsComponent=(()=>{class OrcidSyncSettingsComponent2{constructor(researcherProfileService,notificationsService,translateService){this.researcherProfileService=researcherProfileService,this.notificationsService=notificationsService,this.translateService=translateService,this.AlertType=alert_type.v,this.messagePrefix="person.page.orcid",this.settingsUpdated=new core.bkB}ngOnInit(){this.syncModes=[{label:this.messagePrefix+".synchronization-mode.batch",value:"BATCH"},{label:this.messagePrefix+".synchronization-mode.manual",value:"MANUAL"}],this.syncPublicationOptions=["DISABLED","ALL"].map(value=>({label:this.messagePrefix+".sync-publications."+value.toLowerCase(),value})),this.syncFundingOptions=["DISABLED","ALL"].map(value=>({label:this.messagePrefix+".sync-fundings."+value.toLowerCase(),value}));const syncProfilePreferences=this.item.allMetadataValues("dspace.orcid.sync-profile");this.syncProfileOptions=["BIOGRAPHICAL","IDENTIFIERS"].map(value=>({label:this.messagePrefix+".sync-profile."+value.toLowerCase(),value,checked:syncProfilePreferences.includes(value)})),this.currentSyncMode=this.getCurrentPreference("dspace.orcid.sync-mode",["BATCH","MANUAL"],"MANUAL"),this.currentSyncPublications=this.getCurrentPreference("dspace.orcid.sync-publications",["DISABLED","ALL"],"DISABLED"),this.currentSyncFunding=this.getCurrentPreference("dspace.orcid.sync-fundings",["DISABLED","ALL"],"DISABLED")}onSubmit(form){const operations=[];this.fillOperationsFor(operations,"/orcid/mode",form.value.syncMode),this.fillOperationsFor(operations,"/orcid/publications",form.value.syncPublications),this.fillOperationsFor(operations,"/orcid/fundings",form.value.syncFundings);const syncProfileValue=this.syncProfileOptions.map(syncProfileOption=>syncProfileOption.value).filter(value=>form.value["syncProfile_"+value]).join(",");this.fillOperationsFor(operations,"/orcid/profile",syncProfileValue),0!==operations.length&&this.researcherProfileService.findByRelatedItem(this.item).pipe((0,shared_operators.qD)(),(0,operators.nx)(profileRD=>profileRD.hasSucceeded?this.researcherProfileService.patch(profileRD.payload,operations).pipe((0,shared_operators.qD)()):(0,cjs.of)(profileRD))).subscribe(remoteData=>{remoteData.isSuccess?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".synchronization-settings-update.success")),this.settingsUpdated.emit()):this.notificationsService.error(this.translateService.get(this.messagePrefix+".synchronization-settings-update.error"))})}getCurrentPreference(metadataField,allowedValues,defaultValue){const currentPreference=this.item.firstMetadataValue(metadataField);return currentPreference&&allowedValues.includes(currentPreference)?currentPreference:defaultValue}fillOperationsFor(operations,path,currentValue){operations.push({path,op:"replace",value:currentValue})}static#_=this.\u0275fac=function(t){return new(t||OrcidSyncSettingsComponent2)(core.rXU(researcher_profile_data_service.ResearcherProfileDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$))};static#_2=this.\u0275cmp=core.VBU({type:OrcidSyncSettingsComponent2,selectors:[["ds-orcid-sync-setting"]],inputs:{item:"item"},outputs:{settingsUpdated:"settingsUpdated"},standalone:!0,features:[core.aNF],decls:70,vars:42,consts:[["f","ngForm"],[1,"container","mb-5"],[3,"ngSubmit"],[1,"row","mb-3"],[1,"col-md"],["data-test","sync-mode",1,"card"],[1,"card-header"],[1,"card-body"],[1,"container"],[1,"row"],[3,"type"],[1,"form-group","row"],["for","syncMode"],["name","syncMode","id","syncMode","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md","mb-3"],["data-test","sync-mode-publication",1,"card","h-100"],[1,"form-group"],["class","row form-check",4,"ngFor","ngForOf"],["data-test","sync-mode-funding",1,"card","h-100"],["data-test","profile-preferences",1,"card","h-100"],[1,"col"],["type","submit",1,"btn","btn-primary","float-right"],[1,"fas","fa-edit"],[3,"value"],[1,"row","form-check"],["type","radio","name","syncPublications","required","",3,"ngModelChange","ngModel","id","value"],[1,"ml-2",3,"for"],["type","radio","name","syncFundings","required","",3,"ngModelChange","ngModel","id","value"],["type","checkbox",3,"ngModelChange","ngModel","name","id","value"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"h2"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"form",2,0),core.bIt("ngSubmit",function(){core.eBV(_r1);const f_r2=core.sdS(5);return core.Njj(ctx.onSubmit(f_r2.form))}),core.j41(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"div",7)(13,"div",8)(14,"div",9)(15,"ds-alert",10),core.EFF(16),core.nI1(17,"translate"),core.k0s()(),core.j41(18,"div",11)(19,"label",12),core.EFF(20),core.nI1(21,"translate"),core.k0s(),core.j41(22,"select",13),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.currentSyncMode,$event)||(ctx.currentSyncMode=$event),core.Njj($event)}),core.DNE(23,OrcidSyncSettingsComponent_option_23_Template,3,4,"option",14),core.k0s()()()()()()(),core.j41(24,"div",9)(25,"div",15)(26,"div",16)(27,"div",6),core.EFF(28),core.nI1(29,"translate"),core.k0s(),core.j41(30,"div",7)(31,"div",8)(32,"div",9)(33,"ds-alert",10),core.EFF(34),core.nI1(35,"translate"),core.k0s()(),core.j41(36,"div",17),core.DNE(37,OrcidSyncSettingsComponent_div_37_Template,5,9,"div",18),core.k0s()()()()(),core.j41(38,"div",15)(39,"div",19)(40,"div",6),core.EFF(41),core.nI1(42,"translate"),core.k0s(),core.j41(43,"div",7)(44,"div",8)(45,"div",9)(46,"ds-alert",10),core.EFF(47),core.nI1(48,"translate"),core.k0s()(),core.j41(49,"div",17),core.DNE(50,OrcidSyncSettingsComponent_div_50_Template,5,9,"div",18),core.k0s()()()()(),core.j41(51,"div",15)(52,"div",20)(53,"div",6),core.EFF(54),core.nI1(55,"translate"),core.k0s(),core.j41(56,"div",7)(57,"div",8)(58,"div",9)(59,"ds-alert",10),core.EFF(60),core.nI1(61,"translate"),core.k0s()(),core.j41(62,"div",17),core.DNE(63,OrcidSyncSettingsComponent_div_63_Template,5,11,"div",18),core.k0s()()()()()(),core.j41(64,"div",9)(65,"div",21)(66,"button",22),core.nrm(67,"i",23),core.EFF(68),core.nI1(69,"translate"),core.k0s()()()()()}2&rf&&(core.R7$(2),core.JRh(core.bMT(3,20,"person.orcid.sync.setting")),core.R7$(8),core.JRh(core.bMT(11,22,"person.page.orcid.synchronization-mode")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(17,24,"person.page.orcid.synchronization-mode-message")," "),core.R7$(4),core.JRh(core.bMT(21,26,"person.page.orcid.synchronization-mode.label")),core.R7$(2),core.R50("ngModel",ctx.currentSyncMode),core.R7$(),core.Y8G("ngForOf",ctx.syncModes),core.R7$(5),core.JRh(core.bMT(29,28,"person.page.orcid.publications-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(35,30,"person.page.orcid.synchronization-mode-publication-message")," "),core.R7$(3),core.Y8G("ngForOf",ctx.syncPublicationOptions),core.R7$(4),core.JRh(core.bMT(42,32,"person.page.orcid.funding-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(48,34,"person.page.orcid.synchronization-mode-funding-message")," "),core.R7$(3),core.Y8G("ngForOf",ctx.syncFundingOptions),core.R7$(4),core.JRh(core.bMT(55,36,"person.page.orcid.profile-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(61,38,"person.page.orcid.synchronization-mode-profile-message")," "),core.R7$(3),core.Y8G("ngForOf",ctx.syncProfileOptions),core.R7$(5),core.SpI(" ",core.bMT(69,40,"person.page.orcid.save.preference.changes")," "))},dependencies:[alert_component.C,fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.me,fesm2022_forms.Zm,fesm2022_forms.wz,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.YS,fesm2022_forms.vS,fesm2022_forms.cV,ngx_translate_core.h,ngx_translate_core.D9,common.Sq]})}return OrcidSyncSettingsComponent2})();function OrcidPageComponent_ds_loading_0_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",4),core.nI1(1,"translate")),2&rf&&core.Y8G("message",core.bMT(1,1,"person.page.orcid.link.processing"))}function OrcidPageComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",5)(1,"ds-alert",6),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("type",ctx_r0.AlertType.Error),core.R7$(),core.JRh(core.bMT(3,2,"person.page.orcid.link.error.message"))}}function OrcidPageComponent_ng_container_5_ds_orcid_sync_setting_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-orcid-sync-setting",10),core.nI1(1,"async"),core.bIt("settingsUpdated",function(){core.eBV(_r3);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.updateItem())}),core.k0s()}if(2&rf){const ctx_r0=core.XpG(2);core.Y8G("item",core.bMT(1,1,ctx_r0.item))}}function OrcidPageComponent_ng_container_5_ds_orcid_queue_4_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-orcid-queue",11),core.nI1(1,"async")),2&rf){const ctx_r0=core.XpG(2);core.Y8G("item",core.bMT(1,1,ctx_r0.item))}}function OrcidPageComponent_ng_container_5_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.qex(0),core.j41(1,"ds-orcid-auth",7),core.nI1(2,"async"),core.bIt("unlink",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.updateItem())}),core.k0s(),core.DNE(3,OrcidPageComponent_ng_container_5_ds_orcid_sync_setting_3_Template,2,3,"ds-orcid-sync-setting",8)(4,OrcidPageComponent_ng_container_5_ds_orcid_queue_4_Template,2,3,"ds-orcid-queue",9),core.bVm()}if(2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("item",core.bMT(2,3,ctx_r0.item)),core.R7$(2),core.Y8G("ngIf",ctx_r0.isLinkedToOrcid()),core.R7$(),core.Y8G("ngIf",ctx_r0.isLinkedToOrcid())}}function OrcidPageComponent_div_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"a",15),core.nrm(4,"i",16),core.EFF(5),core.nI1(6,"translate"),core.k0s()()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.Y8G("routerLink",ctx_r0.getItemPage()),core.R7$(2),core.SpI(" ",core.bMT(6,2,"item.orcid.return")," ")}}let OrcidPageComponent=(()=>{class OrcidPageComponent2{constructor(platformId,authService,itemService,orcidAuthService,route,router2){this.platformId=platformId,this.authService=authService,this.itemService=itemService,this.orcidAuthService=orcidAuthService,this.route=route,this.router=router2,this.AlertType=alert_type.v,this.connectionStatus=new cjs.BehaviorSubject(!1),this.item=new cjs.BehaviorSubject(null),this.processingConnection=new cjs.BehaviorSubject(!0)}ngOnInit(){if((0,common.UE)(this.platformId)){const codeParam$=this.route.queryParamMap.pipe((0,operators.s)(1),(0,operators.Tj)(paramMap=>paramMap.get("code"))),item$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,authorized_operators.QD)(this.router,this.authService),(0,shared_operators.ak)());(0,cjs.combineLatest)([codeParam$,item$]).subscribe(([codeParam,item])=>{this.itemId=item.id,(0,empty_util.hj)(codeParam)?this.linkProfileToOrcid(item,codeParam):(this.item.next(item),this.processingConnection.next(!1),this.connectionStatus.next(!0))})}}isLinkedToOrcid(){return this.orcidAuthService.isLinkedToOrcid(this.item.value)}getItemPage(){return(0,item_page_routing_paths._o)(this.item.value)}updateItem(){this.clearRouteParams(),this.itemService.findById(this.itemId,!1).pipe((0,shared_operators.qD)()).subscribe(itemRD=>{itemRD.hasSucceeded&&this.item.next(itemRD.payload)})}linkProfileToOrcid(person,code){this.orcidAuthService.linkOrcidByItem(person,code).pipe((0,shared_operators.qD)()).subscribe(profileRD=>{this.processingConnection.next(!1),profileRD.hasSucceeded?(this.connectionStatus.next(!0),this.updateItem()):(this.item.next(person),this.connectionStatus.next(!1),this.clearRouteParams())})}clearRouteParams(){const redirectUrl=this.router.url.split("?")[0];this.router.navigate([redirectUrl])}static#_=this.\u0275fac=function(t){return new(t||OrcidPageComponent2)(core.rXU(core.Agw),core.rXU(auth_service.uR),core.rXU(item_data_service.ItemDataService),core.rXU(orcid_auth_service.r),core.rXU(router.nX),core.rXU(router.Ix))};static#_2=this.\u0275cmp=core.VBU({type:OrcidPageComponent2,selectors:[["ds-orcid-page"]],standalone:!0,features:[core.aNF],decls:12,vars:20,consts:[[3,"message",4,"ngIf"],["class","container","data-test","error-box",4,"ngIf"],[4,"ngIf"],["class","container",4,"ngIf"],[3,"message"],["data-test","error-box",1,"container"],[3,"type"],["data-test","orcid-auth",3,"unlink","item"],["data-test","orcid-sync-setting",3,"item","settingsUpdated",4,"ngIf"],[3,"item",4,"ngIf"],["data-test","orcid-sync-setting",3,"settingsUpdated","item"],[3,"item"],[1,"container"],[1,"button-row","bottom","mb-3"],[1,"text-right"],["role","button","data-test","back-button",1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(rf,ctx){1&rf&&(core.DNE(0,OrcidPageComponent_ds_loading_0_Template,2,3,"ds-loading",0),core.nI1(1,"async"),core.DNE(2,OrcidPageComponent_div_2_Template,4,4,"div",1),core.nI1(3,"async"),core.nI1(4,"async"),core.DNE(5,OrcidPageComponent_ng_container_5_Template,5,5,"ng-container",2),core.nI1(6,"async"),core.nI1(7,"async"),core.nI1(8,"async"),core.DNE(9,OrcidPageComponent_div_9_Template,7,4,"div",3),core.nI1(10,"async"),core.nI1(11,"async")),2&rf&&(core.Y8G("ngIf",core.bMT(1,4,ctx.processingConnection)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(3,6,ctx.processingConnection)&&!0!==core.bMT(4,8,ctx.connectionStatus)),core.R7$(3),core.Y8G("ngIf",!0!==core.bMT(6,10,ctx.processingConnection)&&core.bMT(7,12,ctx.item)&&core.bMT(8,14,ctx.connectionStatus)),core.R7$(4),core.Y8G("ngIf",!0!==core.bMT(10,16,ctx.processingConnection)&&core.bMT(11,18,ctx.item)))},dependencies:[common.MD,common.bT,common.Jj,themed_loading_component.v,alert_component.C,OrcidAuthComponent,OrcidSyncSettingsComponent,OrcidQueueComponent,ngx_translate_core.h,ngx_translate_core.D9,router.Wk]})}return OrcidPageComponent2})();const orcidPageGuard=(0,__webpack_require__(96293).L)(()=>item_page_resolver.Z,()=>(0,cjs.of)(feature_id._.CanSynchronizeWithORCID));var themed_component=__webpack_require__(31260);__webpack_require__(7760);const themed_item_page_component_c0=["*"];function ThemedItemPageComponent_ng_template_0_Template(rf,ctx){}let ThemedItemPageComponent=(()=>{class ThemedItemPageComponent2 extends themed_component.J{getComponentName(){return"ItemPageComponent"}importThemedComponent(themeName){return __webpack_require__(5729)(`./${themeName}/app/item-page/simple/item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7760))}static#_=this.\u0275fac=(()=>{let \u0275ThemedItemPageComponent_BaseFactory;return function(t){return(\u0275ThemedItemPageComponent_BaseFactory||(\u0275ThemedItemPageComponent_BaseFactory=core.xGo(ThemedItemPageComponent2)))(t||ThemedItemPageComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedItemPageComponent2,selectors:[["ds-item-page"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_item_page_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedItemPageComponent2})();var ngrx_store=__webpack_require__(5136),version_data_service=__webpack_require__(80148),resolver_actions=__webpack_require__(71012);const VERSION_PAGE_LINKS_TO_FOLLOW=[(0,__webpack_require__(32181).s)("item")],ROUTES=[{path:":id",resolve:{dso:item_page_resolver.Z,breadcrumb:(route,state,breadcrumbService=(0,core.WQX)(dso_breadcrumbs_service.U),dataService=(0,core.WQX)(item_data_service.ItemDataService))=>(0,dso_breadcrumb_resolver.G)(route,state,breadcrumbService,dataService,...item_resolver.e),menu:dso_edit_menu_resolver.c},runGuardsAndResolvers:"always",children:[{path:"",component:ThemedItemPageComponent,pathMatch:"full"},{path:"full",component:themed_full_item_page_component.i},{path:item_page_routing_paths.jU,loadChildren:()=>__webpack_require__.e(6155).then(__webpack_require__.bind(__webpack_require__,36155)).then(m=>m.ROUTES)},{path:item_page_routing_paths.aX,component:UploadBitstreamComponent,canActivate:[authenticated_guard.t]},{path:app_routing_paths.RZ,component:BitstreamRequestACopyPageComponent},{path:item_page_routing_paths._z,component:OrcidPageComponent,canActivate:[authenticated_guard.t,orcidPageGuard]}],data:{menu:{public:[]}}},{path:"version",children:[{path:":id",component:(()=>{class VersionPageComponent2{constructor(route,router2,versionService,authService){this.route=route,this.router=router2,this.versionService=versionService,this.authService=authService}ngOnInit(){this.versionRD$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,authorized_operators.QD)(this.router,this.authService)),this.versionRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(version=>version.item),(0,authorized_operators.QD)(this.router,this.authService),(0,shared_operators.qD)()).subscribe(itemRD=>{if(itemRD.hasNoContent)this.router.navigateByUrl((0,app_routing_paths.EX)(),{skipLocationChange:!0});else{const itemUrl=(0,item_page_routing_paths._o)(itemRD.payload);this.router.navigateByUrl(itemUrl)}})}static#_=this.\u0275fac=function(t){return new(t||VersionPageComponent2)(core.rXU(router.nX),core.rXU(router.Ix),core.rXU(version_data_service.VersionDataService),core.rXU(auth_service.uR))};static#_2=this.\u0275cmp=core.VBU({type:VersionPageComponent2,selectors:[["ds-version-page"]],standalone:!0,features:[core.aNF],decls:0,vars:0,template:function(rf,ctx){}})}return VersionPageComponent2})(),resolve:{dso:(route,state,versionService=(0,core.WQX)(version_data_service.VersionDataService),store=(0,core.WQX)(ngrx_store.il))=>{const versionRD$=versionService.findById(route.params.id,!0,!1,...VERSION_PAGE_LINKS_TO_FOLLOW).pipe((0,shared_operators.qD)());return versionRD$.subscribe(versionRD=>{store.dispatch(new resolver_actions.j(state.url,versionRD.payload))}),versionRD$}}}]}]},60498:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>itemPageResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(64247),_ngrx_store__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5136),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41543),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(94743),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(71012),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(78911),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(77028),_item_resolver__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(88336),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(63254);const itemPageResolver=(route,state,router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_7__.Ix),itemService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.ItemDataService),store=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.il),authService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR))=>itemService.findById(route.params.id,!0,!1,..._item_resolver__WEBPACK_IMPORTED_MODULE_5__.e).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_3__.QD)(router,authService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(rd=>{if(store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__.j(state.url,rd.payload)),rd.hasSucceeded&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(rd.payload)){const thisRoute=state.url,itemRoute=router.parseUrl((0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_11__._o)(rd.payload)).toString();if(!thisRoute.startsWith(itemRoute)){const itemId=rd.payload.uuid,subRoute=thisRoute.substring(thisRoute.indexOf(itemId)+itemId.length,thisRoute.length);router.navigateByUrl(itemRoute+subRoute)}}return rd}))},88336:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>ITEM_PAGE_LINKS_TO_FOLLOW}),__webpack_require__(94743),__webpack_require__(71012),__webpack_require__(82656);var _shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(32181);const ITEM_PAGE_LINKS_TO_FOLLOW=[(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("owningCollection",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("parentCommunity",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("parentCommunity"))),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("relationships"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("version",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("versionhistory")),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.s)("thumbnail")]},7760:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemPageComponent:()=>ItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(10743),src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3075),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29321),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94743),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(92203),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(42180),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82656),_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(97849),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(28107),_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(77028),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(36159),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32943),_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(95776),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(45961),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(27657),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(78895),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(63254),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(25006),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(8237),_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(38453),_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(96041),_angular_router__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(64247),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(44072);function ItemPageComponent_div_0_div_1_div_1_ds_listable_object_component_loader_6_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-listable-object-component-loader",11),2&rf){const item_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG().ngIf,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("object",item_r1)("viewMode",ctx_r1.viewMode)}}function ItemPageComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(1,"ds-item-alerts",6)(2,"ds-qa-event-notification",6)(3,"ds-notify-requests-status",7)(4,"ds-item-versions-notice",6)(5,"ds-view-tracker",8),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(6,ItemPageComponent_div_0_div_1_div_1_ds_listable_object_component_loader_6_Template,1,2,"ds-listable-object-component-loader",9),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(8,"ds-item-versions",10),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const item_r1=ctx.ngIf,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("itemUuid",item_r1.uuid),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("object",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",!item_r1.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(7,8,ctx_r1.isAdmin$)),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1)("displayActions",!1)}}function ItemPageComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_div_1_div_1_Template,9,10,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const itemRD_r3=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.payload)}}function ItemPageComponent_div_0_ds_error_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-error",12),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"error.item"))}function ItemPageComponent_div_0_ds_loading_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-loading",12),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"loading.item"))}function ItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_div_1_Template,2,2,"div",2)(2,ItemPageComponent_div_0_ds_error_2_Template,2,3,"ds-error",3)(3,ItemPageComponent_div_0_ds_loading_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const itemRD_r3=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.isLoading)}}let ItemPageComponent=(()=>{class ItemPageComponent2{constructor(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.viewMode=_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.Tj)(data=>data.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Hz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.Tj)(item=>(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_20__._o)(item))),this.isAdmin$=this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(params=>{(0,rxjs__WEBPACK_IMPORTED_MODULE_21__.combineLatest)([this.signpostingDataService.getLinks(params.id).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([signpostingLinks,coarRestApiUrls])=>{let links="";if(this.signpostingLinks=signpostingLinks,signpostingLinks.forEach(link=>{links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+`<${link.href}> ; rel="${link.rel}"`+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(link.type)?` ; type="${link.type}" `:" ");let tag={href:link.href,rel:link.rel};(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(link.type)&&(tag=Object.assign(tag,{type:link.type})),this.linkHeadService.addTag(tag)}),coarRestApiUrls.length>0){const inboxLinks=this.initPageInboxLinks(coarRestApiUrls);links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+inboxLinks}(0,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Vy)(this.platformId)&&this.responseService.setHeader("Link",links)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.nx)(coarLdnEnabled=>coarLdnEnabled?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,rxjs__WEBPACK_IMPORTED_MODULE_21__.of)([])))}initPageInboxLinks(coarRestApiUrls){const rel=this.notifyInfoService.getInboxRelationLink();let links="";return coarRestApiUrls.forEach(coarRestApiUrl=>{const tag={href:coarRestApiUrl,rel};this.inboxTags.push(tag),this.linkHeadService.addTag(tag),links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+`<${coarRestApiUrl}> ; rel="${rel}"`}),links}ngOnDestroy(){this.signpostingLinks.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)}),this.inboxTags.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)})}static#_=this.\u0275fac=function(t){return new(t||ItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__.w),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__.z),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__.m),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_18__.Agw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_18__.VBU({type:ItemPageComponent2,selectors:[["ds-base-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_18__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"itemUuid"],[3,"object"],[3,"object","viewMode",4,"ngIf"],[1,"mt-2",3,"item","displayActions"],[3,"object","viewMode"],[3,"message"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(0,ItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,ctx.itemRD$))},dependencies:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__.r,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_13__.R,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__.s,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_12__.H,_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__.v,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__.I,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__.A,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_23__.bT,_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__.x,_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__.f],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__.Ws]},changeDetection:0})}return ItemPageComponent2})()},38453:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>NotifyRequestsStatusComponent});var common=__webpack_require__(84739),cjs=__webpack_require__(74785),notify_services_status_data_service=__webpack_require__(19969),operators=__webpack_require__(82656),empty_util=__webpack_require__(77028),ngx_translate_core=__webpack_require__(43750),truncatable_component=__webpack_require__(95435),truncatable_part_component=__webpack_require__(2455),RequestStatusEnum=function(RequestStatusEnum2){return RequestStatusEnum2.ACCEPTED="ACCEPTED",RequestStatusEnum2.REJECTED="REJECTED",RequestStatusEnum2.REQUESTED="REQUESTED",RequestStatusEnum2}(RequestStatusEnum||{}),core=__webpack_require__(68014);const _c0=a0=>({"align-items-center":a0}),_c1=(a0,a1,a2)=>({serviceName:a0,serviceUrl:a1,offerType:a2});function RequestStatusAlertBoxComponent_ng_container_0_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"div",7),core.nI1(2,"translate"),core.bVm()),2&rf){const request_r1=ctx.$implicit,ctx_r1=core.XpG(2);core.R7$(),core.Y8G("innerHTML",core.i5U(2,1,ctx_r1.displayOptions.text,core.sMw(4,_c1,request_r1.serviceName,request_r1.serviceUrl,request_r1.offerType)),core.npT)}}function RequestStatusAlertBoxComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"div",1),core.nrm(2,"img",2),core.j41(3,"ds-truncatable",3)(4,"ds-truncatable-part",4)(5,"div",5),core.DNE(6,RequestStatusAlertBoxComponent_ng_container_0_ng_container_6_Template,3,8,"ng-container",6),core.k0s()()()(),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.ZvI("alert d-flex flex-row sections-gap ",ctx_r1.displayOptions.alertType,""),core.Y8G("ngClass",core.eq3(8,_c0,1===ctx_r1.data.length)),core.R7$(2),core.Y8G("id",ctx_r1.status),core.R7$(),core.Y8G("id",ctx_r1.status)("minLines",1),core.R7$(2),core.Y8G("ngForOf",ctx_r1.data)}}let RequestStatusAlertBoxComponent=(()=>{class RequestStatusAlertBoxComponent2{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case RequestStatusEnum.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case RequestStatusEnum.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case RequestStatusEnum.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static#_=this.\u0275fac=function(t){return new(t||RequestStatusAlertBoxComponent2)};static#_2=this.\u0275cmp=core.VBU({type:RequestStatusAlertBoxComponent2,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(rf,ctx){1&rf&&core.DNE(0,RequestStatusAlertBoxComponent_ng_container_0_Template,7,10,"ng-container",0),2&rf&&core.Y8G("ngIf",(null==ctx.data?null:ctx.data.length)>0&&ctx.displayOptions)},dependencies:[common.bT,truncatable_part_component.W,truncatable_component.d,common.Sq,ngx_translate_core.h,ngx_translate_core.D9,common.YU],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return RequestStatusAlertBoxComponent2})();function NotifyRequestsStatusComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"ds-request-status-alert-box",2),core.bVm()),2&rf){const entry_r1=ctx.$implicit;core.R7$(),core.Y8G("status",entry_r1.key)("data",entry_r1.value)}}function NotifyRequestsStatusComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,NotifyRequestsStatusComponent_ng_container_0_ng_container_1_Template,2,2,"ng-container",1),core.nI1(2,"async"),core.nI1(3,"keyvalue"),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngForOf",core.bMT(3,3,core.bMT(2,1,ctx_r1.requestMap$)))}}let NotifyRequestsStatusComponent=(()=>{class NotifyRequestsStatusComponent2{constructor(notifyInfoService){this.notifyInfoService=notifyInfoService}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,operators.qD)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,operators.Bo)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,cjs.map)(data=>this.groupDataByStatus(data)))}groupDataByStatus(notifyRequestsStatus){const statusMap=new Map;return notifyRequestsStatus.notifyStatus?.forEach(notifyStatus=>{const status=notifyStatus.status;statusMap.has(status)||statusMap.set(status,[]),statusMap.get(status)?.push(notifyStatus)}),statusMap}static#_=this.\u0275fac=function(t){return new(t||NotifyRequestsStatusComponent2)(core.rXU(notify_services_status_data_service.NotifyRequestsStatusDataService))};static#_2=this.\u0275cmp=core.VBU({type:NotifyRequestsStatusComponent2,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"status","data"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,NotifyRequestsStatusComponent_ng_container_0_Template,4,5,"ng-container",0),core.nI1(1,"async")),2&rf){let tmp_0_0;core.Y8G("ngIf",(null==(tmp_0_0=core.bMT(1,1,ctx.requestMap$))?null:tmp_0_0.size)>0)}},dependencies:[RequestStatusAlertBoxComponent,common.Jj,common.lG,common.Sq,common.bT],changeDetection:0})}return NotifyRequestsStatusComponent2})()},96041:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>QaEventNotificationComponent});var common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),operators=__webpack_require__(10743),admin_routing_paths=__webpack_require__(6602),request_param_model=__webpack_require__(57699),quality_assurance_source_data_service=__webpack_require__(75672),shared_operators=(__webpack_require__(6721),__webpack_require__(82656)),core=__webpack_require__(68014);let SplitPipe=(()=>{class SplitPipe2{transform(value,separator){return value.split(separator)}static#_=this.\u0275fac=function(t){return new(t||SplitPipe2)};static#_2=this.\u0275pipe=core.EJ8({name:"dsSplit",type:SplitPipe2,pure:!0,standalone:!0})}return SplitPipe2})();const _c0=a0=>({num:a0}),_c1=(a0,a1,a2)=>[a0,a1,"target",a2],_c2=()=>({forward:!0});function QaEventNotificationComponent_ng_container_0_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3)(1,"div",4),core.nrm(2,"img",5),core.nI1(3,"dsSplit"),core.k0s(),core.j41(4,"div",6)(5,"div",7),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"button",8),core.nI1(9,"dsSplit"),core.EFF(10),core.nI1(11,"translate"),core.k0s()()()),2&rf){const source_r1=core.XpG().$implicit,ctx_r1=core.XpG(2);core.R7$(2),core.Mz_("src","assets/images/qa-",core.i5U(3,8,source_r1.id,":")[0],"-logo.png",core.B4B),core.Mz_("alt","",source_r1.id," logo"),core.R7$(4),core.SpI(" ",core.i5U(7,11,"item.qa-event-notification.check.notification-info",core.eq3(19,_c0,source_r1.totalEvents))," "),core.R7$(2),core.Y8G("routerLink",core.sMw(21,_c1,ctx_r1.getQualityAssuranceRoute(),core.i5U(9,14,source_r1.id,":")[0],ctx_r1.item.id))("queryParams",core.lJ4(25,_c2)),core.R7$(2),core.SpI(" ",core.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function QaEventNotificationComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,QaEventNotificationComponent_ng_container_0_ng_container_1_div_1_Template,12,26,"div",2),core.bVm()),2&rf){const source_r1=ctx.$implicit;core.R7$(),core.Y8G("ngIf",source_r1.totalEvents>0)}}function QaEventNotificationComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,QaEventNotificationComponent_ng_container_0_ng_container_1_Template,2,1,"ng-container",1),core.bVm()),2&rf){const sources_r3=ctx.ngIf;core.R7$(),core.Y8G("ngForOf",sources_r3)}}let QaEventNotificationComponent=(()=>{class QaEventNotificationComponent2{constructor(qualityAssuranceSourceDataService){this.qualityAssuranceSourceDataService=qualityAssuranceSourceDataService}ngOnChanges(changes){changes.item&&changes.item.currentValue.uuid!==changes.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const findListTopicOptions={searchParams:[new request_param_model.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(findListTopicOptions,!1).pipe((0,shared_operators.qD)(),(0,operators.Tj)(data=>data.hasSucceeded?data.payload.page:[]),(0,operators.WL)(()=>[]))}getQualityAssuranceRoute(){return(0,admin_routing_paths.b7)()}static#_=this.\u0275fac=function(t){return new(t||QaEventNotificationComponent2)(core.rXU(quality_assurance_source_data_service.QualityAssuranceSourceDataService))};static#_2=this.\u0275cmp=core.VBU({type:QaEventNotificationComponent2,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[core.Jv_([quality_assurance_source_data_service.QualityAssuranceSourceDataService]),core.OA$,core.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert alert-info d-flex flex-row",4,"ngIf"],[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"pl-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(rf,ctx){1&rf&&(core.DNE(0,QaEventNotificationComponent_ng_container_0_Template,2,1,"ng-container",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngIf",core.bMT(1,1,ctx.sources$))},dependencies:[common.bT,common.Sq,common.Jj,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,SplitPipe],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return QaEventNotificationComponent2})()},65925:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>ItemVersionsSharedService});var _shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43750);let ItemVersionsSharedService=(()=>{class ItemVersionsSharedService2{constructor(notificationsService,translateService){this.notificationsService=notificationsService,this.translateService=translateService}static msg(key){return"item.version.create.notification."+key}notifyCreateNewVersion(newVersionRD){const newVersionNumber=newVersionRD?.payload?.version;newVersionRD.hasSucceeded?this.notificationsService.success(null,this.translateService.get(ItemVersionsSharedService2.msg("success"),{version:newVersionNumber})):this.notificationsService.error(null,this.translateService.get(ItemVersionsSharedService2.msg(422===newVersionRD?.statusCode?"inProgress":"failure")))}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsSharedService2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_1__.KVO(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__.c$))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.jDH({token:ItemVersionsSharedService2,factory:ItemVersionsSharedService2.\u0275fac,providedIn:"root"})}return ItemVersionsSharedService2})()},32137:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>ItemVersionsSummaryModalComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28955),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(74785),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32943),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71781);const _c0=a0=>({version:a0});function ItemVersionsSummaryModalComponent_div_0_span_11_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.i5U(2,1,"item.version.create.modal.text.startingFrom",_angular_core__WEBPACK_IMPORTED_MODULE_1__.eq3(4,_c0,ctx_r1.versionNumber))," ")}}function ItemVersionsSummaryModalComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div")(1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(4,"button",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalClose())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(5,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"div",5)(8,"p",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(11,ItemVersionsSummaryModalComponent_div_0_span_11_Template,3,6,"span",7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(12,"div",8)(13,"label",9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(14),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(15,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(16,"input",10),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mxI("ngModelChange",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.DH7(ctx_r1.newVersionSummary,$event)||(ctx_r1.newVersionSummary=$event),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("keyup.enter",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalSubmit())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(18,"div",11)(19,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(20,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalClose())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(21,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(22),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(23,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(24,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalSubmit())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(26,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(3,10,"item.version.create.modal.header")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(10,12,"item.version.create.modal.text")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("ngIf",!ctx_r1.firstVersion),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(15,14,"item.version.create.modal.form.summary.label"),":"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(17,16,"item.version.create.modal.form.summary.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R50("ngModel",ctx_r1.newVersionSummary),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("title",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(20,18,"item.version.create.modal.button.cancel.tooltip")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(23,20,"item.version.create.modal.button.cancel")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("title",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(25,22,"item.version.create.modal.button.confirm.tooltip")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(28,24,"item.version.create.modal.button.confirm")," ")}}function ItemVersionsSummaryModalComponent_ng_template_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(3,"div",5)(4,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(8,"ds-loading",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(2,3,"item.version.create.modal.submitted.header")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(6,5,"item.version.create.modal.submitted.text")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("showMessage",!1))}let ItemVersionsSummaryModalComponent=(()=>{class ItemVersionsSummaryModalComponent2{constructor(activeModal){this.activeModal=activeModal,this.firstVersion=!0,this.createVersionEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.bkB}ngOnInit(){this.submitted$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(!1)}onModalClose(){this.activeModal.dismiss()}beforeDismiss(){return!this.submitted$.getValue()}onModalSubmit(){this.createVersionEvent.emit(this.newVersionSummary),this.submitted$.next(!0)}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsSummaryModalComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__.Lw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.VBU({type:ItemVersionsSummaryModalComponent2,selectors:[["ds-item-versions-summary-modal"]],outputs:{createVersionEvent:"createVersionEvent"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.aNF],decls:4,vars:4,consts:[["waiting",""],[4,"ngIf","ngIfElse"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[4,"ngIf"],[1,"form-group"],["for","summary"],["type","text","id","summary",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","placeholder"],[1,"modal-footer","space-children-mr"],["type","button",1,"btn","btn-outline-secondary","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-times","fa-fw"],["type","submit",1,"btn","btn-success","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"d-flex","justify-content-center"],[3,"showMessage"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(0,ItemVersionsSummaryModalComponent_div_0_Template,29,26,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(2,ItemVersionsSummaryModalComponent_ng_template_2_Template,9,7,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.C5r)),2&rf){const waiting_r3=_angular_core__WEBPACK_IMPORTED_MODULE_1__.sdS(3);_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("ngIf",!0!==_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(1,2,ctx.submitted$))("ngIfElse",waiting_r3)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_4__.bT,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.vS,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_0__.v,_angular_common__WEBPACK_IMPORTED_MODULE_4__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.D9]})}return ItemVersionsSummaryModalComponent2})()},25006:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>ItemVersionsComponent});var common=__webpack_require__(84739),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),configuration_data_service=__webpack_require__(44994),authorization_data_service=__webpack_require__(30289),feature_id=__webpack_require__(29321),version_data_service=__webpack_require__(80148),version_history_data_service=__webpack_require__(1555),pagination_service=__webpack_require__(39304),shared_operators=(__webpack_require__(6721),__webpack_require__(82656)),alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),pagination_component=__webpack_require__(91904),pagination_component_options_model=__webpack_require__(64694),paginated_search_options_model=__webpack_require__(80780),follow_link_config_model=__webpack_require__(32181),var_directive=__webpack_require__(45961),item_page_routing_paths=__webpack_require__(63254),core=__webpack_require__(68014),router=__webpack_require__(64247),item_data_service=__webpack_require__(94743),workflowitem_data_service=(__webpack_require__(80170),__webpack_require__(65500)),workspaceitem_data_service=__webpack_require__(2402),ng_bootstrap=__webpack_require__(71781);const _c0=a0=>({version:a0});let ItemVersionsDeleteModalComponent=(()=>{class ItemVersionsDeleteModalComponent2{constructor(activeModal){this.activeModal=activeModal,this.response=new core.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsDeleteModalComponent2)(core.rXU(ng_bootstrap.Lw))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsDeleteModalComponent2,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[core.aNF],decls:22,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div")(1,"div",0),core.EFF(2),core.nI1(3,"translate"),core.j41(4,"button",1),core.bIt("click",function(){return ctx.onModalClose()}),core.j41(5,"span",2),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",3)(8,"p",4),core.EFF(9),core.nI1(10,"translate"),core.k0s()(),core.j41(11,"div",5)(12,"button",6),core.nI1(13,"translate"),core.bIt("click",function(){return ctx.onModalClose()}),core.nrm(14,"i",7),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"button",8),core.nI1(18,"translate"),core.bIt("click",function(){return ctx.onModalSubmit()}),core.nrm(19,"i",9),core.EFF(20),core.nI1(21,"translate"),core.k0s()()()),2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,6,"item.version.delete.modal.header")," "),core.R7$(7),core.JRh(core.i5U(10,8,"item.version.delete.modal.text",core.eq3(19,_c0,ctx.versionNumber))),core.R7$(3),core.FS9("title",core.bMT(13,11,"item.version.delete.modal.button.cancel.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(16,13,"item.version.delete.modal.button.cancel")," "),core.R7$(2),core.FS9("title",core.bMT(18,15,"item.version.delete.modal.button.confirm.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(21,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9]})}return ItemVersionsDeleteModalComponent2})();var item_versions_shared_service=__webpack_require__(65925),item_versions_summary_modal_component=__webpack_require__(32137);function ItemVersionsRowElementVersionComponent_span_1_Template(rf,ctx){1&rf&&core.nrm(0,"span")}function ItemVersionsRowElementVersionComponent_ng_template_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",9),core.EFF(1),core.k0s()),2&rf){const ctx_r0=core.XpG();core.Y8G("routerLink",ctx_r0.getVersionRoute(ctx_r0.version.id)),core.R7$(),core.JRh(ctx_r0.version.version)}}function ItemVersionsRowElementVersionComponent_ng_template_6_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const ctx_r0=core.XpG();core.SpI(" ",ctx_r0.version.version," ")}}function ItemVersionsRowElementVersionComponent_span_8_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1,"*"),core.k0s())}function ItemVersionsRowElementVersionComponent_span_9_Template(rf,ctx){1&rf&&(core.j41(0,"span",10),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function ItemVersionsRowElementVersionComponent_span_11_Template(rf,ctx){1&rf&&(core.j41(0,"span",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workflowItem")," "))}function ItemVersionsRowElementVersionComponent_div_14_button_1_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",14),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r2);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.editWorkspaceItem(ctx_r0.workspaceId$))}),core.nrm(2,"i",15),core.k0s()}2&rf&&core.FS9("title",core.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function ItemVersionsRowElementVersionComponent_div_14_ng_container_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.qex(0),core.j41(1,"button",16),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r3);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.createNewVersion(ctx_r0.version))}),core.nrm(3,"i",17),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.FS9("title",core.bMT(2,2,ctx_r0.createVersionTitle)),core.Y8G("disabled",ctx_r0.isAnyBeingEdited()||ctx_r0.hasDraftVersion)}}function ItemVersionsRowElementVersionComponent_div_14_ng_container_5_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.qex(0),core.j41(1,"button",18),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.deleteVersion(ctx_r0.version,ctx_r0.version.id===ctx_r0.itemVersion.id))}),core.nrm(3,"i",19),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.FS9("title",core.bMT(2,3,"item.version.history.table.action.deleteVersion")),core.Y8G("ngClass",ctx_r0.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("disabled",ctx_r0.isAnyBeingEdited())}}function ItemVersionsRowElementVersionComponent_div_14_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",12),core.DNE(1,ItemVersionsRowElementVersionComponent_div_14_button_1_Template,3,3,"button",13),core.nI1(2,"async"),core.DNE(3,ItemVersionsRowElementVersionComponent_div_14_ng_container_3_Template,4,4,"ng-container",4),core.nI1(4,"async"),core.DNE(5,ItemVersionsRowElementVersionComponent_div_14_ng_container_5_Template,4,5,"ng-container",4),core.nI1(6,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",core.bMT(2,3,ctx_r0.workspaceId$)),core.R7$(2),core.Y8G("ngIf",core.bMT(4,5,ctx_r0.canCreateVersion$)),core.R7$(2),core.Y8G("ngIf",core.bMT(6,7,ctx_r0.canDeleteVersion$))}}let ItemVersionsRowElementVersionComponent=(()=>{class ItemVersionsRowElementVersionComponent2{constructor(workspaceItemDataService,workflowItemDataService,router2,itemService,authorizationService,itemVersionShared,versionHistoryService,versionService,notificationsService,translateService,modalService){this.workspaceItemDataService=workspaceItemDataService,this.workflowItemDataService=workflowItemDataService,this.router=router2,this.itemService=itemService,this.authorizationService=authorizationService,this.itemVersionShared=itemVersionShared,this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.notificationsService=notificationsService,this.translateService=translateService,this.modalService=modalService,this.versionsHistoryChange=new core.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized(feature_id._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(versionItem){return this.hasDraftVersion?versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workspaceItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id)):(0,cjs.of)(void 0)}getWorkflowId(versionItem){return this.getWorkspaceId(versionItem).pipe((0,cjs.concatMap)(workspaceId=>workspaceId?(0,cjs.of)(void 0):versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workflowItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id))))}editWorkspaceItem(id$){id$.subscribe(id=>{this.router.navigateByUrl("workspaceitems/"+id+"/edit")})}canDeleteVersion(version){return this.authorizationService.isAuthorized(feature_id._.CanDeleteVersion,version.self)}getVersionRoute(versionId){return(0,item_page_routing_paths.vf)(versionId)}createNewVersion(version){const versionNumber=version.version,activeModal=this.modalService.open(item_versions_summary_modal_component.L);activeModal.componentInstance.versionNumber=versionNumber,activeModal.componentInstance.createVersionEvent.pipe((0,operators.ZZ)(summary=>(0,cjs.combineLatest)([(0,cjs.of)(summary),version.item.pipe((0,shared_operators.ak)())])),(0,operators.ZZ)(([summary,item])=>this.versionHistoryService.createVersion(item._links.self.href,summary)),(0,shared_operators.qD)(),(0,operators.Mi)(()=>activeModal.close()),(0,operators.Mi)(newVersionRD=>{if(this.itemVersionShared.notifyCreateNewVersion(newVersionRD),newVersionRD.hasSucceeded){const versionHistory$=this.versionService.getHistoryFromVersion(version).pipe((0,operators.Mi)(versionHistory=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(versionHistory.id)}));this.versionsHistoryChange.emit(versionHistory$)}}),(0,shared_operators.ak)(),(0,operators.nx)(newVersion=>this.itemService.findByHref(newVersion._links.item.href)),(0,shared_operators.ak)(),(0,operators.nx)(newVersionItem=>this.workspaceItemDataService.findByItem(newVersionItem.uuid,!0,!1)),(0,shared_operators.ak)()).subscribe(wsItem=>{this.router.navigateByUrl("workspaceitems/"+wsItem.id+"/edit")})}deleteVersion(version,redirectToLatest){const versionNumber=version.version,versionItem$=version.item,activeModal=this.modalService.open(ItemVersionsDeleteModalComponent);activeModal.componentInstance.versionNumber=version.version,activeModal.componentInstance.firstVersion=!1,activeModal.componentInstance.response.pipe((0,operators.s)(1)).subscribe(ok=>{ok&&versionItem$.pipe((0,shared_operators.ak)(),(0,operators.ZZ)(item=>(0,cjs.combineLatest)([(0,cjs.of)(item),this.versionHistoryService.getVersionHistoryFromVersion$(version)])),(0,operators.ZZ)(([item,versionHistory])=>(0,cjs.combineLatest)([this.deleteItemAndGetResult$(item),(0,cjs.of)(versionHistory)])),(0,operators.ZZ)(([deleteItemResult,versionHistory])=>(0,cjs.combineLatest)([(0,cjs.of)(deleteItemResult),this.versionHistoryService.getLatestVersionItemFromHistory$(versionHistory).pipe((0,operators.Mi)(()=>{this.versionsHistoryChange.emit((0,cjs.of)(versionHistory))}))]))).subscribe(([deleteHasSucceeded,newLatestVersionItem])=>{if(deleteHasSucceeded?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:versionNumber})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:versionNumber})),redirectToLatest){const path=(0,item_page_routing_paths.nF)(newLatestVersionItem);this.router.navigateByUrl(path)}})})}deleteItemAndGetResult$(item){return this.itemService.delete(item.id).pipe((0,shared_operators.qD)(),(0,operators.Tj)(deleteItemRes=>deleteItemRes.hasSucceeded),(0,operators.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsRowElementVersionComponent2)(core.rXU(workspaceitem_data_service.WorkspaceitemDataService),core.rXU(workflowitem_data_service.WorkflowItemDataService),core.rXU(router.Ix),core.rXU(item_data_service.ItemDataService),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(item_versions_shared_service.h),core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(ng_bootstrap.Bq))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsRowElementVersionComponent2,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[core.aNF],decls:15,vars:15,consts:[["versionNumberWithLink",""],["versionNumberWithoutLink",""],[1,"left-column"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf"],["class","text-light badge badge-primary ml-3",4,"ngIf"],["class","text-light badge badge-info ml-3",4,"ngIf"],[1,"right-column"],["class","btn-group edit-field space-children-mr",4,"ngIf"],[3,"routerLink"],[1,"text-light","badge","badge-primary","ml-3"],[1,"text-light","badge","badge-info","ml-3"],[1,"btn-group","edit-field","space-children-mr"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","disabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","disabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",2),core.DNE(1,ItemVersionsRowElementVersionComponent_span_1_Template,1,0,"span",3),core.nI1(2,"async"),core.nI1(3,"async"),core.DNE(4,ItemVersionsRowElementVersionComponent_ng_template_4_Template,2,2,"ng-template",null,0,core.C5r)(6,ItemVersionsRowElementVersionComponent_ng_template_6_Template,1,1,"ng-template",null,1,core.C5r)(8,ItemVersionsRowElementVersionComponent_span_8_Template,2,0,"span",4)(9,ItemVersionsRowElementVersionComponent_span_9_Template,3,3,"span",5),core.nI1(10,"async"),core.DNE(11,ItemVersionsRowElementVersionComponent_span_11_Template,3,3,"span",6),core.nI1(12,"async"),core.k0s(),core.j41(13,"div",7),core.DNE(14,ItemVersionsRowElementVersionComponent_div_14_Template,7,9,"div",8),core.k0s()),2&rf){const versionNumberWithLink_r5=core.sdS(5),versionNumberWithoutLink_r6=core.sdS(7);core.R7$(),core.Y8G("ngIf",core.bMT(2,7,ctx.workspaceId$)||core.bMT(3,9,ctx.workflowId$))("ngIfThen",versionNumberWithoutLink_r6)("ngIfElse",versionNumberWithLink_r5),core.R7$(7),core.Y8G("ngIf",(null==ctx.version?null:ctx.version.id)===(null==ctx.itemVersion?null:ctx.itemVersion.id)),core.R7$(),core.Y8G("ngIf",core.bMT(10,11,ctx.workspaceId$)),core.R7$(2),core.Y8G("ngIf",core.bMT(12,13,ctx.workflowId$)),core.R7$(3),core.Y8G("ngIf",ctx.displayActions)}},dependencies:[common.Jj,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,common.YU,common.bT],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}return ItemVersionsRowElementVersionComponent2})();const item_versions_component_c0=a0=>({version:a0});function ItemVersionsComponent_div_0_div_1_div_1_h2_1_Template(rf,ctx){1&rf&&(core.j41(0,"h2",9),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.head")))}function ItemVersionsComponent_div_0_div_1_div_1_ds_alert_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",10),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const itemVersion_r1=core.XpG(2).ngVar,ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertTypeEnum.Info),core.R7$(),core.SpI(" ",core.i5U(2,2,"item.version.history.selected.alert",core.eq3(5,item_versions_component_c0,itemVersion_r1.version))," ")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_th_7_Template(rf,ctx){1&rf&&(core.j41(0,"th",13),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.table.editor")))}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_td_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"td",25),core.EFF(1),core.k0s()),2&rf){const version_r5=core.XpG().$implicit;core.R7$(),core.SpI(" ",null==version_r5?null:version_r5.submitterName," ")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_container_11_Template(rf,ctx){1&rf&&core.eu8(0)}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_12_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const version_r5=core.XpG().$implicit;core.JRh(null==version_r5?null:version_r5.summary)}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_14_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"input",26),core.nI1(1,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.DH7(ctx_r1.versionBeingEditedSummary,$event)||(ctx_r1.versionBeingEditedSummary=$event),core.Njj($event)}),core.bIt("keyup.enter",function(){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.Njj(ctx_r1.onSummarySubmit())}),core.k0s()}if(2&rf){const ctx_r1=core.XpG(6);core.R50("ngModel",ctx_r1.versionBeingEditedSummary),core.BMQ("aria-label",core.bMT(1,2,"item.version.history.table.action.editSummary"))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_1_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.qex(0),core.j41(1,"button",29),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r7);const ctx_r1=core.XpG(7);return core.Njj(ctx_r1.disableVersionEditing())}),core.nrm(3,"i",30),core.k0s(),core.bVm()}if(2&rf){const version_r5=core.XpG(2).$implicit,ctx_r1=core.XpG(5);core.R7$(),core.FS9("title",core.bMT(2,2,"item.version.history.table.action.discardSummary")),core.Y8G("ngClass",ctx_r1.isThisBeingEdited(version_r5)?"btn-outline-warning":"btn-outline-primary")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_1_Template(rf,ctx){if(1&rf){const _r8=core.RV6();core.j41(0,"button",33),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r8);const version_r5=core.XpG(3).$implicit,ctx_r1=core.XpG(5);return core.Njj(ctx_r1.enableVersionEditing(version_r5))}),core.nrm(2,"i",34),core.k0s()}if(2&rf){const ctx_r1=core.XpG(8);core.FS9("title",core.bMT(1,2,"item.version.history.table.action.editSummary")),core.Y8G("disabled",ctx_r1.isAnyBeingEdited())}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_2_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"button",35),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r9);const ctx_r1=core.XpG(8);return core.Njj(ctx_r1.onSummarySubmit())}),core.nrm(2,"i",36),core.k0s()}2&rf&&core.FS9("title",core.bMT(1,1,"item.version.history.table.action.saveSummary"))}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_1_Template,3,4,"button",31)(2,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_2_Template,3,3,"button",32),core.bVm()),2&rf){const version_r5=core.XpG(2).$implicit,ctx_r1=core.XpG(5);core.R7$(),core.Y8G("ngIf",!ctx_r1.isThisBeingEdited(version_r5)),core.R7$(),core.Y8G("ngIf",ctx_r1.isThisBeingEdited(version_r5))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",27),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_1_Template,4,4,"ng-container",28),core.nI1(2,"async"),core.DNE(3,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_Template,3,2,"ng-container",28),core.nI1(4,"async"),core.k0s()),2&rf){const version_r5=core.XpG().$implicit,ctx_r1=core.XpG(5);core.R7$(),core.Y8G("ngIf",core.bMT(2,2,ctx_r1.canEditVersion$(version_r5))&&ctx_r1.isThisBeingEdited(version_r5)),core.R7$(2),core.Y8G("ngIf",core.bMT(4,4,ctx_r1.canEditVersion$(version_r5)))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"tr",16)(1,"td",17)(2,"ds-item-versions-row-element-version",18),core.nI1(3,"async"),core.bIt("versionsHistoryChange",function($event){core.eBV(_r4);const ctx_r1=core.XpG(5);return core.Njj(ctx_r1.getAllVersions($event))}),core.k0s()(),core.DNE(4,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_td_4_Template,2,1,"td",19),core.nI1(5,"async"),core.j41(6,"td",20),core.EFF(7),core.nI1(8,"date"),core.k0s(),core.j41(9,"td",21)(10,"div",22),core.DNE(11,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_container_11_Template,1,0,"ng-container",23)(12,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_12_Template,1,1,"ng-template",null,0,core.C5r)(14,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_14_Template,2,4,"ng-template",null,1,core.C5r),core.k0s(),core.DNE(16,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_Template,5,6,"div",24),core.k0s()()}if(2&rf){const version_r5=ctx.$implicit,showSummary_r10=core.sdS(13),editSummary_r11=core.sdS(15),itemVersion_r1=core.XpG(3).ngVar,ctx_r1=core.XpG(2);core.Y8G("id","version-row-"+version_r5.id),core.R7$(2),core.Y8G("hasDraftVersion",core.bMT(3,13,ctx_r1.hasDraftVersion$))("version",version_r5)("item",ctx_r1.item)("displayActions",ctx_r1.displayActions)("itemVersion",itemVersion_r1)("versionBeingEditedNumber",ctx_r1.versionBeingEditedNumber),core.R7$(2),core.Y8G("ngIf",core.bMT(5,15,ctx_r1.showSubmitter$)),core.R7$(3),core.SpI(" ",core.i5U(8,17,null==version_r5?null:version_r5.created,"yyyy-MM-dd HH:mm:ss")," "),core.R7$(4),core.Y8G("ngIf",ctx_r1.isThisBeingEdited(version_r5))("ngIfThen",editSummary_r11)("ngIfElse",showSummary_r10),core.R7$(5),core.Y8G("ngIf",ctx_r1.displayActions)}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-pagination",11),core.bIt("paginationChange",function(){core.eBV(_r3);const ctx_r1=core.XpG(4);return core.Njj(ctx_r1.onPageChange())}),core.j41(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_th_7_Template,3,3,"th",14),core.nI1(8,"async"),core.j41(9,"th",13),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",13),core.EFF(13),core.nI1(14,"translate"),core.k0s()()(),core.j41(15,"tbody"),core.DNE(16,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_Template,17,20,"tr",15),core.k0s()(),core.j41(17,"div"),core.EFF(18),core.nI1(19,"translate"),core.k0s()()}if(2&rf){const versions_r12=core.XpG(3).ngVar,ctx_r1=core.XpG();core.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.options)("collectionSize",null==versions_r12?null:versions_r12.totalElements)("retainScrollPosition",!0),core.R7$(5),core.JRh(core.bMT(6,11,"item.version.history.table.version")),core.R7$(2),core.Y8G("ngIf",core.bMT(8,13,ctx_r1.showSubmitter$)),core.R7$(3),core.JRh(core.bMT(11,15,"item.version.history.table.date")),core.R7$(3),core.JRh(core.bMT(14,17,"item.version.history.table.summary")),core.R7$(3),core.Y8G("ngForOf",null==versions_r12?null:versions_r12.page),core.R7$(2),core.SpI("*\xa0",core.bMT(19,19,"item.version.history.selected"),"")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_alert_4_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-alert",37),2&rf){const ctx_r1=core.XpG(4);core.Y8G("content","item.version.history.empty")("type",ctx_r1.AlertTypeEnum.Info)}}function ItemVersionsComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_h2_1_Template,3,3,"h2",5)(2,ItemVersionsComponent_div_0_div_1_div_1_ds_alert_2_Template,3,7,"ds-alert",6)(3,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_Template,20,21,"ds-pagination",7)(4,ItemVersionsComponent_div_0_div_1_div_1_ds_alert_4_Template,1,2,"ds-alert",8),core.k0s()),2&rf){const itemVersion_r1=core.XpG().ngVar,versions_r12=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r1.displayTitle),core.R7$(),core.Y8G("ngIf",itemVersion_r1),core.R7$(),core.Y8G("ngIf",(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length)>0),core.R7$(),core.Y8G("ngIf",!itemVersion_r1||0===(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length))}}function ItemVersionsComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_Template,5,4,"div",3),core.k0s()),2&rf){const versions_r12=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length)>0||ctx_r1.displayWhenEmpty)}}function ItemVersionsComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_div_0_div_1_Template,2,1,"div",2),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_2_0;const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngVar",null==(tmp_2_0=core.bMT(2,1,ctx_r1.versionRD$))?null:tmp_2_0.payload)}}let ItemVersionsComponent=(()=>{class ItemVersionsComponent2{constructor(versionHistoryService,versionService,paginationService,notificationsService,translateService,authorizationService,configurationService){this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.paginationService=paginationService,this.notificationsService=notificationsService,this.translateService=translateService,this.authorizationService=authorizationService,this.configurationService=configurationService,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=alert_type.v,this.versionsRD$=new cjs.BehaviorSubject(null),this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new pagination_component_options_model.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(version){return version?.version===this.versionBeingEditedNumber}enableVersionEditing(version){this.versionBeingEditedSummary=version?.summary,this.versionBeingEditedNumber=version?.version,this.versionBeingEditedId=version?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,shared_operators.yd)(),(0,operators.nx)(findRes=>{const updatedVersion=Object.assign({},findRes.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(updatedVersion).pipe((0,shared_operators.qD)())})).subscribe(updatedVersionRD=>{updatedVersionRD.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(version){return this.authorizationService.isAuthorized(feature_id._.CanEditVersion,version.self)}showSubmitter(){const includeSubmitter$=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,shared_operators.ak)(),(0,operators.Tj)(configurationProperty=>configurationProperty.values[0]),(0,operators.ql)(!1)),isAdmin$=(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.IsCollectionAdmin),this.authorizationService.isAuthorized(feature_id._.IsCommunityAdmin),this.authorizationService.isAuthorized(feature_id._.AdministratorOf)]).pipe((0,operators.Tj)(([isCollectionAdmin,isCommunityAdmin,isSiteAdmin])=>isCollectionAdmin||isCommunityAdmin||isSiteAdmin),(0,operators.s)(1));return(0,cjs.combineLatest)([includeSubmitter$,isAdmin$]).pipe((0,operators.Tj)(([includeSubmitter,isAdmin])=>includeSubmitter&&isAdmin))}getAllVersions(versionHistory$){const currentPagination=this.paginationService.getCurrentPagination(this.options.id,this.options);(0,cjs.combineLatest)([versionHistory$,currentPagination]).pipe((0,operators.nx)(([versionHistory,options])=>this.versionHistoryService.getVersions(versionHistory.id,new paginated_search_options_model.C({pagination:Object.assign({},options,{currentPage:options.currentPage})}),!1,!0,(0,follow_link_config_model.s)("item"),(0,follow_link_config_model.s)("eperson"))),(0,shared_operators.qD)()).subscribe(res=>{this.versionsRD$.next(res)})}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,empty_util.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,shared_operators.v7)(),(0,shared_operators.Bo)(),(0,empty_util.Az)(),(0,operators.nx)(version=>version.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,empty_util.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(res=>!!res?.draftVersion)),this.getAllVersions(this.versionHistory$),this.hasEpersons$=this.versionsRD$.pipe((0,shared_operators.v7)(),(0,shared_operators.Bo)(),(0,empty_util.Az)(),(0,operators.Tj)(versions=>versions.page.filter(version=>void 0!==version.eperson).length>0),(0,operators.ql)(!1)),this.itemPageRoutes$=this.versionsRD$.pipe((0,shared_operators.Hz)(),(0,operators.nx)(versions=>(0,cjs.combineLatest)(versions.page.map(version=>version.item.pipe((0,shared_operators.Hz)())))),(0,operators.Tj)(versions=>{const itemPageRoutes={};return versions.forEach(item=>itemPageRoutes[item.uuid]=(0,item_page_routing_paths._o)(item)),itemPageRoutes})))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsComponent2)(core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(pagination_service.m),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(configuration_data_service.ConfigurationDataService))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsComponent2,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[["showSummary",""],["editSummary",""],[4,"ngVar"],["class","mb-2",4,"ngIf"],[1,"mb-2"],["class","h4",4,"ngIf"],[3,"type",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition","paginationChange",4,"ngIf"],[3,"content","type",4,"ngIf"],[1,"h4"],[3,"type"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],["scope","col",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],["class","version-row-element-editor",4,"ngIf"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-left"],[4,"ngIf","ngIfThen","ngIfElse"],["class","float-right btn-group edit-field space-children-mr",4,"ngIf"],[1,"version-row-element-editor"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"float-right","btn-group","edit-field","space-children-mr"],[4,"ngIf"],[1,"btn","btn-sm",3,"click","ngClass","title"],[1,"fas","fa-undo-alt","fa-fw"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","disabled","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[3,"content","type"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ItemVersionsComponent_div_0_Template,3,3,"div",2),core.nI1(1,"async")),2&rf){let tmp_0_0;core.Y8G("ngVar",null==(tmp_0_0=core.bMT(1,1,ctx.versionsRD$))?null:tmp_0_0.payload)}},dependencies:[var_directive.r,common.bT,alert_component.C,pagination_component.e,common.pM,common.YU,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,common.Jj,common.vh,ngx_translate_core.h,ngx_translate_core.D9,ItemVersionsRowElementVersionComponent]})}return ItemVersionsComponent2})()},8237:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>ItemVersionsNoticeComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1555),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(6721),__webpack_require__(82656)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14467),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82555),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77028),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(63254),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);const _c0=a0=>({destination:a0});function ItemVersionsNoticeComponent_ds_alert_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-alert",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate")),2&rf){let tmp_1_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("content",_angular_core__WEBPACK_IMPORTED_MODULE_5__.i5U(3,7,"item.version.notice",_angular_core__WEBPACK_IMPORTED_MODULE_5__.eq3(10,_c0,ctx_r0.getItemPage(null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,3,ctx_r0.latestVersion$))?null:tmp_1_0.item))?null:tmp_1_0.payload))))("dismissible",!1)("type",ctx_r0.AlertTypeEnum.Warning)}}let ItemVersionsNoticeComponent=(()=>{class ItemVersionsNoticeComponent2{constructor(versionHistoryService){this.versionHistoryService=versionHistoryService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__.v}ngOnInit(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.v7)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(version=>version.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(vhRD=>vhRD.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(vhRD.payload):rxjs__WEBPACK_IMPORTED_MODULE_8__.EMPTY)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(versionRD=>versionRD.hasSucceeded?this.versionHistoryService.isLatest$(versionRD.payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(isLatest=>null!=isLatest&&!isLatest)):(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(!1)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.ql)(!1)))}getItemPage(item){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(item))return(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__._o)(item)}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsNoticeComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__.VersionHistoryDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ItemVersionsNoticeComponent2,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type",4,"ngIf"],[3,"content","dismissible","type"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(0,ItemVersionsNoticeComponent_ds_alert_0_Template,4,12,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",!0===_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,1,ctx.showLatestVersionNotice$))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.D9],encapsulation:2})}return ItemVersionsNoticeComponent2})()},34615:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>dsoEditMenuResolver});var core=__webpack_require__(68014),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),app_routing_paths=__webpack_require__(45930),dspace_object_data_service=__webpack_require__(78358),authorization_data_service=__webpack_require__(30289),feature_id=__webpack_require__(29321),researcher_profile_data_service=__webpack_require__(64961),collection_model=__webpack_require__(28410),community_model=__webpack_require__(61935),item_model=__webpack_require__(6721),shared_operators=__webpack_require__(82656),correctiontype_data_service=__webpack_require__(71870),url_combiner=__webpack_require__(1828),empty_util=__webpack_require__(77028),menu_service=__webpack_require__(90547),menu_id_model=__webpack_require__(7417),menu_item_type_model=__webpack_require__(80122),notifications_service=__webpack_require__(10117),subscription_modal_component=__webpack_require__(5426),item_data_service=__webpack_require__(94743),version_data_service=__webpack_require__(80148),version_history_data_service=__webpack_require__(1555),workspaceitem_data_service=__webpack_require__(2402),item_versions_shared_service=__webpack_require__(65925),item_versions_summary_modal_component=__webpack_require__(32137),ng_bootstrap=__webpack_require__(71781),router=__webpack_require__(64247);let DsoVersioningModalService=(()=>{class DsoVersioningModalService2{constructor(modalService,versionService,versionHistoryService,itemVersionShared,router2,workspaceItemDataService,itemService){this.modalService=modalService,this.versionService=versionService,this.versionHistoryService=versionHistoryService,this.itemVersionShared=itemVersionShared,this.router=router2,this.workspaceItemDataService=workspaceItemDataService,this.itemService=itemService}openCreateVersionModal(dso){const item=dso,versionHref=item._links.version.href,activeModal=this.modalService.open(item_versions_summary_modal_component.L);this.versionService.findByHref(versionHref).pipe((0,shared_operators.qD)()).subscribe(res=>{activeModal.componentInstance.firstVersion=res.hasNoContent,activeModal.componentInstance.versionNumber=res.hasNoContent?void 0:res.payload.version}),activeModal.componentInstance.createVersionEvent.pipe((0,operators.nx)(summary=>this.versionHistoryService.createVersion(item._links.self.href,summary)),(0,shared_operators.qD)(),(0,operators.Mi)(()=>activeModal.close()),(0,operators.Mi)(res=>{this.itemVersionShared.notifyCreateNewVersion(res)}),(0,shared_operators.ak)(),(0,operators.nx)(newVersion=>this.itemService.findByHref(newVersion._links.item.href)),(0,shared_operators.ak)(),(0,operators.nx)(newVersionItem=>this.workspaceItemDataService.findByItem(newVersionItem.uuid,!0,!1)),(0,shared_operators.ak)()).subscribe(wsItem=>{this.router.navigateByUrl("workspaceitems/"+wsItem.id+"/edit")})}isNewVersionButtonDisabled(dso){return this.versionHistoryService.hasDraftVersion$(dso._links.version.href).pipe((0,operators.Tj)(res=>!!res))}getVersioningTooltipMessage(dso,tooltipMsgHasDraft,tooltipMsgCreate){return this.isNewVersionButtonDisabled(dso).pipe((0,operators.nx)(hasDraftVersion=>(0,cjs.of)(hasDraftVersion?tooltipMsgHasDraft:tooltipMsgCreate)))}static#_=this.\u0275fac=function(t){return new(t||DsoVersioningModalService2)(core.KVO(ng_bootstrap.Bq),core.KVO(version_data_service.VersionDataService),core.KVO(version_history_data_service.VersionHistoryDataService),core.KVO(item_versions_shared_service.h),core.KVO(router.Ix),core.KVO(workspaceitem_data_service.WorkspaceitemDataService),core.KVO(item_data_service.ItemDataService))};static#_2=this.\u0275prov=core.jDH({token:DsoVersioningModalService2,factory:DsoVersioningModalService2.\u0275fac,providedIn:"root"})}return DsoVersioningModalService2})();var dso_withdrawn_reinstate_modal_service=__webpack_require__(19941),ngx_translate_core=__webpack_require__(43750);let DSOEditMenuResolverService=(()=>{class DSOEditMenuResolverService2{constructor(dSpaceObjectDataService,menuService,authorizationService,modalService,dsoVersioningModalService,researcherProfileService,notificationsService,translate,dsoWithdrawnReinstateModalService,correctionTypeDataService){this.dSpaceObjectDataService=dSpaceObjectDataService,this.menuService=menuService,this.authorizationService=authorizationService,this.modalService=modalService,this.dsoVersioningModalService=dsoVersioningModalService,this.researcherProfileService=researcherProfileService,this.notificationsService=notificationsService,this.translate=translate,this.dsoWithdrawnReinstateModalService=dsoWithdrawnReinstateModalService,this.correctionTypeDataService=correctionTypeDataService}resolve(route,state){let id=route.params.id;return(0,empty_util.Tn)(id)&&(0,empty_util.a4)(route.queryParams.scope)&&(id=route.queryParams.scope),(0,empty_util.Tn)(id)?(0,cjs.of)({...route.data?.menu}):this.dSpaceObjectDataService.findById(id,!0,!1).pipe((0,shared_operators.qD)(),(0,operators.nx)(dsoRD=>{if(dsoRD.hasSucceeded){const dso=dsoRD.payload;return(0,cjs.combineLatest)(this.getDsoMenus(dso,route,state)).pipe((0,operators.Tj)(combinedMenus=>[].concat.apply([],combinedMenus)),(0,operators.Tj)(menus=>this.addDsoUuidToMenuIDs(menus,dso)),(0,operators.Tj)(menus=>({...route.data?.menu,[menu_id_model.D.DSO_EDIT]:menus})))}return(0,cjs.of)({...route.data?.menu})}))}getDsoMenus(dso,route,state){return[this.getItemMenu(dso),this.getComColMenu(dso),this.getCommonMenu(dso,state)]}getCommonMenu(dso,state){return(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.CanEditMetadata,dso.self)]).pipe((0,operators.Tj)(([canEditItem])=>[{id:"edit-dso",active:!1,visible:canEditItem,model:{type:menu_item_type_model.x.LINK,text:this.getDsoType(dso)+".page.edit",link:new url_combiner.t((0,app_routing_paths.wN)(dso),"edit","metadata").toString()},icon:"pencil-alt",index:2}]))}getItemMenu(dso){return dso instanceof item_model.q?(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.CanCreateVersion,dso.self),this.dsoVersioningModalService.isNewVersionButtonDisabled(dso),this.dsoVersioningModalService.getVersioningTooltipMessage(dso,"item.page.version.hasDraft","item.page.version.create"),this.authorizationService.isAuthorized(feature_id._.CanSynchronizeWithORCID,dso.self),this.authorizationService.isAuthorized(feature_id._.CanClaimItem,dso.self),this.correctionTypeDataService.findByItem(dso.uuid,!1).pipe((0,shared_operators.qD)(),(0,shared_operators.Bo)())]).pipe((0,operators.Tj)(([canCreateVersion,disableVersioning,versionTooltip,canSynchronizeWithOrcid,canClaimItem,correction])=>{const isPerson="person"===this.getDsoType(dso);return[{id:"orcid-dso",active:!1,visible:isPerson&&canSynchronizeWithOrcid,model:{type:menu_item_type_model.x.LINK,text:"item.page.orcid.tooltip",link:new url_combiner.t((0,app_routing_paths.wN)(dso),"orcid").toString()},icon:"orcid fab fa-lg",index:0},{id:"version-dso",active:!1,visible:canCreateVersion,model:{type:menu_item_type_model.x.ONCLICK,text:versionTooltip,disabled:disableVersioning,function:()=>{this.dsoVersioningModalService.openCreateVersionModal(dso)}},icon:"code-branch",index:1},{id:"claim-dso",active:!1,visible:isPerson&&canClaimItem,model:{type:menu_item_type_model.x.ONCLICK,text:"item.page.claim.button",function:()=>{this.claimResearcher(dso)}},icon:"hand-paper",index:3},{id:"withdrawn-item",active:!1,visible:dso.isArchived&&correction?.page.some(c=>c.topic===dso_withdrawn_reinstate_modal_service.pc),model:{type:menu_item_type_model.x.ONCLICK,text:"item.page.withdrawn",function:()=>{this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(dso,"request-withdrawn",dso.isArchived)}},icon:"eye-slash",index:4},{id:"reinstate-item",active:!1,visible:dso.isWithdrawn&&correction?.page.some(c=>c.topic===dso_withdrawn_reinstate_modal_service.el),model:{type:menu_item_type_model.x.ONCLICK,text:"item.page.reinstate",function:()=>{this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(dso,"request-reinstate",dso.isArchived)}},icon:"eye",index:5}]})):(0,cjs.of)([])}getComColMenu(dso){return dso instanceof community_model.E||dso instanceof collection_model.p?(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.CanSubscribe,dso.self)]).pipe((0,operators.Tj)(([canSubscribe])=>[{id:"subscribe",active:!1,visible:canSubscribe,model:{type:menu_item_type_model.x.ONCLICK,text:"subscriptions.tooltip",function:()=>{this.modalService.open(subscription_modal_component.w).componentInstance.dso=dso}},icon:"bell",index:4}])):(0,cjs.of)([])}claimResearcher(dso){this.researcherProfileService.createFromExternalSourceAndReturnRelatedItemId(dso.self).subscribe(id=>{(0,empty_util.hj)(id)?(this.notificationsService.success(this.translate.get("researcherprofile.success.claim.title"),this.translate.get("researcherprofile.success.claim.body")),this.authorizationService.invalidateAuthorizationsRequestCache(),this.menuService.hideMenuSection(menu_id_model.D.DSO_EDIT,"claim-dso-"+dso.uuid)):this.notificationsService.error(this.translate.get("researcherprofile.error.claim.title"),this.translate.get("researcherprofile.error.claim.body"))})}getDsoType(dso){const renderType=dso.getRenderTypes()[0];return"string"==typeof renderType||renderType instanceof String?renderType.toLowerCase():dso.type.toString().toLowerCase()}addDsoUuidToMenuIDs(menus,dso){return menus.map(menu=>(Object.assign(menu,{id:menu.id+"-"+dso.uuid}),(0,empty_util.a4)(menu.parentID)&&Object.assign(menu,{parentID:menu.parentID+"-"+dso.uuid}),menu))}static#_=this.\u0275fac=function(t){return new(t||DSOEditMenuResolverService2)(core.KVO(dspace_object_data_service.DSpaceObjectDataService),core.KVO(menu_service.$),core.KVO(authorization_data_service.AuthorizationDataService),core.KVO(ng_bootstrap.Bq),core.KVO(DsoVersioningModalService),core.KVO(researcher_profile_data_service.ResearcherProfileDataService),core.KVO(notifications_service.I),core.KVO(ngx_translate_core.c$),core.KVO(dso_withdrawn_reinstate_modal_service.Ee),core.KVO(correctiontype_data_service.CorrectionTypeDataService))};static#_2=this.\u0275prov=core.jDH({token:DSOEditMenuResolverService2,factory:DSOEditMenuResolverService2.\u0275fac,providedIn:"root"})}return DSOEditMenuResolverService2})();const dsoEditMenuResolver=(route,state,menuResolverService=(0,core.WQX)(DSOEditMenuResolverService))=>menuResolverService.resolve(route,state)},19941:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ee:()=>DsoWithdrawnReinstateModalService,el:()=>REQUEST_REINSTATE,pc:()=>REQUEST_WITHDRAWN});var operators=__webpack_require__(10743),authorization_data_service=__webpack_require__(30289),item_data_service=__webpack_require__(94743),quality_assurance_event_data_service=__webpack_require__(77231),shared_operators=__webpack_require__(82656),common=__webpack_require__(84739),core=__webpack_require__(68014),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),themed_loading_component=__webpack_require__(32943),ng_bootstrap=__webpack_require__(71781);function ItemWithdrawnReinstateModalComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"button",14),core.bIt("click",function(){core.eBV(_r2);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onModalClose())}),core.j41(4,"span",15),core.EFF(5,"\xd7"),core.k0s()()()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.qa.withdrawn.modal.header")," "))}function ItemWithdrawnReinstateModalComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div"),core.DNE(1,ItemWithdrawnReinstateModalComponent_div_0_div_1_Template,6,3,"div",3),core.j41(2,"div",4)(3,"div",5)(4,"label",6),core.EFF(5),core.nI1(6,"translate"),core.nI1(7,"translate"),core.k0s(),core.j41(8,"label",6),core.EFF(9),core.nI1(10,"translate"),core.nI1(11,"translate"),core.k0s(),core.j41(12,"textarea",7),core.nI1(13,"translate"),core.nI1(14,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.DH7(ctx_r2.reason,$event)||(ctx_r2.reason=$event),core.Njj($event)}),core.k0s()()(),core.j41(15,"div",8)(16,"button",9),core.nI1(17,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onModalClose())}),core.nrm(18,"i",10),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.j41(21,"button",11),core.nI1(22,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onModalSubmit())}),core.nrm(23,"i",12),core.EFF(24),core.nI1(25,"translate"),core.nI1(26,"translate"),core.k0s()()()}if(2&rf){const ctx_r2=core.XpG(),reinstateHeader_r4=core.sdS(5);core.R7$(),core.Y8G("ngIf",ctx_r2.canWithdraw)("ngIfElse",reinstateHeader_r4),core.R7$(4),core.JRh(ctx_r2.canWithdraw?core.bMT(6,10,"qa-withdrawn.create.modal.form.summary.label"):core.bMT(7,12,"qa-reinstate.create.modal.form.summary.label")),core.R7$(4),core.JRh(ctx_r2.canWithdraw?core.bMT(10,14,"qa-withdrawn.create.modal.form.summary2.label"):core.bMT(11,16,"qa-reinstate.create.modal.form.summary2.label")),core.R7$(3),core.FS9("placeholder",ctx_r2.canWithdraw?core.bMT(13,18,"qa-withdrown.modal.form.summary.placeholder"):core.bMT(14,20,"qa-reinstate.modal.form.summary.placeholder")),core.R50("ngModel",ctx_r2.reason),core.R7$(4),core.FS9("title",core.bMT(17,22,"item.qa.withdrawn-reinstate.create.modal.button.cancel.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(20,24,"item.qa.withdrawn-reinstate.create.modal.button.cancel")," "),core.R7$(2),core.FS9("title",core.bMT(22,26,"item.qa.withdrawn-reinstate.modal.button.confirm.tooltip")),core.R7$(3),core.SpI(" ",ctx_r2.canWithdraw?core.bMT(25,28,"qa-withdrown.create.modal.button.confirm"):core.bMT(26,30,"qa-reinstate.create.modal.button.confirm")," ")}}function ItemWithdrawnReinstateModalComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.k0s(),core.j41(3,"div",4)(4,"div",16),core.nrm(5,"ds-loading",17),core.k0s()()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,2,"item.qa.withdrawn.modal.submitted.header")),core.R7$(4),core.Y8G("showMessage",!1))}function ItemWithdrawnReinstateModalComponent_ng_template_4_div_0_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"button",14),core.bIt("click",function(){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onModalClose())}),core.j41(4,"span",15),core.EFF(5,"\xd7"),core.k0s()()()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.qa.reinstate.modal.header")," "))}function ItemWithdrawnReinstateModalComponent_ng_template_4_Template(rf,ctx){if(1&rf&&core.DNE(0,ItemWithdrawnReinstateModalComponent_ng_template_4_div_0_Template,6,3,"div",18),2&rf){const ctx_r2=core.XpG();core.Y8G("ngIf",!ctx_r2.canWithdraw)}}let ItemWithdrawnReinstateModalComponent=(()=>{class ItemWithdrawnReinstateModalComponent2{constructor(activeModal,authorizationService){this.activeModal=activeModal,this.authorizationService=authorizationService,this.submitted$=new cjs.BehaviorSubject(!1),this.createQAEvent=new core.bkB}onModalClose(){this.activeModal.close()}beforeDismiss(){return!this.submitted$.getValue()}onModalSubmit(){this.submitted$.next(!0),this.createQAEvent.emit(this.reason)}setWithdraw(state){this.canWithdraw=state}static#_=this.\u0275fac=function(t){return new(t||ItemWithdrawnReinstateModalComponent2)(core.rXU(ng_bootstrap.Lw),core.rXU(authorization_data_service.AuthorizationDataService))};static#_2=this.\u0275cmp=core.VBU({type:ItemWithdrawnReinstateModalComponent2,selectors:[["ds-item-withdrawn-reinstate-modal"]],outputs:{createQAEvent:"createQAEvent"},standalone:!0,features:[core.aNF],decls:6,vars:4,consts:[["waiting",""],["reinstateHeader",""],[4,"ngIf","ngIfElse"],["class","modal-header",4,"ngIf","ngIfElse"],[1,"modal-body"],[1,"form-group"],["for","reason"],["id","reason","rows","6","name","message",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"modal-footer","space-children-mr"],["type","button",1,"btn","btn-outline-secondary","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-times","fa-fw"],["type","submit",1,"btn","btn-success","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"d-flex","justify-content-center"],[3,"showMessage"],["class","modal-header",4,"ngIf"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ItemWithdrawnReinstateModalComponent_div_0_Template,27,32,"div",2),core.nI1(1,"async"),core.DNE(2,ItemWithdrawnReinstateModalComponent_ng_template_2_Template,6,4,"ng-template",null,0,core.C5r)(4,ItemWithdrawnReinstateModalComponent_ng_template_4_Template,1,1,"ng-template",null,1,core.C5r)),2&rf){const waiting_r6=core.sdS(3);core.Y8G("ngIf",!0!==core.bMT(1,2,ctx.submitted$))("ngIfElse",waiting_r6)}},dependencies:[common.bT,ngx_translate_core.h,ngx_translate_core.D9,themed_loading_component.v,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,common.Jj]})}return ItemWithdrawnReinstateModalComponent2})();var notifications_service=__webpack_require__(10117),router=__webpack_require__(64247);const REQUEST_WITHDRAWN="REQUEST/WITHDRAWN",REQUEST_REINSTATE="REQUEST/REINSTATE";let DsoWithdrawnReinstateModalService=(()=>{class DsoWithdrawnReinstateModalService2{constructor(router2,modalService,itemService,notificationsService,authorizationService,translateService,qaEventDataService){this.router=router2,this.modalService=modalService,this.itemService=itemService,this.notificationsService=notificationsService,this.authorizationService=authorizationService,this.translateService=translateService,this.qaEventDataService=qaEventDataService}openCreateWithdrawnReinstateModal(dso,correctionType,state){const target=dso.id,activeModal=this.modalService.open(ItemWithdrawnReinstateModalComponent);activeModal.componentInstance.setWithdraw(state),activeModal.componentInstance.createQAEvent.pipe((0,operators.s)(1)).subscribe(reasone=>{this.sendQARequest(target,correctionType,reasone),activeModal.close()})}sendQARequest(target,correctionType,reason){this.qaEventDataService.postData(target,correctionType,"",reason).pipe((0,shared_operators.qD)()).subscribe(res=>{res.hasSucceeded?(this.notificationsService.success(this.translateService.get("request-withdrawn"===correctionType?"correction-type.manage-relation.action.notification.withdrawn":"correction-type.manage-relation.action.notification.reinstate")),this.authorizationService.invalidateAuthorizationsRequestCache(),this.reloadPage(!0)):this.notificationsService.error(this.translateService.get("correction-type.manage-relation.action.notification.error"))})}reloadPage(self,urlToNavigateTo){const url=self?this.router.url:urlToNavigateTo;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([`/${url}`])})}static#_=this.\u0275fac=function(t){return new(t||DsoWithdrawnReinstateModalService2)(core.KVO(router.Ix),core.KVO(ng_bootstrap.Bq),core.KVO(item_data_service.ItemDataService),core.KVO(notifications_service.I),core.KVO(authorization_data_service.AuthorizationDataService),core.KVO(ngx_translate_core.c$),core.KVO(quality_assurance_event_data_service.QualityAssuranceEventDataService))};static#_2=this.\u0275prov=core.jDH({token:DsoWithdrawnReinstateModalService2,factory:DsoWithdrawnReinstateModalService2.\u0275fac,providedIn:"root"})}return DsoWithdrawnReinstateModalService2})()},5426:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>SubscriptionModalComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(28955),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(43750),lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84630),lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(41543),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91735),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(48168),__webpack_require__(82656)),_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14467),_empty_util__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(77028),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10117),_object_collection_shared_badges_type_badge_themed_type_badge_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(83793),_subscriptions_data_service__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(49261),__webpack_require__(18870)),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(71781);function SubscriptionModalComponent_form_0_span_12_ds_type_badge_1_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_10__.nrm(0,"ds-type-badge",17),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("object",ctx_r1.dso)}}function SubscriptionModalComponent_form_0_span_12_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"span",15),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(1,SubscriptionModalComponent_form_0_span_12_ds_type_badge_1_Template,1,1,"ds-type-badge",16),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",!!ctx_r1.dso)}}function SubscriptionModalComponent_form_0_fieldset_14_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nrm(1,"input",25),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(2,"label",26),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()()),2&rf){const frequency_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("id","checkbox-"+frequency_r3)("formControlName",frequency_r3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("for","checkbox-"+frequency_r3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(4,4,"subscriptions.modal.new-subscription-form.frequency."+frequency_r3))}}function SubscriptionModalComponent_form_0_fieldset_14_ds_alert_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"ds-alert",27),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("type","alert-danger"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(2,2,"context-menu.actions.subscription.frequency.required")," "))}function SubscriptionModalComponent_form_0_fieldset_14_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"fieldset",18)(1,"legend",19),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(4,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nrm(5,"input",21),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(6,SubscriptionModalComponent_form_0_fieldset_14_div_6_Template,5,6,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(7,SubscriptionModalComponent_form_0_fieldset_14_ds_alert_7_Template,3,4,"ds-alert",23),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf){const subscriptionType_r4=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_10__.FS9("formGroupName",subscriptionType_r4.key),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(3,5,"subscriptions.modal.new-subscription-form.type."+subscriptionType_r4.key),": "),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("value",null==subscriptionType_r4||null==subscriptionType_r4.value?null:subscriptionType_r4.value.controls.subscriptionId.value),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngForOf",ctx_r1.frequencyDefaultValues),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",!!ctx_r1.submitted&&(null==subscriptionType_r4||null==subscriptionType_r4.value||null==subscriptionType_r4.value.controls.frequencies.errors?null:subscriptionType_r4.value.controls.frequencies.errors.required))}}function SubscriptionModalComponent_form_0_p_16_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"p",28),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(2,1,"subscriptions.modal.delete-info")))}function SubscriptionModalComponent_form_0_span_24_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nrm(1,"i",29),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(3,1,"subscriptions.modal.new-subscription-form.processing")," "))}function SubscriptionModalComponent_form_0_span_26_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(2,1,"subscriptions.modal.new-subscription-form.submit")," "))}function SubscriptionModalComponent_form_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"form",1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.bIt("ngSubmit",function(){_angular_core__WEBPACK_IMPORTED_MODULE_10__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_10__.Njj(ctx_r1.submit())}),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(1,"div",2)(2,"h4",3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(5,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_10__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_10__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_10__.Njj(ctx_r1.activeModal.close())}),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(6,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(7,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(8,"div",6)(9,"p",7)(10,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(11),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(12,SubscriptionModalComponent_form_0_span_12_Template,2,1,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(13,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(14,SubscriptionModalComponent_form_0_fieldset_14_Template,8,7,"fieldset",9),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(15,"keyvalue"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(16,SubscriptionModalComponent_form_0_p_16_Template,3,3,"p",10),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(18,"div",11)(19,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_10__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_10__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_10__.Njj(ctx_r1.activeModal.close())}),_angular_core__WEBPACK_IMPORTED_MODULE_10__.EFF(20),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(22,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(23,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(24,SubscriptionModalComponent_form_0_span_24_Template,4,3,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(25,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(26,SubscriptionModalComponent_form_0_span_26_Template,3,3,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nI1(27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_10__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("formGroup",ctx_r1.subscriptionForm),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_10__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(4,10,"subscriptions.modal.title")),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(8),_angular_core__WEBPACK_IMPORTED_MODULE_10__.JRh(ctx_r1.dsoNameService.getName(ctx_r1.dso)),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",!!ctx_r1.dso),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(15,12,null==ctx_r1.subscriptionForm?null:ctx_r1.subscriptionForm.controls)),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(17,14,ctx_r1.showDeleteInfo$)),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_10__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(21,16,"subscriptions.modal.close")," "),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(23,18,ctx_r1.processing$)||!ctx_r1.isValid),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(25,20,ctx_r1.processing$)),_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",!0!==_angular_core__WEBPACK_IMPORTED_MODULE_10__.bMT(27,22,ctx_r1.processing$))}}let SubscriptionModalComponent=(()=>{class SubscriptionModalComponent2{constructor(formBuilder,modalService,notificationsService,subscriptionService,activeModal,authService,translate,dsoNameService){this.formBuilder=formBuilder,this.modalService=modalService,this.notificationsService=notificationsService,this.subscriptionService=subscriptionService,this.activeModal=activeModal,this.authService=authService,this.translate=translate,this.dsoNameService=dsoNameService,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(!1),this.showDeleteInfo$=new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(!1),this.submitted=!1,this.subscriptionDefaultTypes=["content"],this.frequencyDefaultValues=["D","W","M"],this.isValid=!1,this.updateSubscription=new _angular_core__WEBPACK_IMPORTED_MODULE_10__.bkB}ngOnInit(){this.authService.getAuthenticatedUserFromStore().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.Tj)(ePerson=>ePerson.uuid),(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.shareReplay)({refCount:!1})).subscribe(ePersonId=>{this.ePersonId=ePersonId,(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(this.subscription)?this.initFormByGivenSubscription():this.initFormByAllSubscriptions()}),this.subscriptionForm.valueChanges.subscribe(newValue=>{let anyFrequencySelected=!1;for(const f of this.frequencyDefaultValues)anyFrequencySelected=anyFrequencySelected||newValue.content.frequencies[f];this.isValid=anyFrequencySelected})}initFormByAllSubscriptions(){this.subscriptionForm=new _angular_forms__WEBPACK_IMPORTED_MODULE_14__.J3({});for(const t of this.subscriptionDefaultTypes){const formGroup=new _angular_forms__WEBPACK_IMPORTED_MODULE_14__.J3({});formGroup.addControl("subscriptionId",this.formBuilder.control("")),formGroup.addControl("frequencies",this.formBuilder.group({}));for(const f of this.frequencyDefaultValues)formGroup.controls.frequencies.addControl(f,this.formBuilder.control(!1));this.subscriptionForm.addControl(t,formGroup)}this.initFormDataBySubscriptions()}initFormByGivenSubscription(){const formGroup=new _angular_forms__WEBPACK_IMPORTED_MODULE_14__.J3({});formGroup.addControl("subscriptionId",this.formBuilder.control(this.subscription.id)),formGroup.addControl("frequencies",this.formBuilder.group({})),formGroup.get("frequencies").addValidators(_angular_forms__WEBPACK_IMPORTED_MODULE_14__.k0.required);for(const f of this.frequencyDefaultValues){const value=-1!==lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default()(this.subscription.subscriptionParameterList,["value",f]);formGroup.controls.frequencies.addControl(f,this.formBuilder.control(value))}this.subscriptionForm=this.formBuilder.group({[this.subscription.subscriptionType]:formGroup})}initFormDataBySubscriptions(){this.processing$.next(!0),this.subscriptionService.getSubscriptionsByPersonDSO(this.ePersonId,this.dso?.uuid).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)()).subscribe({next:res=>{if(res.pageInfo.totalElements>0){this.showDeleteInfo$.next(!0);for(const subscription of res.page){const subscriptionGroup=this.subscriptionForm.get(subscription.subscriptionType);if((0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(subscriptionGroup)){subscriptionGroup.controls.subscriptionId.setValue(subscription.id);for(const parameter of subscription.subscriptionParameterList.filter(p=>"frequency"===p.name))subscriptionGroup.controls.frequencies.controls[parameter.value]?.setValue(!0)}}}this.processing$.next(!1)},error:err=>{this.processing$.next(!1)}})}submit(){this.submitted=!0;const subscriptionTypes=Object.keys(this.subscriptionForm.controls),subscriptionsToBeCreated=[],subscriptionsToBeUpdated=[];subscriptionTypes.forEach(subscriptionType=>{const subscriptionGroup=this.subscriptionForm.controls[subscriptionType];if(subscriptionGroup.touched&&subscriptionGroup.dirty){const body=this.createBody(subscriptionGroup.controls.subscriptionId.value,subscriptionType,subscriptionGroup.controls.frequencies);(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(body.id)?subscriptionsToBeUpdated.push(body):(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(body.subscriptionParameterList)&&subscriptionsToBeCreated.push(body)}});const toBeProcessed=[];(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(subscriptionsToBeCreated)&&toBeProcessed.push((0,rxjs__WEBPACK_IMPORTED_MODULE_11__.from)(subscriptionsToBeCreated).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.ZZ)(subscriptionBody=>this.subscriptionService.createSubscription(subscriptionBody,this.ePersonId,this.dso.uuid).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)())),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.Mi)(res=>{if(res.hasSucceeded){const msg=this.translate.instant("subscriptions.modal.create.success",{type:res.payload.subscriptionType});this.notificationsService.success(null,msg)}else this.notificationsService.error(null,this.translate.instant("subscriptions.modal.create.error"))}))),(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(subscriptionsToBeUpdated)&&toBeProcessed.push((0,rxjs__WEBPACK_IMPORTED_MODULE_11__.from)(subscriptionsToBeUpdated).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.ZZ)(subscriptionBody=>this.subscriptionService.updateSubscription(subscriptionBody,this.ePersonId,this.dso.uuid).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)())),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.Mi)(res=>{if(res.hasSucceeded){const msg=this.translate.instant("subscriptions.modal.update.success",{type:res.payload.subscriptionType});this.notificationsService.success(null,msg),(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(this.subscription)&&this.updateSubscription.emit(res.payload)}else this.notificationsService.error(null,this.translate.instant("subscriptions.modal.update.error"))}))),(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([...toBeProcessed]).subscribe(res=>{this.activeModal.close()})}createBody(subscriptionId,subscriptionType,frequencies){const body={id:(0,_empty_util__WEBPACK_IMPORTED_MODULE_13__.hj)(subscriptionId)?subscriptionId:null,subscriptionType,subscriptionParameterList:[]};for(const frequency of this.frequencyDefaultValues)frequencies.value[frequency]&&body.subscriptionParameterList.push({name:"frequency",value:frequency});return body}static#_=this.\u0275fac=function(t){return new(t||SubscriptionModalComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_angular_forms__WEBPACK_IMPORTED_MODULE_14__.ze),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.Bq),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.I),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_subscriptions_data_service__WEBPACK_IMPORTED_MODULE_9__.SubscriptionsDataService),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.Lw),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_1__.uR),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_2__.f))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_10__.VBU({type:SubscriptionModalComponent2,selectors:[["ds-subscription-modal"]],inputs:{dso:"dso",subscription:"subscription"},outputs:{updateSubscription:"updateSubscription"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_10__.aNF],decls:1,vars:1,consts:[["data-test","subscription-form",3,"formGroup","ngSubmit",4,"ngIf"],["data-test","subscription-form",3,"ngSubmit","formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-3"],["class","float-right",4,"ngIf"],["class","form-group form-row",3,"formGroupName",4,"ngFor","ngForOf"],["class","text-muted",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[4,"ngIf"],[1,"float-right"],[3,"object",4,"ngIf"],[3,"object"],[1,"form-group","form-row",3,"formGroupName"],[1,"col-md-4","col-form-label","float-md-left","pt-0"],[1,"col-md-8"],["type","hidden","formControlName","subscriptionId",3,"value"],["class","form-check","formGroupName","frequencies",4,"ngFor","ngForOf"],[3,"type",4,"ngIf"],["formGroupName","frequencies",1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],[3,"type"],[1,"text-muted"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_10__.DNE(0,SubscriptionModalComponent_form_0_Template,28,24,"form",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("ngIf",ctx.subscriptionForm)},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_17__.bT,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.Zm,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.X1,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.j4,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.JD,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.$R,_object_collection_shared_badges_type_badge_themed_type_badge_component__WEBPACK_IMPORTED_MODULE_7__.C,_angular_common__WEBPACK_IMPORTED_MODULE_17__.pM,_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_17__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_17__.lG,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.D9]})}return SubscriptionModalComponent2})()},18870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubscriptionsDataService:()=>SubscriptionsDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(10743),src_app_core_shared_request_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(59499),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(91735),_core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(57699),_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_core_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43626),_core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_core_data_base_search_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(19399),_core_data_dso_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(60279),_core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(97570),_core_data_request_models__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(87457),_core_data_request_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(72744),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(91365),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(82656),_empty_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(77028),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10117),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(32181),_angular_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(68014),_angular_common_http__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(38068),_ngrx_store__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(5136);let SubscriptionsDataService=(()=>{class SubscriptionsDataService2 extends _core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(comparator,http,notificationsService,requestService,rdbService,store,objectCache,halService,nameService){super("subscriptions",requestService,rdbService,objectCache,halService),this.comparator=comparator,this.http=http,this.notificationsService=notificationsService,this.requestService=requestService,this.rdbService=rdbService,this.store=store,this.objectCache=objectCache,this.halService=halService,this.nameService=nameService,this.findByEpersonLinkPath="findByEPerson",this.searchData=new _core_data_base_search_data__WEBPACK_IMPORTED_MODULE_5__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _core_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}getSubscriptionsByPersonDSO(eperson,uuid){const optionsWithObject=Object.assign(new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_12__._,{searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_13__.x("resource",uuid),new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_13__.x("eperson_id",eperson)]});return this.searchData.searchBy("findByEPersonAndDso",optionsWithObject,!1,!0)}createSubscription(subscription,ePerson,uuid){return this.halService.getEndpoint(this.linkPath).pipe((0,_empty_util__WEBPACK_IMPORTED_MODULE_14__.VT)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.Tj)(endpointUrl=>`${endpointUrl}?resource=${uuid}&eperson_id=${ePerson}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.Tj)(endpointURL=>new _core_data_request_models__WEBPACK_IMPORTED_MODULE_7__.QU(this.requestService.generateRequestId(),endpointURL,JSON.stringify(subscription))),(0,src_app_core_shared_request_operators__WEBPACK_IMPORTED_MODULE_16__.w$)(this.requestService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.nx)(restRequest=>this.rdbService.buildFromRequestUUID(restRequest.uuid)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.qD)())}updateSubscription(subscription,ePerson,uuid){return this.halService.getEndpoint(this.linkPath).pipe((0,_empty_util__WEBPACK_IMPORTED_MODULE_14__.VT)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.Tj)(endpointUrl=>`${endpointUrl}/${subscription.id}?resource=${uuid}&eperson_id=${ePerson}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.Tj)(endpointURL=>new _core_data_request_models__WEBPACK_IMPORTED_MODULE_7__.v_(this.requestService.generateRequestId(),endpointURL,JSON.stringify(subscription))),(0,src_app_core_shared_request_operators__WEBPACK_IMPORTED_MODULE_16__.w$)(this.requestService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.nx)(restRequest=>this.rdbService.buildFromRequestUUID(restRequest.uuid)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.qD)())}deleteSubscription(id){return this.halService.getEndpoint(this.linkPath).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.pb)(href=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_14__.hj)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.F)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.nx)(endpointUrl=>this.deleteData.delete(id)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.qD)())}findAllSubscriptions(options){return this.findAllData.findAll(options,!0,!0,(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_17__.s)("resource"),(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_17__.s)("eperson"))}findByEPerson(ePersonId,options){const optionsWithObject=Object.assign(new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_12__._,options,{searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_13__.x("uuid",ePersonId)]});return this.getEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.Tj)(href=>`${href}/search/${this.findByEpersonLinkPath}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.nx)(href=>this.findListByHref(href,optionsWithObject,!1,!0,(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_17__.s)("resource"),(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_17__.s)("eperson"))))}static#_=this.\u0275fac=function(t){return new(t||SubscriptionsDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_data_dso_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__.j),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_angular_common_http__WEBPACK_IMPORTED_MODULE_19__.Qq),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_11__.I),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_data_request_service__WEBPACK_IMPORTED_MODULE_8__.B),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_ngrx_store__WEBPACK_IMPORTED_MODULE_20__.il),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_9__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_18__.KVO(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__.f))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_18__.jDH({token:SubscriptionsDataService2,factory:SubscriptionsDataService2.\u0275fac,providedIn:"root"})}return SubscriptionsDataService2})()},27657:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>ViewTrackerComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(48168),__webpack_require__(77028)),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68014),angulartics2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91270),_core_services_referrer_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(64888);let ViewTrackerComponent=(()=>{class ViewTrackerComponent2{constructor(angulartics2,referrerService){this.angulartics2=angulartics2,this.referrerService=referrerService}ngOnInit(){this.sub=this.referrerService.getReferrer().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.s)(1)).subscribe(referrer=>{this.angulartics2.eventTrack.next({action:"page_view",properties:{object:this.object,referrer}})})}ngOnDestroy(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a4)(this.sub)&&this.sub.unsubscribe()}static#_=this.\u0275fac=function(t){return new(t||ViewTrackerComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(angulartics2__WEBPACK_IMPORTED_MODULE_4__.il),_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(_core_services_referrer_service__WEBPACK_IMPORTED_MODULE_5__.f))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ViewTrackerComponent2,selectors:[["ds-view-tracker"]],inputs:{object:"object"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],decls:1,vars:0,template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.EFF(0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})}return ViewTrackerComponent2})()},42176:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/alerts/item-alerts.component":[46320,6320]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=42176,module.exports=webpackAsyncContext},63614:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[64932,4932]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=63614,module.exports=webpackAsyncContext},4872:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/full-item-page.component":[28168,8168]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=4872,module.exports=webpackAsyncContext},5729:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/simple/item-page.component":[97209,7209]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=5729,module.exports=webpackAsyncContext}};