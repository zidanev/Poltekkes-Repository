exports.id=444,exports.ids=[444,1918,474,133,9825,5592,1555,148,9321,4759,9969,7231,1870],exports.modules={96622:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}},15446:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>DSOBreadcrumbsService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10743),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45930),_breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(96622),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77028),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(32181),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(48614),_dso_name_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91735),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);let DSOBreadcrumbsService=(()=>{class DSOBreadcrumbsService2{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__.Q(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)(propertyName))[propertyName].pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.I6)(parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.nx)(parentRD=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(parent))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([])}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(breadcrumbs=>[...breadcrumbs,crumb]))}static#_=this.\u0275fac=function(t){return new(t||DSOBreadcrumbsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__._),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_dso_name_service__WEBPACK_IMPORTED_MODULE_2__.f))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:DSOBreadcrumbsService2,factory:DSOBreadcrumbsService2.\u0275fac,providedIn:"root"})}return DSOBreadcrumbsService2})()},21870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>i18nBreadcrumbResolver});var core=__webpack_require__(68014),empty_util=__webpack_require__(77028),route_utils=__webpack_require__(39609),cjs=__webpack_require__(74785),breadcrumb_model=__webpack_require__(96622);let I18nBreadcrumbsService=(()=>{class I18nBreadcrumbsService2{getBreadcrumbs(key,url){return(0,cjs.of)([new breadcrumb_model.Q(key+".breadcrumbs",url)])}static#_=this.\u0275fac=function(t){return new(t||I18nBreadcrumbsService2)};static#_2=this.\u0275prov=core.jDH({token:I18nBreadcrumbsService2,factory:I18nBreadcrumbsService2.\u0275fac,providedIn:"root"})}return I18nBreadcrumbsService2})();const i18nBreadcrumbResolver=(route,state,breadcrumbService=(0,core.WQX)(I18nBreadcrumbsService))=>{const key=route.data.breadcrumbKey;if((0,empty_util.Tn)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");return{provider:breadcrumbService,key,url:(0,route_utils.F)(route)}}},55686:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>ConfigDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68134),_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656);class ConfigDataService extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__.W{findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(rd=>{if(rd.hasFailed)throw new Error("Couldn't retrieve the config");return rd}))}findByName(name,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findById(name,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}}},90474:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionAccessesConfigDataService:()=>SubmissionAccessesConfigDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_config_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55686),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);let SubmissionAccessesConfigDataService=(()=>{class SubmissionAccessesConfigDataService2 extends _config_data_service__WEBPACK_IMPORTED_MODULE_4__.O{constructor(requestService,rdbService,objectCache,halService){super("submissionaccessoptions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||SubmissionAccessesConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:SubmissionAccessesConfigDataService2,factory:SubmissionAccessesConfigDataService2.\u0275fac,providedIn:"root"})}return SubmissionAccessesConfigDataService2})()},34759:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionFormsConfigDataService:()=>SubmissionFormsConfigDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_config_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55686),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);let SubmissionFormsConfigDataService=(()=>{class SubmissionFormsConfigDataService2 extends _config_data_service__WEBPACK_IMPORTED_MODULE_4__.O{constructor(requestService,rdbService,objectCache,halService){super("submissionforms",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||SubmissionFormsConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:SubmissionFormsConfigDataService2,factory:SubmissionFormsConfigDataService2.\u0275fac,providedIn:"root"})}return SubmissionFormsConfigDataService2})()},91918:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionUploadsConfigDataService:()=>SubmissionUploadsConfigDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_config_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55686),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);let SubmissionUploadsConfigDataService=(()=>{class SubmissionUploadsConfigDataService2 extends _config_data_service__WEBPACK_IMPORTED_MODULE_4__.O{constructor(requestService,rdbService,objectCache,halService){super("submissionuploads",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||SubmissionUploadsConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:SubmissionUploadsConfigDataService2,factory:SubmissionUploadsConfigDataService2.\u0275fac,providedIn:"root"})}return SubmissionUploadsConfigDataService2})()},19969:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NotifyRequestsStatusDataService:()=>NotifyRequestsStatusDataService});var rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74785),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(68014);let NotifyRequestsStatusDataService=(()=>{class NotifyRequestsStatusDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService){super("notifyrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getNotifyRequestsStatus(itemUuid){const href$=this.getEndpoint().pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)(url=>url+"/"+itemUuid));return href$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.take)(1)).subscribe(url=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_4__.IP(this.requestService.generateRequestId(),url);this.requestService.send(request,!0)}),this.rdbService.buildFromHref(href$)}static#_=this.\u0275fac=function(t){return new(t||NotifyRequestsStatusDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_5__.B),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.jDH({token:NotifyRequestsStatusDataService2,factory:NotifyRequestsStatusDataService2.\u0275fac,providedIn:"root"})}return NotifyRequestsStatusDataService2})()},92203:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>SignpostingDataService});var rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59945),_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26597),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68014);let SignpostingDataService=(()=>{class SignpostingDataService2{constructor(appConfig,restService){this.appConfig=appConfig,this.restService=restService}getLinks(uuid){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${uuid}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.WL)(err=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)([])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(res=>200===res.statusCode?res.payload:[]))}static#_=this.\u0275fac=function(t){return new(t||SignpostingDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ),_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.jDH({token:SignpostingDataService2,factory:SignpostingDataService2.\u0275fac,providedIn:"root"})}return SignpostingDataService2})()},80148:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionDataService:()=>VersionDataService});var rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_base_patch_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(75467),_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(84237),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014);let VersionDataService=(()=>{class VersionDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,comparator){super("versions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.comparator=comparator,this.patchData=new _base_patch_data__WEBPACK_IMPORTED_MODULE_5__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint)}getHistoryFromVersion(version,useCachedVersionIfAvailable=!1,reRequestOnStale=!0){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.hj)(version)?this.findById(version.id,useCachedVersionIfAvailable,reRequestOnStale,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()):rxjs__WEBPACK_IMPORTED_MODULE_11__.EMPTY}getHistoryIdFromVersion(version){return this.getHistoryFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(versionHistory=>versionHistory.id))}patch(object,operations){return this.patchData.patch(object,operations)}update(object){return this.patchData.update(object)}commitUpdates(method){this.patchData.commitUpdates(method)}createPatchFromCache(object){return this.patchData.createPatchFromCache(object)}static#_=this.\u0275fac=function(t){return new(t||VersionDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:VersionDataService2,factory:VersionDataService2.\u0275fac,providedIn:"root"})}return VersionDataService2})()},1555:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionHistoryDataService:()=>VersionHistoryDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(38068),rxjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77028),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(64694),_shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80780),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_version_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(80148),_angular_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(68014);let VersionHistoryDataService=(()=>{class VersionHistoryDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,versionDataService){super("versionhistories",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.versionDataService=versionDataService,this.versionsEndpoint="versions"}getBrowseEndpoint(options={},linkPath){return this.halService.getEndpoint(this.linkPath)}getVersionsEndpoint(versionHistoryId){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(href=>this.halService.getEndpoint(this.versionsEndpoint,`${href}/${versionHistoryId}`)))}getVersions(versionHistoryId,searchOptions,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const hrefObs=this.getVersionsEndpoint(versionHistoryId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(href=>searchOptions?searchOptions.toRestUrl(href):href));return this.versionDataService.findListByHref(hrefObs,void 0,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}createVersion(itemHref,summary){const requestId=this.requestService.generateRequestId(),requestOptions=Object.create({});let requestHeaders=new _angular_common_http__WEBPACK_IMPORTED_MODULE_10__.Lr;return requestHeaders=requestHeaders.append("Content-Type","text/uri-list"),requestOptions.headers=requestHeaders,this.halService.getEndpoint(this.versionsEndpoint).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(endpointUrl=>summary?.length>0?`${endpointUrl}?summary=${summary}`:`${endpointUrl}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(href))).subscribe(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_6__.Qf(requestId,href,itemHref,requestOptions);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,versionRD=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([this.requestService.setStaleByHrefSubstring(versionRD.payload._links.self.href),this.requestService.setStaleByHrefSubstring(versionRD.payload._links.versionhistory.href)])).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)())}getLatestVersionFromHistory$(versionHistory){const latestVersionOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__.W,{id:"item-newest-version-options",currentPage:1,pageSize:1}),latestVersionSearch=new _shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__.C({pagination:latestVersionOptions});return this.getVersions(versionHistory.id,latestVersionSearch,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("item")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.v7)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.pb)(versions=>versions.page.length>0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versions=>versions.page[0]))}getLatestVersion$(version){return version.id?this.versionDataService.findById(version.id,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionHistoryRD=>this.getLatestVersionFromHistory$(versionHistoryRD))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}isLatest$(version){return version?this.getLatestVersion$(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(latestVersion=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(version.version===latestVersion.version))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}hasDraftVersion$(versionHref){return this.versionDataService.findByHref(versionHref,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionRD=>versionRD.hasSucceeded&&!versionRD.hasNoContent?versionRD.payload.versionhistory.pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versionHistoryRD=>!(!versionHistoryRD.hasSucceeded||versionHistoryRD.hasNoContent)&&versionHistoryRD.payload.draftVersion)):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(!1)))}getLatestVersionItemFromHistory$(versionHistory){return this.getLatestVersionFromHistory$(versionHistory).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(newLatestVersion=>newLatestVersion.item),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}getVersionHistoryFromVersion$(version){return this.versionDataService.getHistoryIdFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>this.findById(res)),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}invalidateVersionHistoryCache(versionHistoryID){this.requestService.setStaleByHrefSubstring("versioning/versionhistories/"+versionHistoryID)}static#_=this.\u0275fac=function(t){return new(t||VersionHistoryDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_version_data_service__WEBPACK_IMPORTED_MODULE_8__.VersionDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_15__.jDH({token:VersionHistoryDataService2,factory:VersionHistoryDataService2.\u0275fac,providedIn:"root"})}return VersionHistoryDataService2})()},39721:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>JsonPatchOperationsBuilder});var _shared_date_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7840),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_shared_form_builder_models_form_field_language_value_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(27720),_shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5403),_submission_vocabularies_models_vocabulary_entry_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(80120),_json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25374),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68014),_ngrx_store__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5136);let JsonPatchOperationsBuilder=(()=>{class JsonPatchOperationsBuilder2{constructor(store){this.store=store}add(path,value,first=!1,plain=!1){this.store.dispatch(new _json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__.X2(path.rootElement,path.subRootElement,path.path,this.prepareValue(value,plain,first)))}replace(path,value,plain=!1){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.Tn)(value)||"object"==typeof value&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.Tn)(value.value)?this.remove(path):this.store.dispatch(new _json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__.kM(path.rootElement,path.subRootElement,path.path,this.prepareValue(value,plain,!1)))}move(path,prevPath){this.store.dispatch(new _json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__.td(path.rootElement,path.subRootElement,prevPath,path.path))}remove(path){this.store.dispatch(new _json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__.QZ(path.rootElement,path.subRootElement,path.path))}flushOperation(path){this.store.dispatch(new _json_patch_operations_actions__WEBPACK_IMPORTED_MODULE_3__.qy(path.rootElement,path.subRootElement,path.path))}prepareValue(value,plain,first){let operationValue=null;return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.a4)(value)&&(plain?operationValue=value:Array.isArray(value)?(operationValue=[],value.forEach(entry=>{operationValue.push("object"==typeof entry?this.prepareObjectValue(entry):new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(entry))})):operationValue="object"==typeof value?this.prepareObjectValue(value):new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value)),first&&!Array.isArray(operationValue)?[operationValue]:operationValue}prepareObjectValue(value){let operationValue=Object.create({});return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(value)||value instanceof _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e?operationValue=value:value instanceof Date?operationValue=new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e((0,_shared_date_util__WEBPACK_IMPORTED_MODULE_0__.Sd)(value)):value instanceof _submission_vocabularies_models_vocabulary_entry_model__WEBPACK_IMPORTED_MODULE_2__.b?operationValue=this.prepareAuthorityValue(value):value instanceof _shared_form_builder_models_form_field_language_value_model__WEBPACK_IMPORTED_MODULE_5__.r?operationValue=new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value.value,value.language):value.hasOwnProperty("authority")?operationValue=new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value.value,value.language,value.authority):(0,_shared_date_util__WEBPACK_IMPORTED_MODULE_0__.z5)(value)?operationValue=new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e((0,_shared_date_util__WEBPACK_IMPORTED_MODULE_0__.$T)(value)):value.hasOwnProperty("value")?operationValue=new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value.value):Object.keys(value).forEach(key=>{operationValue[key]="object"==typeof value[key]?this.prepareObjectValue(value[key]):value[key]}),operationValue}prepareAuthorityValue(value){let operationValue;return operationValue=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.hj)(value.authority)?new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value.value,value.language,value.authority):new _shared_form_builder_models_form_field_metadata_value_model__WEBPACK_IMPORTED_MODULE_1__.e(value.value,value.language),operationValue}static#_=this.\u0275fac=function(t){return new(t||JsonPatchOperationsBuilder2)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.il))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.jDH({token:JsonPatchOperationsBuilder2,factory:JsonPatchOperationsBuilder2.\u0275fac,providedIn:"root"})}return JsonPatchOperationsBuilder2})()},77231:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{QualityAssuranceEventDataService:()=>QualityAssuranceEventDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_create_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85311),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43626),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75467),_data_base_search_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19399),_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84237),_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(87457),_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(91365),_angular_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(68014);let QualityAssuranceEventDataService=(()=>{class QualityAssuranceEventDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService,comparator){super("qualityassuranceevents",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.comparator=comparator,this.createData=new _data_base_create_data__WEBPACK_IMPORTED_MODULE_3__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.patchData=new _data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_7__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getEventsByTopic(topic,options={},...linksToFollow){return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_12__.x("topic",topic)],this.searchData.searchBy("findByTopic",options,!0,!0,...linksToFollow)}searchEventsByTopic(options={},...linksToFollow){return this.searchData.searchBy("findByTopic",options,!0,!0,...linksToFollow)}clearFindByTopicRequests(){this.requestService.setStaleByHrefSubstring("findByTopic")}getEvent(id,...linksToFollow){return this.findById(id,!0,!0,...linksToFollow)}patchEvent(status,dso,reason){return this.patchData.patch(dso,[{path:"/status",op:"replace",value:status}])}boundProject(itemId,projectId){return this.postOnRelated(itemId,projectId)}removeProject(itemId){return this.deleteOnRelated(itemId)}deleteOnRelated(objectId){const requestId=this.requestService.generateRequestId();return this.getIDHrefObs(objectId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(href))).subscribe(href=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Dk(requestId,href+"/related",objectId);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUID(requestId)}postOnRelated(objectId,relatedItemId,body){const requestId=this.requestService.generateRequestId();return this.getIDHrefObs(objectId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.s)(1)).subscribe(href=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Qf(requestId,href+"/related?item="+relatedItemId,body);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUID(requestId)}postData(target,correctionType,related,reason){const requestId=this.requestService.generateRequestId();return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(href=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_15__.Lr;headers=headers.append("Content-Type","application/json"),options.headers=headers;let params=new _angular_common_http__WEBPACK_IMPORTED_MODULE_15__.Nl;params=params.append("target",target).append("correctionType",correctionType),options.params=params;const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.Qf(requestId,href,{reason},options);return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request),this.rdbService.buildFromRequestUUID(requestId)}))}deleteQAEvent(qaEvent){return this.deleteData.delete(qaEvent.id)}static#_=this.\u0275fac=function(t){return new(t||QualityAssuranceEventDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_11__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_16__.KVO(_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_16__.jDH({token:QualityAssuranceEventDataService2,factory:QualityAssuranceEventDataService2.\u0275fac,providedIn:"root"})}return QualityAssuranceEventDataService2})()},55592:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ResourcePolicyDataService:()=>ResourcePolicyDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(38068),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_create_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85311),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43626),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75467),_data_base_search_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19399),_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84237),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(97570),_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(87457),_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72744),_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(36191),_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(62120),_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(97195),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68014);let ResourcePolicyDataService=(()=>{class ResourcePolicyDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService,comparator,ePersonService,groupService){super("resourcepolicies",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.comparator=comparator,this.ePersonService=ePersonService,this.groupService=groupService,this.searchByEPersonMethod="eperson",this.searchByGroupMethod="group",this.searchByResourceMethod="resource",this.createData=new _data_base_create_data__WEBPACK_IMPORTED_MODULE_3__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_7__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.patchData=new _data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}create(resourcePolicy,resourceUUID,epersonUUID,groupUUID){const params=[];return params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(epersonUUID)?params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("eperson",epersonUUID)):(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(groupUUID)&&params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("group",groupUUID)),this.createData.create(resourcePolicy,...params)}delete(resourcePolicyID){return this.deleteData.delete(resourcePolicyID).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_15__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(response=>response.hasSucceeded))}update(object){return this.patchData.update(object)}getDefaultAccessConditionsFor(collection,findListOptions){return this.findListByHref(collection._links.defaultAccessConditions.href,findListOptions)}searchByEPerson(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByEPersonMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByGroup(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByGroupMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByResource(UUID,action,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(action)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("action",action)),this.searchData.searchBy(this.searchByResourceMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}updateTarget(resourcePolicyId,resourcePolicyHref,targetUUID,targetType){const targetEndpoint$=("eperson"===targetType?this.ePersonService:this.groupService).getIDHrefObs(targetUUID),options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_20__.Lr;headers=headers.append("Content-Type","text/uri-list"),options.headers=headers;const requestId=this.requestService.generateRequestId();return targetEndpoint$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.$1)()).subscribe(targetEndpoint=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.v_(requestId,resourcePolicyHref+"/"+targetType,targetEndpoint,options);Object.assign(request,{getResponseParser:()=>_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__.M}),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,()=>this.invalidateByHref(resourcePolicyHref))}static#_=this.\u0275fac=function(t){return new(t||ResourcePolicyDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__.GroupDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_21__.jDH({token:ResourcePolicyDataService2,factory:ResourcePolicyDataService2.\u0275fac,providedIn:"root"})}return ResourcePolicyDataService2})()},71870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CorrectionTypeDataService:()=>CorrectionTypeDataService});var rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(74785),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68134),_data_base_search_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19399),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(97570),_data_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);let CorrectionTypeDataService=(()=>{class CorrectionTypeDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("correctiontypes",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.linkPath="correctiontypes",this.searchByTopic="findByTopic",this.searchFindByItem="findByItem",this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_4__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getCorrectionTypeById(id,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){return this.findById(id,useCachedVersionIfAvailable,reRequestOnStale)}findByItem(itemUuid,useCachedVersionIfAvailable){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.x("uuid",itemUuid)],this.searchData.searchBy(this.searchFindByItem,options,useCachedVersionIfAvailable)}findByTopic(topic,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.x("topic",topic)],this.searchData.searchBy(this.searchByTopic,options,useCachedVersionIfAvailable,reRequestOnStale).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_7__.Hz)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_7__.W8)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.map)(list=>list[0]))}static#_=this.\u0275fac=function(t){return new(t||CorrectionTypeDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_5__.B),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_6__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_11__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_11__.jDH({token:CorrectionTypeDataService2,factory:CorrectionTypeDataService2.\u0275fac,providedIn:"root"})}return CorrectionTypeDataService2})()},7739:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>SUBMISSION_LINKS_TO_FOLLOW});var _shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32181);const SUBMISSION_LINKS_TO_FOLLOW=[(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_0__.s)("item"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_0__.s)("collection")]},8695:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>SubmissionObjectResolver});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82656),_submission_links_to_follow__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7739);const SubmissionObjectResolver=(route,state,dataService)=>dataService.findById(route.params.id,!0,!1,..._submission_links_to_follow__WEBPACK_IMPORTED_MODULE_1__.X).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.nx)(wfiRD=>wfiRD.payload.item),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)())},75013:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>SubmissionParentBreadcrumbResolver});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10743),_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82656),_submission_links_to_follow__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7739);class SubmissionParentBreadcrumbResolver{constructor(dataService,breadcrumbService){this.dataService=dataService,this.breadcrumbService=breadcrumbService}resolve(route,state){return this.dataService.findById(route.params.id,!0,!1,..._submission_links_to_follow__WEBPACK_IMPORTED_MODULE_1__.X).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(submissionObject=>({provider:this.breadcrumbService,key:submissionObject})))}}},59825:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionCcLicenseDataService:()=>SubmissionCcLicenseDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_base_base_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4705),_data_base_find_all_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(89480),_data_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(91365),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68014);let SubmissionCcLicenseDataService=(()=>{class SubmissionCcLicenseDataService2 extends _data_base_base_data_service__WEBPACK_IMPORTED_MODULE_2__.L{constructor(requestService,rdbService,objectCache,halService){super("submissioncclicenses",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.linkPath="submissioncclicenses",this.findAllData=new _data_base_find_all_data__WEBPACK_IMPORTED_MODULE_3__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||SubmissionCcLicenseDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_4__.B),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.jDH({token:SubmissionCcLicenseDataService2,factory:SubmissionCcLicenseDataService2.\u0275fac,providedIn:"root"})}return SubmissionCcLicenseDataService2})()},60133:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionCcLicenseUrlDataService:()=>SubmissionCcLicenseUrlDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10743),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(57699),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_data_base_base_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4705),_data_base_search_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19399),_data_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72744),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68014);let SubmissionCcLicenseUrlDataService=(()=>{class SubmissionCcLicenseUrlDataService2 extends _data_base_base_data_service__WEBPACK_IMPORTED_MODULE_2__.L{constructor(requestService,rdbService,objectCache,halService){super("submissioncclicenseUrls-search",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_3__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive,(href,searchMethod)=>`${href}/${searchMethod}`)}getCcLicenseLink(ccLicense,options){return this.searchData.getSearchByHref("rightsByQuestions",{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_7__.x("license",ccLicense.id),...ccLicense.fields.map(field=>new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_7__.x(`answer_${field.id}`,options.get(field).id))]}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.nx)(href=>this.findByHref(href)),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_6__.yd)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(response=>response.url))}searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.searchData.searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static#_=this.\u0275fac=function(t){return new(t||SubmissionCcLicenseUrlDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_4__.B),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__.jDH({token:SubmissionCcLicenseUrlDataService2,factory:SubmissionCcLicenseUrlDataService2.\u0275fac,providedIn:"root"})}return SubmissionCcLicenseUrlDataService2})()},89200:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>SubmissionParentBreadcrumbsService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74785),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45930),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77028),_submission_submission_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77523),_breadcrumbs_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15446),_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91735),_data_collection_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39138),_shared_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(82656),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);let SubmissionParentBreadcrumbsService=(()=>{class SubmissionParentBreadcrumbsService2{constructor(dsoNameService,dsoBreadcrumbsService,submissionService,collectionService){this.dsoNameService=dsoNameService,this.dsoBreadcrumbsService=dsoBreadcrumbsService,this.submissionService=submissionService,this.collectionService=collectionService}getBreadcrumbs(submissionObject){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Im)(submissionObject)?(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([]):(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([submissionObject.collection.pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.qD)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.Bo)()),this.submissionService.getSubmissionCollectionId(submissionObject.id)]).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.switchMap)(([collection,latestCollectionId])=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(latestCollectionId)?this.collectionService.findById(latestCollectionId).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.qD)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.Bo)()):(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(collection)),(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.switchMap)(collection=>this.dsoBreadcrumbsService.getBreadcrumbs(collection,(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(collection))))}static#_=this.\u0275fac=function(t){return new(t||SubmissionParentBreadcrumbsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__.f),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_breadcrumbs_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_2__.U),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_submission_submission_service__WEBPACK_IMPORTED_MODULE_1__.E),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_data_collection_data_service__WEBPACK_IMPORTED_MODULE_4__.CollectionDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:SubmissionParentBreadcrumbsService2,factory:SubmissionParentBreadcrumbsService2.\u0275fac,providedIn:"root"})}return SubmissionParentBreadcrumbsService2})()},11897:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemAlertsComponent:()=>ItemAlertsComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74785),src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82656),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29321),_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(6721),__webpack_require__(71870)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14467),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82555),_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19941),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014);function ItemAlertsComponent_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"ds-alert",3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning)("content",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,2,"item.alerts.private"))}}function ItemAlertsComponent_div_2_a_10_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"a",11),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r2);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.openReinstateModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"item.alerts.reinstate-request")))}function ItemAlertsComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",4)(1,"ds-alert",5)(2,"div",6)(3,"span",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(6,"div",8)(7,"a",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(10,ItemAlertsComponent_div_2_a_10_Template,3,3,"a",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(5,4,"item.alerts.withdrawn")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(9,6,"404.link.home-page")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(11,8,ctx_r0.showReinstateButton$()))}}let ItemAlertsComponent=(()=>{class ItemAlertsComponent2{constructor(authService,dsoWithdrawnReinstateModalService,correctionTypeDataService){this.authService=authService,this.dsoWithdrawnReinstateModalService=dsoWithdrawnReinstateModalService,this.correctionTypeDataService=correctionTypeDataService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__.v}showReinstateButton$(){const correction$=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(correctionTypeRD=>correctionTypeRD.hasSucceeded?correctionTypeRD.payload.page:[])),isAdmin$=this.authService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf);return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([isAdmin$,correction$]).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(([isAdmin,correction])=>!isAdmin&&correction.some(correctionType=>correctionType.topic===_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static#_=this.\u0275fac=function(t){return new(t||ItemAlertsComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.Ee),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__.CorrectionTypeDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ItemAlertsComponent2,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:3,vars:2,consts:[["class","private-warning",4,"ngIf"],["class","withdrawn-warning",4,"ngIf"],[1,"private-warning"],[3,"type","content"],[1,"withdrawn-warning"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home",1,"btn","btn-primary","btn-sm"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(1,ItemAlertsComponent_div_1_Template,3,4,"div",0)(2,ItemAlertsComponent_div_2_Template,12,10,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.item&&!ctx.item.isDiscoverable),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.item&&ctx.item.isWithdrawn))},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.D9,_angular_router__WEBPACK_IMPORTED_MODULE_12__.Wk,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj]})}return ItemAlertsComponent2})()},78895:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>ThemedItemAlertsComponent}),__webpack_require__(6721);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(11897),__webpack_require__(68014));const _c0=["*"];function ThemedItemAlertsComponent_ng_template_0_Template(rf,ctx){}let ThemedItemAlertsComponent=(()=>{class ThemedItemAlertsComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(themeName){return __webpack_require__(42176)(`./${themeName}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,11897))}static#_=this.\u0275fac=(()=>{let \u0275ThemedItemAlertsComponent_BaseFactory;return function(t){return(\u0275ThemedItemAlertsComponent_BaseFactory||(\u0275ThemedItemAlertsComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedItemAlertsComponent2)))(t||ThemedItemAlertsComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedItemAlertsComponent2,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedItemAlertsComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}return ThemedItemAlertsComponent2})()},92733:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullFileSectionComponent:()=>FullFileSectionComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10743),src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59945),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91735),_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(36505),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39304),_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(6721),__webpack_require__(77028)),_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99565),_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(64365),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10117),_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91904),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(64694),_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(49192),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32181),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(45961),_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(80661),_simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(95422),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68014);function FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_ng_container_23_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(1,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.bVm()),2&rf){const file_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(file_r1.firstMetadataValue("dc.description"))}}function FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",7)(1,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",10)(5,"dl",11)(6,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(23,FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_ng_container_23_Template,6,4,"ng-container",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(24,"div",14)(25,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(26),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()),2&rf){let tmp_6_0,tmp_12_0;const file_r1=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,11,file_r1.thumbnail))?null:tmp_6_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,13,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r1)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,15,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,17,file_r1.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,19,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(null==(tmp_12_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,21,file_r1.format))||null==tmp_12_0.payload?null:tmp_12_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",file_r1.hasMetadata("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("bitstream",file_r1)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(27,23,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_2_div_1_ds_pagination_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_2_div_1_ds_pagination_4_div_1_Template,28,25,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.originalOptions)("collectionSize",null==originals_r3?null:originals_r3.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngForOf",null==originals_r3?null:originals_r3.page)}}function FullFileSectionComponent_div_2_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_2_div_1_ds_pagination_4_Template,2,6,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.original.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",(null==originals_r3||null==originals_r3.page?null:originals_r3.page.length)>0)}}function FullFileSectionComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_2_div_1_Template,5,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",ctx_r1.hasValuesInBundle(originals_r3))}}function FullFileSectionComponent_div_4_div_1_ds_pagination_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",17)(1,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",10)(5,"dl",11)(6,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(23,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(24),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(26,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(28,"div",14)(29,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(30),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(31,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()),2&rf){let tmp_6_0,tmp_12_0;const file_r4=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,12,file_r4.thumbnail))?null:tmp_6_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,14,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r4)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,16,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,18,file_r4.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,20,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(null==(tmp_12_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,22,file_r4.format))||null==tmp_12_0.payload?null:tmp_12_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(25,24,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(file_r4.firstMetadataValue("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("bitstream",file_r4)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(31,26,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_4_div_1_ds_pagination_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_4_div_1_ds_pagination_4_div_1_Template,32,28,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.licenseOptions)("collectionSize",null==licenses_r5?null:licenses_r5.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngForOf",null==licenses_r5?null:licenses_r5.page)}}function FullFileSectionComponent_div_4_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_div_1_ds_pagination_4_Template,2,6,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.license.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",(null==licenses_r5||null==licenses_r5.page?null:licenses_r5.page.length)>0)}}function FullFileSectionComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_4_div_1_Template,5,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngIf",ctx_r1.hasValuesInBundle(licenses_r5))}}let FullFileSectionComponent=(()=>{class FullFileSectionComponent2 extends _simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__.FileSectionComponent{constructor(bitstreamDataService,notificationsService,translateService,paginationService,dsoNameService,appConfig){super(bitstreamDataService,notificationsService,translateService,dsoNameService,appConfig),this.notificationsService=notificationsService,this.translateService=translateService,this.paginationService=paginationService,this.dsoNameService=dsoNameService,this.appConfig=appConfig,this.originalOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)}))}hasValuesInBundle(bundle){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(bundle)&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.Im)(bundle.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static#_=this.\u0275fac=function(t){return new(t||FullFileSectionComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__.BitstreamDataService),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.I),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__.m),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_11__.VBU({type:FullFileSectionComponent2,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_11__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_11__.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-metadata-field-wrapper",0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(2,FullFileSectionComponent_div_2_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){let tmp_1_0,tmp_2_0;_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("label",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(1,3,ctx.label)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,5,ctx.originals$))?null:tmp_1_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(5,7,ctx.licenses$))?null:tmp_2_0.payload)}},dependencies:[_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__.e,_angular_common__WEBPACK_IMPORTED_MODULE_17__.bT,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_17__.Jj,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__.r,_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__.T,_angular_common__WEBPACK_IMPORTED_MODULE_17__.Sq,_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__.z,_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__.s,_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_19__.Q],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}return FullFileSectionComponent2})()},95457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ThemedFullFileSectionComponent}),__webpack_require__(6721);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(92733),__webpack_require__(68014));const _c0=["*"];function ThemedFullFileSectionComponent_ng_template_0_Template(rf,ctx){}let ThemedFullFileSectionComponent=(()=>{class ThemedFullFileSectionComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(themeName){return __webpack_require__(63614)(`./${themeName}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,92733))}static#_=this.\u0275fac=(()=>{let \u0275ThemedFullFileSectionComponent_BaseFactory;return function(t){return(\u0275ThemedFullFileSectionComponent_BaseFactory||(\u0275ThemedFullFileSectionComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedFullFileSectionComponent2)))(t||ThemedFullFileSectionComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedFullFileSectionComponent2,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedFullFileSectionComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}return ThemedFullFileSectionComponent2})()},63399:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullItemPageComponent:()=>FullItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10743),_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3075),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94743),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92203),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(42180),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28107),_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(92254),_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(77028),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(36159),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(32943),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(45961),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(27657),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(78895),_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(94403),_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(96),_simple_item_page_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7760),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(25006),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(8237),_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(95457),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(44072);const _c0=a0=>[a0];function FullItemPageComponent_div_0_div_1_div_1_div_4_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",18)(1,"a",19),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_17__.eq3(6,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(2,2,ctx_r0.itemPageRoute$))),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(4,4,"item.page.link.simple")," ")}}function FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_tr_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"tr")(1,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(3,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(5,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const mdValue_r2=ctx.$implicit,mdEntry_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdEntry_r3.key),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdValue_r2.value),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(mdValue_r2.language)}}function FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_tr_1_Template,7,3,"tr",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bVm()),2&rf){const mdEntry_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngForOf",mdEntry_r3.value)}}function FullItemPageComponent_div_0_div_1_div_1_div_4_div_14_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_17__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",20)(1,"div",21)(2,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r4);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(5);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r0.back())}),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(3,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(5,1,"item.page.return"),""))}function FullItemPageComponent_div_0_div_1_div_1_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",9)(1,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(2,"ds-item-page-title-field",11)(3,"ds-dso-edit-menu"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(4,FullItemPageComponent_div_0_div_1_div_1_div_4_div_4_Template,5,8,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(5,"div",13)(6,"table",14)(7,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(8,FullItemPageComponent_div_0_div_1_div_1_div_4_ng_container_8_Template,2,1,"ng-container",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(10,"keyvalue"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(11,"ds-item-page-full-file-section",6)(12,"ds-item-page-collections",6)(13,"ds-item-versions",16),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(14,FullItemPageComponent_div_0_div_1_div_1_div_4_div_14_Template,6,3,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const item_r5=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngIf,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",!ctx_r0.fromSubmissionObject),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(10,9,_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(9,7,ctx_r0.metadata$))),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",ctx_r0.fromSubmissionObject)}}function FullItemPageComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(1,"ds-item-alerts",6)(2,"ds-item-versions-notice",6)(3,"ds-view-tracker",7),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(4,FullItemPageComponent_div_0_div_1_div_1_div_4_Template,15,11,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const item_r5=ctx.ngIf,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("object",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",!item_r5.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(5,4,ctx_r0.isAdmin$))}}function FullItemPageComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_div_1_Template,6,6,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const itemRD_r6=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.payload)}}function FullItemPageComponent_div_0_ds_error_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-error",24),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,"error.item"))}function FullItemPageComponent_div_0_ds_loading_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-loading",24),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,"loading.item"))}function FullItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,FullItemPageComponent_div_0_div_1_Template,2,2,"div",2)(2,FullItemPageComponent_div_0_ds_error_2_Template,2,3,"ds-error",3)(3,FullItemPageComponent_div_0_ds_loading_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const itemRD_r6=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngIf",null==itemRD_r6?null:itemRD_r6.isLoading)}}let FullItemPageComponent=(()=>{class FullItemPageComponent2 extends _simple_item_page_component__WEBPACK_IMPORTED_MODULE_13__.ItemPageComponent{constructor(route,router,items,authorizationService,_location,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){super(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId),this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this._location=_location,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(rd=>rd.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.pb)(item=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(item)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(item=>item.metadata)),this.subs.push(this.route.data.subscribe(data=>{this.fromSubmissionObject=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(data.wfi)||(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(data.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||FullItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_20__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_20__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_common__WEBPACK_IMPORTED_MODULE_21__.aZ),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__.w),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__.z),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_22__.m),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_17__.Agw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_17__.VBU({type:FullItemPageComponent2,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_17__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_17__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],["class","full-item-info",4,"ngIf"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],["class","simple-view-link my-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-right"],[1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,FullItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,ctx.itemRD$))},dependencies:[_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__.A,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.D9,_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__.n,_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_11__.r,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__.I,_angular_common__WEBPACK_IMPORTED_MODULE_21__.bT,_angular_common__WEBPACK_IMPORTED_MODULE_21__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_21__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_21__.lG,_angular_router__WEBPACK_IMPORTED_MODULE_20__.Wk,_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_12__.V,_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__.T,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__.s,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_9__.H,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_10__.R,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__.Ws]},changeDetection:0})}return FullItemPageComponent2})()},89485:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ThemedFullItemPageComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(63399),__webpack_require__(68014));const _c0=["*"];function ThemedFullItemPageComponent_ng_template_0_Template(rf,ctx){}let ThemedFullItemPageComponent=(()=>{class ThemedFullItemPageComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(themeName){return __webpack_require__(4872)(`./${themeName}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,63399))}static#_=this.\u0275fac=(()=>{let \u0275ThemedFullItemPageComponent_BaseFactory;return function(t){return(\u0275ThemedFullItemPageComponent_BaseFactory||(\u0275ThemedFullItemPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_2__.xGo(ThemedFullItemPageComponent2)))(t||ThemedFullItemPageComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ThemedFullItemPageComponent2,selectors:[["ds-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.DNE(0,ThemedFullItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_2__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.k0s())},encapsulation:2})}return ThemedFullItemPageComponent2})()},7760:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemPageComponent:()=>ItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(10743),src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3075),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30289),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29321),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94743),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(92203),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(42180),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82656),_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(97849),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(28107),_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(77028),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(36159),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32943),_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(95776),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(45961),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(27657),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(78895),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(63254),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(25006),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(8237),_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(38453),_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(96041),_angular_router__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(64247),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(44072);function ItemPageComponent_div_0_div_1_div_1_ds_listable_object_component_loader_6_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-listable-object-component-loader",11),2&rf){const item_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG().ngIf,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("object",item_r1)("viewMode",ctx_r1.viewMode)}}function ItemPageComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(1,"ds-item-alerts",6)(2,"ds-qa-event-notification",6)(3,"ds-notify-requests-status",7)(4,"ds-item-versions-notice",6)(5,"ds-view-tracker",8),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(6,ItemPageComponent_div_0_div_1_div_1_ds_listable_object_component_loader_6_Template,1,2,"ds-listable-object-component-loader",9),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(8,"ds-item-versions",10),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const item_r1=ctx.ngIf,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("itemUuid",item_r1.uuid),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("object",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",!item_r1.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(7,8,ctx_r1.isAdmin$)),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1)("displayActions",!1)}}function ItemPageComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_div_1_div_1_Template,9,10,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const itemRD_r3=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.payload)}}function ItemPageComponent_div_0_ds_error_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-error",12),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"error.item"))}function ItemPageComponent_div_0_ds_loading_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-loading",12),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"loading.item"))}function ItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_div_1_Template,2,2,"div",2)(2,ItemPageComponent_div_0_ds_error_2_Template,2,3,"ds-error",3)(3,ItemPageComponent_div_0_ds_loading_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const itemRD_r3=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngIf",null==itemRD_r3?null:itemRD_r3.isLoading)}}let ItemPageComponent=(()=>{class ItemPageComponent2{constructor(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.viewMode=_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.Tj)(data=>data.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Hz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.Tj)(item=>(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_20__._o)(item))),this.isAdmin$=this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(params=>{(0,rxjs__WEBPACK_IMPORTED_MODULE_21__.combineLatest)([this.signpostingDataService.getLinks(params.id).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([signpostingLinks,coarRestApiUrls])=>{let links="";if(this.signpostingLinks=signpostingLinks,signpostingLinks.forEach(link=>{links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+`<${link.href}> ; rel="${link.rel}"`+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(link.type)?` ; type="${link.type}" `:" ");let tag={href:link.href,rel:link.rel};(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(link.type)&&(tag=Object.assign(tag,{type:link.type})),this.linkHeadService.addTag(tag)}),coarRestApiUrls.length>0){const inboxLinks=this.initPageInboxLinks(coarRestApiUrls);links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+inboxLinks}(0,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Vy)(this.platformId)&&this.responseService.setHeader("Link",links)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.nx)(coarLdnEnabled=>coarLdnEnabled?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,rxjs__WEBPACK_IMPORTED_MODULE_21__.of)([])))}initPageInboxLinks(coarRestApiUrls){const rel=this.notifyInfoService.getInboxRelationLink();let links="";return coarRestApiUrls.forEach(coarRestApiUrl=>{const tag={href:coarRestApiUrl,rel};this.inboxTags.push(tag),this.linkHeadService.addTag(tag),links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_22__.hj)(links)?", ":"")+`<${coarRestApiUrl}> ; rel="${rel}"`}),links}ngOnDestroy(){this.signpostingLinks.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)}),this.inboxTags.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)})}static#_=this.\u0275fac=function(t){return new(t||ItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__.w),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__.z),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__.m),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_18__.Agw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_18__.VBU({type:ItemPageComponent2,selectors:[["ds-base-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_18__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"itemUuid"],[3,"object"],[3,"object","viewMode",4,"ngIf"],[1,"mt-2",3,"item","displayActions"],[3,"object","viewMode"],[3,"message"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(0,ItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,ctx.itemRD$))},dependencies:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__.r,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_13__.R,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_15__.s,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_12__.H,_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__.v,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_14__.I,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__.A,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Jj,_angular_common__WEBPACK_IMPORTED_MODULE_23__.bT,_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__.x,_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__.f],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__.Ws]},changeDetection:0})}return ItemPageComponent2})()},38453:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>NotifyRequestsStatusComponent});var common=__webpack_require__(84739),cjs=__webpack_require__(74785),notify_services_status_data_service=__webpack_require__(19969),operators=__webpack_require__(82656),empty_util=__webpack_require__(77028),ngx_translate_core=__webpack_require__(43750),truncatable_component=__webpack_require__(95435),truncatable_part_component=__webpack_require__(2455),RequestStatusEnum=function(RequestStatusEnum2){return RequestStatusEnum2.ACCEPTED="ACCEPTED",RequestStatusEnum2.REJECTED="REJECTED",RequestStatusEnum2.REQUESTED="REQUESTED",RequestStatusEnum2}(RequestStatusEnum||{}),core=__webpack_require__(68014);const _c0=a0=>({"align-items-center":a0}),_c1=(a0,a1,a2)=>({serviceName:a0,serviceUrl:a1,offerType:a2});function RequestStatusAlertBoxComponent_ng_container_0_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"div",7),core.nI1(2,"translate"),core.bVm()),2&rf){const request_r1=ctx.$implicit,ctx_r1=core.XpG(2);core.R7$(),core.Y8G("innerHTML",core.i5U(2,1,ctx_r1.displayOptions.text,core.sMw(4,_c1,request_r1.serviceName,request_r1.serviceUrl,request_r1.offerType)),core.npT)}}function RequestStatusAlertBoxComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"div",1),core.nrm(2,"img",2),core.j41(3,"ds-truncatable",3)(4,"ds-truncatable-part",4)(5,"div",5),core.DNE(6,RequestStatusAlertBoxComponent_ng_container_0_ng_container_6_Template,3,8,"ng-container",6),core.k0s()()()(),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.ZvI("alert d-flex flex-row sections-gap ",ctx_r1.displayOptions.alertType,""),core.Y8G("ngClass",core.eq3(8,_c0,1===ctx_r1.data.length)),core.R7$(2),core.Y8G("id",ctx_r1.status),core.R7$(),core.Y8G("id",ctx_r1.status)("minLines",1),core.R7$(2),core.Y8G("ngForOf",ctx_r1.data)}}let RequestStatusAlertBoxComponent=(()=>{class RequestStatusAlertBoxComponent2{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case RequestStatusEnum.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case RequestStatusEnum.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case RequestStatusEnum.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static#_=this.\u0275fac=function(t){return new(t||RequestStatusAlertBoxComponent2)};static#_2=this.\u0275cmp=core.VBU({type:RequestStatusAlertBoxComponent2,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(rf,ctx){1&rf&&core.DNE(0,RequestStatusAlertBoxComponent_ng_container_0_Template,7,10,"ng-container",0),2&rf&&core.Y8G("ngIf",(null==ctx.data?null:ctx.data.length)>0&&ctx.displayOptions)},dependencies:[common.bT,truncatable_part_component.W,truncatable_component.d,common.Sq,ngx_translate_core.h,ngx_translate_core.D9,common.YU],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return RequestStatusAlertBoxComponent2})();function NotifyRequestsStatusComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"ds-request-status-alert-box",2),core.bVm()),2&rf){const entry_r1=ctx.$implicit;core.R7$(),core.Y8G("status",entry_r1.key)("data",entry_r1.value)}}function NotifyRequestsStatusComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,NotifyRequestsStatusComponent_ng_container_0_ng_container_1_Template,2,2,"ng-container",1),core.nI1(2,"async"),core.nI1(3,"keyvalue"),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngForOf",core.bMT(3,3,core.bMT(2,1,ctx_r1.requestMap$)))}}let NotifyRequestsStatusComponent=(()=>{class NotifyRequestsStatusComponent2{constructor(notifyInfoService){this.notifyInfoService=notifyInfoService}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,operators.qD)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,operators.Bo)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,cjs.map)(data=>this.groupDataByStatus(data)))}groupDataByStatus(notifyRequestsStatus){const statusMap=new Map;return notifyRequestsStatus.notifyStatus?.forEach(notifyStatus=>{const status=notifyStatus.status;statusMap.has(status)||statusMap.set(status,[]),statusMap.get(status)?.push(notifyStatus)}),statusMap}static#_=this.\u0275fac=function(t){return new(t||NotifyRequestsStatusComponent2)(core.rXU(notify_services_status_data_service.NotifyRequestsStatusDataService))};static#_2=this.\u0275cmp=core.VBU({type:NotifyRequestsStatusComponent2,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"status","data"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,NotifyRequestsStatusComponent_ng_container_0_Template,4,5,"ng-container",0),core.nI1(1,"async")),2&rf){let tmp_0_0;core.Y8G("ngIf",(null==(tmp_0_0=core.bMT(1,1,ctx.requestMap$))?null:tmp_0_0.size)>0)}},dependencies:[RequestStatusAlertBoxComponent,common.Jj,common.lG,common.Sq,common.bT],changeDetection:0})}return NotifyRequestsStatusComponent2})()},96041:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>QaEventNotificationComponent});var common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),operators=__webpack_require__(10743),admin_routing_paths=__webpack_require__(6602),request_param_model=__webpack_require__(57699),quality_assurance_source_data_service=__webpack_require__(75672),shared_operators=(__webpack_require__(6721),__webpack_require__(82656)),core=__webpack_require__(68014);let SplitPipe=(()=>{class SplitPipe2{transform(value,separator){return value.split(separator)}static#_=this.\u0275fac=function(t){return new(t||SplitPipe2)};static#_2=this.\u0275pipe=core.EJ8({name:"dsSplit",type:SplitPipe2,pure:!0,standalone:!0})}return SplitPipe2})();const _c0=a0=>({num:a0}),_c1=(a0,a1,a2)=>[a0,a1,"target",a2],_c2=()=>({forward:!0});function QaEventNotificationComponent_ng_container_0_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3)(1,"div",4),core.nrm(2,"img",5),core.nI1(3,"dsSplit"),core.k0s(),core.j41(4,"div",6)(5,"div",7),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"button",8),core.nI1(9,"dsSplit"),core.EFF(10),core.nI1(11,"translate"),core.k0s()()()),2&rf){const source_r1=core.XpG().$implicit,ctx_r1=core.XpG(2);core.R7$(2),core.Mz_("src","assets/images/qa-",core.i5U(3,8,source_r1.id,":")[0],"-logo.png",core.B4B),core.Mz_("alt","",source_r1.id," logo"),core.R7$(4),core.SpI(" ",core.i5U(7,11,"item.qa-event-notification.check.notification-info",core.eq3(19,_c0,source_r1.totalEvents))," "),core.R7$(2),core.Y8G("routerLink",core.sMw(21,_c1,ctx_r1.getQualityAssuranceRoute(),core.i5U(9,14,source_r1.id,":")[0],ctx_r1.item.id))("queryParams",core.lJ4(25,_c2)),core.R7$(2),core.SpI(" ",core.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function QaEventNotificationComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,QaEventNotificationComponent_ng_container_0_ng_container_1_div_1_Template,12,26,"div",2),core.bVm()),2&rf){const source_r1=ctx.$implicit;core.R7$(),core.Y8G("ngIf",source_r1.totalEvents>0)}}function QaEventNotificationComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,QaEventNotificationComponent_ng_container_0_ng_container_1_Template,2,1,"ng-container",1),core.bVm()),2&rf){const sources_r3=ctx.ngIf;core.R7$(),core.Y8G("ngForOf",sources_r3)}}let QaEventNotificationComponent=(()=>{class QaEventNotificationComponent2{constructor(qualityAssuranceSourceDataService){this.qualityAssuranceSourceDataService=qualityAssuranceSourceDataService}ngOnChanges(changes){changes.item&&changes.item.currentValue.uuid!==changes.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const findListTopicOptions={searchParams:[new request_param_model.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(findListTopicOptions,!1).pipe((0,shared_operators.qD)(),(0,operators.Tj)(data=>data.hasSucceeded?data.payload.page:[]),(0,operators.WL)(()=>[]))}getQualityAssuranceRoute(){return(0,admin_routing_paths.b7)()}static#_=this.\u0275fac=function(t){return new(t||QaEventNotificationComponent2)(core.rXU(quality_assurance_source_data_service.QualityAssuranceSourceDataService))};static#_2=this.\u0275cmp=core.VBU({type:QaEventNotificationComponent2,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[core.Jv_([quality_assurance_source_data_service.QualityAssuranceSourceDataService]),core.OA$,core.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert alert-info d-flex flex-row",4,"ngIf"],[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"pl-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(rf,ctx){1&rf&&(core.DNE(0,QaEventNotificationComponent_ng_container_0_Template,2,1,"ng-container",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngIf",core.bMT(1,1,ctx.sources$))},dependencies:[common.bT,common.Sq,common.Jj,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,SplitPipe],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return QaEventNotificationComponent2})()},65925:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>ItemVersionsSharedService});var _shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43750);let ItemVersionsSharedService=(()=>{class ItemVersionsSharedService2{constructor(notificationsService,translateService){this.notificationsService=notificationsService,this.translateService=translateService}static msg(key){return"item.version.create.notification."+key}notifyCreateNewVersion(newVersionRD){const newVersionNumber=newVersionRD?.payload?.version;newVersionRD.hasSucceeded?this.notificationsService.success(null,this.translateService.get(ItemVersionsSharedService2.msg("success"),{version:newVersionNumber})):this.notificationsService.error(null,this.translateService.get(ItemVersionsSharedService2.msg(422===newVersionRD?.statusCode?"inProgress":"failure")))}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsSharedService2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_1__.KVO(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__.c$))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.jDH({token:ItemVersionsSharedService2,factory:ItemVersionsSharedService2.\u0275fac,providedIn:"root"})}return ItemVersionsSharedService2})()},32137:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>ItemVersionsSummaryModalComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(28955),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(74785),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32943),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71781);const _c0=a0=>({version:a0});function ItemVersionsSummaryModalComponent_div_0_span_11_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.i5U(2,1,"item.version.create.modal.text.startingFrom",_angular_core__WEBPACK_IMPORTED_MODULE_1__.eq3(4,_c0,ctx_r1.versionNumber))," ")}}function ItemVersionsSummaryModalComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div")(1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(4,"button",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalClose())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(5,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"div",5)(8,"p",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(11,ItemVersionsSummaryModalComponent_div_0_span_11_Template,3,6,"span",7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(12,"div",8)(13,"label",9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(14),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(15,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(16,"input",10),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mxI("ngModelChange",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.DH7(ctx_r1.newVersionSummary,$event)||(ctx_r1.newVersionSummary=$event),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("keyup.enter",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalSubmit())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(18,"div",11)(19,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(20,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalClose())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(21,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(22),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(23,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(24,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Njj(ctx_r1.onModalSubmit())}),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(26,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(3,10,"item.version.create.modal.header")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(10,12,"item.version.create.modal.text")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("ngIf",!ctx_r1.firstVersion),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(15,14,"item.version.create.modal.form.summary.label"),":"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(17,16,"item.version.create.modal.form.summary.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R50("ngModel",ctx_r1.newVersionSummary),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("title",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(20,18,"item.version.create.modal.button.cancel.tooltip")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(23,20,"item.version.create.modal.button.cancel")," "),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.FS9("title",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(25,22,"item.version.create.modal.button.confirm.tooltip")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(28,24,"item.version.create.modal.button.confirm")," ")}}function ItemVersionsSummaryModalComponent_ng_template_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(3,"div",5)(4,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(8,"ds-loading",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(2,3,"item.version.create.modal.submitted.header")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(6,5,"item.version.create.modal.submitted.text")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("showMessage",!1))}let ItemVersionsSummaryModalComponent=(()=>{class ItemVersionsSummaryModalComponent2{constructor(activeModal){this.activeModal=activeModal,this.firstVersion=!0,this.createVersionEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.bkB}ngOnInit(){this.submitted$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(!1)}onModalClose(){this.activeModal.dismiss()}beforeDismiss(){return!this.submitted$.getValue()}onModalSubmit(){this.createVersionEvent.emit(this.newVersionSummary),this.submitted$.next(!0)}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsSummaryModalComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__.Lw))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.VBU({type:ItemVersionsSummaryModalComponent2,selectors:[["ds-item-versions-summary-modal"]],outputs:{createVersionEvent:"createVersionEvent"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.aNF],decls:4,vars:4,consts:[["waiting",""],[4,"ngIf","ngIfElse"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[4,"ngIf"],[1,"form-group"],["for","summary"],["type","text","id","summary",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","placeholder"],[1,"modal-footer","space-children-mr"],["type","button",1,"btn","btn-outline-secondary","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-times","fa-fw"],["type","submit",1,"btn","btn-success","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"d-flex","justify-content-center"],[3,"showMessage"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(0,ItemVersionsSummaryModalComponent_div_0_Template,29,26,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(2,ItemVersionsSummaryModalComponent_ng_template_2_Template,9,7,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.C5r)),2&rf){const waiting_r3=_angular_core__WEBPACK_IMPORTED_MODULE_1__.sdS(3);_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("ngIf",!0!==_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(1,2,ctx.submitted$))("ngIfElse",waiting_r3)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_4__.bT,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.vS,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_0__.v,_angular_common__WEBPACK_IMPORTED_MODULE_4__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.D9]})}return ItemVersionsSummaryModalComponent2})()},25006:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>ItemVersionsComponent});var common=__webpack_require__(84739),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),configuration_data_service=__webpack_require__(44994),authorization_data_service=__webpack_require__(30289),feature_id=__webpack_require__(29321),version_data_service=__webpack_require__(80148),version_history_data_service=__webpack_require__(1555),pagination_service=__webpack_require__(39304),shared_operators=(__webpack_require__(6721),__webpack_require__(82656)),alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),pagination_component=__webpack_require__(91904),pagination_component_options_model=__webpack_require__(64694),paginated_search_options_model=__webpack_require__(80780),follow_link_config_model=__webpack_require__(32181),var_directive=__webpack_require__(45961),item_page_routing_paths=__webpack_require__(63254),core=__webpack_require__(68014),router=__webpack_require__(64247),item_data_service=__webpack_require__(94743),workflowitem_data_service=(__webpack_require__(80170),__webpack_require__(65500)),workspaceitem_data_service=__webpack_require__(2402),ng_bootstrap=__webpack_require__(71781);const _c0=a0=>({version:a0});let ItemVersionsDeleteModalComponent=(()=>{class ItemVersionsDeleteModalComponent2{constructor(activeModal){this.activeModal=activeModal,this.response=new core.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsDeleteModalComponent2)(core.rXU(ng_bootstrap.Lw))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsDeleteModalComponent2,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[core.aNF],decls:22,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div")(1,"div",0),core.EFF(2),core.nI1(3,"translate"),core.j41(4,"button",1),core.bIt("click",function(){return ctx.onModalClose()}),core.j41(5,"span",2),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",3)(8,"p",4),core.EFF(9),core.nI1(10,"translate"),core.k0s()(),core.j41(11,"div",5)(12,"button",6),core.nI1(13,"translate"),core.bIt("click",function(){return ctx.onModalClose()}),core.nrm(14,"i",7),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"button",8),core.nI1(18,"translate"),core.bIt("click",function(){return ctx.onModalSubmit()}),core.nrm(19,"i",9),core.EFF(20),core.nI1(21,"translate"),core.k0s()()()),2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,6,"item.version.delete.modal.header")," "),core.R7$(7),core.JRh(core.i5U(10,8,"item.version.delete.modal.text",core.eq3(19,_c0,ctx.versionNumber))),core.R7$(3),core.FS9("title",core.bMT(13,11,"item.version.delete.modal.button.cancel.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(16,13,"item.version.delete.modal.button.cancel")," "),core.R7$(2),core.FS9("title",core.bMT(18,15,"item.version.delete.modal.button.confirm.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(21,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9]})}return ItemVersionsDeleteModalComponent2})();var item_versions_shared_service=__webpack_require__(65925),item_versions_summary_modal_component=__webpack_require__(32137);function ItemVersionsRowElementVersionComponent_span_1_Template(rf,ctx){1&rf&&core.nrm(0,"span")}function ItemVersionsRowElementVersionComponent_ng_template_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",9),core.EFF(1),core.k0s()),2&rf){const ctx_r0=core.XpG();core.Y8G("routerLink",ctx_r0.getVersionRoute(ctx_r0.version.id)),core.R7$(),core.JRh(ctx_r0.version.version)}}function ItemVersionsRowElementVersionComponent_ng_template_6_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const ctx_r0=core.XpG();core.SpI(" ",ctx_r0.version.version," ")}}function ItemVersionsRowElementVersionComponent_span_8_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1,"*"),core.k0s())}function ItemVersionsRowElementVersionComponent_span_9_Template(rf,ctx){1&rf&&(core.j41(0,"span",10),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function ItemVersionsRowElementVersionComponent_span_11_Template(rf,ctx){1&rf&&(core.j41(0,"span",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workflowItem")," "))}function ItemVersionsRowElementVersionComponent_div_14_button_1_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",14),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r2);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.editWorkspaceItem(ctx_r0.workspaceId$))}),core.nrm(2,"i",15),core.k0s()}2&rf&&core.FS9("title",core.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function ItemVersionsRowElementVersionComponent_div_14_ng_container_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.qex(0),core.j41(1,"button",16),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r3);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.createNewVersion(ctx_r0.version))}),core.nrm(3,"i",17),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.FS9("title",core.bMT(2,2,ctx_r0.createVersionTitle)),core.Y8G("disabled",ctx_r0.isAnyBeingEdited()||ctx_r0.hasDraftVersion)}}function ItemVersionsRowElementVersionComponent_div_14_ng_container_5_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.qex(0),core.j41(1,"button",18),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.deleteVersion(ctx_r0.version,ctx_r0.version.id===ctx_r0.itemVersion.id))}),core.nrm(3,"i",19),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.FS9("title",core.bMT(2,3,"item.version.history.table.action.deleteVersion")),core.Y8G("ngClass",ctx_r0.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("disabled",ctx_r0.isAnyBeingEdited())}}function ItemVersionsRowElementVersionComponent_div_14_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",12),core.DNE(1,ItemVersionsRowElementVersionComponent_div_14_button_1_Template,3,3,"button",13),core.nI1(2,"async"),core.DNE(3,ItemVersionsRowElementVersionComponent_div_14_ng_container_3_Template,4,4,"ng-container",4),core.nI1(4,"async"),core.DNE(5,ItemVersionsRowElementVersionComponent_div_14_ng_container_5_Template,4,5,"ng-container",4),core.nI1(6,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",core.bMT(2,3,ctx_r0.workspaceId$)),core.R7$(2),core.Y8G("ngIf",core.bMT(4,5,ctx_r0.canCreateVersion$)),core.R7$(2),core.Y8G("ngIf",core.bMT(6,7,ctx_r0.canDeleteVersion$))}}let ItemVersionsRowElementVersionComponent=(()=>{class ItemVersionsRowElementVersionComponent2{constructor(workspaceItemDataService,workflowItemDataService,router2,itemService,authorizationService,itemVersionShared,versionHistoryService,versionService,notificationsService,translateService,modalService){this.workspaceItemDataService=workspaceItemDataService,this.workflowItemDataService=workflowItemDataService,this.router=router2,this.itemService=itemService,this.authorizationService=authorizationService,this.itemVersionShared=itemVersionShared,this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.notificationsService=notificationsService,this.translateService=translateService,this.modalService=modalService,this.versionsHistoryChange=new core.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized(feature_id._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(versionItem){return this.hasDraftVersion?versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workspaceItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id)):(0,cjs.of)(void 0)}getWorkflowId(versionItem){return this.getWorkspaceId(versionItem).pipe((0,cjs.concatMap)(workspaceId=>workspaceId?(0,cjs.of)(void 0):versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workflowItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id))))}editWorkspaceItem(id$){id$.subscribe(id=>{this.router.navigateByUrl("workspaceitems/"+id+"/edit")})}canDeleteVersion(version){return this.authorizationService.isAuthorized(feature_id._.CanDeleteVersion,version.self)}getVersionRoute(versionId){return(0,item_page_routing_paths.vf)(versionId)}createNewVersion(version){const versionNumber=version.version,activeModal=this.modalService.open(item_versions_summary_modal_component.L);activeModal.componentInstance.versionNumber=versionNumber,activeModal.componentInstance.createVersionEvent.pipe((0,operators.ZZ)(summary=>(0,cjs.combineLatest)([(0,cjs.of)(summary),version.item.pipe((0,shared_operators.ak)())])),(0,operators.ZZ)(([summary,item])=>this.versionHistoryService.createVersion(item._links.self.href,summary)),(0,shared_operators.qD)(),(0,operators.Mi)(()=>activeModal.close()),(0,operators.Mi)(newVersionRD=>{if(this.itemVersionShared.notifyCreateNewVersion(newVersionRD),newVersionRD.hasSucceeded){const versionHistory$=this.versionService.getHistoryFromVersion(version).pipe((0,operators.Mi)(versionHistory=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(versionHistory.id)}));this.versionsHistoryChange.emit(versionHistory$)}}),(0,shared_operators.ak)(),(0,operators.nx)(newVersion=>this.itemService.findByHref(newVersion._links.item.href)),(0,shared_operators.ak)(),(0,operators.nx)(newVersionItem=>this.workspaceItemDataService.findByItem(newVersionItem.uuid,!0,!1)),(0,shared_operators.ak)()).subscribe(wsItem=>{this.router.navigateByUrl("workspaceitems/"+wsItem.id+"/edit")})}deleteVersion(version,redirectToLatest){const versionNumber=version.version,versionItem$=version.item,activeModal=this.modalService.open(ItemVersionsDeleteModalComponent);activeModal.componentInstance.versionNumber=version.version,activeModal.componentInstance.firstVersion=!1,activeModal.componentInstance.response.pipe((0,operators.s)(1)).subscribe(ok=>{ok&&versionItem$.pipe((0,shared_operators.ak)(),(0,operators.ZZ)(item=>(0,cjs.combineLatest)([(0,cjs.of)(item),this.versionHistoryService.getVersionHistoryFromVersion$(version)])),(0,operators.ZZ)(([item,versionHistory])=>(0,cjs.combineLatest)([this.deleteItemAndGetResult$(item),(0,cjs.of)(versionHistory)])),(0,operators.ZZ)(([deleteItemResult,versionHistory])=>(0,cjs.combineLatest)([(0,cjs.of)(deleteItemResult),this.versionHistoryService.getLatestVersionItemFromHistory$(versionHistory).pipe((0,operators.Mi)(()=>{this.versionsHistoryChange.emit((0,cjs.of)(versionHistory))}))]))).subscribe(([deleteHasSucceeded,newLatestVersionItem])=>{if(deleteHasSucceeded?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:versionNumber})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:versionNumber})),redirectToLatest){const path=(0,item_page_routing_paths.nF)(newLatestVersionItem);this.router.navigateByUrl(path)}})})}deleteItemAndGetResult$(item){return this.itemService.delete(item.id).pipe((0,shared_operators.qD)(),(0,operators.Tj)(deleteItemRes=>deleteItemRes.hasSucceeded),(0,operators.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsRowElementVersionComponent2)(core.rXU(workspaceitem_data_service.WorkspaceitemDataService),core.rXU(workflowitem_data_service.WorkflowItemDataService),core.rXU(router.Ix),core.rXU(item_data_service.ItemDataService),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(item_versions_shared_service.h),core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(ng_bootstrap.Bq))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsRowElementVersionComponent2,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[core.aNF],decls:15,vars:15,consts:[["versionNumberWithLink",""],["versionNumberWithoutLink",""],[1,"left-column"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf"],["class","text-light badge badge-primary ml-3",4,"ngIf"],["class","text-light badge badge-info ml-3",4,"ngIf"],[1,"right-column"],["class","btn-group edit-field space-children-mr",4,"ngIf"],[3,"routerLink"],[1,"text-light","badge","badge-primary","ml-3"],[1,"text-light","badge","badge-info","ml-3"],[1,"btn-group","edit-field","space-children-mr"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","disabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","disabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",2),core.DNE(1,ItemVersionsRowElementVersionComponent_span_1_Template,1,0,"span",3),core.nI1(2,"async"),core.nI1(3,"async"),core.DNE(4,ItemVersionsRowElementVersionComponent_ng_template_4_Template,2,2,"ng-template",null,0,core.C5r)(6,ItemVersionsRowElementVersionComponent_ng_template_6_Template,1,1,"ng-template",null,1,core.C5r)(8,ItemVersionsRowElementVersionComponent_span_8_Template,2,0,"span",4)(9,ItemVersionsRowElementVersionComponent_span_9_Template,3,3,"span",5),core.nI1(10,"async"),core.DNE(11,ItemVersionsRowElementVersionComponent_span_11_Template,3,3,"span",6),core.nI1(12,"async"),core.k0s(),core.j41(13,"div",7),core.DNE(14,ItemVersionsRowElementVersionComponent_div_14_Template,7,9,"div",8),core.k0s()),2&rf){const versionNumberWithLink_r5=core.sdS(5),versionNumberWithoutLink_r6=core.sdS(7);core.R7$(),core.Y8G("ngIf",core.bMT(2,7,ctx.workspaceId$)||core.bMT(3,9,ctx.workflowId$))("ngIfThen",versionNumberWithoutLink_r6)("ngIfElse",versionNumberWithLink_r5),core.R7$(7),core.Y8G("ngIf",(null==ctx.version?null:ctx.version.id)===(null==ctx.itemVersion?null:ctx.itemVersion.id)),core.R7$(),core.Y8G("ngIf",core.bMT(10,11,ctx.workspaceId$)),core.R7$(2),core.Y8G("ngIf",core.bMT(12,13,ctx.workflowId$)),core.R7$(3),core.Y8G("ngIf",ctx.displayActions)}},dependencies:[common.Jj,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,common.YU,common.bT],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}return ItemVersionsRowElementVersionComponent2})();const item_versions_component_c0=a0=>({version:a0});function ItemVersionsComponent_div_0_div_1_div_1_h2_1_Template(rf,ctx){1&rf&&(core.j41(0,"h2",9),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.head")))}function ItemVersionsComponent_div_0_div_1_div_1_ds_alert_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",10),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const itemVersion_r1=core.XpG(2).ngVar,ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertTypeEnum.Info),core.R7$(),core.SpI(" ",core.i5U(2,2,"item.version.history.selected.alert",core.eq3(5,item_versions_component_c0,itemVersion_r1.version))," ")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_th_7_Template(rf,ctx){1&rf&&(core.j41(0,"th",13),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.table.editor")))}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_td_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"td",25),core.EFF(1),core.k0s()),2&rf){const version_r5=core.XpG().$implicit;core.R7$(),core.SpI(" ",null==version_r5?null:version_r5.submitterName," ")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_container_11_Template(rf,ctx){1&rf&&core.eu8(0)}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_12_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const version_r5=core.XpG().$implicit;core.JRh(null==version_r5?null:version_r5.summary)}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_14_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"input",26),core.nI1(1,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.DH7(ctx_r1.versionBeingEditedSummary,$event)||(ctx_r1.versionBeingEditedSummary=$event),core.Njj($event)}),core.bIt("keyup.enter",function(){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.Njj(ctx_r1.onSummarySubmit())}),core.k0s()}if(2&rf){const ctx_r1=core.XpG(6);core.R50("ngModel",ctx_r1.versionBeingEditedSummary),core.BMQ("aria-label",core.bMT(1,2,"item.version.history.table.action.editSummary"))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_1_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.qex(0),core.j41(1,"button",29),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r7);const ctx_r1=core.XpG(7);return core.Njj(ctx_r1.disableVersionEditing())}),core.nrm(3,"i",30),core.k0s(),core.bVm()}if(2&rf){const version_r5=core.XpG(2).$implicit,ctx_r1=core.XpG(5);core.R7$(),core.FS9("title",core.bMT(2,2,"item.version.history.table.action.discardSummary")),core.Y8G("ngClass",ctx_r1.isThisBeingEdited(version_r5)?"btn-outline-warning":"btn-outline-primary")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_1_Template(rf,ctx){if(1&rf){const _r8=core.RV6();core.j41(0,"button",33),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r8);const version_r5=core.XpG(3).$implicit,ctx_r1=core.XpG(5);return core.Njj(ctx_r1.enableVersionEditing(version_r5))}),core.nrm(2,"i",34),core.k0s()}if(2&rf){const ctx_r1=core.XpG(8);core.FS9("title",core.bMT(1,2,"item.version.history.table.action.editSummary")),core.Y8G("disabled",ctx_r1.isAnyBeingEdited())}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_2_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"button",35),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r9);const ctx_r1=core.XpG(8);return core.Njj(ctx_r1.onSummarySubmit())}),core.nrm(2,"i",36),core.k0s()}2&rf&&core.FS9("title",core.bMT(1,1,"item.version.history.table.action.saveSummary"))}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_1_Template,3,4,"button",31)(2,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_button_2_Template,3,3,"button",32),core.bVm()),2&rf){const version_r5=core.XpG(2).$implicit,ctx_r1=core.XpG(5);core.R7$(),core.Y8G("ngIf",!ctx_r1.isThisBeingEdited(version_r5)),core.R7$(),core.Y8G("ngIf",ctx_r1.isThisBeingEdited(version_r5))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",27),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_1_Template,4,4,"ng-container",28),core.nI1(2,"async"),core.DNE(3,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_ng_container_3_Template,3,2,"ng-container",28),core.nI1(4,"async"),core.k0s()),2&rf){const version_r5=core.XpG().$implicit,ctx_r1=core.XpG(5);core.R7$(),core.Y8G("ngIf",core.bMT(2,2,ctx_r1.canEditVersion$(version_r5))&&ctx_r1.isThisBeingEdited(version_r5)),core.R7$(2),core.Y8G("ngIf",core.bMT(4,4,ctx_r1.canEditVersion$(version_r5)))}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"tr",16)(1,"td",17)(2,"ds-item-versions-row-element-version",18),core.nI1(3,"async"),core.bIt("versionsHistoryChange",function($event){core.eBV(_r4);const ctx_r1=core.XpG(5);return core.Njj(ctx_r1.getAllVersions($event))}),core.k0s()(),core.DNE(4,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_td_4_Template,2,1,"td",19),core.nI1(5,"async"),core.j41(6,"td",20),core.EFF(7),core.nI1(8,"date"),core.k0s(),core.j41(9,"td",21)(10,"div",22),core.DNE(11,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_container_11_Template,1,0,"ng-container",23)(12,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_12_Template,1,1,"ng-template",null,0,core.C5r)(14,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_ng_template_14_Template,2,4,"ng-template",null,1,core.C5r),core.k0s(),core.DNE(16,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_div_16_Template,5,6,"div",24),core.k0s()()}if(2&rf){const version_r5=ctx.$implicit,showSummary_r10=core.sdS(13),editSummary_r11=core.sdS(15),itemVersion_r1=core.XpG(3).ngVar,ctx_r1=core.XpG(2);core.Y8G("id","version-row-"+version_r5.id),core.R7$(2),core.Y8G("hasDraftVersion",core.bMT(3,13,ctx_r1.hasDraftVersion$))("version",version_r5)("item",ctx_r1.item)("displayActions",ctx_r1.displayActions)("itemVersion",itemVersion_r1)("versionBeingEditedNumber",ctx_r1.versionBeingEditedNumber),core.R7$(2),core.Y8G("ngIf",core.bMT(5,15,ctx_r1.showSubmitter$)),core.R7$(3),core.SpI(" ",core.i5U(8,17,null==version_r5?null:version_r5.created,"yyyy-MM-dd HH:mm:ss")," "),core.R7$(4),core.Y8G("ngIf",ctx_r1.isThisBeingEdited(version_r5))("ngIfThen",editSummary_r11)("ngIfElse",showSummary_r10),core.R7$(5),core.Y8G("ngIf",ctx_r1.displayActions)}}function ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-pagination",11),core.bIt("paginationChange",function(){core.eBV(_r3);const ctx_r1=core.XpG(4);return core.Njj(ctx_r1.onPageChange())}),core.j41(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_th_7_Template,3,3,"th",14),core.nI1(8,"async"),core.j41(9,"th",13),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",13),core.EFF(13),core.nI1(14,"translate"),core.k0s()()(),core.j41(15,"tbody"),core.DNE(16,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_tr_16_Template,17,20,"tr",15),core.k0s()(),core.j41(17,"div"),core.EFF(18),core.nI1(19,"translate"),core.k0s()()}if(2&rf){const versions_r12=core.XpG(3).ngVar,ctx_r1=core.XpG();core.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.options)("collectionSize",null==versions_r12?null:versions_r12.totalElements)("retainScrollPosition",!0),core.R7$(5),core.JRh(core.bMT(6,11,"item.version.history.table.version")),core.R7$(2),core.Y8G("ngIf",core.bMT(8,13,ctx_r1.showSubmitter$)),core.R7$(3),core.JRh(core.bMT(11,15,"item.version.history.table.date")),core.R7$(3),core.JRh(core.bMT(14,17,"item.version.history.table.summary")),core.R7$(3),core.Y8G("ngForOf",null==versions_r12?null:versions_r12.page),core.R7$(2),core.SpI("*\xa0",core.bMT(19,19,"item.version.history.selected"),"")}}function ItemVersionsComponent_div_0_div_1_div_1_ds_alert_4_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-alert",37),2&rf){const ctx_r1=core.XpG(4);core.Y8G("content","item.version.history.empty")("type",ctx_r1.AlertTypeEnum.Info)}}function ItemVersionsComponent_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_h2_1_Template,3,3,"h2",5)(2,ItemVersionsComponent_div_0_div_1_div_1_ds_alert_2_Template,3,7,"ds-alert",6)(3,ItemVersionsComponent_div_0_div_1_div_1_ds_pagination_3_Template,20,21,"ds-pagination",7)(4,ItemVersionsComponent_div_0_div_1_div_1_ds_alert_4_Template,1,2,"ds-alert",8),core.k0s()),2&rf){const itemVersion_r1=core.XpG().ngVar,versions_r12=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r1.displayTitle),core.R7$(),core.Y8G("ngIf",itemVersion_r1),core.R7$(),core.Y8G("ngIf",(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length)>0),core.R7$(),core.Y8G("ngIf",!itemVersion_r1||0===(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length))}}function ItemVersionsComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_div_0_div_1_div_1_Template,5,4,"div",3),core.k0s()),2&rf){const versions_r12=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",(null==versions_r12||null==versions_r12.page?null:versions_r12.page.length)>0||ctx_r1.displayWhenEmpty)}}function ItemVersionsComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_div_0_div_1_Template,2,1,"div",2),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_2_0;const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngVar",null==(tmp_2_0=core.bMT(2,1,ctx_r1.versionRD$))?null:tmp_2_0.payload)}}let ItemVersionsComponent=(()=>{class ItemVersionsComponent2{constructor(versionHistoryService,versionService,paginationService,notificationsService,translateService,authorizationService,configurationService){this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.paginationService=paginationService,this.notificationsService=notificationsService,this.translateService=translateService,this.authorizationService=authorizationService,this.configurationService=configurationService,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=alert_type.v,this.versionsRD$=new cjs.BehaviorSubject(null),this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new pagination_component_options_model.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(version){return version?.version===this.versionBeingEditedNumber}enableVersionEditing(version){this.versionBeingEditedSummary=version?.summary,this.versionBeingEditedNumber=version?.version,this.versionBeingEditedId=version?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,shared_operators.yd)(),(0,operators.nx)(findRes=>{const updatedVersion=Object.assign({},findRes.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(updatedVersion).pipe((0,shared_operators.qD)())})).subscribe(updatedVersionRD=>{updatedVersionRD.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(version){return this.authorizationService.isAuthorized(feature_id._.CanEditVersion,version.self)}showSubmitter(){const includeSubmitter$=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,shared_operators.ak)(),(0,operators.Tj)(configurationProperty=>configurationProperty.values[0]),(0,operators.ql)(!1)),isAdmin$=(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.IsCollectionAdmin),this.authorizationService.isAuthorized(feature_id._.IsCommunityAdmin),this.authorizationService.isAuthorized(feature_id._.AdministratorOf)]).pipe((0,operators.Tj)(([isCollectionAdmin,isCommunityAdmin,isSiteAdmin])=>isCollectionAdmin||isCommunityAdmin||isSiteAdmin),(0,operators.s)(1));return(0,cjs.combineLatest)([includeSubmitter$,isAdmin$]).pipe((0,operators.Tj)(([includeSubmitter,isAdmin])=>includeSubmitter&&isAdmin))}getAllVersions(versionHistory$){const currentPagination=this.paginationService.getCurrentPagination(this.options.id,this.options);(0,cjs.combineLatest)([versionHistory$,currentPagination]).pipe((0,operators.nx)(([versionHistory,options])=>this.versionHistoryService.getVersions(versionHistory.id,new paginated_search_options_model.C({pagination:Object.assign({},options,{currentPage:options.currentPage})}),!1,!0,(0,follow_link_config_model.s)("item"),(0,follow_link_config_model.s)("eperson"))),(0,shared_operators.qD)()).subscribe(res=>{this.versionsRD$.next(res)})}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,empty_util.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,shared_operators.v7)(),(0,shared_operators.Bo)(),(0,empty_util.Az)(),(0,operators.nx)(version=>version.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,empty_util.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(res=>!!res?.draftVersion)),this.getAllVersions(this.versionHistory$),this.hasEpersons$=this.versionsRD$.pipe((0,shared_operators.v7)(),(0,shared_operators.Bo)(),(0,empty_util.Az)(),(0,operators.Tj)(versions=>versions.page.filter(version=>void 0!==version.eperson).length>0),(0,operators.ql)(!1)),this.itemPageRoutes$=this.versionsRD$.pipe((0,shared_operators.Hz)(),(0,operators.nx)(versions=>(0,cjs.combineLatest)(versions.page.map(version=>version.item.pipe((0,shared_operators.Hz)())))),(0,operators.Tj)(versions=>{const itemPageRoutes={};return versions.forEach(item=>itemPageRoutes[item.uuid]=(0,item_page_routing_paths._o)(item)),itemPageRoutes})))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsComponent2)(core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(pagination_service.m),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(configuration_data_service.ConfigurationDataService))};static#_2=this.\u0275cmp=core.VBU({type:ItemVersionsComponent2,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[["showSummary",""],["editSummary",""],[4,"ngVar"],["class","mb-2",4,"ngIf"],[1,"mb-2"],["class","h4",4,"ngIf"],[3,"type",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition","paginationChange",4,"ngIf"],[3,"content","type",4,"ngIf"],[1,"h4"],[3,"type"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],["scope","col",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],["class","version-row-element-editor",4,"ngIf"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-left"],[4,"ngIf","ngIfThen","ngIfElse"],["class","float-right btn-group edit-field space-children-mr",4,"ngIf"],[1,"version-row-element-editor"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"float-right","btn-group","edit-field","space-children-mr"],[4,"ngIf"],[1,"btn","btn-sm",3,"click","ngClass","title"],[1,"fas","fa-undo-alt","fa-fw"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","disabled","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[3,"content","type"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ItemVersionsComponent_div_0_Template,3,3,"div",2),core.nI1(1,"async")),2&rf){let tmp_0_0;core.Y8G("ngVar",null==(tmp_0_0=core.bMT(1,1,ctx.versionsRD$))?null:tmp_0_0.payload)}},dependencies:[var_directive.r,common.bT,alert_component.C,pagination_component.e,common.pM,common.YU,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,common.Jj,common.vh,ngx_translate_core.h,ngx_translate_core.D9,ItemVersionsRowElementVersionComponent]})}return ItemVersionsComponent2})()},8237:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>ItemVersionsNoticeComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1555),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(6721),__webpack_require__(82656)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14467),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82555),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77028),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(63254),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014);const _c0=a0=>({destination:a0});function ItemVersionsNoticeComponent_ds_alert_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-alert",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate")),2&rf){let tmp_1_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("content",_angular_core__WEBPACK_IMPORTED_MODULE_5__.i5U(3,7,"item.version.notice",_angular_core__WEBPACK_IMPORTED_MODULE_5__.eq3(10,_c0,ctx_r0.getItemPage(null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,3,ctx_r0.latestVersion$))?null:tmp_1_0.item))?null:tmp_1_0.payload))))("dismissible",!1)("type",ctx_r0.AlertTypeEnum.Warning)}}let ItemVersionsNoticeComponent=(()=>{class ItemVersionsNoticeComponent2{constructor(versionHistoryService){this.versionHistoryService=versionHistoryService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__.v}ngOnInit(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.v7)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(version=>version.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(vhRD=>vhRD.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(vhRD.payload):rxjs__WEBPACK_IMPORTED_MODULE_8__.EMPTY)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(versionRD=>versionRD.hasSucceeded?this.versionHistoryService.isLatest$(versionRD.payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(isLatest=>null!=isLatest&&!isLatest)):(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(!1)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.ql)(!1)))}getItemPage(item){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(item))return(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__._o)(item)}static#_=this.\u0275fac=function(t){return new(t||ItemVersionsNoticeComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__.VersionHistoryDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ItemVersionsNoticeComponent2,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type",4,"ngIf"],[3,"content","dismissible","type"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(0,ItemVersionsNoticeComponent_ds_alert_0_Template,4,12,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",!0===_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,1,ctx.showLatestVersionNotice$))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.D9],encapsulation:2})}return ItemVersionsNoticeComponent2})()},19941:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ee:()=>DsoWithdrawnReinstateModalService,el:()=>REQUEST_REINSTATE,pc:()=>REQUEST_WITHDRAWN});var operators=__webpack_require__(10743),authorization_data_service=__webpack_require__(30289),item_data_service=__webpack_require__(94743),quality_assurance_event_data_service=__webpack_require__(77231),shared_operators=__webpack_require__(82656),common=__webpack_require__(84739),core=__webpack_require__(68014),fesm2022_forms=__webpack_require__(28955),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),themed_loading_component=__webpack_require__(32943),ng_bootstrap=__webpack_require__(71781);function ItemWithdrawnReinstateModalComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"button",14),core.bIt("click",function(){core.eBV(_r2);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onModalClose())}),core.j41(4,"span",15),core.EFF(5,"\xd7"),core.k0s()()()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.qa.withdrawn.modal.header")," "))}function ItemWithdrawnReinstateModalComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div"),core.DNE(1,ItemWithdrawnReinstateModalComponent_div_0_div_1_Template,6,3,"div",3),core.j41(2,"div",4)(3,"div",5)(4,"label",6),core.EFF(5),core.nI1(6,"translate"),core.nI1(7,"translate"),core.k0s(),core.j41(8,"label",6),core.EFF(9),core.nI1(10,"translate"),core.nI1(11,"translate"),core.k0s(),core.j41(12,"textarea",7),core.nI1(13,"translate"),core.nI1(14,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.DH7(ctx_r2.reason,$event)||(ctx_r2.reason=$event),core.Njj($event)}),core.k0s()()(),core.j41(15,"div",8)(16,"button",9),core.nI1(17,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onModalClose())}),core.nrm(18,"i",10),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.j41(21,"button",11),core.nI1(22,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onModalSubmit())}),core.nrm(23,"i",12),core.EFF(24),core.nI1(25,"translate"),core.nI1(26,"translate"),core.k0s()()()}if(2&rf){const ctx_r2=core.XpG(),reinstateHeader_r4=core.sdS(5);core.R7$(),core.Y8G("ngIf",ctx_r2.canWithdraw)("ngIfElse",reinstateHeader_r4),core.R7$(4),core.JRh(ctx_r2.canWithdraw?core.bMT(6,10,"qa-withdrawn.create.modal.form.summary.label"):core.bMT(7,12,"qa-reinstate.create.modal.form.summary.label")),core.R7$(4),core.JRh(ctx_r2.canWithdraw?core.bMT(10,14,"qa-withdrawn.create.modal.form.summary2.label"):core.bMT(11,16,"qa-reinstate.create.modal.form.summary2.label")),core.R7$(3),core.FS9("placeholder",ctx_r2.canWithdraw?core.bMT(13,18,"qa-withdrown.modal.form.summary.placeholder"):core.bMT(14,20,"qa-reinstate.modal.form.summary.placeholder")),core.R50("ngModel",ctx_r2.reason),core.R7$(4),core.FS9("title",core.bMT(17,22,"item.qa.withdrawn-reinstate.create.modal.button.cancel.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(20,24,"item.qa.withdrawn-reinstate.create.modal.button.cancel")," "),core.R7$(2),core.FS9("title",core.bMT(22,26,"item.qa.withdrawn-reinstate.modal.button.confirm.tooltip")),core.R7$(3),core.SpI(" ",ctx_r2.canWithdraw?core.bMT(25,28,"qa-withdrown.create.modal.button.confirm"):core.bMT(26,30,"qa-reinstate.create.modal.button.confirm")," ")}}function ItemWithdrawnReinstateModalComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.k0s(),core.j41(3,"div",4)(4,"div",16),core.nrm(5,"ds-loading",17),core.k0s()()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,2,"item.qa.withdrawn.modal.submitted.header")),core.R7$(4),core.Y8G("showMessage",!1))}function ItemWithdrawnReinstateModalComponent_ng_template_4_div_0_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",13),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"button",14),core.bIt("click",function(){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onModalClose())}),core.j41(4,"span",15),core.EFF(5,"\xd7"),core.k0s()()()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.qa.reinstate.modal.header")," "))}function ItemWithdrawnReinstateModalComponent_ng_template_4_Template(rf,ctx){if(1&rf&&core.DNE(0,ItemWithdrawnReinstateModalComponent_ng_template_4_div_0_Template,6,3,"div",18),2&rf){const ctx_r2=core.XpG();core.Y8G("ngIf",!ctx_r2.canWithdraw)}}let ItemWithdrawnReinstateModalComponent=(()=>{class ItemWithdrawnReinstateModalComponent2{constructor(activeModal,authorizationService){this.activeModal=activeModal,this.authorizationService=authorizationService,this.submitted$=new cjs.BehaviorSubject(!1),this.createQAEvent=new core.bkB}onModalClose(){this.activeModal.close()}beforeDismiss(){return!this.submitted$.getValue()}onModalSubmit(){this.submitted$.next(!0),this.createQAEvent.emit(this.reason)}setWithdraw(state){this.canWithdraw=state}static#_=this.\u0275fac=function(t){return new(t||ItemWithdrawnReinstateModalComponent2)(core.rXU(ng_bootstrap.Lw),core.rXU(authorization_data_service.AuthorizationDataService))};static#_2=this.\u0275cmp=core.VBU({type:ItemWithdrawnReinstateModalComponent2,selectors:[["ds-item-withdrawn-reinstate-modal"]],outputs:{createQAEvent:"createQAEvent"},standalone:!0,features:[core.aNF],decls:6,vars:4,consts:[["waiting",""],["reinstateHeader",""],[4,"ngIf","ngIfElse"],["class","modal-header",4,"ngIf","ngIfElse"],[1,"modal-body"],[1,"form-group"],["for","reason"],["id","reason","rows","6","name","message",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"modal-footer","space-children-mr"],["type","button",1,"btn","btn-outline-secondary","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-times","fa-fw"],["type","submit",1,"btn","btn-success","btn-sm","ml-0",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"d-flex","justify-content-center"],[3,"showMessage"],["class","modal-header",4,"ngIf"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ItemWithdrawnReinstateModalComponent_div_0_Template,27,32,"div",2),core.nI1(1,"async"),core.DNE(2,ItemWithdrawnReinstateModalComponent_ng_template_2_Template,6,4,"ng-template",null,0,core.C5r)(4,ItemWithdrawnReinstateModalComponent_ng_template_4_Template,1,1,"ng-template",null,1,core.C5r)),2&rf){const waiting_r6=core.sdS(3);core.Y8G("ngIf",!0!==core.bMT(1,2,ctx.submitted$))("ngIfElse",waiting_r6)}},dependencies:[common.bT,ngx_translate_core.h,ngx_translate_core.D9,themed_loading_component.v,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,common.Jj]})}return ItemWithdrawnReinstateModalComponent2})();var notifications_service=__webpack_require__(10117),router=__webpack_require__(64247);const REQUEST_WITHDRAWN="REQUEST/WITHDRAWN",REQUEST_REINSTATE="REQUEST/REINSTATE";let DsoWithdrawnReinstateModalService=(()=>{class DsoWithdrawnReinstateModalService2{constructor(router2,modalService,itemService,notificationsService,authorizationService,translateService,qaEventDataService){this.router=router2,this.modalService=modalService,this.itemService=itemService,this.notificationsService=notificationsService,this.authorizationService=authorizationService,this.translateService=translateService,this.qaEventDataService=qaEventDataService}openCreateWithdrawnReinstateModal(dso,correctionType,state){const target=dso.id,activeModal=this.modalService.open(ItemWithdrawnReinstateModalComponent);activeModal.componentInstance.setWithdraw(state),activeModal.componentInstance.createQAEvent.pipe((0,operators.s)(1)).subscribe(reasone=>{this.sendQARequest(target,correctionType,reasone),activeModal.close()})}sendQARequest(target,correctionType,reason){this.qaEventDataService.postData(target,correctionType,"",reason).pipe((0,shared_operators.qD)()).subscribe(res=>{res.hasSucceeded?(this.notificationsService.success(this.translateService.get("request-withdrawn"===correctionType?"correction-type.manage-relation.action.notification.withdrawn":"correction-type.manage-relation.action.notification.reinstate")),this.authorizationService.invalidateAuthorizationsRequestCache(),this.reloadPage(!0)):this.notificationsService.error(this.translateService.get("correction-type.manage-relation.action.notification.error"))})}reloadPage(self,urlToNavigateTo){const url=self?this.router.url:urlToNavigateTo;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([`/${url}`])})}static#_=this.\u0275fac=function(t){return new(t||DsoWithdrawnReinstateModalService2)(core.KVO(router.Ix),core.KVO(ng_bootstrap.Bq),core.KVO(item_data_service.ItemDataService),core.KVO(notifications_service.I),core.KVO(authorization_data_service.AuthorizationDataService),core.KVO(ngx_translate_core.c$),core.KVO(quality_assurance_event_data_service.QualityAssuranceEventDataService))};static#_2=this.\u0275prov=core.jDH({token:DsoWithdrawnReinstateModalService2,factory:DsoWithdrawnReinstateModalService2.\u0275fac,providedIn:"root"})}return DsoWithdrawnReinstateModalService2})()},27720:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>FormFieldLanguageValueObject});class FormFieldLanguageValueObject{constructor(value,language){this.value=value,this.language=language}}},27657:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>ViewTrackerComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(48168),__webpack_require__(77028)),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68014),angulartics2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(91270),_core_services_referrer_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(64888);let ViewTrackerComponent=(()=>{class ViewTrackerComponent2{constructor(angulartics2,referrerService){this.angulartics2=angulartics2,this.referrerService=referrerService}ngOnInit(){this.sub=this.referrerService.getReferrer().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.s)(1)).subscribe(referrer=>{this.angulartics2.eventTrack.next({action:"page_view",properties:{object:this.object,referrer}})})}ngOnDestroy(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a4)(this.sub)&&this.sub.unsubscribe()}static#_=this.\u0275fac=function(t){return new(t||ViewTrackerComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(angulartics2__WEBPACK_IMPORTED_MODULE_4__.il),_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(_core_services_referrer_service__WEBPACK_IMPORTED_MODULE_5__.f))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ViewTrackerComponent2,selectors:[["ds-view-tracker"]],inputs:{object:"object"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],decls:1,vars:0,template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.EFF(0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})}return ViewTrackerComponent2})()},52427:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionEditComponent:()=>SubmissionEditComponent});var rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(94743),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(42926),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10117),_form_submission_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(70952),_submission_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(77523),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(20849),_angular_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(64247),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(43750);let SubmissionEditComponent=(()=>{class SubmissionEditComponent2{constructor(changeDetectorRef,notificationsService,route,router,itemDataService,submissionService,translate,submissionJsonPatchOperationsService){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.route=route,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.submissionJsonPatchOperationsService=submissionJsonPatchOperationsService,this.collectionModifiable=null,this.subs=[],this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject(void 0)}ngOnInit(){this.collectionModifiable=this.route.snapshot.data?.collectionModifiable??null,this.subs.push(this.route.paramMap.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(params=>this.submissionService.retrieveSubmission(params.get("id"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.pb)(submissionObjectRD=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Pe)(submissionObjectRD))).subscribe(submissionObjectRD=>{if(submissionObjectRD.hasSucceeded)if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Im)(submissionObjectRD.payload))this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"]);else{const{errors}=submissionObjectRD.payload;this.submissionErrors=(0,_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_9__.A)(errors),this.submissionId=submissionObjectRD.payload.id.toString(),this.collectionId=submissionObjectRD.payload.collection.id,this.selfUrl=submissionObjectRD.payload._links.self.href,this.sections=submissionObjectRD.payload.sections,this.itemLink$.next(submissionObjectRD.payload._links.item.href),this.item=submissionObjectRD.payload.item,this.submissionDefinition=submissionObjectRD.payload.submissionDefinition}else 404===submissionObjectRD.statusCode&&this.router.navigate(["/404"],{skipLocationChange:!0})}),this.itemLink$.pipe((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.VT)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(itemLink=>this.itemDataService.findByHref(itemLink)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.v7)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.BL)(300)).subscribe(itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(sub)).forEach(sub=>sub.unsubscribe()),this.submissionJsonPatchOperationsService.deletePendingJsonPatchOperations()}static#_=this.\u0275fac=function(t){return new(t||SubmissionEditComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_10__.gRc),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.I),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_11__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_11__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_0__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_submission_service__WEBPACK_IMPORTED_MODULE_5__.E),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_10__.rXU(_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_2__.U))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_10__.VBU({type:SubmissionEditComponent2,selectors:[["ds-base-submission-edit"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_10__.aNF],decls:2,vars:8,consts:[[1,"submission-submit-container"],[3,"collectionId","sections","selfUrl","submissionDefinition","submissionErrors","item","collectionModifiable","submissionId"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.j41(0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_10__.nrm(1,"ds-submission-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y8G("collectionId",ctx.collectionId)("sections",ctx.sections)("selfUrl",ctx.selfUrl)("submissionDefinition",ctx.submissionDefinition)("submissionErrors",ctx.submissionErrors)("item",ctx.item)("collectionModifiable",ctx.collectionModifiable)("submissionId",ctx.submissionId))},dependencies:[_form_submission_form_component__WEBPACK_IMPORTED_MODULE_4__.a]})}return SubmissionEditComponent2})()},99457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>ThemedSubmissionEditComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(52427),__webpack_require__(68014));const _c0=["*"];function ThemedSubmissionEditComponent_ng_template_0_Template(rf,ctx){}let ThemedSubmissionEditComponent=(()=>{class ThemedSubmissionEditComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{getComponentName(){return"SubmissionEditComponent"}importThemedComponent(themeName){return __webpack_require__(9048)(`./${themeName}/app/submission/edit/submission-edit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,52427))}static#_=this.\u0275fac=(()=>{let \u0275ThemedSubmissionEditComponent_BaseFactory;return function(t){return(\u0275ThemedSubmissionEditComponent_BaseFactory||(\u0275ThemedSubmissionEditComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_2__.xGo(ThemedSubmissionEditComponent2)))(t||ThemedSubmissionEditComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ThemedSubmissionEditComponent2,selectors:[["ds-submission-edit"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.DNE(0,ThemedSubmissionEditComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_2__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.k0s())},encapsulation:2})}return ThemedSubmissionEditComponent2})()},70952:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>SubmissionFormComponent});var common=__webpack_require__(84739),isEqual=__webpack_require__(20027),isEqual_default=__webpack_require__.n(isEqual),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),auth_service=__webpack_require__(41543),hal_endpoint_service=(__webpack_require__(29727),__webpack_require__(91365)),empty_util=(__webpack_require__(6721),__webpack_require__(77028)),themed_loading_component=__webpack_require__(32943),uploader_options_model=__webpack_require__(32034),core=__webpack_require__(68014),ng_bootstrap=__webpack_require__(71781),ngx_translate_core=__webpack_require__(43750),alert_component=__webpack_require__(14467),alert_type=__webpack_require__(82555),uniq=__webpack_require__(81594),uniq_default=__webpack_require__.n(uniq),submission_service=__webpack_require__(77523),parseSectionErrorPaths=__webpack_require__(80076),sections_service=__webpack_require__(90224),sections_type=__webpack_require__(54942);let SectionsDirective=(()=>{class SectionsDirective2{constructor(changeDetectorRef,submissionService,sectionService){this.changeDetectorRef=changeDetectorRef,this.submissionService=submissionService,this.sectionService=sectionService,this.mandatory=!0,this.genericSectionErrors=[],this.allSectionErrors=[],this.active=!0,this.sectionState=this.mandatory,this.subs=[]}ngOnInit(){this.valid=this.sectionService.isSectionValid(this.submissionId,this.sectionId).pipe((0,operators.Tj)(valid=>(valid&&this.resetErrors(),valid))),this.subs.push(this.sectionService.getShownSectionErrors(this.submissionId,this.sectionId,this.sectionType).subscribe(errors=>{(0,empty_util.hj)(errors)?errors.forEach(errorItem=>{(0,parseSectionErrorPaths.A)(errorItem.path).forEach(error=>{error.fieldId?this.allSectionErrors.push(errorItem.message):this.genericSectionErrors=uniq_default()(this.genericSectionErrors.concat(errorItem.message))})}):this.resetErrors()}),this.submissionService.getActiveSectionId(this.submissionId).subscribe(activeSectionId=>{const previousActive=this.active;this.active=activeSectionId===this.sectionId,previousActive!==this.active&&(this.changeDetectorRef.detectChanges(),!this.active&&(0,empty_util.Pe)(activeSectionId)&&this.submissionService.dispatchSave(this.submissionId))})),this.enabled=this.sectionService.isSectionEnabled(this.submissionId,this.sectionId)}ngOnDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}sectionChange(event){this.sectionState=event.nextState}isOpen(){return this.sectionState}isMandatory(){return this.mandatory}isSectionActive(){return this.active}isEnabled(){return this.enabled}isValid(){return this.valid}removeSection(submissionId,sectionId){this.sectionService.removeSection(submissionId,sectionId)}hasGenericErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0}hasErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0||this.allSectionErrors&&this.allSectionErrors.length>0}getErrors(){return this.genericSectionErrors}setFocus(event){this.active||this.submissionService.setActiveSection(this.submissionId,this.sectionId)}isInfo(){return this.sectionService.getIsInformational(this.sectionType)}removeError(index){this.genericSectionErrors.splice(index)}resetErrors(){(0,empty_util.hj)(this.genericSectionErrors)&&this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionId),this.genericSectionErrors=[],this.allSectionErrors=[]}static#_=this.\u0275fac=function(t){return new(t||SectionsDirective2)(core.rXU(core.gRc),core.rXU(submission_service.E),core.rXU(sections_service.c))};static#_2=this.\u0275dir=core.FsC({type:SectionsDirective2,selectors:[["","dsSection",""]],inputs:{mandatory:"mandatory",sectionId:"sectionId",sectionType:"sectionType",submissionId:"submissionId"},exportAs:["sectionRef"],standalone:!0})}return SectionsDirective2})();var fesm2020_core=__webpack_require__(71508),submission_accesses_config_data_service=__webpack_require__(90474),json_patch_operation_path_combiner=__webpack_require__(56554),json_patch_operations_builder=__webpack_require__(39721),shared_operators=__webpack_require__(82656),submission_json_patch_operations_service=__webpack_require__(42926),date_util=__webpack_require__(7840),form_builder_service=__webpack_require__(80152),form_component=__webpack_require__(49148),form_service=__webpack_require__(79181),fast_json_patch=__webpack_require__(72838),isObject=__webpack_require__(57704),isObject_default=__webpack_require__.n(isObject),vocabulary_entry_model=__webpack_require__(80120),vocabulary_entry_detail_model=__webpack_require__(69178),form_field_language_value_model=__webpack_require__(27720),form_field_metadata_value_model=__webpack_require__(5403);let SectionFormOperationsService=(()=>{class SectionFormOperationsService2{constructor(formBuilder,operationsBuilder){this.formBuilder=formBuilder,this.operationsBuilder=operationsBuilder}dispatchOperationsFromEvent(pathCombiner,event,previousValue,hasStoredValue){switch(event.type){case"remove":this.dispatchOperationsFromRemoveEvent(pathCombiner,event,previousValue);break;case"change":this.dispatchOperationsFromChangeEvent(pathCombiner,event,previousValue,hasStoredValue);break;case"move":this.dispatchOperationsFromMoveEvent(pathCombiner,event,previousValue)}}getArrayIndexFromEvent(event){let fieldIndex;return(0,empty_util.hj)(event)&&((0,fesm2020_core.hDs)(event)?(0,empty_util.kZ)(event.context)?this.isPartOfArrayOfGroup(event.model)&&(fieldIndex=event.model.parent.parent.index):fieldIndex=event.context.index:fieldIndex=event?.index),(0,empty_util.EA)(fieldIndex)?fieldIndex:0}isPartOfArrayOfGroup(model){return(0,empty_util.Pe)(model.parent)&&model.parent.type===fesm2020_core.wnr&&model.parent.parent&&model.parent.parent.context&&model.parent.parent.context.type===fesm2020_core.WlY}getQualdropValueMap(event){const metadataValueMap=new Map;return(this.formBuilder.isQualdropGroup(event.model)?event.model.parent.context:event.model.parent.parent.context).groups.forEach(arrayModel=>{const groupModel=arrayModel.group[0],metadataValueList=metadataValueMap.get(groupModel.qualdropId)?metadataValueMap.get(groupModel.qualdropId):[];groupModel.value&&(metadataValueList.push(groupModel.value),metadataValueMap.set(groupModel.qualdropId,metadataValueList))}),metadataValueMap}getFieldPathFromEvent(event){const fieldIndex=this.getArrayIndexFromEvent(event),fieldId=this.getFieldPathSegmentedFromChangeEvent(event);return(0,empty_util.EA)(fieldIndex)?fieldId+"/"+fieldIndex:fieldId}getQualdropItemPathFromEvent(event){const fieldIndex=this.getArrayIndexFromEvent(event),metadataValueMap=new Map;let path=null;return(this.formBuilder.isQualdropGroup(event.model)?event.model.parent.context:event.model.parent.parent.context).groups.forEach((arrayModel,index)=>{const groupModel=arrayModel.group[0],metadataValueList=metadataValueMap.get(groupModel.qualdropId)?metadataValueMap.get(groupModel.qualdropId):[];groupModel.value&&(metadataValueList.push(groupModel.value),metadataValueMap.set(groupModel.qualdropId,metadataValueList)),index===fieldIndex&&(path=groupModel.qualdropId+"/"+(metadataValueList.length-1))}),path}getFieldPathSegmentedFromChangeEvent(event){let fieldId;return fieldId=this.formBuilder.isQualdropGroup(event.model)?event.model.qualdropId:this.formBuilder.isQualdropGroup(event.model.parent)?event.model.parent.qualdropId:this.formBuilder.getId(event.model),fieldId}getFieldValueFromChangeEvent(event){let fieldValue;const value=event.model.value;if(this.formBuilder.isModelInCustomGroup(event.model))fieldValue=event.model.parent.value;else if(this.formBuilder.isRelationGroup(event.model))fieldValue=event.model.getGroupValue();else if(event.model.hasLanguages){const language=event.model.language;event.model.hasAuthority?Array.isArray(value)?(value.forEach((authority,index)=>{authority=Object.assign(new vocabulary_entry_model.b,authority,{language}),value[index]=authority}),fieldValue=value):fieldValue=Object.assign(new vocabulary_entry_model.b,value,{language}):fieldValue=new form_field_metadata_value_model.e(value,language)}else fieldValue=(0,date_util.z5)(value)?new form_field_metadata_value_model.e((0,date_util.$T)(value)):value instanceof form_field_language_value_model.r||value instanceof vocabulary_entry_model.b||value instanceof vocabulary_entry_detail_model.M||isObject_default()(value)?value:new form_field_metadata_value_model.e(value);return fieldValue}getValueMap(items){const metadataValueMap=new Map;return items.forEach(item=>{Object.keys(item).forEach(key=>{const metadataValueList=metadataValueMap.get(key)?metadataValueMap.get(key):[];metadataValueList.push(item[key]),metadataValueMap.set(key,metadataValueList)})}),metadataValueMap}dispatchOperationsFromRemoveEvent(pathCombiner,event,previousValue){const path=this.getFieldPathFromEvent(event),value=this.getFieldValueFromChangeEvent(event);this.formBuilder.isQualdropGroup(event.model)?this.dispatchOperationsFromMap(this.getQualdropValueMap(event),pathCombiner,event,previousValue):event.context&&event.context instanceof fesm2020_core.fHx?this.handleArrayGroupPatch(pathCombiner,event,event.context.context,previousValue):((0,empty_util.hj)(value)&&"string"==typeof value||(0,empty_util.hj)(value)&&value instanceof form_field_metadata_value_model.e&&value.hasValue())&&this.operationsBuilder.remove(pathCombiner.getPath(path))}dispatchOperationsFromAddEvent(pathCombiner,event){const path=this.getFieldPathSegmentedFromChangeEvent(event),value=(0,fast_json_patch.Go)(this.getFieldValueFromChangeEvent(event));(0,empty_util.hj)(value)&&(value.place=this.getArrayIndexFromEvent(event),(0,empty_util.a4)(event.group)&&(0,empty_util.a4)(event.group.value)&&(1===event.group.value.map(g=>Object.values(g)).reduce((accumulator,currentValue)=>accumulator.concat(currentValue)).filter(v=>(0,empty_util.hj)(v)).length?this.operationsBuilder.add(pathCombiner.getPath([path]),[value],!1):this.operationsBuilder.add(pathCombiner.getPath([path,"-"]),value,!1)))}dispatchOperationsFromChangeEvent(pathCombiner,event,previousValue,hasStoredValue){if(event.context&&event.context instanceof fesm2020_core.fHx)return void this.handleArrayGroupPatch(pathCombiner,event,event.context.context,previousValue);const path=this.getFieldPathFromEvent(event),segmentedPath=this.getFieldPathSegmentedFromChangeEvent(event),value=this.getFieldValueFromChangeEvent(event);if(this.formBuilder.isQualdropGroup(event.model.parent)||this.formBuilder.isQualdropGroup(event.model))this.dispatchOperationsFromMap(this.getQualdropValueMap(event),pathCombiner,event,previousValue);else if(this.formBuilder.isRelationGroup(event.model))this.dispatchOperationsFromMap(this.getValueMap(value),pathCombiner,event,previousValue);else if(this.formBuilder.hasArrayGroupValue(event.model))this.operationsBuilder.add(pathCombiner.getPath(segmentedPath),value,!0);else if(previousValue.isPathEqual(this.formBuilder.getPath(event.model))||hasStoredValue&&(0,empty_util.hj)(previousValue.value)){if((0,empty_util.a4)(event.$event)&&(0,empty_util.a4)(event.$event.previousIndex))if(event.$event.previousIndex<0)this.operationsBuilder.add(pathCombiner.getPath(segmentedPath),value,!0);else{const moveTo=pathCombiner.getPath(path),moveFrom=pathCombiner.getPath(segmentedPath+"/"+event.$event.previousIndex);(0,empty_util.hj)(moveFrom.path)&&(0,empty_util.hj)(moveTo.path)&&moveFrom.path!==moveTo.path&&this.operationsBuilder.move(moveTo,moveFrom.path)}else value.hasValue()?this.operationsBuilder.replace(pathCombiner.getPath(path),value):0===this.getArrayIndexFromEvent(event)?this.operationsBuilder.remove(pathCombiner.getPath(segmentedPath)):this.operationsBuilder.remove(pathCombiner.getPath(path));previousValue.delete()}else value.hasValue()&&((0,empty_util.b0)(this.getArrayIndexFromEvent(event))||0===this.getArrayIndexFromEvent(event)?this.operationsBuilder.add(pathCombiner.getPath(segmentedPath),value,!0):this.operationsBuilder.add(pathCombiner.getPath(path),value))}dispatchOperationsFromMap(valueMap,pathCombiner,event,previousValue){const currentValueMap=valueMap;if("remove"===event.type){const path=this.getQualdropItemPathFromEvent(event);this.operationsBuilder.remove(pathCombiner.getPath(path))}else previousValue.isPathEqual(this.formBuilder.getPath(event.model))&&previousValue.value.forEach((entry,index)=>{const currentValue=currentValueMap.get(index);currentValue?(isEqual_default()(entry,currentValue)||this.operationsBuilder.add(pathCombiner.getPath(index),currentValue,!0),currentValueMap.delete(index)):currentValue||this.operationsBuilder.remove(pathCombiner.getPath(index))}),currentValueMap.forEach((entry,index)=>{1===entry.length&&(0,empty_util.kZ)(entry[0])?this.operationsBuilder.remove(pathCombiner.getPath(index)):this.operationsBuilder.add(pathCombiner.getPath(index),entry,!0)});previousValue.delete()}dispatchOperationsFromMoveEvent(pathCombiner,event,previousValue){return this.handleArrayGroupPatch(pathCombiner,event.$event,event.$event.arrayModel,previousValue)}handleArrayGroupPatch(pathCombiner,event,model,previousValue){const arrayValue=this.formBuilder.getValueFromModel([model]),segmentedPath=this.getFieldPathSegmentedFromChangeEvent(event);(0,empty_util.hj)(arrayValue)?this.operationsBuilder.add(pathCombiner.getPath(segmentedPath),arrayValue[segmentedPath],!1):previousValue.isPathEqual(this.formBuilder.getPath(event.model))&&this.operationsBuilder.remove(pathCombiner.getPath(segmentedPath))}static#_=this.\u0275fac=function(t){return new(t||SectionFormOperationsService2)(core.KVO(form_builder_service.j),core.KVO(json_patch_operations_builder.C))};static#_2=this.\u0275prov=core.jDH({token:SectionFormOperationsService2,factory:SectionFormOperationsService2.\u0275fac,providedIn:"root"})}return SectionFormOperationsService2})(),SectionModelComponent=(()=>{class SectionModelComponent2{constructor(injectedCollectionId,injectedSectionData,injectedSubmissionId){this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.collectionId=injectedCollectionId,this.sectionData=injectedSectionData,this.submissionId=injectedSubmissionId}ngOnInit(){this.onSectionInit(),this.updateSectionStatus()}updateSectionStatus(){this.sectionStatusSub=this.getSectionStatus().pipe((0,operators.pb)(sectionStatus=>(0,empty_util.EA)(sectionStatus)),(0,operators.ql)(!0)).subscribe(sectionStatus=>{this.sectionService.setSectionStatus(this.submissionId,this.sectionData.id,sectionStatus)})}ngOnDestroy(){(0,empty_util.a4)(this.sectionStatusSub)&&this.sectionStatusSub.unsubscribe(),this.onSectionDestroy()}static#_=this.\u0275fac=function(t){return new(t||SectionModelComponent2)(core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SectionModelComponent2,selectors:[["ds-section-model"]],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}return SectionModelComponent2})();const ACCESS_FORM_CHECKBOX_CONFIG={id:"discoverable",name:"discoverable"},ACCESS_FORM_CHECKBOX_LAYOUT={element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}},ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessCondition",groupFactory:null},ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.accesses.form.access-condition-label",hint:"submission.sections.accesses.form.access-condition-hint",options:[]},FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.accesses.form.from-label",hint:"submission.sections.accesses.form.from-hint",placeholder:"submission.sections.accesses.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2020_core.AjF,operator:fesm2020_core.fXj,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-from"}},FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.accesses.form.until-label",hint:"submission.sections.accesses.form.until-hint",placeholder:"submission.sections.accesses.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2020_core.AjF,operator:fesm2020_core.fXj,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-until"}},FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};var selectors=__webpack_require__(37094),ngrx_store=__webpack_require__(5136);let SectionAccessesService=(()=>{class SectionAccessesService2{constructor(store){this.store=store}getAccessesData(submissionId,sectionId){return this.store.select((0,selectors.on)(submissionId,sectionId)).pipe((0,operators.pb)(state=>(0,empty_util.EA)(state)),(0,operators.F)())}static#_=this.\u0275fac=function(t){return new(t||SectionAccessesService2)(core.KVO(ngrx_store.il))};static#_2=this.\u0275prov=core.jDH({token:SectionAccessesService2,factory:SectionAccessesService2.\u0275fac,providedIn:"root"})}return SectionAccessesService2})();const _c0=["formRef"];function SubmissionSectionAccessesComponent_ds_form_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-form",2,0),core.bIt("dfChange",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onChange($event))})("removeArrayItem",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onRemove($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}let SubmissionSectionAccessesComponent=(()=>{class SubmissionSectionAccessesComponent2 extends SectionModelComponent{constructor(sectionService,formBuilderService,accessesConfigService,accessesService,formOperationsService,operationsBuilder,formService,translate,operationsService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.formBuilderService=formBuilderService,this.accessesConfigService=accessesConfigService,this.accessesService=accessesService,this.formOperationsService=formOperationsService,this.operationsBuilder=operationsBuilder,this.formService=formService,this.translate=translate,this.operationsService=operationsService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.subs=[]}initModelData(formModel){this.accessesData.accessConditions.forEach((accessCondition,index)=>{Array.of("name","startDate","endDate").filter(key=>accessCondition.hasOwnProperty(key)&&(0,empty_util.hj)(accessCondition[key])).forEach(key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2020_core.fQD){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]})})}onChange(event){if(event.model.type===fesm2020_core.eU4){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);this.operationsBuilder.replace(this.pathCombiner.getPath(path),value.value,!0)}else{if(event.model.id===FORM_ACCESS_CONDITION_TYPE_CONFIG.id){const startDateControl=event.control.parent.get("startDate"),endDateControl=event.control.parent.get("endDate");startDateControl?.markAsUntouched(),endDateControl?.markAsUntouched(),startDateControl?.setValue(null),endDateControl?.setValue(null),event.control.parent.markAsDirty()}this.formService.validateAllFormFields(this.formRef.formGroup),this.formService.isValid(this.formId).pipe((0,operators.s)(1),(0,operators.pb)(isValid=>isValid),(0,operators.ZZ)(()=>this.formService.getFormData(this.formId)),(0,operators.s)(1)).subscribe(formData=>{const accessConditionsToSave=[];formData.accessCondition.map(accessConditions=>accessConditions.accessConditionGroup).filter(accessCondition=>(0,empty_util.hj)(accessCondition)).forEach(accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter(element=>(0,empty_util.Pe)(accessCondition.name)&&element.name===accessCondition.name[0].value).forEach(element=>accessConditionOpt=element),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=(0,date_util.Sd)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=(0,date_util.Sd)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}}),this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0)})}}onRemove(event){const fieldPath="accessConditions/"+this.formOperationsService.getArrayIndexFromEvent(event);this.operationsBuilder.remove(this.pathCombiner.getPath(fieldPath))}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id);const config$=this.accessesConfigService.findByHref(this.sectionData.config,!0,!1).pipe((0,shared_operators.yd)(),(0,operators.Tj)(config=>config.payload)),accessData$=this.accessesService.getAccessesData(this.submissionId,this.sectionData.id);(0,cjs.combineLatest)([config$,accessData$]).subscribe(([config,accessData])=>{this.availableAccessConditionOptions=(0,empty_util.hj)(config.accessConditionOptions)?config.accessConditionOptions:[],this.canChangeDiscoverable=!!config.canChangeDiscoverable,this.accessesData=accessData,this.formModel=this.buildFileEditForm()})}getSectionStatus(){return(0,cjs.of)(!0)}buildFileEditForm(){const formModel=[];if(this.canChangeDiscoverable){const discoverableCheckboxConfig=Object.assign({},ACCESS_FORM_CHECKBOX_CONFIG,{label:this.translate.instant("submission.sections.accesses.form.discoverable-label"),hint:this.translate.instant("submission.sections.accesses.form.discoverable-description"),value:this.accessesData.discoverable});formModel.push(new fesm2020_core.M7d(discoverableCheckboxConfig,ACCESS_FORM_CHECKBOX_LAYOUT))}const accessConditionTypeModelConfig=Object.assign({},FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const startDateCondition=[],endDateCondition=[];let maxStartDate,maxEndDate;this.availableAccessConditionOptions.forEach(condition=>{if(condition.hasStartDate&&(startDateCondition.push({id:"name",value:condition.name}),condition.maxStartDate)){const min=new Date(condition.maxStartDate);maxStartDate={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(condition.hasEndDate&&(endDateCondition.push({id:"name",value:condition.name}),condition.maxEndDate)){const max=new Date(condition.maxEndDate);maxEndDate={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}});const confStart={relations:[{match:fesm2020_core.AjF,operator:fesm2020_core.fXj,when:startDateCondition}]},confEnd={relations:[{match:fesm2020_core.AjF,operator:fesm2020_core.fXj,when:endDateCondition}]},hasStartDate=startDateCondition.length>0,hasEndDate=endDateCondition.length>0;return accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2020_core.z4z(accessConditionTypeModelConfig,FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart);maxStartDate&&(startDateConfig.max=maxStartDate);const endDateConfig=Object.assign({},FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd);maxEndDate&&(endDateConfig.max=maxEndDate);const startDate=new fesm2020_core.dku(startDateConfig,FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2020_core.dku(endDateConfig,FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStartDate&&accessConditionGroupConfig.group.push(startDate),hasEndDate&&accessConditionGroupConfig.group.push(endDate),[new fesm2020_core.iO5(accessConditionGroupConfig,ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=(0,empty_util.hj)(this.accessesData.accessConditions)?this.accessesData.accessConditions.length:1,formModel.push(new fesm2020_core.UqU(accessConditionsArrayConfig,ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT)),this.initModelData(formModel),formModel}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionAccessesComponent2)(core.rXU(sections_service.c),core.rXU(form_builder_service.j),core.rXU(submission_accesses_config_data_service.SubmissionAccessesConfigDataService),core.rXU(SectionAccessesService),core.rXU(SectionFormOperationsService),core.rXU(json_patch_operations_builder.C),core.rXU(form_service.u),core.rXU(ngx_translate_core.c$),core.rXU(submission_json_patch_operations_service.U),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionAccessesComponent2,selectors:[["ds-section-accesses"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.formRef=_t.first)}},standalone:!0,features:[core.Vt3,core.aNF],decls:1,vars:1,consts:[["formRef","formComponent"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem",4,"ngIf"],[3,"dfChange","removeArrayItem","formId","formModel","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&core.DNE(0,SubmissionSectionAccessesComponent_ds_form_0_Template,2,4,"ds-form",1),2&rf&&core.Y8G("ngIf",!!ctx.formModel)},dependencies:[form_component.s,common.bT],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]})}return SubmissionSectionAccessesComponent2})();var configuration_data_service=__webpack_require__(44994),submission_cc_license_data_service=__webpack_require__(59825),submission_cc_license_url_data_service=__webpack_require__(60133);const ds_select_component_c0=[[["",8,"selection"]],[["",8,"menu"]]],_c1=[".selection",".menu"];function DsSelectComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4)(1,"span",5),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(2),core.SpI(" ",core.bMT(3,1,ctx_r0.label)," ")}}let DsSelectComponent=(()=>{class DsSelectComponent2{constructor(){this.toggled=new core.bkB,this.close=new core.bkB}static#_=this.\u0275fac=function(t){return new(t||DsSelectComponent2)};static#_2=this.\u0275cmp=core.VBU({type:DsSelectComponent2,selectors:[["ds-select"]],inputs:{label:"label",disabled:"disabled"},outputs:{toggled:"toggled",close:"close"},standalone:!0,features:[core.aNF],ngContentSelectors:_c1,decls:8,vars:2,consts:[["ngbDropdown","",1,"btn-group",3,"openChange"],["class","input-group-prepend",4,"ngIf"],["aria-describedby","dsSelectMenuLabel","id","dsSelectMenuButton","ngbDropdownToggle","",1,"btn","btn-outline-primary","selection",3,"blur","click","disabled"],["ngbDropdownMenu","","id","dsSelectDropdownMenu","aria-labelledby","dsSelectMenuButton",1,"dropdown-menu"],[1,"input-group-prepend"],["id","dsSelectMenuLabel",1,"input-group-text"]],template:function(rf,ctx){1&rf&&(core.NAR(ds_select_component_c0),core.j41(0,"div")(1,"div",0),core.bIt("openChange",function($event){return ctx.toggled.emit($event)}),core.DNE(2,DsSelectComponent_div_2_Template,4,3,"div",1),core.j41(3,"button",2),core.bIt("blur",function($event){return ctx.close.emit($event)})("click",function($event){return ctx.close.emit($event)}),core.SdG(4),core.k0s(),core.j41(5,"div",3)(6,"div"),core.SdG(7,1),core.k0s()()()()),2&rf&&(core.R7$(2),core.Y8G("ngIf",ctx.label),core.R7$(),core.Y8G("disabled",ctx.disabled))},dependencies:[ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.do,ng_bootstrap.U0,common.bT,ngx_translate_core.h,ngx_translate_core.D9]})}return DsSelectComponent2})();var var_directive=__webpack_require__(45961);function SubmissionSectionCcLicensesComponent_span_3_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"ds-loading"),core.k0s())}function SubmissionSectionCcLicensesComponent_span_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.SpI(" ",ctx_r0.getSelectedCcLicense().name," ")}}function SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template(rf,ctx){1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"translate"),core.bVm()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections.ccLicense.change")," "))}function SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template(rf,ctx){1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"translate"),core.bVm()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections.ccLicense.select")," "))}function SubmissionSectionCcLicensesComponent_span_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.DNE(1,SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template,3,3,"ng-container",4)(2,SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template,3,3,"ng-container",4),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r0.storedCcLicenseLink),core.R7$(),core.Y8G("ngIf",!ctx_r0.storedCcLicenseLink)}}function SubmissionSectionCcLicensesComponent_button_7_Template(rf,ctx){1&rf&&(core.j41(0,"button",8),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections.ccLicense.none")," "))}function SubmissionSectionCcLicensesComponent_button_8_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",9),core.bIt("click",function(){const license_r3=core.eBV(_r2).$implicit,ctx_r0=core.XpG();return core.Njj(ctx_r0.selectCcLicense(license_r3))}),core.EFF(1),core.k0s()}if(2&rf){const license_r3=ctx.$implicit;core.R7$(),core.SpI(" ",license_r3.name," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",11)(1,"h5"),core.EFF(2),core.k0s(),core.nrm(3,"div",21),core.k0s()),2&rf){const value_r7=ctx.$implicit;core.R7$(2),core.SpI(" ",value_r7.label," "),core.R7$(),core.Y8G("innerHTML",value_r7.description,core.npT)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div")(1,"div",16)(2,"div")(3,"h4"),core.EFF(4),core.k0s(),core.nrm(5,"div",17),core.k0s(),core.j41(6,"button",18),core.bIt("click",function(){core.eBV(_r6);const ctx_r0=core.XpG(3);return core.Njj(ctx_r0.closeInfoModal())}),core.j41(7,"span",19),core.EFF(8,"\xd7"),core.k0s()()(),core.j41(9,"div",20),core.DNE(10,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template,4,2,"div",10),core.k0s()()}if(2&rf){const field_r8=core.XpG().$implicit;core.R7$(4),core.SpI(" ",field_r8.label," "),core.R7$(),core.Y8G("innerHTML",field_r8.description,core.npT),core.R7$(5),core.Y8G("ngForOf",field_r8.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.k0s()),2&rf){const option_r9=core.XpG().ngVar;core.R7$(),core.SpI(" ",option_r9.label," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections.ccLicense.option.select")," "))}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0,3),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template,2,1,"span",4)(2,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template,3,3,"span",4),core.bVm()),2&rf){const option_r9=ctx.ngVar;core.R7$(),core.Y8G("ngIf",option_r9),core.R7$(),core.Y8G("ngIf",!option_r9)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template(rf,ctx){if(1&rf){const _r10=core.RV6();core.j41(0,"button",9),core.bIt("click",function(){const option_r11=core.eBV(_r10).$implicit,field_r8=core.XpG(2).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.selectOption(ctx_r0.getSelectedCcLicense(),field_r8,option_r11))}),core.EFF(1),core.k0s()}if(2&rf){const option_r11=ctx.$implicit;core.R7$(),core.SpI(" ",option_r11.label," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-select",2),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template,3,2,"ng-container",22),core.qex(2,5),core.j41(3,"div",23),core.DNE(4,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template,2,1,"button",7),core.k0s(),core.bVm(),core.k0s()),2&rf){const field_r8=core.XpG().$implicit,ctx_r0=core.XpG(2);core.Y8G("disabled","jurisdiction"===field_r8.id&&void 0!==ctx_r0.defaultJurisdiction&&"none"!==ctx_r0.defaultJurisdiction),core.R7$(),core.Y8G("ngVar",ctx_r0.getSelectedOption(ctx_r0.getSelectedCcLicense(),field_r8)),core.R7$(3),core.Y8G("ngForOf",field_r8.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template(rf,ctx){if(1&rf){const _r12=core.RV6();core.j41(0,"div",25)(1,"div",26),core.bIt("click",function(){const option_r13=core.eBV(_r12).$implicit,field_r8=core.XpG(2).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.selectOption(ctx_r0.getSelectedCcLicense(),field_r8,option_r13))}),core.nrm(2,"input",27),core.j41(3,"span"),core.EFF(4),core.k0s()()()}if(2&rf){const option_r13=ctx.$implicit,field_r8=core.XpG(2).$implicit,ctx_r0=core.XpG(2);core.R7$(2),core.FS9("title",option_r13.label),core.Y8G("checked",ctx_r0.isSelectedOption(ctx_r0.getSelectedCcLicense(),field_r8,option_r13)),core.R7$(2),core.JRh(option_r13.label)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template,5,3,"div",24),core.bVm()),2&rf){const field_r8=core.XpG().$implicit;core.R7$(),core.Y8G("ngForOf",field_r8.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",11)(1,"div",12)(2,"div"),core.EFF(3),core.k0s(),core.j41(4,"button",13),core.bIt("click",function(){core.eBV(_r4);const infoModal_r5=core.sdS(7),ctx_r0=core.XpG(2);return core.Njj(ctx_r0.openInfoModal(infoModal_r5))}),core.nrm(5,"i",14),core.k0s()(),core.DNE(6,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template,11,3,"ng-template",null,0,core.C5r)(8,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template,5,3,"ds-select",15)(9,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template,2,1,"ng-container",4),core.k0s()}if(2&rf){const field_r8=ctx.$implicit;core.R7$(2),core.ZvI("font-weight-bold ",field_r8.id,""),core.R7$(),core.SpI(" ",field_r8.label," "),core.R7$(5),core.Y8G("ngIf",(null==field_r8.enums?null:field_r8.enums.length)>5),core.R7$(),core.Y8G("ngIf",(null==field_r8.enums?null:field_r8.enums.length)<=5)}}function SubmissionSectionCcLicensesComponent_ng_container_9_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template,10,6,"div",10),core.bVm()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngForOf",ctx_r0.getSelectedCcLicense().fields)}}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.nrm(1,"ds-loading"),core.k0s())}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template(rf,ctx){if(1&rf){const _r14=core.RV6();core.j41(0,"div",30)(1,"div"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"a",31),core.EFF(5),core.k0s(),core.j41(6,"div",32)(7,"div",26),core.bIt("click",function(){core.eBV(_r14);const ctx_r0=core.XpG(3);return core.Njj(ctx_r0.setAccepted(!ctx_r0.accepted))}),core.nrm(8,"input",33),core.j41(9,"span"),core.EFF(10),core.nI1(11,"translate"),core.k0s()()()()}if(2&rf){const licenseLink_r15=core.XpG().ngVar,ctx_r0=core.XpG(2);core.R7$(2),core.SpI(" ",core.bMT(3,5,"submission.sections.ccLicense.link")," "),core.R7$(2),core.FS9("href",licenseLink_r15,core.B4B),core.R7$(),core.SpI(" ",licenseLink_r15," "),core.R7$(3),core.Y8G("checked",ctx_r0.accepted),core.R7$(2),core.SpI(" ",core.bMT(11,7,"submission.sections.ccLicense.confirmation"),"")}}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template,2,0,"div",4)(2,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template,12,9,"div",29),core.bVm()),2&rf){const licenseLink_r15=ctx.ngVar;core.R7$(),core.Y8G("ngIf",!licenseLink_r15),core.R7$(),core.Y8G("ngIf",licenseLink_r15)}}function SubmissionSectionCcLicensesComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template,3,2,"ng-container",28),core.nI1(2,"async"),core.bVm()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngVar",core.bMT(2,1,ctx_r0.getCcLicenseLink$()))}}let SubmissionSectionCcLicensesComponent=(()=>{class SubmissionSectionCcLicensesComponent2 extends SectionModelComponent{get storedCcLicenseLink(){return this.data.uri}get accepted(){return void 0===this.data.accepted?!!this.data.uri:this.data.accepted}constructor(modalService,sectionService,submissionCcLicensesDataService,submissionCcLicenseUrlDataService,operationsBuilder,configService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.modalService=modalService,this.sectionService=sectionService,this.submissionCcLicensesDataService=submissionCcLicensesDataService,this.submissionCcLicenseUrlDataService=submissionCcLicenseUrlDataService,this.operationsBuilder=operationsBuilder,this.configService=configService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isLoading=!0,this.subscriptions=[]}get data(){return this.sectionData.data}selectCcLicense(ccLicense){this.getSelectedCcLicense()&&this.getSelectedCcLicense().id===ccLicense.id||(this.setAccepted(!1),this.updateSectionData({ccLicense:{id:ccLicense.id,fields:{}},uri:void 0}))}getSelectedCcLicense(){return this.submissionCcLicenses&&this.data.ccLicense?this.submissionCcLicenses.filter(ccLicense=>ccLicense.id===this.data.ccLicense.id)[0]:null}selectOption(ccLicense,field,option){this.isSelectedOption(ccLicense,field,option)||this.updateSectionData({ccLicense:{id:ccLicense.id,fields:Object.assign({},this.data.ccLicense.fields,{[field.id]:option})},accepted:!1})}getSelectedOption(ccLicense,field){return"jurisdiction"===field.id&&void 0!==this.defaultJurisdiction&&"none"!==this.defaultJurisdiction?field.enums.find(option=>option.id===this.defaultJurisdiction):this.data.ccLicense.fields[field.id]}isSelectedOption(ccLicense,field,option){return this.getSelectedOption(ccLicense,field)&&this.getSelectedOption(ccLicense,field).id===option.id}getCcLicenseLink$(){if(this.storedCcLicenseLink)return(0,cjs.of)(this.storedCcLicenseLink);if(!this.getSelectedCcLicense()||this.getSelectedCcLicense().fields.some(field=>!this.getSelectedOption(this.getSelectedCcLicense(),field)))return;const selectedCcLicense=this.getSelectedCcLicense();return this.submissionCcLicenseUrlDataService.getCcLicenseLink(selectedCcLicense,new Map(selectedCcLicense.fields.map(field=>[field,this.getSelectedOption(selectedCcLicense,field)])))}openInfoModal(content){this.modalRef=this.modalService.open(content)}closeInfoModal(){this.modalRef.close()}getSectionStatus(){return(0,cjs.of)(this.accepted)}onSectionDestroy(){this.subscriptions.forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id),this.subscriptions.push(this.sectionService.getSectionState(this.submissionId,this.sectionData.id,sections_type.l.CcLicense).pipe((0,operators.pb)(sectionState=>(0,empty_util.hj)(sectionState)&&((0,empty_util.hj)(sectionState.data)||(0,empty_util.hj)(sectionState.errorsToShow))),(0,operators.F)(),(0,operators.Tj)(sectionState=>sectionState.data)).subscribe(data=>{if(this.data.accepted!==data.accepted){const path=this.pathCombiner.getPath("uri");data.accepted?this.getCcLicenseLink$().pipe((0,operators.s)(1)).subscribe(link=>{this.operationsBuilder.add(path,link.toString(),!1,!0)}):this.data.uri&&this.operationsBuilder.remove(path)}this.sectionData.data=data}),this.submissionCcLicensesDataService.findAll({elementsPerPage:9999}).pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)(),(0,operators.Tj)(list=>list.page)).subscribe(licenses=>this.submissionCcLicenses=licenses),this.configService.findByPropertyName("cc.license.jurisdiction").pipe((0,shared_operators.qD)(),(0,shared_operators.Bo)()).subscribe(remoteData=>{this.defaultJurisdiction=void 0===remoteData||0===remoteData.values.length?"":remoteData.values[0]}))}setAccepted(accepted){this.updateSectionData({accepted}),this.updateSectionStatus()}updateSectionData(data){this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,Object.assign({},this.data,data))}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionCcLicensesComponent2)(core.rXU(ng_bootstrap.Bq),core.rXU(sections_service.c),core.rXU(submission_cc_license_data_service.SubmissionCcLicenseDataService),core.rXU(submission_cc_license_url_data_service.SubmissionCcLicenseUrlDataService),core.rXU(json_patch_operations_builder.C),core.rXU(configuration_data_service.ConfigurationDataService),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionCcLicensesComponent2,selectors:[["ds-submission-section-cc-licenses"]],standalone:!0,features:[core.Vt3,core.aNF],decls:11,vars:8,consts:[["infoModal",""],[1,"mb-4","ccLicense-select"],[3,"disabled"],[1,"selection"],[4,"ngIf"],[1,"menu"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"d-flex","flex-row"],[1,"btn","btn-outline-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-question"],[3,"disabled",4,"ngIf"],[1,"modal-header","mb-4"],[3,"innerHTML"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-weight-light",3,"innerHTML"],["class","selection",4,"ngVar"],[1,"options-select-menu","overflow-auto"],["class","d-flex flex-row m-1",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","m-1"],[3,"click"],["type","radio",1,"mr-1",3,"title","checked"],[4,"ngVar"],["class","mt-2 p-4 bg-light text-dark",4,"ngIf"],[1,"mt-2","p-4","bg-light","text-dark"],["target","_blank","rel","noopener noreferrer",1,"license-link",3,"href"],[1,"m-2"],["type","checkbox","title","accepted",1,"mr-2",3,"checked"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",1)(1,"ds-select",2),core.qex(2,3),core.DNE(3,SubmissionSectionCcLicensesComponent_span_3_Template,2,0,"span",4)(4,SubmissionSectionCcLicensesComponent_span_4_Template,2,1,"span",4)(5,SubmissionSectionCcLicensesComponent_span_5_Template,3,2,"span",4),core.bVm(),core.qex(6,5),core.DNE(7,SubmissionSectionCcLicensesComponent_button_7_Template,3,3,"button",6)(8,SubmissionSectionCcLicensesComponent_button_8_Template,2,1,"button",7),core.bVm(),core.k0s()(),core.DNE(9,SubmissionSectionCcLicensesComponent_ng_container_9_Template,2,1,"ng-container",4)(10,SubmissionSectionCcLicensesComponent_ng_container_10_Template,3,3,"ng-container",4)),2&rf&&(core.R7$(),core.Y8G("disabled",!ctx.submissionCcLicenses),core.R7$(2),core.Y8G("ngIf",!ctx.submissionCcLicenses),core.R7$(),core.Y8G("ngIf",ctx.getSelectedCcLicense()),core.R7$(),core.Y8G("ngIf",ctx.submissionCcLicenses&&!ctx.getSelectedCcLicense()),core.R7$(2),core.Y8G("ngIf",0===(null==ctx.submissionCcLicenses?null:ctx.submissionCcLicenses.length)),core.R7$(),core.Y8G("ngForOf",ctx.submissionCcLicenses),core.R7$(),core.Y8G("ngIf",ctx.getSelectedCcLicense()),core.R7$(),core.Y8G("ngIf",ctx.getCcLicenseLink$()))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,common.bT,themed_loading_component.v,common.Jj,var_directive.r,common.Sq,DsSelectComponent],styles:[".options-select-menu[_ngcontent-%COMP%]{max-height:25vh}"]})}return SubmissionSectionCcLicensesComponent2})();var metadata_utils=__webpack_require__(10339),url_combiner=__webpack_require__(1828),item_page_routing_paths=__webpack_require__(63254);function SubmissionSectionDuplicatesComponent_div_0_ng_container_1_Template(rf,ctx){1&rf&&(core.qex(0),core.j41(1,"div",3),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.bVm()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,1,"submission.sections.duplicates.none")))}function SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const metadatum_r1=ctx.$implicit;core.R7$(),core.Lme(" ",core.bMT(2,2,"item.preview."+metadatum_r1.key)," ",metadatum_r1.value," ")}}function SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_p_4_Template(rf,ctx){1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"submission.sections.duplicates.in-workspace")))}function SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_p_5_Template(rf,ctx){1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"submission.sections.duplicates.in-workflow")))}function SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",6)(1,"a",7),core.EFF(2),core.k0s(),core.DNE(3,SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_div_3_Template,3,4,"div",8)(4,SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_p_4_Template,3,3,"p",2)(5,SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_p_5_Template,3,3,"p",2),core.k0s()),2&rf){const dupe_r2=ctx.$implicit,ctx_r2=core.XpG(3);core.R7$(),core.Y8G("href",ctx_r2.getItemLink(dupe_r2.uuid),core.B4B),core.R7$(),core.JRh(dupe_r2.title),core.R7$(),core.Y8G("ngForOf",ctx_r2.Metadata.toViewModelList(dupe_r2.metadata)),core.R7$(),core.Y8G("ngIf",dupe_r2.workspaceItemId),core.R7$(),core.Y8G("ngIf",dupe_r2.workflowItemId)}}function SubmissionSectionDuplicatesComponent_div_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"div",4),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,SubmissionSectionDuplicatesComponent_div_0_ng_container_2_div_4_Template,6,5,"div",5),core.bVm()),2&rf){const data_r4=core.XpG().ngVar;core.R7$(2),core.JRh(core.bMT(3,2,"submission.sections.duplicates.detected")),core.R7$(2),core.Y8G("ngForOf",null==data_r4?null:data_r4.potentialDuplicates)}}function SubmissionSectionDuplicatesComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1),core.DNE(1,SubmissionSectionDuplicatesComponent_div_0_ng_container_1_Template,4,3,"ng-container",2)(2,SubmissionSectionDuplicatesComponent_div_0_ng_container_2_Template,5,4,"ng-container",2),core.k0s()),2&rf){const data_r4=ctx.ngVar;core.R7$(),core.Y8G("ngIf",0===(null==data_r4?null:data_r4.potentialDuplicates.length)),core.R7$(),core.Y8G("ngIf",(null==data_r4?null:data_r4.potentialDuplicates.length)>0)}}let SubmissionSectionDuplicatesComponent=(()=>{class SubmissionSectionDuplicatesComponent2 extends SectionModelComponent{constructor(translate,sectionService,submissionService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.translate=translate,this.sectionService=sectionService,this.submissionService=submissionService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.Metadata=metadata_utils.O,this.AlertTypeEnum=alert_type.v,this.isLoading=!0,this.subs=[]}ngOnInit(){super.ngOnInit()}onSectionInit(){this.isLoading=!1}isReadOnly(){return!0}onSectionDestroy(){}getSectionStatus(){return(0,cjs.of)(!this.isLoading)}getDuplicateData(){return this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType)}getItemLink(uuid){return new url_combiner.t((0,item_page_routing_paths.Fy)(),uuid).toString()}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionDuplicatesComponent2)(core.rXU(ngx_translate_core.c$),core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionDuplicatesComponent2,selectors:[["ds-submission-section-duplicates"]],standalone:!0,features:[core.Vt3,core.aNF],decls:2,vars:3,consts:[["class","text-sm-left",4,"ngVar"],[1,"text-sm-left"],[4,"ngIf"],[1,"alert","alert-success","w-100"],[1,"alert","alert-warning","w-100"],["class","ds-duplicate",4,"ngFor","ngForOf"],[1,"ds-duplicate"],["target","_blank",3,"href"],[4,"ngFor","ngForOf"]],template:function(rf,ctx){1&rf&&(core.DNE(0,SubmissionSectionDuplicatesComponent_div_0_Template,3,2,"div",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.getDuplicateData()))},dependencies:[var_directive.r,common.bT,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,common.Sq],encapsulation:2})}return SubmissionSectionDuplicatesComponent2})();var findIndex=__webpack_require__(84630),findIndex_default=__webpack_require__.n(findIndex),environment=__webpack_require__(72035),object_cache_service=__webpack_require__(40017),submission_forms_config_data_service=__webpack_require__(34759),request_service=__webpack_require__(72744),workflowitem_model=__webpack_require__(56250),workspaceitem_model=__webpack_require__(17034),submission_object_data_service=__webpack_require__(95496),submission_scope_type=__webpack_require__(51900);class FormFieldPreviousValueObject{constructor(path=null,value=null){this._path=path,this._value=value}get path(){return this._path}set path(path){this._path=path}get value(){return this._value}set value(value){this._value=value}delete(){this._value=null,this._path=null}isPathEqual(path){return this._path&&isEqual_default()(this._path,path)}}var notifications_service=__webpack_require__(10117),object_util=__webpack_require__(93434),follow_link_config_model=__webpack_require__(32181);const section_form_component_c0=["formRef"];function SubmissionSectionFormComponent_ds_loading_0_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading",3)}function SubmissionSectionFormComponent_ds_form_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-form",4,0),core.bIt("dfChange",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onChange($event))})("dfFocus",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onFocus($event))})("remove",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onRemove($event))})("ngbEvent",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onCustomEvent($event))})("removeArrayItem",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onRemove($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}let SubmissionSectionFormComponent=(()=>{class SubmissionSectionFormComponent2 extends SectionModelComponent{constructor(cdr,formBuilderService,formOperationsService,formService,formConfigService,notificationsService,sectionService,submissionService,translate,submissionObjectService,objectCache,requestService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.cdr=cdr,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.formConfigService=formConfigService,this.notificationsService=notificationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.submissionObjectService=submissionObjectService,this.objectCache=objectCache,this.requestService=requestService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isUpdating=!1,this.isLoading=!0,this.fieldsOnTheirWayToBeRemoved=new Map,this.formData=Object.create({}),this.previousValue=new FormFieldPreviousValueObject,this.subs=[],this.isSectionReadonly=!1}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.sectionService.dispatchSetSectionFormId(this.submissionId,this.sectionData.id,this.formId),this.formConfigService.findByHref(this.sectionData.config).pipe((0,operators.Tj)(configData=>configData.payload),(0,operators.Mi)(config=>this.formConfig=config),(0,operators.ZZ)(()=>(0,cjs.combineLatest)([this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType),this.submissionObjectService.findById(this.submissionId,!0,!1,(0,follow_link_config_model.s)("item")).pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)()),this.sectionService.isSectionReadOnly(this.submissionId,this.sectionData.id,this.submissionService.getSubmissionScope())])),(0,operators.s)(1)).subscribe(([sectionData,submissionObject,isSectionReadOnly])=>{(0,empty_util.b0)(this.formModel)&&(this.submissionObject=submissionObject,this.isSectionReadonly=isSectionReadOnly,this.initForm(sectionData,this.sectionData.errorsToShow,this.sectionData.serverValidationErrors),this.sectionData.data=sectionData,this.subscriptions(),this.isLoading=!1,this.cdr.detectChanges())})}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}getSectionStatus(){const formStatus$=this.formService.isValid(this.formId),serverValidationStatus$=this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe((0,operators.Tj)(validationErrors=>(0,empty_util.Im)(validationErrors)));return(0,cjs.combineLatest)([formStatus$,serverValidationStatus$]).pipe((0,operators.Tj)(([formValidation,serverSideValidation])=>formValidation&&serverSideValidation))}hasMetadataEnrichment(sectionData){const sectionDataToCheck={};Object.keys(sectionData).forEach(key=>{this.inCurrentSubmissionScope(key)&&(sectionDataToCheck[key]=sectionData[key])});const diffResult=[],diffObj=(0,object_util.iv)(sectionDataToCheck,this.formData);return Object.keys(diffObj).forEach(key=>{diffObj[key].forEach(value=>{value.hasOwnProperty("value")&&findIndex_default()(this.formData[key],{value:value.value})<0&&diffResult.push(value)})}),(0,empty_util.hj)(diffResult)}inCurrentSubmissionScope(field){switch(this.formConfig?.rows.find(row=>row.fields?.[0]?.selectableMetadata?row.fields?.[0]?.selectableMetadata?.[0]?.metadata===field:!!row.fields?.[0]?.selectableRelationship&&row.fields?.[0]?.selectableRelationship.relationshipType===field.replace(/^relationship\./g,""))?.fields?.[0]?.scope){case submission_scope_type.L.WorkspaceItem.valueOf():return this.submissionObject.type===workspaceitem_model.F.type.value;case submission_scope_type.L.WorkflowItem.valueOf():return this.submissionObject.type===workflowitem_model.t.type.value;default:return!0}}initForm(sectionData,errorsToShow,serverValidationErrors){try{this.formModel=this.formBuilderService.modelFromConfiguration(this.submissionId,this.formConfig,this.collectionId,sectionData,this.submissionService.getSubmissionScope(),this.isSectionReadonly);const sectionMetadata=this.sectionService.computeSectionConfiguredMetadata(this.formConfig);this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,sectionData,errorsToShow,serverValidationErrors,sectionMetadata)}catch(e){const sectionError={message:this.translate.instant("error.submission.sections.init-form-error")+e.toString(),path:"/sections/"+this.sectionData.id};e instanceof Error&&console.error(e.stack),this.sectionService.setSectionError(this.submissionId,this.sectionData.id,sectionError)}}updateForm(sectionState){const sectionData=sectionState.data,errors=sectionState.errorsToShow;(0,empty_util.hj)(sectionData)&&!isEqual_default()(sectionData,this.sectionData.data)?(this.sectionData.data=sectionData,this.hasMetadataEnrichment(sectionData)?(this.isUpdating=!0,this.formModel=null,this.cdr.detectChanges(),this.initForm(sectionData,errors,sectionState.serverValidationErrors),this.checksForErrors(errors),this.isUpdating=!1,this.cdr.detectChanges()):((0,empty_util.hj)(errors)||(0,empty_util.hj)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)):((0,empty_util.hj)(errors)||(0,empty_util.hj)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)}checksForErrors(errors){this.formService.isFormInitialized(this.formId).pipe((0,operators.I6)(status=>!0===status&&!this.isUpdating)).subscribe(()=>{this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,errors,this.sectionData.errorsToShow),this.sectionData.errorsToShow=errors,this.cdr.detectChanges()})}subscriptions(){this.subs.push(this.formService.getFormData(this.formId).pipe((0,operators.F)()).subscribe(formData=>{this.formData=formData}),this.sectionService.getSectionState(this.submissionId,this.sectionData.id,this.sectionData.sectionType).pipe((0,operators.pb)(sectionState=>(0,empty_util.hj)(sectionState)&&((0,empty_util.hj)(sectionState.data)||(0,empty_util.hj)(sectionState.errorsToShow))),(0,operators.F)()).subscribe(sectionState=>{this.fieldsOnTheirWayToBeRemoved=new Map,this.sectionMetadata=sectionState.metadata,this.updateForm(sectionState)}))}onChange(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(this.formBuilderService.getId(event.model),this.formOperationsService.getArrayIndexFromEvent(event)));const metadata=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);(-1!==environment.c.submission.autosave.metadata.indexOf(metadata)&&(0,empty_util.hj)(value)||this.hasRelatedCustomError(metadata))&&this.submissionService.dispatchSave(this.submissionId)}hasRelatedCustomError(medatata){const index=findIndex_default()(this.sectionData.errorsToShow,{path:this.pathCombiner.getPath(medatata).path});if(-1!==index){const validator=this.sectionData.errorsToShow[index].message.replace("error.validation.","");return!environment.c.form.validatorMap.hasOwnProperty(validator)}return!1}onFocus(event){const value=this.formOperationsService.getFieldValueFromChangeEvent(event),path=this.formBuilderService.getPath(event.model);this.formBuilderService.hasMappedGroupValue(event.model)?(this.previousValue.path=path,this.previousValue.value=this.formOperationsService.getQualdropValueMap(event)):(0,empty_util.hj)(value)&&("object"==typeof value&&(0,empty_util.hj)(value.value)||"string"==typeof value)&&(this.previousValue.path=path,this.previousValue.value=value)}onRemove(event){const fieldId=this.formBuilderService.getId(event.model),fieldIndex=this.formOperationsService.getArrayIndexFromEvent(event);if(this.fieldsOnTheirWayToBeRemoved.has(fieldId)){const indexes=this.fieldsOnTheirWayToBeRemoved.get(fieldId);indexes.push(fieldIndex),this.fieldsOnTheirWayToBeRemoved.set(fieldId,indexes)}else this.fieldsOnTheirWayToBeRemoved.set(fieldId,[fieldIndex]);this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(fieldId,fieldIndex))}hasStoredValue(fieldId,index){return!!(0,empty_util.hj)(this.sectionData.data)&&this.sectionData.data.hasOwnProperty(fieldId)&&(0,empty_util.hj)(this.sectionData.data[fieldId][index])&&!this.isFieldToRemove(fieldId,index)}isFieldToRemove(fieldId,index){return this.fieldsOnTheirWayToBeRemoved.has(fieldId)&&this.fieldsOnTheirWayToBeRemoved.get(fieldId).includes(index)}onCustomEvent(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,null)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionFormComponent2)(core.rXU(core.gRc),core.rXU(form_builder_service.j),core.rXU(SectionFormOperationsService),core.rXU(form_service.u),core.rXU(submission_forms_config_data_service.SubmissionFormsConfigDataService),core.rXU(notifications_service.I),core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU(ngx_translate_core.c$),core.rXU(submission_object_data_service.$),core.rXU(object_cache_service.$),core.rXU(request_service.B),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionFormComponent2,selectors:[["ds-submission-section-form"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(section_form_component_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.formRef=_t.first)}},standalone:!0,features:[core.Vt3,core.aNF],decls:2,vars:2,consts:[["formRef","formComponent"],["message","Loading...",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem",4,"ngIf"],["message","Loading..."],[3,"dfChange","dfFocus","remove","ngbEvent","removeArrayItem","formId","formModel","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&core.DNE(0,SubmissionSectionFormComponent_ds_loading_0_Template,1,0,"ds-loading",1)(1,SubmissionSectionFormComponent_ds_form_1_Template,2,4,"ds-form",2),2&rf&&(core.Y8G("ngIf",ctx.isLoading),core.R7$(),core.Y8G("ngIf",!ctx.isLoading&&ctx.formModel))},dependencies:[form_component.s,themed_loading_component.v,common.bT]})}return SubmissionSectionFormComponent2})();function SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_ng_container_6_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"li"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.bVm()),2&rf){const identifier_r1=core.XpG().$implicit;core.R7$(2),core.Lme("",core.bMT(3,2,"submission.sections.identifiers."+identifier_r1.identifierType+"_label")," ",identifier_r1.value,"")}}function SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_ng_container_6_ng_container_1_Template,4,4,"ng-container",1),core.bVm()),2&rf){const identifier_r1=ctx.$implicit,identifierData_r2=core.XpG(2).ngVar;core.R7$(),core.Y8G("ngIf",identifierData_r2.displayTypes.includes(identifier_r1.identifierType)&&identifier_r1.value)}}function SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"div")(2,"span"),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"ul"),core.DNE(6,SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_ng_container_6_Template,2,1,"ng-container",2),core.k0s()(),core.bVm()),2&rf){const identifierData_r2=core.XpG().ngVar;core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.identifiers.info")),core.R7$(3),core.Y8G("ngForOf",identifierData_r2.identifiers)}}function SubmissionSectionIdentifiersComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionIdentifiersComponent_ng_container_0_ng_container_1_Template,7,4,"ng-container",1),core.bVm()),2&rf){const identifierData_r2=ctx.ngVar;core.R7$(),core.Y8G("ngIf",identifierData_r2&&identifierData_r2.identifiers)}}let SubmissionSectionIdentifiersComponent=(()=>{class SubmissionSectionIdentifiersComponent2 extends SectionModelComponent{constructor(translate,sectionService,submissionService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.translate=translate,this.sectionService=sectionService,this.submissionService=submissionService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.AlertTypeEnum=alert_type.v,this.isLoading=!0,this.identifierData$=new cjs.Observable,this.subs=[]}ngOnInit(){super.ngOnInit()}onSectionInit(){this.isLoading=!1,this.identifierData$=this.getIdentifierData()}isReadOnly(){return!0}onSectionDestroy(){}getSectionStatus(){return(0,cjs.of)(!this.isLoading)}getIdentifierData(){return this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionIdentifiersComponent2)(core.rXU(ngx_translate_core.c$),core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionIdentifiersComponent2,selectors:[["ds-submission-section-identifiers"]],standalone:!0,features:[core.Vt3,core.aNF],decls:2,vars:3,consts:[[4,"ngVar"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(rf,ctx){1&rf&&(core.DNE(0,SubmissionSectionIdentifiersComponent_ng_container_0_Template,2,1,"ng-container",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.getIdentifierData()))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,common.Sq,common.bT,common.Jj,var_directive.r],encapsulation:2})}return SubmissionSectionIdentifiersComponent2})();var collection_data_service=__webpack_require__(39138);const SECTION_LICENSE_FORM_LAYOUT={granted:{element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}}},SECTION_LICENSE_FORM_MODEL=[{id:"granted",label:"submission.sections.license.granted-label",required:!0,value:!1,validators:{required:null},errorMessages:{required:"submission.sections.license.required",notgranted:"submission.sections.license.notgranted"},type:"CHECKBOX"}],section_license_component_c0=["formRef"];function SubmissionSectionLicenseComponent_ds_form_4_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-form",3,0),core.bIt("dfChange",function($event){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onChange($event))}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("formLayout",ctx_r1.formLayout)("displaySubmit",ctx_r1.displaySubmit)("displayCancel",!1)}}let SubmissionSectionLicenseComponent=(()=>{class SubmissionSectionLicenseComponent2 extends SectionModelComponent{constructor(changeDetectorRef,collectionDataService,formBuilderService,formOperationsService,formService,operationsBuilder,sectionService,submissionService,translateService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.operationsBuilder=operationsBuilder,this.sectionService=sectionService,this.submissionService=submissionService,this.translateService=translateService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.formLayout=SECTION_LICENSE_FORM_LAYOUT,this.displaySubmit=!1,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.formModel=this.formBuilderService.fromJSON(SECTION_LICENSE_FORM_MODEL);const model=this.formBuilderService.findById("granted",this.formModel);model.label&&(model.label=this.translateService.instant(model.label)),model.value=this.sectionData.data.granted,this.licenseText$=this.collectionDataService.findById(this.collectionId,!0,!0,(0,follow_link_config_model.s)("license")).pipe((0,operators.pb)(collectionData=>(0,empty_util.EA)(collectionData.payload)),(0,operators.ZZ)(collectionData=>collectionData.payload.license),(0,operators.I6)(licenseData=>(0,empty_util.EA)(licenseData.payload)),(0,operators.Tj)(licenseData=>licenseData.payload.text),(0,operators.ql)("")),this.subs.push(this.sectionService.isSectionReadOnly(this.submissionId,this.sectionData.id,this.submissionService.getSubmissionScope()).pipe((0,operators.s)(1),(0,operators.pb)(isReadOnly=>isReadOnly)).subscribe(()=>{model.disabled=!0}),this.sectionService.getSectionErrors(this.submissionId,this.sectionData.id).pipe((0,operators.pb)(errors=>(0,empty_util.hj)(errors)),(0,operators.F)()).subscribe(errors=>{const newErrors=errors.map(error=>"/sections/license"===error.path?model.checked?null:Object.assign({},error,{path:"/sections/license/granted"}):error).filter(error=>(0,empty_util.Pe)(error));(0,empty_util.hj)(newErrors)?(this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,newErrors),this.sectionData.errors=errors):this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)}))}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}getSectionStatus(){const model=this.formBuilderService.findById("granted",this.formModel);return model.valueChanges.pipe((0,operators.Tj)(value=>!0===value),(0,operators.ql)(model.value))}onChange(event){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);value?(this.operationsBuilder.add(this.pathCombiner.getPath(path),value.value.toString(),!1,!0),this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)):this.operationsBuilder.remove(this.pathCombiner.getPath(path)),this.submissionService.dispatchSaveSection(this.submissionId,this.sectionData.id)}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionLicenseComponent2)(core.rXU(core.gRc),core.rXU(collection_data_service.CollectionDataService),core.rXU(form_builder_service.j),core.rXU(SectionFormOperationsService),core.rXU(form_service.u),core.rXU(json_patch_operations_builder.C),core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU(ngx_translate_core.c$),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionLicenseComponent2,selectors:[["ds-submission-section-license"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(section_license_component_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.formRef=_t.first)}},standalone:!0,features:[core.Jv_([]),core.Vt3,core.aNF],decls:5,vars:4,consts:[["formRef","formComponent"],[1,"mb-5","preserve-line-breaks",3,"innerHTML"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange",4,"ngIf"],[3,"dfChange","formId","formModel","formLayout","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&(core.nrm(0,"span",1),core.nI1(1,"async"),core.nrm(2,"br")(3,"br"),core.DNE(4,SubmissionSectionLicenseComponent_ds_form_4_Template,2,5,"ds-form",2)),2&rf&&(core.Y8G("innerHTML",core.bMT(1,2,ctx.licenseText$),core.npT),core.R7$(4),core.Y8G("ngIf",ctx.formModel))},dependencies:[form_component.s,common.bT,common.Jj]})}return SubmissionSectionLicenseComponent2})();var ngx_infinite_scroll=__webpack_require__(52002),ldn_services_data_service=__webpack_require__(97597),coar_notify_config_data_service=__webpack_require__(79321);const section_coar_notify_component_c0=a0=>({"border-danger":a0}),section_coar_notify_component_c1=a0=>({"bg-light":a0}),_c2=a0=>({pattern:a0});function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_10_Template(rf,ctx){1&rf&&(core.j41(0,"button",23),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.section.section-coar-notify.dropdown.no-data")," "))}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_12_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",24),core.bIt("click",function(){core.eBV(_r3);const serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);return core.Njj(ctx_r5.onChange(ldnPattern_r5.pattern,serviceIndex_r4,null))}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.section.section-coar-notify.dropdown.select-none")," "))}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_14_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"button",25),core.bIt("click",function(){const serviceOption_r8=core.eBV(_r7).$implicit,serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);return core.Njj(ctx_r5.onChange(ldnPattern_r5.pattern,serviceIndex_r4,serviceOption_r8))}),core.j41(1,"b"),core.EFF(2),core.k0s(),core.nrm(3,"br"),core.EFF(4),core.k0s()}if(2&rf){const serviceOption_r8=ctx.$implicit,serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);core.Y8G("ngClass",core.eq3(3,section_coar_notify_component_c1,(null==ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4]?null:ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4].id)===serviceOption_r8.id)),core.R7$(2),core.SpI(" ",serviceOption_r8.name," "),core.R7$(2),core.SpI(" ",serviceOption_r8.description," ")}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_16_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"button",26),core.nI1(1,"translate"),core.nI1(2,"translate"),core.bIt("click",function(){core.eBV(_r9);const serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);return core.Njj(ctx_r5.removeService(ldnPattern_r5,serviceIndex_r4))}),core.j41(3,"span"),core.nrm(4,"i",27),core.k0s()()}if(2&rf){const serviceIndex_r4=core.XpG().index;core.AVh("mt-2",serviceIndex_r4>0),core.FS9("title",core.bMT(1,4,"form.remove")),core.BMQ("aria-label",core.bMT(2,6,"form.remove"))}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_small_17_Template(rf,ctx){if(1&rf&&(core.j41(0,"small",28),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ldnPattern_r5=core.XpG(4).$implicit;core.R7$(),core.SpI(" ",core.i5U(2,1,"submission.section.section-coar-notify.small.notification",core.eq3(4,_c2,ldnPattern_r5.pattern))," ")}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_ng_container_18_small_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"small",30),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const error_r10=ctx.$implicit;core.R7$(),core.SpI(" ",core.bMT(2,1,error_r10.message)," ")}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_ng_container_18_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_ng_container_18_small_1_Template,3,3,"small",29),core.nI1(2,"async"),core.bVm()),2&rf){const serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);core.R7$(),core.Y8G("ngForOf",core.bMT(2,1,ctx_r5.getShownSectionErrors$(ldnPattern_r5.pattern,serviceIndex_r4)))}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_div_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.EFF(1),core.k0s()),2&rf){const serviceIndex_r4=core.XpG(2).index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);core.R7$(),core.SpI(" ",ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4].description," ")}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_ng_template_8_Template(rf,ctx){1&rf&&(core.j41(0,"span",36),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.section.section-coar-notify.selection.no-description")," "))}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",31)(1,"div",32),core.nrm(2,"i",33),core.j41(3,"div",34)(4,"div"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_div_7_Template,2,1,"div",35)(8,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_ng_template_8_Template,3,3,"ng-template",null,1,core.C5r),core.k0s()()()),2&rf){const noDesc_r11=core.sdS(9),serviceIndex_r4=core.XpG().index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);core.R7$(5),core.JRh(core.bMT(6,3,"submission.section.section-coar-notify.selection.description")),core.R7$(2),core.Y8G("ngIf",null==ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4]?null:ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4].description)("ngIfElse",noDesc_r11)}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_21_Template(rf,ctx){1&rf&&(core.j41(0,"div",8)(1,"div",37)(2,"div",34)(3,"span"),core.EFF(4),core.nI1(5,"translate"),core.k0s()()()()),2&rf&&(core.R7$(4),core.SpI(" ",core.bMT(5,1,"submission.section.section-coar-notify.notification.error")," "))}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_24_Template(rf,ctx){if(1&rf){const _r12=core.RV6();core.j41(0,"div",38),core.bIt("click",function(){core.eBV(_r12);const ldnPattern_r5=core.XpG(4).$implicit,ctx_r5=core.XpG(2);return core.Njj(ctx_r5.addNewService(ldnPattern_r5))}),core.nrm(1,"i",39),core.EFF(2),core.nI1(3,"translate"),core.k0s()}2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.sections.general.add-more")," "))}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div")(1,"div",8)(2,"div",9,0)(4,"div",10),core.nrm(5,"i",11),core.j41(6,"input",12),core.nI1(7,"async"),core.bIt("click",function(){core.eBV(_r1);const myDropdown_r2=core.sdS(3);return core.Njj(myDropdown_r2.open())}),core.k0s()(),core.j41(8,"div",13)(9,"div",14),core.DNE(10,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_10_Template,3,3,"button",15),core.nI1(11,"async"),core.DNE(12,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_12_Template,3,3,"button",16),core.nI1(13,"async"),core.DNE(14,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_14_Template,5,5,"button",17),core.nI1(15,"async"),core.k0s()()(),core.DNE(16,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_button_16_Template,5,8,"button",18),core.k0s(),core.DNE(17,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_small_17_Template,3,6,"small",19)(18,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_ng_container_18_Template,3,3,"ng-container",3),core.nI1(19,"async"),core.DNE(20,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_20_Template,10,5,"div",20)(21,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_21_Template,6,3,"div",21),core.nI1(22,"async"),core.j41(23,"div",8),core.DNE(24,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_div_24_Template,4,3,"div",22),core.k0s()()}if(2&rf){let tmp_13_0,tmp_19_0,tmp_20_0,tmp_24_0,tmp_26_0;const serviceIndex_r4=ctx.index,ldnPattern_r5=core.XpG(3).$implicit,ctx_r5=core.XpG(2);core.R7$(2),core.AVh("mt-2",serviceIndex_r4>0),core.R7$(2),core.BMQ("aria-label",ldnPattern_r5.pattern+".dropdown"),core.R7$(2),core.Y8G("readonly",!0)("ngClass",core.eq3(31,section_coar_notify_component_c0,(null==(tmp_13_0=core.bMT(7,19,ctx_r5.getShownSectionErrors$(ldnPattern_r5.pattern,serviceIndex_r4)))?null:tmp_13_0.length)>0))("value",null==ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4]?null:ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4].name),core.BMQ("aria-label",ldnPattern_r5.pattern+".dropdownanchor"),core.R7$(3),core.Y8G("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),core.R7$(),core.Y8G("ngIf",0===(null==(tmp_19_0=core.bMT(11,21,ctx_r5.filterServices(ldnPattern_r5.pattern)))?null:tmp_19_0.length)),core.R7$(2),core.Y8G("ngIf",(null==(tmp_20_0=core.bMT(13,23,ctx_r5.filterServices(ldnPattern_r5.pattern)))?null:tmp_20_0.length)>0),core.R7$(2),core.Y8G("ngForOf",core.bMT(15,25,ctx_r5.filterServices(ldnPattern_r5.pattern))),core.R7$(2),core.Y8G("ngIf",ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services.length>1),core.R7$(),core.Y8G("ngIf",!ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4]&&serviceIndex_r4===ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services.length-1),core.R7$(),core.Y8G("ngIf",(null==(tmp_24_0=core.bMT(19,27,ctx_r5.getShownSectionErrors$(ldnPattern_r5.pattern,serviceIndex_r4)))?null:tmp_24_0.length)>0),core.R7$(2),core.Y8G("ngIf",ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services[serviceIndex_r4]),core.R7$(),core.Y8G("ngIf",(null==(tmp_26_0=core.bMT(22,29,ctx_r5.getShownSectionErrors$(ldnPattern_r5.pattern,serviceIndex_r4)))?null:tmp_26_0.length)>0),core.R7$(3),core.Y8G("ngIf",ldnPattern_r5.multipleRequest&&serviceIndex_r4===ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services.length-1)}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_div_1_Template,25,33,"div",7),core.k0s()),2&rf){const ldnPattern_r5=core.XpG(2).$implicit,ctx_r5=core.XpG(2);core.R7$(),core.Y8G("ngForOf",ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services)}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"label",6),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_div_4_Template,2,1,"div",3),core.k0s()),2&rf){const ldnPattern_r5=core.XpG().$implicit,ctx_r5=core.XpG(2);core.R7$(2),core.SpI(" ",core.bMT(3,2,"submission.section.section-coar-notify.control."+ldnPattern_r5.pattern+".label")," "),core.R7$(2),core.Y8G("ngIf",null==ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern]?null:ctx_r5.ldnServiceByPattern[ldnPattern_r5.pattern].services.length)}}function SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",5),core.DNE(1,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_div_1_Template,5,4,"div",3),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_4_0;const ldnPattern_r5=ctx.$implicit,ctx_r5=core.XpG(2);core.R7$(),core.Y8G("ngIf",(null==(tmp_4_0=core.bMT(2,1,ctx_r5.filterServices(ldnPattern_r5.pattern)))?null:tmp_4_0.length)>0)}}function SubmissionSectionCoarNotifyComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionCoarNotifyComponent_ng_container_1_div_1_Template,3,3,"div",4),core.bVm()),2&rf){const ctx_r5=core.XpG();core.R7$(),core.Y8G("ngForOf",ctx_r5.patterns)}}function SubmissionSectionCoarNotifyComponent_ng_container_2_Template(rf,ctx){1&rf&&(core.qex(0),core.j41(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.bVm()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.section.section-coar-notify.info.no-pattern")," "))}let SubmissionSectionCoarNotifyComponent=(()=>{class SubmissionSectionCoarNotifyComponent2 extends SectionModelComponent{constructor(ldnServicesService,operationsBuilder,sectionService,coarNotifyConfigDataService,chd,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.ldnServicesService=ldnServicesService,this.operationsBuilder=operationsBuilder,this.sectionService=sectionService,this.coarNotifyConfigDataService=coarNotifyConfigDataService,this.chd=chd,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.hasSectionData=!1,this.patterns=[],this.ldnServiceByPattern={},this.previousServices={},this.fieldsOnTheirWayToBeRemoved=new Map,this.subs=[],this.filteredServicesByPattern={}}onSectionInit(){this.setCoarNotifyConfig(),this.getSectionServerErrorsAndSetErrorsToDisplay(),this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id)}setCoarNotifyConfig(){this.subs.push(this.coarNotifyConfigDataService.findAll().pipe((0,shared_operators.qD)()).subscribe(data=>{data.hasSucceeded&&(this.patterns=data.payload.page[0].patterns,this.initSelectedServicesByPattern())}))}onChange(pattern,index,selectedService){if(this.ldnServiceByPattern[pattern].services[index]?.id===selectedService?.id)return;this.previousServices[pattern]||(this.previousServices[pattern]={services:[],allowsMultipleRequests:this.patterns.find(ldnPattern=>ldnPattern.pattern===pattern)?.multipleRequest}),this.previousServices[pattern].services[index]=this.ldnServiceByPattern[pattern].services[index],this.ldnServiceByPattern[pattern].services[index]=selectedService;const hasPrevValueStored=(0,empty_util.a4)(this.previousServices[pattern].services[index])&&this.previousServices[pattern].services[index].id!==selectedService?.id;hasPrevValueStored&&(this.operationsBuilder.flushOperation(this.pathCombiner.getPath([pattern,"-"])),this.filteredServicesByPattern[pattern]?.includes(this.previousServices[pattern].services[index])&&this.operationsBuilder.remove(this.pathCombiner.getPath([pattern,index.toString()]))),(!hasPrevValueStored||selectedService?.id&&hasPrevValueStored)&&this.operationsBuilder.add(this.pathCombiner.getPath([pattern,"-"]),[selectedService.id],!1,!0),this.previousServices[pattern].services[index]=this.ldnServiceByPattern[pattern].services[index],this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id),this.chd.detectChanges()}initSelectedServicesByPattern(){this.patterns.forEach(ldnPattern=>{(0,empty_util.a4)(this.sectionData.data[ldnPattern.pattern])?this.subs.push(this.filterServices(ldnPattern.pattern).subscribe(services=>{this.ldnServiceByPattern[ldnPattern.pattern]||(this.ldnServiceByPattern[ldnPattern.pattern]={services:[],allowsMultipleRequests:ldnPattern.multipleRequest}),this.ldnServiceByPattern[ldnPattern.pattern].services=services.filter(service=>{const selection=this.sectionData.data[ldnPattern.pattern].find(s=>s.id===service.id);return this.addService(ldnPattern,selection),this.sectionData.data[ldnPattern.pattern].includes(service.uuid)})})):(this.ldnServiceByPattern[ldnPattern.pattern]={services:[],allowsMultipleRequests:ldnPattern.multipleRequest},this.addService(ldnPattern,null))})}addService(ldnPattern,newService){this.ldnServiceByPattern[ldnPattern.pattern]||(this.ldnServiceByPattern[ldnPattern.pattern]={services:[],allowsMultipleRequests:ldnPattern.multipleRequest}),this.ldnServiceByPattern[ldnPattern.pattern].services.push(newService)}removeService(ldnPattern,serviceIndex){this.ldnServiceByPattern[ldnPattern.pattern]&&(this.ldnServiceByPattern[ldnPattern.pattern].services.splice(serviceIndex,1),this.previousServices[ldnPattern.pattern]?.services.splice(serviceIndex,1),this.operationsBuilder.flushOperation(this.pathCombiner.getPath([ldnPattern.pattern,"-"])),this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)),this.ldnServiceByPattern[ldnPattern.pattern].services.length||this.addNewService(ldnPattern)}filterServices(pattern){return this.ldnServicesService.findByInboundPattern(pattern).pipe((0,shared_operators.qD)(),(0,operators.Mi)(rd=>{if(rd.hasFailed)throw new Error(`Failed to retrieve services for pattern ${pattern}`)}),(0,operators.pb)(rd=>rd.hasSucceeded),(0,shared_operators.Bo)(),(0,shared_operators.W8)(),(0,operators.Mi)(res=>{this.filteredServicesByPattern[pattern]||(this.filteredServicesByPattern[pattern]=[]),0===this.filteredServicesByPattern[pattern].length&&this.filteredServicesByPattern[pattern].push(...res)}),(0,operators.Tj)(res=>res.filter(service=>(this.hasSectionData||(this.hasSectionData=this.hasInboundPattern(service,pattern)),this.hasInboundPattern(service,pattern)))))}hasInboundPattern(service,patternType){return service.notifyServiceInboundPatterns.some(pattern=>pattern.pattern===patternType)}getSectionServerErrorsAndSetErrorsToDisplay(){this.subs.push(this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe((0,operators.s)(1),(0,operators.pb)(validationErrors=>(0,empty_util.hj)(validationErrors))).subscribe(validationErrors=>{(0,empty_util.hj)(validationErrors)&&validationErrors.forEach(error=>{this.sectionService.setSectionError(this.submissionId,this.sectionData.id,error)})}))}getShownSectionErrors$(pattern,index){return this.sectionService.getShownSectionErrors(this.submissionId,this.sectionData.id,this.sectionData.sectionType).pipe((0,operators.s)(1),(0,operators.pb)(validationErrors=>(0,empty_util.hj)(validationErrors)),(0,operators.Tj)(validationErrors=>validationErrors.filter(error=>error.path.includes(`${pattern}/${index}`))))}getSectionStatus(){return this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe((0,operators.Tj)(validationErrors=>(0,empty_util.Im)(validationErrors)))}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}addNewService(ldnPattern){this.ldnServiceByPattern[ldnPattern.pattern].services.push(null)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionCoarNotifyComponent2)(core.rXU(ldn_services_data_service.LdnServicesService),core.rXU(json_patch_operations_builder.C),core.rXU(sections_service.c),core.rXU(coar_notify_config_data_service.CoarNotifyConfigDataService),core.rXU(core.gRc),core.rXU("collectionIdProvider"),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionCoarNotifyComponent2,selectors:[["ds-submission-section-coar-notify"]],standalone:!0,features:[core.Jv_([ng_bootstrap.tg]),core.Vt3,core.aNF],decls:3,vars:2,consts:[["myDropdown","ngbDropdown"],["noDesc",""],[1,"container-fluid"],[4,"ngIf"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"row","col-form-label"],[4,"ngFor","ngForOf"],[1,"row"],["ngbDropdown","",1,"flex-grow-1"],[1,"position-relative","right-addon"],["ngbDropdownToggle","","aria-hidden","true",1,"position-absolute","scrollable-dropdown-toggle"],["type","text",1,"form-control","w-100","scrollable-dropdown-input",3,"click","readonly","ngClass","value"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["role","listbox","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow"],["class","dropdown-item collection-item text-truncate w-100",4,"ngIf"],["class","dropdown-item collection-item text-truncate w-100",3,"click",4,"ngIf"],["class","dropdown-item collection-item text-truncate w-100",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-secondary ml-2","role","button",3,"mt-2","title","click",4,"ngIf"],["class","row text-muted",4,"ngIf"],["class","row mt-1",4,"ngIf"],["class","row",4,"ngIf"],["class","btn btn-link mt-2 pl-0",3,"click",4,"ngIf"],[1,"dropdown-item","collection-item","text-truncate","w-100"],[1,"dropdown-item","collection-item","text-truncate","w-100",3,"click"],[1,"dropdown-item","collection-item","text-truncate","w-100",3,"click","ngClass"],["type","button","role","button",1,"btn","btn-secondary","ml-2",3,"click","title"],["aria-hidden","true",1,"fas","fa-trash"],[1,"row","text-muted"],["class","row text-danger",4,"ngFor","ngForOf"],[1,"row","text-danger"],[1,"row","mt-1"],[1,"alert","alert-info","w-100","d-flex","align-items-center","flex-row"],[1,"fa-solid","fa-circle-info","fa-xl","ml-2"],[1,"ml-4"],[4,"ngIf","ngIfElse"],[1,"text-muted"],[1,"alert","alert-danger","w-100","d-flex","align-items-center","flex-row"],[1,"btn","btn-link","mt-2","pl-0",3,"click"],[1,"fas","fa-plus"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",2),core.DNE(1,SubmissionSectionCoarNotifyComponent_ng_container_1_Template,2,1,"ng-container",3)(2,SubmissionSectionCoarNotifyComponent_ng_container_2_Template,4,3,"ng-container",3),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",(null==ctx.patterns?null:ctx.patterns.length)>0),core.R7$(),core.Y8G("ngIf",!ctx.hasSectionData))},dependencies:[common.bT,common.Sq,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.do,ng_bootstrap.U0,common.YU,ngx_infinite_scroll.eO,ngx_infinite_scroll.DP],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.scrollable-dropdown-input[readonly][_ngcontent-%COMP%]{background-color:#fff}.toggle-icon[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}"]})}return SubmissionSectionCoarNotifyComponent2})();function MetadataInformationComponent_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",5)(6,"p",4),core.EFF(7),core.k0s()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.record.information.id")),core.R7$(4),core.SpI("",ctx_r0.metadata.id," ")}}function MetadataInformationComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",5)(6,"p",4),core.EFF(7),core.nI1(8,"date"),core.k0s()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.record.information.date.created")),core.R7$(4),core.SpI("",core.i5U(8,4,ctx_r0.metadata.dateCreated,"d MMMM Y H:mm:ss zzzz")," ")}}function MetadataInformationComponent_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",5)(6,"p",4),core.EFF(7),core.nI1(8,"date"),core.k0s()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.record.information.date.modified")),core.R7$(4),core.SpI("",core.i5U(8,4,ctx_r0.metadata.dateModified,"d MMMM Y H:mm:ss zzzz")," ")}}function MetadataInformationComponent_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",5)(6,"p",4)(7,"a",6),core.EFF(8),core.k0s()()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.JRh(core.bMT(4,3,"submission.sections.sherpa.record.information.uri")),core.R7$(4),core.Y8G("href",ctx_r0.metadata.uri,core.B4B),core.R7$(),core.JRh(ctx_r0.metadata.uri)}}let MetadataInformationComponent=(()=>{class MetadataInformationComponent2{static#_=this.\u0275fac=function(t){return new(t||MetadataInformationComponent2)};static#_2=this.\u0275cmp=core.VBU({type:MetadataInformationComponent2,selectors:[["ds-metadata-information"]],inputs:{metadata:"metadata"},standalone:!0,features:[core.aNF],decls:5,vars:4,consts:[[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],[1,"col-8"],["target","_blank",3,"href"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,MetadataInformationComponent_div_1_Template,8,4,"div",1)(2,MetadataInformationComponent_div_2_Template,9,7,"div",1)(3,MetadataInformationComponent_div_3_Template,9,7,"div",1)(4,MetadataInformationComponent_div_4_Template,9,5,"div",1),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",!(null==ctx.metadata||!ctx.metadata.id)),core.R7$(),core.Y8G("ngIf",!(null==ctx.metadata||!ctx.metadata.dateCreated)),core.R7$(),core.Y8G("ngIf",!(null==ctx.metadata||!ctx.metadata.dateModified)),core.R7$(),core.Y8G("ngIf",!(null==ctx.metadata||!ctx.metadata.uri)))},dependencies:[common.bT,ngx_translate_core.h,ngx_translate_core.D9,common.vh]})}return MetadataInformationComponent2})();function PublicationInformationComponent_div_1_p_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",4),core.EFF(1),core.k0s()),2&rf){const title_r1=ctx.$implicit;core.R7$(),core.SpI("",title_r1," ")}}function PublicationInformationComponent_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",3),core.DNE(6,PublicationInformationComponent_div_1_p_6_Template,2,1,"p",5),core.k0s()()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.publication.information.title")),core.R7$(3),core.Y8G("ngForOf",ctx_r1.journal.titles)}}function PublicationInformationComponent_div_2_p_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",4),core.EFF(1),core.k0s()),2&rf){const issn_r3=ctx.$implicit;core.R7$(),core.SpI("",issn_r3," ")}}function PublicationInformationComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",3),core.DNE(6,PublicationInformationComponent_div_2_p_6_Template,2,1,"p",5),core.k0s()()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.publication.information.issns")),core.R7$(3),core.Y8G("ngForOf",ctx_r1.journal.issns)}}function PublicationInformationComponent_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",3)(6,"p",4)(7,"a",6),core.EFF(8),core.k0s()()()()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,3,"submission.sections.sherpa.publication.information.url")),core.R7$(4),core.FS9("href",ctx_r1.journal.url,core.B4B),core.R7$(),core.SpI(" ",ctx_r1.journal.url," ")}}function PublicationInformationComponent_div_4_div_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3)(1,"p",4)(2,"a",6),core.EFF(3),core.k0s()()()),2&rf){const publisher_r4=ctx.$implicit;core.R7$(2),core.FS9("href",publisher_r4.uri,core.B4B),core.R7$(),core.SpI(" ",publisher_r4.name," ")}}function PublicationInformationComponent_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.DNE(5,PublicationInformationComponent_div_4_div_5_Template,4,2,"div",7),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.publication.information.publishers")),core.R7$(2),core.Y8G("ngForOf",ctx_r1.journal.publishers)}}function PublicationInformationComponent_div_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",3)(6,"p",4),core.EFF(7),core.k0s()()()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.publication.information.romeoPub")),core.R7$(4),core.SpI(" ",ctx_r1.journal.romeoPub," ")}}function PublicationInformationComponent_div_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",3)(2,"p",4),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",3)(6,"p",4),core.EFF(7),core.k0s()()()),2&rf){const ctx_r1=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.sherpa.publication.information.zetoPub")),core.R7$(4),core.SpI(" ",ctx_r1.journal.zetoPub," ")}}let PublicationInformationComponent=(()=>{class PublicationInformationComponent2{static#_=this.\u0275fac=function(t){return new(t||PublicationInformationComponent2)};static#_2=this.\u0275cmp=core.VBU({type:PublicationInformationComponent2,selectors:[["ds-publication-information"]],inputs:{journal:"journal"},standalone:!0,features:[core.aNF],decls:7,vars:6,consts:[[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],["class","m-1",4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",3,"href"],["class","col-4",4,"ngFor","ngForOf"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,PublicationInformationComponent_div_1_Template,7,4,"div",1)(2,PublicationInformationComponent_div_2_Template,7,4,"div",1)(3,PublicationInformationComponent_div_3_Template,9,5,"div",1)(4,PublicationInformationComponent_div_4_Template,6,4,"div",1)(5,PublicationInformationComponent_div_5_Template,8,4,"div",1)(6,PublicationInformationComponent_div_6_Template,8,4,"div",1),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.titles)&&ctx.journal.titles.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.issns)&&ctx.journal.issns.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.url)),core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.publishers)&&ctx.journal.publishers.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.romeoPub)),core.R7$(),core.Y8G("ngIf",!(null==ctx.journal||!ctx.journal.zetoPub)))},dependencies:[common.bT,ngx_translate_core.h,ngx_translate_core.D9,common.Sq]})}return PublicationInformationComponent2})();function ContentAccordionComponent_span_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.nrm(1,"i",16),core.EFF(2),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(2),core.Lme(" ",ctx_r2.version.embargo.amount," ",null==ctx_r2.version.embargo?null:ctx_r2.version.embargo.units[0],"")}}function ContentAccordionComponent_ng_template_9_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",16),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.sections.sherpa.publisher.policy.noembargo"),""))}function ContentAccordionComponent_span_13_span_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.k0s()),2&rf){const ctx_r2=core.XpG(2);core.R7$(),core.SpI("+",ctx_r2.version.locations.length-1,"")}}function ContentAccordionComponent_span_13_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.DNE(2,ContentAccordionComponent_span_13_span_2_Template,2,1,"span",17),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.SpI(" ",ctx_r2.version.locations[0]," "),core.R7$(),core.Y8G("ngIf",ctx_r2.version.locations.length>1)}}function ContentAccordionComponent_ng_template_14_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"submission.sections.sherpa.publisher.policy.nolocation")))}function ContentAccordionComponent_span_17_Template(rf,ctx){1&rf&&core.nrm(0,"span",18)}function ContentAccordionComponent_span_18_Template(rf,ctx){1&rf&&core.nrm(0,"span",19)}function ContentAccordionComponent_div_21_div_1_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",24),core.EFF(1),core.k0s()),2&rf){const ctx_r2=core.XpG(3);core.R7$(),core.Lme("",ctx_r2.version.embargo.amount," ",ctx_r2.version.embargo.units,"")}}function ContentAccordionComponent_div_21_div_1_ng_template_8_Template(rf,ctx){1&rf&&(core.j41(0,"p",24),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"submission.sections.sherpa.publisher.policy.noembargo")))}function ContentAccordionComponent_div_21_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",22)(1,"div",23)(2,"p",24),core.nrm(3,"i",16),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"div",25),core.DNE(7,ContentAccordionComponent_div_21_div_1_p_7_Template,2,2,"p",26)(8,ContentAccordionComponent_div_21_div_1_ng_template_8_Template,3,3,"ng-template",null,3,core.C5r),core.k0s()()),2&rf){const noEmbargo_r4=core.sdS(9),ctx_r2=core.XpG(2);core.R7$(4),core.SpI(" ",core.bMT(5,3,"submission.sections.sherpa.publisher.policy.embargo"),""),core.R7$(3),core.Y8G("ngIf",!!ctx_r2.version.embargo)("ngIfElse",noEmbargo_r4)}}function ContentAccordionComponent_div_21_div_2_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",24),core.EFF(1),core.k0s()),2&rf){const license_r5=ctx.$implicit;core.R7$(),core.JRh(license_r5)}}function ContentAccordionComponent_div_21_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",22)(1,"div",23)(2,"p",24),core.nrm(3,"i",27),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"div",25),core.DNE(7,ContentAccordionComponent_div_21_div_2_p_7_Template,2,1,"p",28),core.k0s()()),2&rf){const ctx_r2=core.XpG(2);core.R7$(4),core.SpI(" ",core.bMT(5,2,"submission.sections.sherpa.publisher.policy.license"),""),core.R7$(3),core.Y8G("ngForOf",ctx_r2.version.licenses)}}function ContentAccordionComponent_div_21_div_3_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",24),core.EFF(1),core.k0s()),2&rf){const prerequisite_r6=ctx.$implicit;core.R7$(),core.JRh(prerequisite_r6)}}function ContentAccordionComponent_div_21_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",22)(1,"div",23)(2,"p",24),core.nrm(3,"i",29),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"div",25),core.DNE(7,ContentAccordionComponent_div_21_div_3_p_7_Template,2,1,"p",28),core.k0s()()),2&rf){const ctx_r2=core.XpG(2);core.R7$(4),core.SpI(" ",core.bMT(5,2,"submission.sections.sherpa.publisher.policy.prerequisites"),""),core.R7$(3),core.Y8G("ngForOf",ctx_r2.version.prerequisites)}}function ContentAccordionComponent_div_21_div_4_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",24),core.EFF(1),core.k0s()),2&rf){const location_r7=ctx.$implicit;core.R7$(),core.JRh(location_r7)}}function ContentAccordionComponent_div_21_div_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",22)(1,"div",23)(2,"p",24),core.nrm(3,"i",10),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"div",25),core.DNE(7,ContentAccordionComponent_div_21_div_4_p_7_Template,2,1,"p",28),core.k0s()()),2&rf){const ctx_r2=core.XpG(2);core.R7$(4),core.SpI(" ",core.bMT(5,2,"submission.sections.sherpa.publisher.policy.location"),""),core.R7$(3),core.Y8G("ngForOf",ctx_r2.version.locations)}}function ContentAccordionComponent_div_21_div_5_p_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"p",24),core.EFF(1),core.k0s()),2&rf){const condition_r8=ctx.$implicit;core.R7$(),core.JRh(condition_r8)}}function ContentAccordionComponent_div_21_div_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",22)(1,"div",23)(2,"p",24),core.nrm(3,"i",30),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"div",25),core.DNE(7,ContentAccordionComponent_div_21_div_5_p_7_Template,2,1,"p",28),core.k0s()()),2&rf){const ctx_r2=core.XpG(2);core.R7$(4),core.SpI(" ",core.bMT(5,2,"submission.sections.sherpa.publisher.policy.conditions"),""),core.R7$(3),core.Y8G("ngForOf",ctx_r2.version.conditions)}}function ContentAccordionComponent_div_21_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",20),core.DNE(1,ContentAccordionComponent_div_21_div_1_Template,10,5,"div",21)(2,ContentAccordionComponent_div_21_div_2_Template,8,4,"div",21)(3,ContentAccordionComponent_div_21_div_3_Template,8,4,"div",21)(4,ContentAccordionComponent_div_21_div_4_Template,8,4,"div",21)(5,ContentAccordionComponent_div_21_div_5_Template,8,4,"div",21),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.Y8G("ngIf",!(null==ctx_r2.version||!ctx_r2.version.embargo||null==ctx_r2.version||!ctx_r2.version.embargo.amount)),core.R7$(),core.Y8G("ngIf",!(null==ctx_r2.version||!ctx_r2.version.licenses)&&ctx_r2.version.licenses.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx_r2.version||!ctx_r2.version.prerequisites)&&ctx_r2.version.prerequisites.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx_r2.version||!ctx_r2.version.locations)&&ctx_r2.version.locations.length>0),core.R7$(),core.Y8G("ngIf",!(null==ctx_r2.version||!ctx_r2.version.conditions)&&ctx_r2.version.conditions.length>0)}}let ContentAccordionComponent=(()=>{class ContentAccordionComponent2{constructor(){this.isCollapsed=!0}static#_=this.\u0275fac=function(t){return new(t||ContentAccordionComponent2)};static#_2=this.\u0275cmp=core.VBU({type:ContentAccordionComponent2,selectors:[["ds-content-accordion"]],inputs:{version:"version"},standalone:!0,features:[core.aNF],decls:22,vars:15,consts:[["noEmbargoTitle",""],["noLocations",""],["collapse","ngbCollapse"],["noEmbargo",""],["data-test","collapse",1,"mb-3","border-bottom"],[1,"w-100","d-flex","justify-content-between","collapse-toggle",3,"click"],[1,"d-flex"],["type","button","aria-controls","collapseExample",1,"btn","btn-link","p-0","mr-4",3,"click"],[4,"ngIf","ngIfElse"],[1,"m-1","ml-4"],[1,"far","fa-folder-open"],[1,"d-inline-block"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[3,"ngbCollapse"],["class","ml-4",4,"ngIf"],[1,"fas","fa-hourglass-half"],[4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"],[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],[1,"col-6"],["class","m-1",4,"ngIf","ngIfElse"],[1,"fas","fa-certificate"],["class","m-1",4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-tasks"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",4)(1,"div",5),core.bIt("click",function(){core.eBV(_r1);const collapse_r2=core.sdS(20);return core.Njj(collapse_r2.toggle())}),core.j41(2,"div",6)(3,"button",7),core.bIt("click",function($event){return core.eBV(_r1),core.Njj($event.preventDefault())}),core.EFF(4),core.nI1(5,"titlecase"),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div"),core.DNE(8,ContentAccordionComponent_span_8_Template,3,2,"span",8)(9,ContentAccordionComponent_ng_template_9_Template,4,3,"ng-template",null,0,core.C5r),core.j41(11,"span",9),core.nrm(12,"i",10),core.DNE(13,ContentAccordionComponent_span_13_Template,3,2,"span",8)(14,ContentAccordionComponent_ng_template_14_Template,3,3,"ng-template",null,1,core.C5r),core.k0s()()(),core.j41(16,"div",11),core.DNE(17,ContentAccordionComponent_span_17_Template,1,0,"span",12)(18,ContentAccordionComponent_span_18_Template,1,0,"span",13),core.k0s()(),core.j41(19,"div",14,2),core.DNE(21,ContentAccordionComponent_div_21_Template,6,5,"div",15),core.k0s()()}if(2&rf){const noEmbargoTitle_r9=core.sdS(10),noLocations_r10=core.sdS(15),collapse_r2=core.sdS(20);core.R7$(3),core.BMQ("aria-expanded",!collapse_r2.collapsed),core.R7$(),core.Lme(" ",core.bMT(5,11,ctx.version.articleVersion)," ",core.bMT(6,13,"submission.sections.sherpa.publisher.policy.version")," "),core.R7$(4),core.Y8G("ngIf",!(null==ctx.version||!ctx.version.embargo||null==ctx.version||!ctx.version.embargo.amount))("ngIfElse",noEmbargoTitle_r9),core.R7$(5),core.Y8G("ngIf",!(null==ctx.version||!ctx.version.locations)&&ctx.version.locations.length>0)("ngIfElse",noLocations_r10),core.R7$(4),core.Y8G("ngIf",collapse_r2.collapsed),core.R7$(),core.Y8G("ngIf",!collapse_r2.collapsed),core.R7$(),core.Y8G("ngbCollapse",ctx.isCollapsed),core.R7$(2),core.Y8G("ngIf",!!ctx.version)}},dependencies:[common.Sq,ngx_translate_core.h,ngx_translate_core.D9,common.bT,ng_bootstrap.HC,ng_bootstrap.$G,common.PV]})}return ContentAccordionComponent2})();function PublisherPolicyComponent_ds_content_accordion_1_Template(rf,ctx){1&rf&&core.nrm(0,"ds-content-accordion",3),2&rf&&core.Y8G("version",ctx.$implicit)}function PublisherPolicyComponent_div_2_li_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"li")(1,"a",8),core.EFF(2),core.k0s()()),2&rf){const url_r2=ctx.$implicit;core.R7$(),core.FS9("href",url_r2.key,core.B4B),core.R7$(),core.JRh(url_r2.value)}}function PublisherPolicyComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4)(1,"div",5)(2,"p",6),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"ul"),core.DNE(6,PublisherPolicyComponent_div_2_li_6_Template,3,2,"li",7),core.nI1(7,"keyvalue"),core.k0s()()()),2&rf){const ctx_r2=core.XpG();core.R7$(3),core.SpI(" ",core.bMT(4,2,"submission.sections.sherpa.publisher.policy.more.information")," "),core.R7$(3),core.Y8G("ngForOf",core.bMT(7,4,ctx_r2.policy.urls))}}let PublisherPolicyComponent=(()=>{class PublisherPolicyComponent2{constructor(){this.AlertTypeEnum=alert_type.v}static#_=this.\u0275fac=function(t){return new(t||PublisherPolicyComponent2)};static#_2=this.\u0275cmp=core.VBU({type:PublisherPolicyComponent2,selectors:[["ds-publisher-policy"]],inputs:{policy:"policy"},standalone:!0,features:[core.aNF],decls:3,vars:2,consts:[[1,"ml-4"],[3,"version",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"version"],[1,"row"],[1,"col-12"],[1,"m-1"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,PublisherPolicyComponent_ds_content_accordion_1_Template,1,1,"ds-content-accordion",1)(2,PublisherPolicyComponent_div_2_Template,8,6,"div",2),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngForOf",ctx.policy.permittedVersions),core.R7$(),core.Y8G("ngIf",!(null==ctx.policy||!ctx.policy.urls)))},dependencies:[ContentAccordionComponent,ngx_translate_core.h,ngx_translate_core.D9,common.lG,common.Sq,common.bT]})}return PublisherPolicyComponent2})();function SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template(rf,ctx){1&rf&&core.nrm(0,"ds-alert",4),2&rf&&core.Y8G("type","alert-info")("content","submission.sections.sherpa-policy.title-empty")}function SubmissionSectionSherpaPoliciesComponent_div_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",5)(1,"ds-alert",6),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div")(5,"button",7),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.refresh())}),core.j41(6,"span"),core.nrm(7,"i",8),core.EFF(8),core.nI1(9,"translate"),core.k0s()()()()}2&rf&&(core.R7$(),core.Y8G("type","alert-info"),core.R7$(),core.SpI(" ",core.bMT(3,3,"submission.sections.sherpa.publisher.policy.description")," "),core.R7$(6),core.SpI(" ",core.bMT(9,5,"submission.sections.sherpa.publisher.policy.refresh")," "))}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template(rf,ctx){1&rf&&core.nrm(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template(rf,ctx){1&rf&&core.nrm(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template(rf,ctx){1&rf&&core.nrm(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template(rf,ctx){1&rf&&core.nrm(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",11)(1,"div",12),core.bIt("click",function(){core.eBV(_r6);const collapse_r7=core.sdS(9);return core.Njj(collapse_r7.toggle())}),core.j41(2,"button",13),core.bIt("click",function($event){return core.eBV(_r6),core.Njj($event.preventDefault())}),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",14),core.DNE(6,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template,1,0,"span",15)(7,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template,1,0,"span",16),core.k0s()(),core.j41(8,"div",17,0),core.nrm(10,"ds-publisher-policy",23),core.k0s()()}if(2&rf){const policy_r8=ctx.$implicit,collapse_r7=core.sdS(9),ctx_r1=core.XpG(4);core.R7$(2),core.BMQ("aria-expanded",!collapse_r7.collapsed),core.R7$(),core.SpI(" ",core.bMT(4,6,"submission.sections.sherpa.publisher.policy")," "),core.R7$(3),core.Y8G("ngIf",collapse_r7.collapsed),core.R7$(),core.Y8G("ngIf",!collapse_r7.collapsed),core.R7$(),core.Y8G("ngbCollapse",ctx_r1.isCollapsed),core.R7$(2),core.Y8G("policy",policy_r8)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.qex(0),core.j41(1,"div",11)(2,"div",12),core.bIt("click",function(){core.eBV(_r4);const collapse_r5=core.sdS(10);return core.Njj(collapse_r5.toggle())}),core.j41(3,"button",13),core.bIt("click",function($event){return core.eBV(_r4),core.Njj($event.preventDefault())}),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div",14),core.DNE(7,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template,1,0,"span",15)(8,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template,1,0,"span",16),core.k0s()(),core.j41(9,"div",17,0),core.nrm(11,"ds-publication-information",19),core.k0s()(),core.DNE(12,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template,11,8,"div",20),core.bVm()}if(2&rf){const journal_r9=ctx.$implicit,collapse_r5=core.sdS(10),ctx_r1=core.XpG(3);core.R7$(3),core.BMQ("aria-expanded",!collapse_r5.collapsed),core.R7$(),core.SpI(" ",core.bMT(5,7,"submission.sections.sherpa.publication.information")," "),core.R7$(3),core.Y8G("ngIf",collapse_r5.collapsed),core.R7$(),core.Y8G("ngIf",!collapse_r5.collapsed),core.R7$(),core.Y8G("ngbCollapse",ctx_r1.isCollapsed),core.R7$(2),core.Y8G("journal",journal_r9),core.R7$(),core.Y8G("ngForOf",journal_r9.policies)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template(rf,ctx){1&rf&&core.nrm(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template(rf,ctx){1&rf&&core.nrm(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.qex(0),core.DNE(1,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template,13,9,"ng-container",10),core.j41(2,"div",11)(3,"div",12),core.bIt("click",function(){core.eBV(_r3);const collapse_r10=core.sdS(11);return core.Njj(collapse_r10.toggle())}),core.j41(4,"button",13),core.bIt("click",function($event){return core.eBV(_r3),core.Njj($event.preventDefault())}),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div",14),core.DNE(8,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template,1,0,"span",15)(9,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template,1,0,"span",16),core.k0s()(),core.j41(10,"div",17,0),core.nrm(12,"ds-metadata-information",18),core.k0s()(),core.bVm()}if(2&rf){const collapse_r10=core.sdS(11),sherpaData_r11=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngForOf",sherpaData_r11.journals),core.R7$(3),core.BMQ("aria-expanded",!collapse_r10.collapsed),core.R7$(),core.SpI(" ",core.bMT(6,7,"submission.sections.sherpa.record.information")," "),core.R7$(3),core.Y8G("ngIf",collapse_r10.collapsed),core.R7$(),core.Y8G("ngIf",!collapse_r10.collapsed),core.R7$(),core.Y8G("ngbCollapse",ctx_r1.isCollapsed),core.R7$(2),core.Y8G("metadata",sherpaData_r11.metadata)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"ds-alert",4),core.nI1(2,"translate"),core.bVm()),2&rf){const sherpaData_r11=core.XpG().ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("type",ctx_r1.AlertTypeEnum.Error)("content",sherpaData_r11.message?sherpaData_r11.message:core.bMT(2,2,"submission.sections.sherpa.error.message"))}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template,13,9,"ng-container",9)(2,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template,3,4,"ng-container",9),core.bVm()),2&rf){const sherpaData_r11=ctx.ngVar,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",!ctx_r1.hasNoData()&&!!sherpaData_r11&&!sherpaData_r11.error),core.R7$(),core.Y8G("ngIf",!!sherpaData_r11&&sherpaData_r11.error)}}let SubmissionSectionSherpaPoliciesComponent=(()=>{class SubmissionSectionSherpaPoliciesComponent2 extends SectionModelComponent{constructor(sectionService,operationsBuilder,submissionService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.operationsBuilder=operationsBuilder,this.submissionService=submissionService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.sherpaPoliciesData$=new cjs.BehaviorSubject(null),this.subs=[],this.isCollapsed=!1,this.AlertTypeEnum=alert_type.v}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionData.id),this.subs.push(this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType).subscribe(sherpaPolicies=>{this.sherpaPoliciesData$.next(sherpaPolicies)}))}getSectionStatus(){return(0,cjs.of)(!0)}hasNoData(){return(0,empty_util.Im)(this.sherpaPoliciesData$.value)}refresh(){this.operationsBuilder.remove(this.pathCombiner.getPath("retrievalTime")),this.submissionService.dispatchSaveSection(this.submissionId,this.sectionData.id)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionSherpaPoliciesComponent2)(core.rXU(sections_service.c),core.rXU(json_patch_operations_builder.C),core.rXU(submission_service.E),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionSherpaPoliciesComponent2,selectors:[["ds-section-sherpa-policies"]],standalone:!0,features:[core.Vt3,core.aNF],decls:4,vars:5,consts:[["collapse","ngbCollapse"],[3,"type","content",4,"ngIf"],["class","d-flex flex-column flex-nowrap mt-2 mb-4",4,"ngIf"],[4,"ngVar"],[3,"type","content"],[1,"d-flex","flex-column","flex-nowrap","mt-2","mb-4"],[3,"type"],["type","button","data-test","refresh-btn",1,"btn","btn-secondary","float-right",3,"click"],[1,"fas","fa-sync"],[4,"ngIf"],[4,"ngFor","ngForOf"],["data-test","collapse",1,"mb-3","border-bottom"],[1,"w-100","d-flex","justify-content-between","collapse-toggle","mb-3",3,"click"],["type","button","aria-controls","collapseExample",1,"btn","btn-link","p-0",3,"click"],[1,"d-inline-block"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[3,"ngbCollapse"],[3,"metadata"],[3,"journal"],["class","mb-3 border-bottom","data-test","collapse",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"],[3,"policy"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template,1,2,"ds-alert",1)(1,SubmissionSectionSherpaPoliciesComponent_div_1_Template,10,7,"div",2)(2,SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template,3,2,"ng-container",3),core.nI1(3,"async")),2&rf){let tmp_2_0;core.Y8G("ngIf",ctx.hasNoData()),core.R7$(),core.Y8G("ngIf",!ctx.hasNoData()),core.R7$(),core.Y8G("ngVar",null==(tmp_2_0=core.bMT(3,3,ctx.sherpaPoliciesData$))?null:tmp_2_0.sherpaResponse)}},dependencies:[MetadataInformationComponent,ng_bootstrap.HC,ng_bootstrap.$G,alert_component.C,ngx_translate_core.h,ngx_translate_core.D9,PublisherPolicyComponent,common.bT,PublicationInformationComponent,common.Jj,var_directive.r,common.Sq]})}return SubmissionSectionSherpaPoliciesComponent2})();var dso_name_service=__webpack_require__(91735),submission_uploads_config_data_service=__webpack_require__(91918),group_data_service=__webpack_require__(97195),resource_policy_data_service=__webpack_require__(55592),submission_section_upload_access_conditions_component=__webpack_require__(78115),themed_component=(__webpack_require__(51683),__webpack_require__(31260));__webpack_require__(63781);const themed_section_upload_file_component_c0=["*"];function ThemedSubmissionSectionUploadFileComponent_ng_template_0_Template(rf,ctx){}let ThemedSubmissionSectionUploadFileComponent=(()=>{class ThemedSubmissionSectionUploadFileComponent2 extends themed_component.J{constructor(){super(...arguments),this.inAndOutputNames=["availableAccessConditionOptions","isPrimary","collectionId","collectionPolicyType","configMetadataForm","fileId","fileIndex","fileName","sectionId","submissionId"]}getComponentName(){return"SubmissionSectionUploadFileComponent"}importThemedComponent(themeName){return __webpack_require__(96682)(`./${themeName}/app/submission/sections/upload/file/section-upload-file.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,63781))}static#_=this.\u0275fac=(()=>{let \u0275ThemedSubmissionSectionUploadFileComponent_BaseFactory;return function(t){return(\u0275ThemedSubmissionSectionUploadFileComponent_BaseFactory||(\u0275ThemedSubmissionSectionUploadFileComponent_BaseFactory=core.xGo(ThemedSubmissionSectionUploadFileComponent2)))(t||ThemedSubmissionSectionUploadFileComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedSubmissionSectionUploadFileComponent2,selectors:[["ds-submission-upload-section-file"]],inputs:{availableAccessConditionOptions:"availableAccessConditionOptions",isPrimary:"isPrimary",collectionId:"collectionId",collectionPolicyType:"collectionPolicyType",configMetadataForm:"configMetadataForm",fileId:"fileId",fileIndex:"fileIndex",fileName:"fileName",sectionId:"sectionId",submissionId:"submissionId"},standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_section_upload_file_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedSubmissionSectionUploadFileComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedSubmissionSectionUploadFileComponent2})();var section_upload_service=__webpack_require__(44889);const section_upload_component_c0=a0=>({collectionName:a0});function SubmissionSectionUploadComponent_ng_container_1_div_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"translate"),core.bVm()),2&rf){const ctx_r0=core.XpG(3);core.R7$(),core.SpI(" ",core.i5U(2,1,"submission.sections.upload.header.policy.default.nolist",core.eq3(4,section_upload_component_c0,ctx_r0.collectionName))," ")}}function SubmissionSectionUploadComponent_ng_container_1_div_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"translate"),core.bVm()),2&rf){const ctx_r0=core.XpG(3);core.R7$(),core.SpI(" ",core.i5U(2,1,"submission.sections.upload.header.policy.default.withlist",core.eq3(4,section_upload_component_c0,ctx_r0.collectionName))," ")}}function SubmissionSectionUploadComponent_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4)(1,"div",9)(2,"ds-alert",10),core.DNE(3,SubmissionSectionUploadComponent_ng_container_1_div_1_ng_container_3_Template,3,6,"ng-container",11)(4,SubmissionSectionUploadComponent_ng_container_1_div_1_ng_container_4_Template,3,6,"ng-container",11),core.nrm(5,"span",12)(6,"ds-submission-section-upload-access-conditions",13),core.k0s()()()),2&rf){const ctx_r0=core.XpG(2);core.R7$(2),core.Y8G("type",ctx_r0.AlertTypeEnum.Warning),core.R7$(),core.Y8G("ngIf",1===ctx_r0.collectionPolicyType),core.R7$(),core.Y8G("ngIf",2===ctx_r0.collectionPolicyType),core.R7$(2),core.Y8G("accessConditions",ctx_r0.collectionDefaultAccessConditions)}}function SubmissionSectionUploadComponent_ng_container_1_ng_container_10_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"ds-submission-upload-section-file",14),core.nI1(2,"async"),core.j41(3,"div",4)(4,"div",7),core.nrm(5,"hr"),core.k0s()(),core.bVm()),2&rf){const fileEntry_r2=ctx.$implicit,i_r3=ctx.index,ctx_r0=core.XpG(2);core.R7$(),core.Y8G("isPrimary",ctx_r0.primaryBitstreamUUID?ctx_r0.primaryBitstreamUUID===fileEntry_r2.uuid:null)("availableAccessConditionOptions",ctx_r0.availableAccessConditionOptions)("collectionId",ctx_r0.collectionId)("collectionPolicyType",ctx_r0.collectionPolicyType)("configMetadataForm",core.bMT(2,10,ctx_r0.configMetadataForm$))("fileId",fileEntry_r2.uuid)("fileIndex",i_r3)("fileName",ctx_r0.fileNames[i_r3])("sectionId",ctx_r0.sectionData.id)("submissionId",ctx_r0.submissionId)}}function SubmissionSectionUploadComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadComponent_ng_container_1_div_1_Template,7,4,"div",3),core.j41(2,"div",4)(3,"div",5)(4,"span",6),core.EFF(5),core.nI1(6,"translate"),core.k0s()()(),core.j41(7,"div",4)(8,"div",7),core.nrm(9,"hr"),core.k0s()(),core.DNE(10,SubmissionSectionUploadComponent_ng_container_1_ng_container_10_Template,6,12,"ng-container",8),core.bVm()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",ctx_r0.collectionDefaultAccessConditions.length>0),core.R7$(4),core.JRh(core.bMT(6,3,"bitstream.edit.form.primaryBitstream.label")),core.R7$(5),core.Y8G("ngForOf",ctx_r0.fileList)}}function SubmissionSectionUploadComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",4)(1,"div",7)(2,"h3",15)(3,"span",16),core.EFF(4),core.nI1(5,"translate"),core.k0s()()()()),2&rf&&(core.R7$(4),core.JRh(core.bMT(5,1,"submission.sections.upload.no-file-uploaded")))}let SubmissionSectionUploadComponent=(()=>{class SubmissionSectionUploadComponent2 extends SectionModelComponent{constructor(bitstreamService,changeDetectorRef,collectionDataService,groupService,resourcePolicyService,sectionService,submissionService,uploadsConfigService,dsoNameService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.bitstreamService=bitstreamService,this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.groupService=groupService,this.resourcePolicyService=resourcePolicyService,this.sectionService=sectionService,this.submissionService=submissionService,this.uploadsConfigService=uploadsConfigService,this.dsoNameService=dsoNameService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.AlertTypeEnum=alert_type.v,this.primaryBitstreamUUID=null,this.fileList=[],this.fileNames=[],this.collectionDefaultAccessConditions=[],this.required$=new cjs.BehaviorSubject(!0),this.subs=[]}onSectionInit(){const config$=this.uploadsConfigService.findByHref(this.sectionData.config,!0,!1,(0,follow_link_config_model.s)("metadata")).pipe((0,shared_operators.yd)(),(0,operators.Tj)(config=>config.payload));this.configMetadataForm$=config$.pipe((0,operators.nx)(config=>config.metadata.pipe((0,shared_operators.yd)(),(0,operators.Tj)(remoteData=>remoteData.payload)))),this.subs.push(this.submissionService.getSubmissionObject(this.submissionId).pipe((0,operators.pb)(submissionObject=>(0,empty_util.EA)(submissionObject)&&!submissionObject.isLoading),(0,operators.pb)(submissionObject=>(0,empty_util.b0)(this.collectionId)||this.collectionId!==submissionObject.collection),(0,operators.Mi)(submissionObject=>this.collectionId=submissionObject.collection),(0,operators.ZZ)(submissionObject=>this.collectionDataService.findById(submissionObject.collection)),(0,operators.pb)(rd=>(0,empty_util.EA)(rd.payload)),(0,operators.Mi)(collectionRemoteData=>this.collectionName=this.dsoNameService.getName(collectionRemoteData.payload)),(0,operators.ZZ)(()=>config$)).subscribe(config=>{this.required$.next(config.required),this.availableAccessConditionOptions=(0,empty_util.hj)(config.accessConditionOptions)?config.accessConditionOptions:[],this.collectionPolicyType=this.availableAccessConditionOptions.length>0?2:1,this.changeDetectorRef.detectChanges()}),(0,cjs.combineLatest)([this.configMetadataForm$,this.bitstreamService.getUploadedFilesData(this.submissionId,this.sectionData.id)]).pipe((0,operators.pb)(([configMetadataForm,sectionUploadObject])=>(0,empty_util.hj)(configMetadataForm)&&(0,empty_util.hj)(sectionUploadObject)),(0,operators.F)()).subscribe(([configMetadataForm,{primary,files}])=>{this.primaryBitstreamUUID=primary,this.fileList=files,this.fileNames=Array.from(files,file=>this.getFileName(configMetadataForm,file)),this.changeDetectorRef.detectChanges()}))}getFileName(configMetadataForm,fileData){const metadataName=configMetadataForm.rows[0].fields[0].selectableMetadata[0].metadata;let title;return title=(0,empty_util.hj)(fileData.metadata)&&(0,empty_util.hj)(fileData.metadata[metadataName])?fileData.metadata[metadataName][0].display:fileData.uuid,title}getSectionStatus(){return(0,cjs.combineLatest)(this.required$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id),(required,fileList)=>!required||(0,empty_util.EA)(fileList)&&fileList.length>0)}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionUploadComponent2)(core.rXU(section_upload_service.i),core.rXU(core.gRc),core.rXU(collection_data_service.CollectionDataService),core.rXU(group_data_service.GroupDataService),core.rXU(resource_policy_data_service.ResourcePolicyDataService),core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU(submission_uploads_config_data_service.SubmissionUploadsConfigDataService),core.rXU(dso_name_service.f),core.rXU("sectionDataProvider"),core.rXU("submissionIdProvider"))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionUploadComponent2,selectors:[["ds-submission-section-upload"]],standalone:!0,features:[core.Vt3,core.aNF],decls:4,vars:5,consts:[["noFileUploaded",""],[3,"content","dismissible","type"],[4,"ngIf","ngIfElse"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-2"],[1,"text-left","font-weight-bold"],[1,"col-md-12"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"type"],[4,"ngIf"],[1,"clearfix"],[3,"accessConditions"],[3,"isPrimary","availableAccessConditionOptions","collectionId","collectionPolicyType","configMetadataForm","fileId","fileIndex","fileName","sectionId","submissionId"],[1,"text-center"],[1,"text-muted"]],template:function(rf,ctx){if(1&rf&&(core.nrm(0,"ds-alert",1),core.DNE(1,SubmissionSectionUploadComponent_ng_container_1_Template,11,5,"ng-container",2)(2,SubmissionSectionUploadComponent_ng_template_2_Template,6,3,"ng-template",null,0,core.C5r)),2&rf){const noFileUploaded_r4=core.sdS(3);core.Y8G("content","submission.sections.upload.info")("dismissible",!0)("type",ctx.AlertTypeEnum.Info),core.R7$(),core.Y8G("ngIf",ctx.fileList.length>0)("ngIfElse",noFileUploaded_r4)}},dependencies:[ThemedSubmissionSectionUploadFileComponent,submission_section_upload_access_conditions_component._,common.bT,alert_component.C,ngx_translate_core.h,ngx_translate_core.D9,common.Sq,common.Jj]})}return SubmissionSectionUploadComponent2})();const submissionSectionsMap=new Map;submissionSectionsMap.set(sections_type.l.AccessesCondition,SubmissionSectionAccessesComponent),submissionSectionsMap.set(sections_type.l.License,SubmissionSectionLicenseComponent),submissionSectionsMap.set(sections_type.l.CcLicense,SubmissionSectionCcLicensesComponent),submissionSectionsMap.set(sections_type.l.SherpaPolicies,SubmissionSectionSherpaPoliciesComponent),submissionSectionsMap.set(sections_type.l.Upload,SubmissionSectionUploadComponent),submissionSectionsMap.set(sections_type.l.SubmissionForm,SubmissionSectionFormComponent),submissionSectionsMap.set(sections_type.l.Identifiers,SubmissionSectionIdentifiersComponent),submissionSectionsMap.set(sections_type.l.CoarNotify,SubmissionSectionCoarNotifyComponent),submissionSectionsMap.set(sections_type.l.Duplicates,SubmissionSectionDuplicatesComponent);const section_container_component_c0=["sectionRef"],section_container_component_c1=a0=>({"section-focus":a0}),section_container_component_c2=a0=>({"text-white":a0}),_c3=a0=>({sectionHeader:a0});function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template(rf,ctx){1&rf&&(core.nrm(0,"i",18),core.nI1(1,"translate"),core.nI1(2,"translate")),2&rf&&(core.FS9("title",core.bMT(1,2,"submission.sections.status.warnings.title")),core.BMQ("aria-label",core.bMT(2,4,"submission.sections.status.warnings.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template(rf,ctx){1&rf&&(core.nrm(0,"i",19),core.nI1(1,"translate"),core.nI1(2,"translate")),2&rf&&(core.FS9("title",core.bMT(1,2,"submission.sections.status.errors.title")),core.BMQ("aria-label",core.bMT(2,4,"submission.sections.status.errors.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template(rf,ctx){1&rf&&(core.nrm(0,"i",20),core.nI1(1,"translate"),core.nI1(2,"translate")),2&rf&&(core.FS9("title",core.bMT(1,2,"submission.sections.status.valid.title")),core.BMQ("aria-label",core.bMT(2,4,"submission.sections.status.valid.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template(rf,ctx){1&rf&&(core.nrm(0,"i",21),core.nI1(1,"translate"),core.nI1(2,"translate")),2&rf&&(core.FS9("title",core.bMT(1,2,"submission.sections.status.info.title")),core.BMQ("aria-label",core.bMT(2,4,"submission.sections.status.info.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template(rf,ctx){if(1&rf&&core.nrm(0,"span",22),2&rf){core.XpG(3);const sectionRef_r2=core.sdS(1);core.Y8G("ngClass",core.eq3(1,section_container_component_c2,sectionRef_r2.isInfo()))}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template(rf,ctx){1&rf&&core.nrm(0,"span",23)}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"a",24),core.bIt("click",function($event){core.eBV(_r3);const ctx_r3=core.XpG(3);return core.Njj(ctx_r3.removeSection($event))}),core.nrm(1,"i",25),core.k0s()}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"span",8),core.EFF(1),core.nI1(2,"translate"),core.k0s(),core.j41(3,"div",9),core.DNE(4,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template,3,6,"i",10),core.nI1(5,"async"),core.DNE(6,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template,3,6,"i",11)(7,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template,3,6,"i",12),core.nI1(8,"async"),core.DNE(9,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template,3,6,"i",13),core.j41(10,"a",14),core.nI1(11,"translate"),core.nI1(12,"translate"),core.nI1(13,"translate"),core.DNE(14,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template,1,3,"span",15)(15,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template,1,0,"span",16),core.k0s(),core.DNE(16,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template,2,0,"a",17),core.k0s()),2&rf){const ctx_r3=core.XpG(2),sectionRef_r2=core.sdS(1);core.Y8G("ngClass",core.eq3(24,section_container_component_c2,sectionRef_r2.isInfo())),core.R7$(),core.JRh(core.bMT(2,11,"submission.sections."+ctx_r3.sectionData.header)),core.R7$(3),core.Y8G("ngIf",!0!==core.bMT(5,13,sectionRef_r2.isValid())&&!sectionRef_r2.hasErrors()&&!sectionRef_r2.isInfo()),core.R7$(2),core.Y8G("ngIf",sectionRef_r2.hasErrors()&&!sectionRef_r2.isInfo()),core.R7$(),core.Y8G("ngIf",core.bMT(8,15,sectionRef_r2.isValid())&&!sectionRef_r2.hasErrors()&&!sectionRef_r2.isInfo()),core.R7$(2),core.Y8G("ngIf",sectionRef_r2.isInfo()),core.R7$(),core.Y8G("title",core.bMT(11,17,sectionRef_r2.isOpen()?"submission.sections.toggle.close":"submission.sections.toggle.open")),core.BMQ("aria-label",core.i5U(13,21,sectionRef_r2.isOpen()?"submission.sections.toggle.aria.close":"submission.sections.toggle.aria.open",core.eq3(26,_c3,core.bMT(12,19,"submission.sections."+ctx_r3.sectionData.header)))),core.R7$(4),core.Y8G("ngIf",sectionRef_r2.isOpen()),core.R7$(),core.Y8G("ngIf",!sectionRef_r2.isOpen()),core.R7$(),core.Y8G("ngIf",!sectionRef_r2.isMandatory())}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"ds-alert",31),core.bIt("close",function(){const i_r7=core.eBV(_r6).index;core.XpG(4);const sectionRef_r2=core.sdS(1);return core.Njj(sectionRef_r2.removeError(i_r7))}),core.k0s()}if(2&rf){const error_r8=ctx.$implicit,ctx_r3=core.XpG(4);core.Y8G("content",error_r8)("dismissible",!0)("type",ctx_r3.AlertTypeEnum.Error)}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",29),core.DNE(1,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template,1,3,"ds-alert",30),core.k0s()),2&rf){const ctx_r3=core.XpG(3),sectionRef_r2=core.sdS(1);core.Mz_("id","sectionGenericError_",ctx_r3.sectionData.id,""),core.R7$(),core.Y8G("ngForOf",sectionRef_r2.getErrors())}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template(rf,ctx){1&rf&&core.eu8(0)}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.DNE(0,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template,2,3,"div",26),core.j41(1,"div",27),core.bIt("click",function($event){core.eBV(_r5),core.XpG(2);const sectionRef_r2=core.sdS(1);return core.Njj(sectionRef_r2.setFocus($event))}),core.DNE(2,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template,1,0,"ng-container",28),core.k0s()}if(2&rf){const ctx_r3=core.XpG(2),sectionRef_r2=core.sdS(1);core.Y8G("ngIf",sectionRef_r2.hasGenericErrors()),core.R7$(),core.Mz_("id","sectionContent_",ctx_r3.sectionData.id,""),core.R7$(),core.Y8G("ngComponentOutlet",ctx_r3.getSectionContent())("ngComponentOutletInjector",ctx_r3.objectInjector)}}function SubmissionSectionContainerComponent_ngb_accordion_2_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ngb-accordion",4,1),core.bIt("panelChange",function($event){core.eBV(_r1),core.XpG();const sectionRef_r2=core.sdS(1);return core.Njj(sectionRef_r2.sectionChange($event))}),core.j41(2,"ngb-panel",5),core.DNE(3,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template,17,28,"ng-template",6)(4,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template,3,5,"ng-template",7),core.k0s()()}if(2&rf){const ctx_r3=core.XpG(),sectionRef_r2=core.sdS(1);core.FS9("activeIds",ctx_r3.sectionData.id),core.Y8G("destroyOnHide",!1),core.R7$(2),core.FS9("id",ctx_r3.sectionData.id),core.Y8G("type",sectionRef_r2.isInfo()?"info":"")}}let SubmissionSectionContainerComponent=(()=>{class SubmissionSectionContainerComponent2{constructor(injector){this.injector=injector,this.AlertTypeEnum=alert_type.v}ngOnInit(){this.objectInjector=core.zZn.create({providers:[{provide:"collectionIdProvider",useFactory:()=>this.collectionId,deps:[]},{provide:"sectionDataProvider",useFactory:()=>this.sectionData,deps:[]},{provide:"submissionIdProvider",useFactory:()=>this.submissionId,deps:[]}],parent:this.injector})}removeSection(event){event.preventDefault(),event.stopPropagation(),this.sectionRef.removeSection(this.submissionId,this.sectionData.id)}getSectionContent(){return function rendersSectionType(sectionType){return submissionSectionsMap.get(sectionType)}(this.sectionData.sectionType)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionContainerComponent2)(core.rXU(core.zZn))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionContainerComponent2,selectors:[["ds-submission-section-container"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(section_container_component_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.sectionRef=_t.first)}},inputs:{collectionId:"collectionId",sectionData:"sectionData",submissionId:"submissionId"},standalone:!0,features:[core.aNF],decls:4,vars:11,consts:[["sectionRef","sectionRef"],["acc","ngbAccordion"],["dsSection","",3,"ngClass","mandatory","submissionId","sectionType","sectionId"],[3,"activeIds","destroyOnHide","panelChange",4,"ngIf"],[3,"panelChange","activeIds","destroyOnHide"],[3,"id","type"],["ngbPanelTitle",""],["ngbPanelContent",""],["tabindex","0",1,"float-left","section-title",3,"ngClass"],[1,"d-inline-block","float-right"],["class","fas fa-exclamation-circle text-warning mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-exclamation-circle text-danger mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-check-circle text-success mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-info-circle mr-3 text-white","role","img",3,"title",4,"ngIf"],["tabindex","0","role","button",1,"close",3,"title"],["class","fas fa-chevron-up fa-fw",3,"ngClass",4,"ngIf"],["class","fas fa-chevron-down fa-fw",4,"ngIf"],["href","javascript:void(0);","class","close mr-3",3,"click",4,"ngIf"],["role","img",1,"fas","fa-exclamation-circle","text-warning","mr-3",3,"title"],["role","img",1,"fas","fa-exclamation-circle","text-danger","mr-3",3,"title"],["role","img",1,"fas","fa-check-circle","text-success","mr-3",3,"title"],["role","img",1,"fas","fa-info-circle","mr-3","text-white",3,"title"],[1,"fas","fa-chevron-up","fa-fw",3,"ngClass"],[1,"fas","fa-chevron-down","fa-fw"],["href","javascript:void(0);",1,"close","mr-3",3,"click"],["aria-hidden","true","tabindex","0",1,"fas","fa-trash-o"],[3,"id",4,"ngIf"],[3,"click","id"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"id"],[3,"content","dismissible","type","close",4,"ngFor","ngForOf"],[3,"close","content","dismissible","type"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",2,0),core.DNE(2,SubmissionSectionContainerComponent_ngb_accordion_2_Template,5,4,"ngb-accordion",3),core.nI1(3,"async"),core.k0s()),2&rf){const sectionRef_r2=core.sdS(1);core.Y8G("ngClass",core.eq3(9,section_container_component_c1,sectionRef_r2.isSectionActive()))("mandatory",ctx.sectionData.mandatory)("submissionId",ctx.submissionId)("sectionType",ctx.sectionData.sectionType)("sectionId",ctx.sectionData.id),core.BMQ("id","section_"+ctx.sectionData.id),core.R7$(2),core.Y8G("ngIf",core.bMT(3,7,sectionRef_r2.isEnabled()))}},dependencies:[alert_component.C,common.Sq,ng_bootstrap._f,ng_bootstrap.W1,ng_bootstrap.CT,ng_bootstrap.sb,ng_bootstrap.t3,common.OI,ngx_translate_core.h,ngx_translate_core.D9,common.YU,common.bT,common.Jj,SectionsDirective],styles:["[_nghost-%COMP%]     .card{margin-bottom:var(--ds-submission-sections-margin-bottom);overflow:unset}.section-focus[_ngcontent-%COMP%]{border-radius:var(--bs-border-radius);box-shadow:var(--bs-btn-focus-box-shadow)}[_nghost-%COMP%]     .card:first-of-type{border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)!important;border-bottom-left-radius:var(--bs-card-border-radius)!important;border-bottom-right-radius:var(--bs-card-border-radius)!important}[_nghost-%COMP%]     .card-header button{box-shadow:none!important;width:100%}"]})}return SubmissionSectionContainerComponent2})();var visibility_type=__webpack_require__(28246),collection_dropdown_component=__webpack_require__(62523),themed_collection_dropdown_component=__webpack_require__(95839);function SubmissionFormCollectionComponent_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",3)(1,"div",4)(2,"span",5),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",6)(6,"span",5),core.EFF(7),core.nI1(8,"async"),core.k0s()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.JRh(core.bMT(4,2,"submission.sections.general.collection")),core.R7$(4),core.JRh(core.bMT(8,4,ctx_r0.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_3_span_8_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",13),core.k0s())}function SubmissionFormCollectionComponent_div_3_span_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.JRh(core.bMT(2,1,ctx_r0.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_3_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",7,0),core.bIt("openChange",function($event){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.toggled($event))}),core.j41(2,"div",4)(3,"span",8),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"button",9),core.nI1(7,"async"),core.bIt("blur",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.onClose())})("click",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.onClose())}),core.DNE(8,SubmissionFormCollectionComponent_div_3_span_8_Template,2,0,"span",10),core.nI1(9,"async"),core.DNE(10,SubmissionFormCollectionComponent_div_3_span_10_Template,3,3,"span",10),core.nI1(11,"async"),core.k0s(),core.j41(12,"div",11)(13,"ds-collection-dropdown",12),core.bIt("selectionChange",function($event){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.onSelect($event))}),core.k0s()()()}if(2&rf){const ctx_r0=core.XpG();core.R7$(4),core.SpI(" ",core.bMT(5,4,"submission.sections.general.collection")," "),core.R7$(2),core.Y8G("disabled",core.bMT(7,6,ctx_r0.processingChange$)||!1===ctx_r0.collectionModifiable||ctx_r0.isReadonly),core.R7$(2),core.Y8G("ngIf",core.bMT(9,8,ctx_r0.processingChange$)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(11,10,ctx_r0.processingChange$))}}let SubmissionFormCollectionComponent=(()=>{class SubmissionFormCollectionComponent2{constructor(cdr,collectionDataService,operationsBuilder,operationsService,submissionService,sectionsService,dsoNameService){this.cdr=cdr,this.collectionDataService=collectionDataService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.dsoNameService=dsoNameService,this.collectionModifiable=null,this.isReadonly=!1,this.collectionChange=new core.bkB,this.processingChange$=new cjs.BehaviorSubject(!1),this.subs=[]}ngOnChanges(changes){(0,empty_util.a4)(changes.currentCollectionId)&&(0,empty_util.a4)(changes.currentCollectionId.currentValue)&&(this.selectedCollectionId=this.currentCollectionId,this.selectedCollectionName$=this.collectionDataService.findById(this.currentCollectionId).pipe((0,operators.I6)(collectionRD=>(0,empty_util.hj)(collectionRD.payload)),(0,operators.Tj)(collectionRD=>this.dsoNameService.getName(collectionRD.payload))))}ngOnInit(){this.pathCombiner=new json_patch_operation_path_combiner.S("sections","collection"),this.available$=this.sectionsService.isSectionTypeAvailable(this.submissionId,sections_type.l.Collection)}ngOnDestroy(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}onSelect(event){this.processingChange$.next(!0),this.operationsBuilder.replace(this.pathCombiner.getPath(),event.collection.id,!0),this.subs.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections","collection").pipe((0,operators.ZZ)(submissionObject=>this.submissionService.retrieveSubmission(submissionObject[0].id).pipe((0,shared_operators.ak)()))).subscribe(submissionObject=>{this.selectedCollectionId=event.collection.id,this.selectedCollectionName$=(0,cjs.of)(event.collection.name),this.collectionChange.emit(submissionObject),this.submissionService.changeSubmissionCollection(this.submissionId,event.collection.id),this.processingChange$.next(!1),this.cdr.detectChanges()}))}onClose(){this.collectionDropdown?.reset()}toggled(isOpen){isOpen||this.collectionDropdown?.reset()}static#_=this.\u0275fac=function(t){return new(t||SubmissionFormCollectionComponent2)(core.rXU(core.gRc),core.rXU(collection_data_service.CollectionDataService),core.rXU(json_patch_operations_builder.C),core.rXU(submission_json_patch_operations_service.U),core.rXU(submission_service.E),core.rXU(sections_service.c),core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionFormCollectionComponent2,selectors:[["ds-submission-form-collection"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(collection_dropdown_component.CollectionDropdownComponent,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.collectionDropdown=_t.first)}},inputs:{currentCollectionId:"currentCollectionId",currentDefinition:"currentDefinition",collectionModifiable:"collectionModifiable",submissionId:"submissionId",isReadonly:"isReadonly"},outputs:{collectionChange:"collectionChange"},standalone:!0,features:[core.OA$,core.aNF],decls:5,vars:6,consts:[["collectionControls","ngbDropdown"],["class","input-group mb-3",4,"ngIf"],["ngbDropdown","","class","btn-group input-group",3,"openChange",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"input-group-append"],["ngbDropdown","",1,"btn-group","input-group",3,"openChange"],["id","collectionControlsMenuLabel",1,"input-group-text"],["aria-describedby","collectionControlsMenuLabel","id","collectionControlsMenuButton","ngbDropdownToggle","",1,"btn","btn-outline-primary",3,"blur","click","disabled"],[4,"ngIf"],["ngbDropdownMenu","","id","collectionControlsDropdownMenu","aria-labelledby","collectionControlsMenuButton",1,"dropdown-menu","p-0"],[3,"selectionChange"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div"),core.DNE(1,SubmissionFormCollectionComponent_div_1_Template,9,6,"div",1),core.nI1(2,"async"),core.DNE(3,SubmissionFormCollectionComponent_div_3_Template,14,12,"div",2),core.nI1(4,"async"),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",!0!==core.bMT(2,2,ctx.available$)),core.R7$(2),core.Y8G("ngIf",core.bMT(4,4,ctx.available$)))},dependencies:[common.MD,common.bT,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.do,ng_bootstrap.U0,themed_collection_dropdown_component.m],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}#collectionControlsDropdownMenu[_ngcontent-%COMP%]{outline:0;left:0!important;box-shadow:var(--bs-btn-focus-box-shadow)}"]})}return SubmissionFormCollectionComponent2})();var submission_rest_service=__webpack_require__(29212),browser_only_pipe=__webpack_require__(87154);function SubmissionFormFooterComponent_div_0_button_2_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",13),core.nI1(1,"async"),core.nI1(2,"async"),core.nI1(3,"dsBrowserOnly"),core.bIt("click",function($event){core.eBV(_r2);const ctx_r2=core.XpG(2),content_r4=core.sdS(2);return $event.preventDefault(),core.Njj(ctx_r2.confirmDiscard(content_r4))}),core.nrm(4,"i",14),core.EFF(5),core.nI1(6,"translate"),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.Y8G("disabled",core.bMT(1,3,ctx_r2.processingSaveStatus)||core.bMT(2,5,ctx_r2.processingDepositStatus)),core.BMQ("data-test",core.bMT(3,7,"discard")),core.R7$(5),core.SpI(" ",core.bMT(6,9,"submission.general.discard.submit")," ")}}function SubmissionFormFooterComponent_div_0_span_5_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",15),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.general.info.saved")," "))}function SubmissionFormFooterComponent_div_0_span_9_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",16),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.general.info.pending-changes")," "))}function SubmissionFormFooterComponent_div_0_div_13_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",20),core.EFF(1,"Saving..."),core.k0s()),2&rf&&core.xc7("width","100%")}function SubmissionFormFooterComponent_div_0_div_13_div_4_Template(rf,ctx){1&rf&&(core.j41(0,"div",20),core.EFF(1,"Depositing..."),core.k0s()),2&rf&&core.xc7("width","100%")}function SubmissionFormFooterComponent_div_0_div_13_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",17)(1,"div",18),core.DNE(2,SubmissionFormFooterComponent_div_0_div_13_div_2_Template,2,2,"div",19),core.nI1(3,"async"),core.DNE(4,SubmissionFormFooterComponent_div_0_div_13_div_4_Template,2,2,"div",19),core.nI1(5,"async"),core.k0s()()),2&rf){const ctx_r2=core.XpG(2);core.R7$(2),core.Y8G("ngIf",core.bMT(3,2,ctx_r2.processingSaveStatus)),core.R7$(2),core.Y8G("ngIf",core.bMT(5,4,ctx_r2.processingDepositStatus))}}function SubmissionFormFooterComponent_div_0_button_35_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",21),core.nI1(1,"async"),core.nI1(2,"async"),core.nI1(3,"dsBrowserOnly"),core.bIt("click",function($event){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.deposit($event))}),core.j41(4,"span"),core.nrm(5,"i",22),core.EFF(6),core.nI1(7,"translate"),core.k0s()()}if(2&rf){const ctx_r2=core.XpG(2);core.Y8G("disabled",core.bMT(1,3,ctx_r2.processingSaveStatus)||core.bMT(2,5,ctx_r2.processingDepositStatus)),core.BMQ("data-test",core.bMT(3,7,"deposit")),core.R7$(6),core.SpI(" ",core.bMT(7,9,"submission.general.deposit"),"")}}function SubmissionFormFooterComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",2)(1,"div",3),core.DNE(2,SubmissionFormFooterComponent_div_0_button_2_Template,7,11,"button",4),core.nI1(3,"async"),core.k0s(),core.j41(4,"div",5),core.DNE(5,SubmissionFormFooterComponent_div_0_span_5_Template,4,3,"span",6),core.nI1(6,"async"),core.nI1(7,"async"),core.nI1(8,"async"),core.DNE(9,SubmissionFormFooterComponent_div_0_span_9_Template,4,3,"span",6),core.nI1(10,"async"),core.nI1(11,"async"),core.nI1(12,"async"),core.DNE(13,SubmissionFormFooterComponent_div_0_div_13_Template,6,6,"div",7),core.nI1(14,"async"),core.nI1(15,"async"),core.j41(16,"div",8)(17,"button",9),core.nI1(18,"async"),core.nI1(19,"async"),core.nI1(20,"dsBrowserOnly"),core.bIt("click",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.save($event))}),core.j41(21,"span"),core.nrm(22,"i",10),core.EFF(23),core.nI1(24,"translate"),core.k0s()(),core.j41(25,"button",11),core.nI1(26,"async"),core.nI1(27,"async"),core.nI1(28,"async"),core.nI1(29,"async"),core.nI1(30,"dsBrowserOnly"),core.bIt("click",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.saveLater($event))}),core.j41(31,"span"),core.nrm(32,"i",10),core.EFF(33),core.nI1(34,"translate"),core.k0s()(),core.DNE(35,SubmissionFormFooterComponent_div_0_button_35_Template,8,11,"button",12),core.nI1(36,"async"),core.k0s()()()}if(2&rf){const ctx_r2=core.XpG();core.R7$(2),core.Y8G("ngIf",core.bMT(3,15,ctx_r2.showDepositAndDiscard)),core.R7$(3),core.Y8G("ngIf",!0!==core.bMT(6,17,ctx_r2.hasUnsavedModification)&&!0!==core.bMT(7,19,ctx_r2.processingSaveStatus)&&!0!==core.bMT(8,21,ctx_r2.processingDepositStatus)),core.R7$(4),core.Y8G("ngIf",core.bMT(10,23,ctx_r2.hasUnsavedModification)&&!0!==core.bMT(11,25,ctx_r2.processingSaveStatus)&&!0!==core.bMT(12,27,ctx_r2.processingDepositStatus)),core.R7$(4),core.Y8G("ngIf",core.bMT(14,29,ctx_r2.processingSaveStatus)||core.bMT(15,31,ctx_r2.processingDepositStatus)),core.R7$(4),core.Y8G("disabled",core.bMT(18,33,ctx_r2.processingSaveStatus)||!0!==core.bMT(19,35,ctx_r2.hasUnsavedModification)),core.BMQ("data-test",core.bMT(20,37,"save")),core.R7$(6),core.SpI(" ",core.bMT(24,39,"submission.general.save"),""),core.R7$(2),core.AVh("btn-primary",!0!==core.bMT(26,41,ctx_r2.showDepositAndDiscard))("btn-secondary",core.bMT(27,43,ctx_r2.showDepositAndDiscard)),core.Y8G("disabled",core.bMT(28,45,ctx_r2.processingSaveStatus)||core.bMT(29,47,ctx_r2.processingDepositStatus)),core.BMQ("data-test",core.bMT(30,49,"save-for-later")),core.R7$(8),core.SpI(" ",core.bMT(34,51,"submission.general.save-later"),""),core.R7$(2),core.Y8G("ngIf",core.bMT(36,53,ctx_r2.showDepositAndDiscard))}}function SubmissionFormFooterComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",23)(1,"h4",24),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",25),core.bIt("click",function(){const d_r7=core.eBV(_r6).dismiss;return core.Njj(d_r7("cancel"))}),core.j41(5,"span",26),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",27)(8,"p"),core.EFF(9),core.nI1(10,"translate"),core.k0s()(),core.j41(11,"div",28)(12,"button",29),core.bIt("click",function(){const c_r8=core.eBV(_r6).close;return core.Njj(c_r8("cancel"))}),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"button",30),core.bIt("click",function(){const c_r8=core.eBV(_r6).close;return core.Njj(c_r8("ok"))}),core.EFF(16),core.nI1(17,"translate"),core.k0s()()}2&rf&&(core.R7$(2),core.JRh(core.bMT(3,4,"submission.general.discard.confirm.title")),core.R7$(7),core.JRh(core.bMT(10,6,"submission.general.discard.confirm.info")),core.R7$(4),core.JRh(core.bMT(14,8,"submission.general.discard.confirm.cancel")),core.R7$(3),core.JRh(core.bMT(17,10,"submission.general.discard.confirm.submit")))}let SubmissionFormFooterComponent=(()=>{class SubmissionFormFooterComponent2{constructor(modalService,restService,submissionService){this.modalService=modalService,this.restService=restService,this.submissionService=submissionService,this.submissionIsInvalid=(0,cjs.of)(!0)}ngOnChanges(changes){(0,empty_util.hj)(this.submissionId)&&(this.submissionIsInvalid=this.submissionService.getSubmissionStatus(this.submissionId).pipe((0,operators.Tj)(isValid=>!1===isValid)),this.processingSaveStatus=this.submissionService.getSubmissionSaveProcessingStatus(this.submissionId),this.processingDepositStatus=this.submissionService.getSubmissionDepositProcessingStatus(this.submissionId),this.showDepositAndDiscard=(0,cjs.of)(this.submissionService.getSubmissionScope()===submission_scope_type.L.WorkspaceItem),this.hasUnsavedModification=this.submissionService.hasUnsavedModification())}save(event){this.submissionService.dispatchSave(this.submissionId,!0)}saveLater(event){this.submissionService.dispatchSaveForLater(this.submissionId)}deposit(event){this.submissionService.dispatchDeposit(this.submissionId)}confirmDiscard(content){this.modalService.open(content).result.then(result=>{"ok"===result&&this.submissionService.dispatchDiscard(this.submissionId)})}static#_=this.\u0275fac=function(t){return new(t||SubmissionFormFooterComponent2)(core.rXU(ng_bootstrap.Bq),core.rXU(submission_rest_service.O),core.rXU(submission_service.E))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionFormFooterComponent2,selectors:[["ds-submission-form-footer"]],inputs:{submissionId:"submissionId"},standalone:!0,features:[core.OA$,core.aNF],decls:3,vars:1,consts:[["content",""],["class","row",4,"ngIf"],[1,"row"],[1,"col"],["type","button","id","discard","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"col","text-right","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],["class","col d-flex justify-content-end align-items-center",4,"ngIf"],[1,"ml-2","space-children-mr"],["type","button","id","save",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-save"],["type","button","id","saveForLater",1,"btn",3,"click","disabled"],["type","button","id","deposit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","button","id","discard",1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"col","d-flex","justify-content-end","align-items-center"],[1,"progress","w-75"],["class","progress-bar progress-bar-striped progress-bar-animated bg-info","role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",3,"width",4,"ngIf"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-info"],["type","button","id","deposit",1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-plus"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","space-children-mr"],["type","button","id","discard_cancel",1,"btn","btn-secondary",3,"click"],["type","button","id","discard_submit",1,"btn","btn-danger",3,"click"]],template:function(rf,ctx){1&rf&&core.DNE(0,SubmissionFormFooterComponent_div_0_Template,37,55,"div",1)(1,SubmissionFormFooterComponent_ng_template_1_Template,18,12,"ng-template",null,0,core.C5r),2&rf&&core.Y8G("ngIf",!!ctx.submissionId)},dependencies:[common.MD,common.bT,common.Jj,browser_only_pipe.L,ngx_translate_core.h,ngx_translate_core.D9]})}return SubmissionFormFooterComponent2})();var host_window_service=__webpack_require__(29885);const submission_form_section_add_component_c0=a0=>({"w-100":a0});function SubmissionFormSectionAddComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"button",6),core.nI1(2,"async"),core.nI1(3,"async"),core.EFF(4),core.nI1(5,"translate"),core.nrm(6,"i",7),core.k0s(),core.bVm()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("disabled",!0!==core.bMT(2,3,ctx_r0.hasSections$))("ngClass",core.eq3(9,submission_form_section_add_component_c0,core.bMT(3,5,ctx_r0.windowService.isXs()))),core.R7$(3),core.SpI(" ",core.bMT(5,7,"submission.sections.general.add-more")," ")}}function SubmissionFormSectionAddComponent_button_6_Template(rf,ctx){1&rf&&(core.j41(0,"button",8),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections.general.no-sections")," "))}function SubmissionFormSectionAddComponent_button_8_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",9),core.bIt("click",function(){const listItem_r3=core.eBV(_r2).$implicit,ctx_r0=core.XpG();return core.Njj(ctx_r0.addSection(listItem_r3.id))}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}if(2&rf){const listItem_r3=ctx.$implicit;core.R7$(),core.SpI(" ",core.bMT(2,1,"submission.sections."+listItem_r3.header)," ")}}let SubmissionFormSectionAddComponent=(()=>{class SubmissionFormSectionAddComponent2{constructor(sectionService,submissionService,windowService){this.sectionService=sectionService,this.submissionService=submissionService,this.windowService=windowService}ngOnInit(){this.sectionList$=this.submissionService.getDisabledSectionsList(this.submissionId),this.hasSections$=this.sectionList$.pipe((0,operators.Tj)(list=>list.length>0))}addSection(sectionId){this.sectionService.addSection(this.submissionId,sectionId)}static#_=this.\u0275fac=function(t){return new(t||SubmissionFormSectionAddComponent2)(core.rXU(sections_service.c),core.rXU(submission_service.E),core.rXU(host_window_service.CV))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionFormSectionAddComponent2,selectors:[["ds-submission-form-section-add"]],inputs:{collectionId:"collectionId",submissionId:"submissionId"},standalone:!0,features:[core.aNF],decls:10,vars:17,consts:[["sectionAdd","ngbDropdown"],["ngbDropdown","","placement","bottom-right",1,"d-inline-block",3,"ngClass"],[4,"ngIf"],["ngbDropdownMenu","","aria-labelledby","sectionControls",1,"sections-dropdown-menu",3,"ngClass"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["id","sectionControls","ngbDropdownToggle","",1,"btn","btn-outline-primary","dropdown-toggle",3,"disabled","ngClass"],["aria-hidden","true",1,"fa","fa-plus"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",1,0),core.DNE(2,SubmissionFormSectionAddComponent_ng_container_2_Template,7,11,"ng-container",2),core.nI1(3,"async"),core.j41(4,"div",3),core.nI1(5,"async"),core.DNE(6,SubmissionFormSectionAddComponent_button_6_Template,3,3,"button",4),core.nI1(7,"async"),core.DNE(8,SubmissionFormSectionAddComponent_button_8_Template,3,3,"button",5),core.nI1(9,"async"),core.k0s()()),2&rf&&(core.Y8G("ngClass",core.eq3(13,submission_form_section_add_component_c0,ctx.windowService.isXs())),core.R7$(2),core.Y8G("ngIf",core.bMT(3,5,ctx.hasSections$)),core.R7$(2),core.Y8G("ngClass",core.eq3(15,submission_form_section_add_component_c0,core.bMT(5,7,ctx.windowService.isXs()))),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(7,9,ctx.hasSections$)),core.R7$(2),core.Y8G("ngForOf",core.bMT(9,11,ctx.sectionList$)))},dependencies:[common.MD,common.YU,common.Sq,common.bT,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.do,ng_bootstrap.U0],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.sections-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-header-z-index)}"]})}return SubmissionFormSectionAddComponent2})();__webpack_require__(15870);const themed_submission_upload_files_component_c0=["*"];function ThemedSubmissionUploadFilesComponent_ng_template_0_Template(rf,ctx){}let ThemedSubmissionUploadFilesComponent=(()=>{class ThemedSubmissionUploadFilesComponent2 extends themed_component.J{constructor(){super(...arguments),this.inAndOutputNames=["collectionId","submissionId","uploadFilesOptions"]}getComponentName(){return"SubmissionUploadFilesComponent"}importThemedComponent(themeName){return __webpack_require__(28767)(`./${themeName}/app/submission/form/submission-upload-files/submission-upload-files.component.ts`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,15870))}static#_=this.\u0275fac=(()=>{let \u0275ThemedSubmissionUploadFilesComponent_BaseFactory;return function(t){return(\u0275ThemedSubmissionUploadFilesComponent_BaseFactory||(\u0275ThemedSubmissionUploadFilesComponent_BaseFactory=core.xGo(ThemedSubmissionUploadFilesComponent2)))(t||ThemedSubmissionUploadFilesComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedSubmissionUploadFilesComponent2,selectors:[["ds-submission-upload-files"]],inputs:{collectionId:"collectionId",submissionId:"submissionId",uploadFilesOptions:"uploadFilesOptions"},standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_submission_upload_files_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedSubmissionUploadFilesComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedSubmissionUploadFilesComponent2})();function SubmissionFormComponent_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",12),core.nrm(1,"ds-submission-upload-files",13)(2,"div",14),core.k0s()),2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.Y8G("submissionId",ctx_r0.submissionId)("collectionId",ctx_r0.collectionId)("uploadFilesOptions",ctx_r0.uploadFilesOptions)}}function SubmissionFormComponent_div_1_ng_container_4_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.qex(0),core.j41(1,"ds-submission-form-collection",15),core.bIt("collectionChange",function($event){core.eBV(_r2);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.onCollectionChange($event))}),core.k0s(),core.bVm()}if(2&rf){const ctx_r0=core.XpG(2);core.R7$(),core.Y8G("currentCollectionId",ctx_r0.collectionId)("currentDefinition",ctx_r0.definitionId)("submissionId",ctx_r0.submissionId)("collectionModifiable",ctx_r0.collectionModifiable)("isReadonly",ctx_r0.isSectionReadonly)}}function SubmissionFormComponent_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",6),core.DNE(1,SubmissionFormComponent_div_1_div_1_Template,3,3,"div",7),core.nI1(2,"async"),core.j41(3,"div",8),core.DNE(4,SubmissionFormComponent_div_1_ng_container_4_Template,2,5,"ng-container",9),core.k0s(),core.j41(5,"div",10),core.nrm(6,"ds-submission-form-section-add",11),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("ngIf",core.bMT(2,4,ctx_r0.uploadEnabled$)),core.R7$(3),core.Y8G("ngIf",!ctx_r0.isSectionHidden),core.R7$(2),core.Y8G("collectionId",ctx_r0.collectionId)("submissionId",ctx_r0.submissionId)}}function SubmissionFormComponent_ds_loading_4_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading",16)}function SubmissionFormComponent_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.nrm(1,"ds-submission-section-container",17),core.bVm()),2&rf){const object_r3=ctx.$implicit,ctx_r0=core.XpG();core.R7$(),core.Y8G("collectionId",ctx_r0.collectionId)("submissionId",ctx_r0.submissionId)("sectionData",object_r3)}}function SubmissionFormComponent_div_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",18),core.nrm(1,"ds-submission-form-footer",19),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("submissionId",ctx_r0.submissionId)}}let SubmissionFormComponent=(()=>{class SubmissionFormComponent2{constructor(authService,changeDetectorRef,halService,submissionService,sectionsService){this.authService=authService,this.changeDetectorRef=changeDetectorRef,this.halService=halService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.collectionModifiable=null,this.loading=(0,cjs.of)(!0),this.uploadFilesOptions=new uploader_options_model.H,this.subs=[],this.isActive=!0}ngOnChanges(changes){changes.collectionId&&this.collectionId&&changes.submissionId&&this.submissionId&&(this.isActive=!0,this.submissionSections=this.submissionService.getSubmissionObject(this.submissionId).pipe((0,operators.pb)(()=>this.isActive),(0,operators.Tj)(submission=>submission.isLoading),(0,operators.Tj)(isLoading=>isLoading),(0,operators.F)(),(0,operators.nx)(isLoading=>isLoading?(0,cjs.of)([]):this.getSectionsList())),this.uploadEnabled$=this.sectionsService.isSectionTypeAvailable(this.submissionId,sections_type.l.Upload),this.loading=this.submissionService.getSubmissionObject(this.submissionId).pipe((0,operators.pb)(()=>this.isActive),(0,operators.Tj)(submission=>submission.isLoading),(0,operators.Tj)(isLoading=>isLoading),(0,operators.F)()),this.subs.push(this.halService.getEndpoint(this.submissionService.getSubmissionObjectLinkName()).pipe((0,operators.pb)(href=>(0,empty_util.hj)(href)),(0,operators.F)()).subscribe(endpointURL=>{this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.uploadFilesOptions.url=endpointURL.concat(`/${this.submissionId}`),this.definitionId=this.submissionDefinition.name,this.submissionService.dispatchInit(this.collectionId,this.submissionId,this.selfUrl,this.submissionDefinition,this.sections,this.item,this.submissionErrors),this.changeDetectorRef.detectChanges()})),this.submissionService.startAutoSave(this.submissionId))}getCollectionVisibility(){const submissionSectionModel=this.submissionDefinition.sections.page.find(section=>isEqual_default()(section.sectionType,sections_type.l.Collection));return(0,empty_util.EA)(submissionSectionModel.visibility)?submissionSectionModel.visibility:null}get isSectionHidden(){const visibility=this.getCollectionVisibility();return(0,empty_util.a4)(visibility)&&isEqual_default()(visibility.main,visibility_type.x.HIDDEN)&&isEqual_default()(visibility.other,visibility_type.x.HIDDEN)}get isSectionReadonly(){const visibility=this.getCollectionVisibility();return(0,empty_util.a4)(visibility)&&isEqual_default()(visibility.main,visibility_type.x.READONLY)&&isEqual_default()(visibility.other,visibility_type.x.READONLY)}ngOnDestroy(){this.isActive=!1,this.submissionService.stopAutoSave(),this.submissionService.resetAllSubmissionObjects(),this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}onCollectionChange(submissionObject){this.collectionId=submissionObject.collection.id,this.definitionId!==submissionObject.submissionDefinition.name?(this.sections=submissionObject.sections,this.submissionDefinition=submissionObject.submissionDefinition,this.definitionId=this.submissionDefinition.name,this.submissionService.resetSubmissionObject(this.collectionId,this.submissionId,submissionObject._links.self.href,this.submissionDefinition,this.sections,this.item)):this.changeDetectorRef.detectChanges()}isLoading(){return this.loading}getSectionsList(){return this.submissionService.getSubmissionSections(this.submissionId).pipe((0,operators.pb)(sections=>(0,empty_util.hj)(sections)),(0,operators.Tj)(sections=>sections.filter(section=>!isEqual_default()(section.sectionType,sections_type.l.Collection))))}static#_=this.\u0275fac=function(t){return new(t||SubmissionFormComponent2)(core.rXU(auth_service.uR),core.rXU(core.gRc),core.rXU(hal_endpoint_service.Y),core.rXU(submission_service.E),core.rXU(sections_service.c))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionFormComponent2,selectors:[["ds-submission-form"]],inputs:{collectionId:"collectionId",item:"item",collectionModifiable:"collectionModifiable",sections:"sections",submissionErrors:"submissionErrors",selfUrl:"selfUrl",submissionDefinition:"submissionDefinition",submissionId:"submissionId"},standalone:!0,features:[core.OA$,core.aNF],decls:10,vars:12,consts:[[1,"container-fluid"],["class","submission-form-header mb-3 d-flex flex-wrap position-sticky",4,"ngIf"],[1,"submission-form-content"],["message","Loading...",4,"ngIf"],[4,"ngFor","ngForOf"],["class","submission-form-footer mt-3 mb-3 position-sticky",4,"ngIf"],[1,"submission-form-header","mb-3","d-flex","flex-wrap","position-sticky"],["class","w-100",4,"ngIf"],[1,"submission-form-header-item","mb-3","mb-sm-0","flex-sm-grow-1","flex-md-grow-0"],[4,"ngIf"],[1,"submission-form-header-item","text-right"],[3,"collectionId","submissionId"],[1,"w-100"],[3,"submissionId","collectionId","uploadFilesOptions"],[1,"clearfix"],[3,"collectionChange","currentCollectionId","currentDefinition","submissionId","collectionModifiable","isReadonly"],["message","Loading..."],[3,"collectionId","submissionId","sectionData"],[1,"submission-form-footer","mt-3","mb-3","position-sticky"],[3,"submissionId"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,SubmissionFormComponent_div_1_Template,7,6,"div",1),core.nI1(2,"async"),core.j41(3,"div",2),core.DNE(4,SubmissionFormComponent_ds_loading_4_Template,1,0,"ds-loading",3),core.nI1(5,"async"),core.DNE(6,SubmissionFormComponent_ng_container_6_Template,2,3,"ng-container",4),core.nI1(7,"async"),core.k0s(),core.DNE(8,SubmissionFormComponent_div_8_Template,2,1,"div",5),core.nI1(9,"async"),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",!0!==core.bMT(2,4,ctx.isLoading())),core.R7$(3),core.Y8G("ngIf",core.bMT(5,6,ctx.isLoading())),core.R7$(2),core.Y8G("ngForOf",core.bMT(7,8,ctx.submissionSections)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(9,10,ctx.isLoading())))},dependencies:[common.MD,common.Sq,common.bT,common.Jj,themed_loading_component.v,SubmissionSectionContainerComponent,SubmissionFormFooterComponent,ThemedSubmissionUploadFilesComponent,SubmissionFormCollectionComponent,SubmissionFormSectionAddComponent],styles:[".submission-form-header[_ngcontent-%COMP%]{background-color:#fffffff7;padding:calc(var(--bs-spacer) / 2) 0 calc(var(--bs-spacer) / 2) 0;top:0;z-index:var(--ds-submission-header-z-index)}.submission-form-header-item[_ngcontent-%COMP%]{flex-grow:1}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:var(--ds-submission-footer-z-index)}.btn-link-focus[_ngcontent-%COMP%]{font-weight:400;color:#1f7293;text-decoration:none}.btn-link-focus[_ngcontent-%COMP%]:hover{color:#124154;text-decoration:underline}.btn-link-focus[_ngcontent-%COMP%]:disabled, .btn-link-focus.disabled[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none}.btn-link-focus[_ngcontent-%COMP%]:focus, .btn-link-focus.focus[_ngcontent-%COMP%]{text-decoration:underline}"]})}return SubmissionFormComponent2})()},15870:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionUploadFilesComponent:()=>SubmissionUploadFilesComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(84739),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42926),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(80811),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10117),_shared_upload_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(55361),_sections_sections_service__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(32034),__webpack_require__(90224)),_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(54942),_submission_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(77523),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(20849),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(43750);function SubmissionUploadFilesComponent_ds_uploader_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"ds-uploader",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("onCompleteItem",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r1.onCompleteItem($event))})("onUploadError",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r1.onUploadError())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("dropMsg",ctx_r1.dropMsg)("dropOverDocumentMsg",ctx_r1.dropOverDocumentMsg)("enableDragOverDocument",ctx_r1.enableDragOverDocument)("onBeforeUpload",ctx_r1.onBeforeUpload)("uploadFilesOptions",ctx_r1.uploadFilesOptions)}}let SubmissionUploadFilesComponent=(()=>{class SubmissionUploadFilesComponent2{constructor(notificationsService,operationsService,sectionService,submissionService,translate){this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.enableDragOverDocument=!0,this.dropOverDocumentMsg="submission.sections.upload.drop-message",this.dropMsg="submission.sections.upload.drop-message",this.subs=[],this.uploadEnabled=(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(!1),this.onBeforeUpload=()=>{const sub=this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections").subscribe();return this.subs.push(sub),sub}}ngOnChanges(){this.uploadEnabled=this.sectionService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__.l.Upload)}onCompleteItem(workspaceitem){this.subs.push(this.uploadEnabled.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.$1)()).subscribe(isUploadEnabled=>{if(isUploadEnabled){const{sections}=workspaceitem,{errors}=workspaceitem,errorsList=(0,_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__.A)(errors);sections&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.hj)(sections)&&Object.keys(sections).forEach(sectionId=>{const sectionData=(0,_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_1__.Z5)(sections[sectionId]),sectionErrors=errorsList[sectionId];this.sectionService.isSectionType(this.submissionId,sectionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__.l.Upload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.s)(1)).subscribe(isUpload=>{isUpload&&((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.Im)(sectionErrors)?this.notificationsService.success(null,this.translate.get("submission.sections.upload.upload-successful")):this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed")))}),this.sectionService.updateSectionData(this.submissionId,sectionId,sectionData,sectionErrors,sectionErrors)})}}))}onUploadError(){this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed"))}ngOnDestroy(){this.subs.filter(subscription=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||SubmissionUploadFilesComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_0__.U),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_sections_sections_service__WEBPACK_IMPORTED_MODULE_5__.c),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_submission_service__WEBPACK_IMPORTED_MODULE_7__.E),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.c$))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:SubmissionUploadFilesComponent2,selectors:[["ds-base-submission-upload-files"]],inputs:{collectionId:"collectionId",submissionId:"submissionId",uploadFilesOptions:"uploadFilesOptions"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.OA$,_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:1,vars:1,consts:[[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"onCompleteItem","onUploadError","dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(0,SubmissionUploadFilesComponent_ds_uploader_0_Template,1,5,"ds-uploader",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.uploadFilesOptions.url)},dependencies:[_shared_upload_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_3__.y,_angular_common__WEBPACK_IMPORTED_MODULE_14__.bT],encapsulation:2})}return SubmissionUploadFilesComponent2})()},79321:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CoarNotifyConfigDataService:()=>CoarNotifyConfigDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10743),_core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_core_data_base_create_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(85311),_core_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43626),_core_data_base_find_all_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(89480),_core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_core_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75467),_core_data_request_models__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(87457),_core_data_request_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(72744),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(91365),_core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1828),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(68014);let CoarNotifyConfigDataService=(()=>{class CoarNotifyConfigDataService2 extends _core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("submissioncoarnotifyconfigs",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.findAllData=new _core_data_base_find_all_data__WEBPACK_IMPORTED_MODULE_4__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _core_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.patchData=new _core_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,this.comparator,this.responseMsToLive,this.constructIdEndpoint),this.createData=new _core_data_base_create_data__WEBPACK_IMPORTED_MODULE_2__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive)}create(object,...params){return this.createData.create(object,...params)}patch(object,operations){return this.patchData.patch(object,operations)}update(object){return this.patchData.update(object)}commitUpdates(method){return this.patchData.commitUpdates(method)}createPatchFromCache(object){return this.patchData.createPatchFromCache(object)}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}delete(objectId,copyVirtualMetadata){return this.deleteData.delete(objectId,copyVirtualMetadata)}deleteByHref(href,copyVirtualMetadata){return this.deleteData.deleteByHref(href,copyVirtualMetadata)}invoke(serviceName,serviceId,files){const requestId=this.requestService.generateRequestId();return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(endpoint=>new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_12__.t(endpoint,serviceName,"submissioncoarnotifyconfigmodel",serviceId).toString()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(endpoint=>{const body=this.getInvocationFormData(files);return new _core_data_request_models__WEBPACK_IMPORTED_MODULE_7__.E0(requestId,endpoint,body)})).subscribe(request=>this.requestService.send(request)),this.rdbService.buildFromRequestUUID(requestId)}getInvocationFormData(files){const form=new FormData;return files.forEach(file=>{form.append("file",file)}),form}static#_=this.\u0275fac=function(t){return new(t||CoarNotifyConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_13__.KVO(_core_data_request_service__WEBPACK_IMPORTED_MODULE_8__.B),_angular_core__WEBPACK_IMPORTED_MODULE_13__.KVO(_core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_13__.KVO(_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_13__.KVO(_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_9__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_13__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_10__.I))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_13__.jDH({token:CoarNotifyConfigDataService2,factory:CoarNotifyConfigDataService2.\u0275fac,providedIn:"root"})}return CoarNotifyConfigDataService2})()},78115:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>SubmissionSectionUploadAccessConditionsComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84739),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(91735),_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(97195),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(68014);function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(0,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s()),2&rf){const accessCondition_r1=_angular_core__WEBPACK_IMPORTED_MODULE_3__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.E5c(" ",accessCondition_r1.name," ",accessCondition_r1.startDate," ",accessCondition_r1.endDate," ")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(0,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s()),2&rf){const accessCondition_r1=_angular_core__WEBPACK_IMPORTED_MODULE_3__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Lme("",accessCondition_r1.name," from ",accessCondition_r1.endDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(0,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s()),2&rf){const accessCondition_r1=_angular_core__WEBPACK_IMPORTED_MODULE_3__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Lme("",accessCondition_r1.name," until ",accessCondition_r1.startDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(1,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template,2,3,"span",1)(2,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template,2,2,"span",1)(3,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template,2,2,"span",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.nrm(4,"br"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.bVm()),2&rf){const accessCondition_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y8G("ngIf","DEFAULT_BITSTREAM_READ"===accessCondition_r1.action),_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y8G("ngIf","lease"===accessCondition_r1.name),_angular_core__WEBPACK_IMPORTED_MODULE_3__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y8G("ngIf","embargo"===accessCondition_r1.name)}}let SubmissionSectionUploadAccessConditionsComponent=(()=>{class SubmissionSectionUploadAccessConditionsComponent2{constructor(dsoNameService,groupService){this.dsoNameService=dsoNameService,this.groupService=groupService,this.accessConditionsList=[]}ngOnInit(){this.accessConditions.forEach(accessCondition=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(accessCondition.name)?this.groupService.findByHref(accessCondition._links.group.href).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(rd=>{if(rd.hasSucceeded){const group=rd.payload,accessConditionEntry=Object.assign({},accessCondition);accessConditionEntry.name=this.dsoNameService.getName(group),this.accessConditionsList.push(accessConditionEntry)}}):this.accessConditionsList.push(accessCondition)})}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionUploadAccessConditionsComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__.f),_angular_core__WEBPACK_IMPORTED_MODULE_3__.rXU(_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_1__.GroupDataService))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:SubmissionSectionUploadAccessConditionsComponent2,selectors:[["ds-submission-section-upload-access-conditions"]],inputs:{accessConditions:"accessConditions"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","badge badge-primary mt-3 mr-2",4,"ngIf"],["class","badge badge-dark mt-3 mr-2",4,"ngIf"],[1,"badge","badge-primary","mt-3","mr-2"],[1,"badge","badge-dark","mt-3","mr-2"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template,5,3,"ng-container",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y8G("ngForOf",ctx.accessConditionsList)},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_5__.bT],encapsulation:2})}return SubmissionSectionUploadAccessConditionsComponent2})()},63781:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionSectionUploadFileComponent:()=>SubmissionSectionUploadFileComponent});var common=__webpack_require__(84739),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),json_patch_operation_path_combiner=(__webpack_require__(51683),__webpack_require__(56554)),json_patch_operations_builder=__webpack_require__(39721),bitstream_model=__webpack_require__(77381),submission_json_patch_operations_service=__webpack_require__(42926),empty_util=__webpack_require__(77028),themed_file_download_link_component=__webpack_require__(99565),form_service=__webpack_require__(79181),file_size_pipe=__webpack_require__(49192),submission_service=__webpack_require__(77523),section_upload_service=__webpack_require__(44889),core=__webpack_require__(71508),custom_switch_model=__webpack_require__(62165),date_util=__webpack_require__(7840),form_builder_service=__webpack_require__(80152),form_component=__webpack_require__(49148);const BITSTREAM_METADATA_FORM_GROUP_CONFIG={id:"metadata",group:[]},BITSTREAM_METADATA_FORM_GROUP_LAYOUT={element:{container:"form-group",label:"col-form-label"},grid:{label:"col-sm-3"}},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessConditions",groupFactory:null},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.upload.form.access-condition-label",hint:"submission.sections.upload.form.access-condition-hint",options:[]},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},BITSTREAM_FORM_PRIMARY_LAYOUT={element:{host:"col-12",container:"text-right"}},BITSTREAM_FORM_PRIMARY={id:"primary",name:"primary",label:"bitstream.edit.form.primaryBitstream.label"},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.upload.form.from-label",hint:"submission.sections.upload.form.from-hint",placeholder:"submission.sections.upload.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:core.AjF,operator:core.fXj,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-from"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.upload.form.until-label",hint:"submission.sections.upload.form.until-hint",placeholder:"submission.sections.upload.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:core.AjF,operator:core.fXj,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-until"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};var fesm2022_core=__webpack_require__(68014),ng_bootstrap=__webpack_require__(71781);const _c0=["formRef"];function SubmissionSectionUploadFileEditComponent_ds_form_9_Template(rf,ctx){if(1&rf){const _r1=fesm2022_core.RV6();fesm2022_core.j41(0,"ds-form",7,0),fesm2022_core.bIt("submitForm",function(){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG();return fesm2022_core.Njj(ctx_r1.onSubmit())})("cancel",function(){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG();return fesm2022_core.Njj(ctx_r1.onModalClose())})("dfChange",function($event){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG();return fesm2022_core.Njj(ctx_r1.onChange($event))}),fesm2022_core.k0s()}if(2&rf){const ctx_r1=fesm2022_core.XpG();fesm2022_core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!ctx_r1.isSaving)("displayCancel",!ctx_r1.isSaving)}}let SubmissionSectionUploadFileEditComponent=(()=>{class SubmissionSectionUploadFileEditComponent2{constructor(activeModal,cdr,formBuilderService,formService,submissionService,operationsBuilder,operationsService,uploadService){this.activeModal=activeModal,this.cdr=cdr,this.formBuilderService=formBuilderService,this.formService=formService,this.submissionService=submissionService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.uploadService=uploadService,this.formMetadata=[],this.isSaving=!1,this.subscriptions=[]}initModelData(formModel){this.formBuilderService.findById("primary",formModel,this.fileIndex).value=this.isPrimary||!1,this.fileData.accessConditions.forEach((accessCondition,index)=>{Array.of("name","startDate","endDate").filter(key=>accessCondition.hasOwnProperty(key)&&(0,empty_util.hj)(accessCondition[key])).forEach(key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===core.fQD){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]})})}onChange(event){"name"===event.model.id&&this.setOptions(event.model,event.control)}onModalClose(){this.activeModal.dismiss()}onSubmit(){this.isSaving=!0,this.saveBitstreamData()}setOptions(model,control){let accessCondition=null;if(this.availableAccessConditionOptions.filter(element=>element.name===control.value).forEach(element=>accessCondition=element),(0,empty_util.hj)(accessCondition)){const startDateControl=control.parent.get("startDate"),endDateControl=control.parent.get("endDate");startDateControl?.markAsUntouched(),endDateControl?.markAsUntouched(),startDateControl?.setValue(null),control.parent.markAsDirty(),endDateControl?.setValue(null)}}ngOnInit(){this.fileData&&this.formId&&(this.formModel=this.buildFileEditForm(),this.cdr.detectChanges())}ngOnDestroy(){this.unsubscribeAll()}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}buildFileEditForm(){const configDescr=Object.assign({},this.configMetadataForm.rows[0].fields[0]);configDescr.repeatable=!1;const configForm=Object.assign({},this.configMetadataForm,{fields:Object.assign([],this.configMetadataForm.rows[0].fields[0],[this.configMetadataForm.rows[0].fields[0],configDescr])}),formModel=[];formModel.push(new custom_switch_model.i(BITSTREAM_FORM_PRIMARY,BITSTREAM_FORM_PRIMARY_LAYOUT));const metadataGroupModelConfig=Object.assign({},BITSTREAM_METADATA_FORM_GROUP_CONFIG);metadataGroupModelConfig.group=this.formBuilderService.modelFromConfiguration(this.submissionId,configForm,this.collectionId,this.fileData.metadata,this.submissionService.getSubmissionScope()),formModel.push(new core.iO5(metadataGroupModelConfig,BITSTREAM_METADATA_FORM_GROUP_LAYOUT));const accessConditionTypeModelConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];if(2===this.collectionPolicyType){for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const startDateCondition=[],endDateCondition=[];let maxStartDate,maxEndDate;this.availableAccessConditionOptions.forEach(condition=>{if(condition.hasStartDate&&(startDateCondition.push({id:"name",value:condition.name}),condition.maxStartDate)){const min=new Date(condition.maxStartDate);maxStartDate={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(condition.hasEndDate&&(endDateCondition.push({id:"name",value:condition.name}),condition.maxEndDate)){const max=new Date(condition.maxEndDate);maxEndDate={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}});const confStart={relations:[{match:core.AjF,operator:core.fXj,when:startDateCondition}]},confEnd={relations:[{match:core.AjF,operator:core.fXj,when:endDateCondition}]},hasStartDate=startDateCondition.length>0,hasEndDate=endDateCondition.length>0;accessConditionsArrayConfig.groupFactory=()=>{const type=new core.z4z(accessConditionTypeModelConfig,BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart);maxStartDate&&(startDateConfig.max=maxStartDate);const endDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd);maxEndDate&&(endDateConfig.max=maxEndDate);const startDate=new core.dku(startDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new core.dku(endDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStartDate&&accessConditionGroupConfig.group.push(startDate),hasEndDate&&accessConditionGroupConfig.group.push(endDate),[new core.iO5(accessConditionGroupConfig,BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=(0,empty_util.hj)(this.fileData.accessConditions)?this.fileData.accessConditions.length:1,formModel.push(new core.UqU(accessConditionsArrayConfig,BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT))}return this.initModelData(formModel),formModel}saveBitstreamData(){const pathFragment=["files",this.fileIndex];this.formService.validateAllFormFields(this.formRef.formGroup);const saveBitstreamDataSubscription=this.formService.isValid(this.formId).pipe((0,operators.s)(1),(0,operators.pb)(isValid=>isValid),(0,operators.ZZ)(()=>this.formService.getFormData(this.formId)),(0,operators.s)(1),(0,operators.ZZ)(formData=>{this.uploadService.updatePrimaryBitstreamOperation(this.pathCombiner.getPath("primary"),this.isPrimary,formData.primary[0],this.fileId),Object.keys(formData.metadata).filter(key=>(0,empty_util.hj)(formData.metadata[key])).forEach(key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.add(this.pathCombiner.getPath([...pathFragment,path]),formData.metadata[key],!0)}),Object.keys(this.fileData.metadata).filter(key=>(0,empty_util.hj)(this.fileData.metadata[key])).filter(key=>(0,empty_util.Tn)(formData.metadata[key])).filter(key=>this.formMetadata.includes(key)).forEach(key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.remove(this.pathCombiner.getPath([...pathFragment,path]))});const accessConditionsToSave=[];return formData.hasOwnProperty("accessConditions")&&formData.accessConditions.filter(accessConditions=>(0,empty_util.Pe)(accessConditions)).map(accessConditions=>accessConditions.accessConditionGroup).filter(accessCondition=>(0,empty_util.hj)(accessCondition)).forEach(accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter(element=>(0,empty_util.Pe)(accessCondition.name)&&element.name===accessCondition.name[0].value).forEach(element=>accessConditionOpt=element),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);let startDateDate=new Date(startDate);if(accessConditionOpt.maxStartDate){const maxStartDateDate=new Date(accessConditionOpt.maxStartDate);startDateDate>maxStartDateDate&&(startDateDate=maxStartDateDate)}currentAccessCondition.startDate=(0,date_util.Sd)(startDateDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);let endDateDate=new Date(endDate);if(accessConditionOpt.maxEndDate){const maxEndDateDate=new Date(accessConditionOpt.maxEndDate);endDateDate>maxEndDateDate&&(endDateDate=maxEndDateDate)}currentAccessCondition.endDate=(0,date_util.Sd)(endDateDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}}),(0,empty_util.hj)(accessConditionsToSave)&&this.operationsBuilder.add(this.pathCombiner.getPath([...pathFragment,"accessConditions"]),accessConditionsToSave,!0),this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement)})).subscribe(result=>{const section=result[0].sections[this.sectionId];if(!section)return;const uploadSection=section;this.uploadService.updateFilePrimaryBitstream(this.submissionId,this.sectionId,uploadSection.primary),Object.keys(uploadSection.files).filter(key=>uploadSection.files[key].uuid===this.fileId).forEach(key=>this.uploadService.updateFileData(this.submissionId,this.sectionId,this.fileId,uploadSection.files[key])),this.isSaving=!1,this.activeModal.close()});this.subscriptions.push(saveBitstreamDataSubscription)}unsubscribeAll(){this.subscriptions.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionUploadFileEditComponent2)(fesm2022_core.rXU(ng_bootstrap.Lw),fesm2022_core.rXU(fesm2022_core.gRc),fesm2022_core.rXU(form_builder_service.j),fesm2022_core.rXU(form_service.u),fesm2022_core.rXU(submission_service.E),fesm2022_core.rXU(json_patch_operations_builder.C),fesm2022_core.rXU(submission_json_patch_operations_service.U),fesm2022_core.rXU(section_upload_service.i))};static#_2=this.\u0275cmp=fesm2022_core.VBU({type:SubmissionSectionUploadFileEditComponent2,selectors:[["ds-submission-section-upload-file-edit"]],viewQuery:function(rf,ctx){if(1&rf&&fesm2022_core.GBs(_c0,5),2&rf){let _t;fesm2022_core.mGM(_t=fesm2022_core.lsd())&&(ctx.formRef=_t.first)}},standalone:!0,features:[fesm2022_core.aNF],decls:10,vars:5,consts:[["formRef","formComponent"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click","disabled"],["aria-hidden","true"],[1,"modal-body"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange",4,"ngIf"],[3,"submitForm","cancel","dfChange","formId","formModel","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&(fesm2022_core.j41(0,"div")(1,"div",1)(2,"h4",2),fesm2022_core.EFF(3),fesm2022_core.nI1(4,"translate"),fesm2022_core.k0s(),fesm2022_core.j41(5,"button",3),fesm2022_core.bIt("click",function(){return ctx.onModalClose()}),fesm2022_core.j41(6,"span",4),fesm2022_core.EFF(7,"\xd7"),fesm2022_core.k0s()()(),fesm2022_core.j41(8,"div",5),fesm2022_core.DNE(9,SubmissionSectionUploadFileEditComponent_ds_form_9_Template,2,4,"ds-form",6),fesm2022_core.k0s()()),2&rf&&(fesm2022_core.R7$(3),fesm2022_core.JRh(fesm2022_core.bMT(4,3,"submission.sections.upload.edit.title")),fesm2022_core.R7$(2),fesm2022_core.Y8G("disabled",ctx.isSaving),fesm2022_core.R7$(4),fesm2022_core.Y8G("ngIf",ctx.formModel))},dependencies:[form_component.s,common.bT,ngx_translate_core.h,ngx_translate_core.D9],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]})}return SubmissionSectionUploadFileEditComponent2})();var section_upload_file_view_component=__webpack_require__(89208);const section_upload_file_component_c0=a0=>({fileName:a0});function SubmissionSectionUploadFileComponent_ng_container_0_span_7_Template(rf,ctx){if(1&rf&&(fesm2022_core.j41(0,"span",21),fesm2022_core.EFF(1),fesm2022_core.nI1(2,"translate"),fesm2022_core.k0s()),2&rf){const ctx_r1=fesm2022_core.XpG(2);fesm2022_core.R7$(),fesm2022_core.JRh(fesm2022_core.i5U(2,1,"submission.sections.upload.primary.make",fesm2022_core.eq3(4,section_upload_file_component_c0,ctx_r1.fileName)))}}function SubmissionSectionUploadFileComponent_ng_container_0_span_8_Template(rf,ctx){if(1&rf&&(fesm2022_core.j41(0,"span",21),fesm2022_core.EFF(1),fesm2022_core.nI1(2,"translate"),fesm2022_core.k0s()),2&rf){const ctx_r1=fesm2022_core.XpG(2);fesm2022_core.R7$(),fesm2022_core.JRh(fesm2022_core.i5U(2,1,"submission.sections.upload.primary.remove",fesm2022_core.eq3(4,section_upload_file_component_c0,ctx_r1.fileName)))}}function SubmissionSectionUploadFileComponent_ng_container_0_i_28_Template(rf,ctx){1&rf&&fesm2022_core.nrm(0,"i",22)}function SubmissionSectionUploadFileComponent_ng_container_0_i_30_Template(rf,ctx){1&rf&&fesm2022_core.nrm(0,"i",23)}function SubmissionSectionUploadFileComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r1=fesm2022_core.RV6();fesm2022_core.qex(0),fesm2022_core.j41(1,"div",2)(2,"div",3)(3,"div",4)(4,"input",5),fesm2022_core.nI1(5,"async"),fesm2022_core.bIt("change",function($event){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG();return fesm2022_core.Njj(ctx_r1.togglePrimaryBitstream($event))}),fesm2022_core.k0s(),fesm2022_core.j41(6,"label",6),fesm2022_core.DNE(7,SubmissionSectionUploadFileComponent_ng_container_0_span_7_Template,3,6,"span",7)(8,SubmissionSectionUploadFileComponent_ng_container_0_span_8_Template,3,6,"span",7),fesm2022_core.k0s()()(),fesm2022_core.j41(9,"div",8)(10,"div",9)(11,"h3"),fesm2022_core.EFF(12),fesm2022_core.j41(13,"span",10),fesm2022_core.EFF(14),fesm2022_core.nI1(15,"dsFileSize"),fesm2022_core.k0s()()(),fesm2022_core.j41(16,"div",11),fesm2022_core.qex(17),fesm2022_core.j41(18,"ds-file-download-link",12),fesm2022_core.nrm(19,"i",13),fesm2022_core.k0s(),fesm2022_core.j41(20,"button",14),fesm2022_core.nI1(21,"translate"),fesm2022_core.nI1(22,"translate"),fesm2022_core.bIt("click",function($event){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG();return $event.preventDefault(),fesm2022_core.Njj(ctx_r1.editBitstreamData())}),fesm2022_core.nrm(23,"i",15),fesm2022_core.k0s(),fesm2022_core.j41(24,"button",16),fesm2022_core.nI1(25,"translate"),fesm2022_core.nI1(26,"async"),fesm2022_core.nI1(27,"translate"),fesm2022_core.bIt("click",function($event){fesm2022_core.eBV(_r1);const ctx_r1=fesm2022_core.XpG(),content_r3=fesm2022_core.sdS(2);return $event.preventDefault(),fesm2022_core.Njj(ctx_r1.confirmDelete(content_r3))}),fesm2022_core.DNE(28,SubmissionSectionUploadFileComponent_ng_container_0_i_28_Template,1,0,"i",17),fesm2022_core.nI1(29,"async"),fesm2022_core.DNE(30,SubmissionSectionUploadFileComponent_ng_container_0_i_30_Template,1,0,"i",18),fesm2022_core.nI1(31,"async"),fesm2022_core.k0s(),fesm2022_core.bVm(),fesm2022_core.k0s(),fesm2022_core.nrm(32,"div",19)(33,"ds-submission-section-upload-file-view",20),fesm2022_core.k0s()(),fesm2022_core.bVm()}if(2&rf){const ctx_r1=fesm2022_core.XpG();fesm2022_core.R7$(4),fesm2022_core.Mz_("id","primaryBitstream",ctx_r1.fileIndex,""),fesm2022_core.Y8G("disabled",fesm2022_core.bMT(5,22,ctx_r1.processingSaveStatus$))("checked",ctx_r1.isPrimary),fesm2022_core.R7$(2),fesm2022_core.Mz_("for","primaryBitstream",ctx_r1.fileIndex,""),fesm2022_core.R7$(),fesm2022_core.Y8G("ngIf",!ctx_r1.isPrimary),fesm2022_core.R7$(),fesm2022_core.Y8G("ngIf",ctx_r1.isPrimary),fesm2022_core.R7$(4),fesm2022_core.SpI("",ctx_r1.fileName," "),fesm2022_core.R7$(2),fesm2022_core.SpI("(",fesm2022_core.bMT(15,24,null==ctx_r1.fileData?null:ctx_r1.fileData.sizeBytes),")"),fesm2022_core.R7$(4),fesm2022_core.Y8G("cssClasses","btn btn-link-focus")("isBlank",!0)("bitstream",ctx_r1.getBitstream())("enableRequestACopy",!1),fesm2022_core.R7$(2),fesm2022_core.FS9("title",fesm2022_core.bMT(21,26,"submission.sections.upload.edit.title")),fesm2022_core.BMQ("aria-label",fesm2022_core.bMT(22,28,"submission.sections.upload.edit.title")),fesm2022_core.R7$(4),fesm2022_core.FS9("title",fesm2022_core.bMT(25,30,"submission.sections.upload.delete.confirm.title")),fesm2022_core.Y8G("disabled",fesm2022_core.bMT(26,32,ctx_r1.processingDelete$)),fesm2022_core.BMQ("aria-label",fesm2022_core.bMT(27,34,"submission.sections.upload.delete.confirm.title")),fesm2022_core.R7$(4),fesm2022_core.Y8G("ngIf",fesm2022_core.bMT(29,36,ctx_r1.processingDelete$)),fesm2022_core.R7$(2),fesm2022_core.Y8G("ngIf",!0!==fesm2022_core.bMT(31,38,ctx_r1.processingDelete$)),fesm2022_core.R7$(3),fesm2022_core.Y8G("fileData",ctx_r1.fileData)}}function SubmissionSectionUploadFileComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r4=fesm2022_core.RV6();fesm2022_core.j41(0,"div",24)(1,"h4",25),fesm2022_core.EFF(2),fesm2022_core.nI1(3,"translate"),fesm2022_core.k0s(),fesm2022_core.j41(4,"button",26),fesm2022_core.bIt("click",function(){const d_r5=fesm2022_core.eBV(_r4).dismiss;return fesm2022_core.Njj(d_r5("cancel"))}),fesm2022_core.j41(5,"span",27),fesm2022_core.EFF(6,"\xd7"),fesm2022_core.k0s()()(),fesm2022_core.j41(7,"div",28)(8,"p"),fesm2022_core.EFF(9),fesm2022_core.nI1(10,"translate"),fesm2022_core.k0s()(),fesm2022_core.j41(11,"div",29)(12,"button",30),fesm2022_core.bIt("click",function(){const c_r6=fesm2022_core.eBV(_r4).close;return fesm2022_core.Njj(c_r6("cancel"))}),fesm2022_core.EFF(13),fesm2022_core.nI1(14,"translate"),fesm2022_core.k0s(),fesm2022_core.j41(15,"button",31),fesm2022_core.bIt("click",function(){const c_r6=fesm2022_core.eBV(_r4).close;return fesm2022_core.Njj(c_r6("ok"))}),fesm2022_core.EFF(16),fesm2022_core.nI1(17,"translate"),fesm2022_core.k0s()()}2&rf&&(fesm2022_core.R7$(2),fesm2022_core.JRh(fesm2022_core.bMT(3,4,"submission.sections.upload.delete.confirm.title")),fesm2022_core.R7$(7),fesm2022_core.JRh(fesm2022_core.bMT(10,6,"submission.sections.upload.delete.confirm.info")),fesm2022_core.R7$(4),fesm2022_core.JRh(fesm2022_core.bMT(14,8,"submission.sections.upload.delete.confirm.cancel")),fesm2022_core.R7$(3),fesm2022_core.JRh(fesm2022_core.bMT(17,10,"submission.sections.upload.delete.confirm.submit")))}let SubmissionSectionUploadFileComponent=(()=>{class SubmissionSectionUploadFileComponent2{constructor(formService,modalService,operationsBuilder,operationsService,submissionService,uploadService){this.formService=formService,this.modalService=modalService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.uploadService=uploadService,this.processingDelete$=new cjs.BehaviorSubject(!1),this.subscriptions=[],this.formMetadata=[],this.readMode=!0}ngOnChanges(changes){this.availableAccessConditionOptions&&this.subscriptions.push(this.uploadService.getFileData(this.submissionId,this.sectionId,this.fileId).pipe((0,operators.pb)(bitstream=>(0,empty_util.EA)(bitstream))).subscribe(bitstream=>{this.fileData=bitstream}))}ngOnInit(){this.formId=this.formService.getUniqueId(this.fileId),this.processingSaveStatus$=this.submissionService.getSubmissionSaveProcessingStatus(this.submissionId),this.pathCombiner=new json_patch_operation_path_combiner.S("sections",this.sectionId),this.loadFormMetadata()}confirmDelete(content){this.modalService.open(content).result.then(result=>{"ok"===result&&(this.processingDelete$.next(!0),this.deleteFile())})}getBitstream(){return Object.assign(new bitstream_model._,{uuid:this.fileData.uuid})}editBitstreamData(){const activeModal=this.modalService.open(SubmissionSectionUploadFileEditComponent,{size:"xl",backdrop:"static"});activeModal.componentInstance.availableAccessConditionOptions=this.availableAccessConditionOptions,activeModal.componentInstance.collectionId=this.collectionId,activeModal.componentInstance.collectionPolicyType=this.collectionPolicyType,activeModal.componentInstance.configMetadataForm=this.configMetadataForm,activeModal.componentInstance.fileData=this.fileData,activeModal.componentInstance.fileId=this.fileId,activeModal.componentInstance.fileIndex=this.fileIndex,activeModal.componentInstance.formId=this.formId,activeModal.componentInstance.sectionId=this.sectionId,activeModal.componentInstance.formMetadata=this.formMetadata,activeModal.componentInstance.pathCombiner=this.pathCombiner,activeModal.componentInstance.submissionId=this.submissionId,activeModal.componentInstance.isPrimary=this.isPrimary}togglePrimaryBitstream(event){this.uploadService.updatePrimaryBitstreamOperation(this.pathCombiner.getPath("primary"),this.isPrimary,event.target.checked,this.fileId),this.submissionService.dispatchSaveSection(this.submissionId,this.sectionId)}ngOnDestroy(){this.unsubscribeAll()}unsubscribeAll(){this.subscriptions.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}loadFormMetadata(){this.configMetadataForm.rows.forEach(row=>{row.fields.forEach(field=>{field.selectableMetadata.forEach(metadatum=>{this.formMetadata.push(metadatum.metadata)})})})}deleteFile(){this.operationsBuilder.remove(this.pathCombiner.getPath(["files",this.fileIndex])),this.isPrimary&&this.operationsBuilder.remove(this.pathCombiner.getPath("primary")),this.subscriptions.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement).subscribe(()=>{this.isPrimary&&this.uploadService.updateFilePrimaryBitstream(this.submissionId,this.sectionId,null),this.uploadService.removeUploadedFile(this.submissionId,this.sectionId,this.fileId),this.processingDelete$.next(!1)}))}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionUploadFileComponent2)(fesm2022_core.rXU(form_service.u),fesm2022_core.rXU(ng_bootstrap.Bq),fesm2022_core.rXU(json_patch_operations_builder.C),fesm2022_core.rXU(submission_json_patch_operations_service.U),fesm2022_core.rXU(submission_service.E),fesm2022_core.rXU(section_upload_service.i))};static#_2=this.\u0275cmp=fesm2022_core.VBU({type:SubmissionSectionUploadFileComponent2,selectors:[["ds-base-submission-upload-section-file"]],viewQuery:function(rf,ctx){if(1&rf&&fesm2022_core.GBs(SubmissionSectionUploadFileEditComponent,5),2&rf){let _t;fesm2022_core.mGM(_t=fesm2022_core.lsd())&&(ctx.fileEditComp=_t.first)}},inputs:{isPrimary:"isPrimary",availableAccessConditionOptions:"availableAccessConditionOptions",collectionId:"collectionId",collectionPolicyType:"collectionPolicyType",configMetadataForm:"configMetadataForm",fileId:"fileId",fileIndex:"fileIndex",fileName:"fileName",sectionId:"sectionId",submissionId:"submissionId"},standalone:!0,features:[fesm2022_core.OA$,fesm2022_core.aNF],decls:3,vars:1,consts:[["content",""],[4,"ngIf"],[1,"row"],[1,"col-md-2","d-flex","justify-content-center","align-items-center"],[1,"custom-control","custom-switch"],["type","checkbox",1,"custom-control-input",3,"change","id","disabled","checked"],[1,"custom-control-label",3,"for"],["class","sr-only",4,"ngIf"],[1,"col-md-10"],[1,"float-left","w-75"],[1,"text-muted"],[1,"float-right","w-15"],[3,"cssClasses","isBlank","bitstream","enableRequestACopy"],["aria-hidden","true",1,"fa","fa-download","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"click","title"],[1,"fa","fa-edit","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"click","title","disabled"],["class","fas fa-circle-notch fa-spin fa-2x text-danger",4,"ngIf"],["class","fa fa-trash fa-2x text-danger",4,"ngIf"],[1,"clearfix"],[3,"fileData"],[1,"sr-only"],[1,"fas","fa-circle-notch","fa-spin","fa-2x","text-danger"],[1,"fa","fa-trash","fa-2x","text-danger"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(rf,ctx){1&rf&&fesm2022_core.DNE(0,SubmissionSectionUploadFileComponent_ng_container_0_Template,34,40,"ng-container",1)(1,SubmissionSectionUploadFileComponent_ng_template_1_Template,18,12,"ng-template",null,0,fesm2022_core.C5r),2&rf&&fesm2022_core.Y8G("ngIf",ctx.fileData)},dependencies:[ngx_translate_core.h,ngx_translate_core.D9,section_upload_file_view_component.h,common.bT,common.Jj,themed_file_download_link_component.z,file_size_pipe.s]})}return SubmissionSectionUploadFileComponent2})()},89208:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>SubmissionSectionUploadFileViewComponent});var common=__webpack_require__(84739),ngx_translate_core=__webpack_require__(43750),metadata_utils=__webpack_require__(10339),empty_util=__webpack_require__(77028),core=__webpack_require__(68014);let TruncatePipe=(()=>{class TruncatePipe2{transform(value,args){if((0,empty_util.a4)(value)){const limit=args&&args.length>0?parseInt(args[0],10):10;return value.length>limit?value.substring(0,limit)+"...":value}return value}static#_=this.\u0275fac=function(t){return new(t||TruncatePipe2)};static#_2=this.\u0275pipe=core.EJ8({name:"dsTruncate",type:TruncatePipe2,pure:!0,standalone:!0})}return TruncatePipe2})();var submission_section_upload_access_conditions_component=__webpack_require__(78115);const _c0=()=>["150"],_c1=a0=>({format:a0});function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"h5"),core.EFF(2),core.k0s(),core.bVm()),2&rf){const entry_r1=core.XpG().$implicit;core.R7$(2),core.SpI(" ",entry_r1.value," ")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"h5")(1,"span",5),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r1=core.XpG(4);core.R7$(2),core.Lme("",core.bMT(3,2,"submission.sections.upload.no-entry")," ",ctx_r1.fileTitleKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template,4,4,"h5",0),core.bVm()),2&rf){const entry_r1=core.XpG().$implicit,ctx_r1=core.XpG(2);core.R7$(),core.Y8G("ngIf",0===ctx_r1.metadata[ctx_r1.fileTitleKey].indexOf(entry_r1))}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template,3,1,"ng-container",0)(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template,2,1,"ng-container",0),core.nrm(3,"span",2),core.bVm()),2&rf){const entry_r1=ctx.$implicit;core.R7$(),core.Y8G("ngIf",""!==entry_r1.value),core.R7$(),core.Y8G("ngIf",""===entry_r1.value)}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.EFF(1),core.nI1(2,"dsTruncate"),core.bVm()),2&rf){const entry_r3=core.XpG().$implicit;core.R7$(),core.SpI(" ",core.i5U(2,1,entry_r3.value,core.lJ4(4,_c0))," ")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"span",5),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG(4);core.R7$(),core.Lme("",core.bMT(2,2,"submission.sections.upload.no-entry")," ",ctx_r1.fileDescrKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template,3,4,"span",6),core.bVm()),2&rf){const entry_r3=core.XpG().$implicit,ctx_r1=core.XpG(2);core.R7$(),core.Y8G("ngIf",0===ctx_r1.metadata[ctx_r1.fileDescrKey].indexOf(entry_r3))}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template,3,5,"ng-container",0)(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template,2,1,"ng-container",0),core.nrm(3,"span",2),core.bVm()),2&rf){const entry_r3=ctx.$implicit;core.R7$(),core.Y8G("ngIf",""!==entry_r3.value),core.R7$(),core.Y8G("ngIf",""===entry_r3.value)}}function SubmissionSectionUploadFileViewComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template,4,2,"ng-container",4)(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template,4,2,"ng-container",4),core.bVm()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngForOf",ctx_r1.getAllMetadataValue(ctx_r1.fileTitleKey)),core.R7$(),core.Y8G("ngForOf",ctx_r1.getAllMetadataValue(ctx_r1.fileDescrKey))}}function SubmissionSectionUploadFileViewComponent_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",7),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.SpI(" ",core.i5U(2,1,"admin.registries.bitstream-formats.edit.head",core.eq3(4,_c1,ctx_r1.fileFormat))," ")}}function SubmissionSectionUploadFileViewComponent_div_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",7),core.EFF(1),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Lme(" Checksum ",ctx_r1.fileCheckSum.checkSumAlgorithm,": ",ctx_r1.fileCheckSum.value," ")}}let SubmissionSectionUploadFileViewComponent=(()=>{class SubmissionSectionUploadFileViewComponent2{constructor(){this.metadata=Object.create({}),this.fileTitleKey="Title",this.fileDescrKey="Description"}ngOnInit(){(0,empty_util.hj)(this.fileData.metadata)&&(this.metadata[this.fileTitleKey]=metadata_utils.O.all(this.fileData.metadata,"dc.title"),this.metadata[this.fileDescrKey]=metadata_utils.O.all(this.fileData.metadata,"dc.description")),this.fileCheckSum=this.fileData.checkSum,this.fileFormat=this.fileData.format.shortDescription}getAllMetadataValue(metadataKey){return metadata_utils.O.all(this.metadata,metadataKey)}static#_=this.\u0275fac=function(t){return new(t||SubmissionSectionUploadFileViewComponent2)};static#_2=this.\u0275cmp=core.VBU({type:SubmissionSectionUploadFileViewComponent2,selectors:[["ds-submission-section-upload-file-view"]],inputs:{fileData:"fileData"},standalone:!0,features:[core.aNF],decls:6,vars:4,consts:[[4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"clearfix"],[3,"accessConditions"],[4,"ngFor","ngForOf"],[1,"text-muted"],["class","text-muted",4,"ngIf"],[1,"mt-1"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div"),core.DNE(1,SubmissionSectionUploadFileViewComponent_ng_container_1_Template,3,2,"ng-container",0)(2,SubmissionSectionUploadFileViewComponent_div_2_Template,3,6,"div",1)(3,SubmissionSectionUploadFileViewComponent_div_3_Template,2,2,"div",1),core.nrm(4,"span",2)(5,"ds-submission-section-upload-access-conditions",3),core.k0s()),2&rf&&(core.R7$(),core.Y8G("ngIf",ctx.metadata),core.R7$(),core.Y8G("ngIf",ctx.fileFormat),core.R7$(),core.Y8G("ngIf",ctx.fileCheckSum),core.R7$(2),core.Y8G("accessConditions",ctx.fileData.accessConditions))},dependencies:[submission_section_upload_access_conditions_component._,ngx_translate_core.h,ngx_translate_core.D9,TruncatePipe,common.bT,common.Sq],encapsulation:2})}return SubmissionSectionUploadFileViewComponent2})()},44889:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>SectionUploadService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10743),src_app_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39721),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77028),_objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(243),_selectors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37094),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_ngrx_store__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5136);let SectionUploadService=(()=>{class SectionUploadService2{constructor(store,operationsBuilder){this.store=store,this.operationsBuilder=operationsBuilder}updatePrimaryBitstreamOperation(path,intitialPrimary,primary,fileId){if(null===intitialPrimary&&primary)this.operationsBuilder.add(path,fileId,!1,!0);else if(intitialPrimary!==primary){if(primary)return void this.operationsBuilder.replace(path,fileId,!0);this.operationsBuilder.remove(path)}}getUploadedFilesData(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.on)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(state=>state),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.F)())}getUploadedFileList(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.Uh)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(state=>state),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.F)())}getFileData(submissionId,sectionId,fileUUID){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.Uh)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.pb)(state=>!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.b0)(state)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(state=>{let fileState;return Object.keys(state).filter(key=>state[key].uuid===fileUUID).forEach(key=>fileState=state[key]),fileState}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.F)())}getDefaultPolicies(submissionId,sectionId,fileUUID){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.hi)(submissionId,sectionId,fileUUID)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(state=>state),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.F)())}addUploadedFile(submissionId,sectionId,fileUUID,data){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.Bo(submissionId,sectionId,fileUUID,data))}updateFilePrimaryBitstream(submissionId,sectionId,fileUUID){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.w7(submissionId,sectionId,fileUUID))}updateFileData(submissionId,sectionId,fileUUID,data){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.nt(submissionId,sectionId,fileUUID,data))}removeUploadedFile(submissionId,sectionId,fileUUID){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.IE(submissionId,sectionId,fileUUID))}static#_=this.\u0275fac=function(t){return new(t||SectionUploadService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_ngrx_store__WEBPACK_IMPORTED_MODULE_6__.il),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(src_app_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_0__.C))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:SectionUploadService2,factory:SectionUploadService2.\u0275fac,providedIn:"root"})}return SectionUploadService2})()},16e3:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorkspaceItemsDeletePageComponent:()=>WorkspaceItemsDeletePageComponent});var D_dspace_angular_dspace_8_0_node_modules_angular_builders_custom_webpack_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(73014),_angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74785),_core_services_route_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86759),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_core_submission_workspaceitem_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2402),_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(63390),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(64247),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(71781);function WorkspaceItemsDeletePageComponent_ds_modify_item_overview_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-modify-item-overview",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async")),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("item",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,1,ctx_r1.dso$))}}function WorkspaceItemsDeletePageComponent_ng_template_12_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_5__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",7)(1,"h4",8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(4,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function(){const d_r5=_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r4).dismiss;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(d_r5("cancel"))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(5,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(7,"div",11)(8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(11,"div",12)(12,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function(){const c_r6=_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r4).close;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(c_r6("cancel"))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(13),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(15,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function(){const c_r6=_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r4).close;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(c_r6("ok"))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(16),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(3,4,"workspace-item.delete.header")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(10,6,"submission.general.discard.confirm.info")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(14,8,"submission.general.discard.confirm.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(17,10,"submission.general.discard.confirm.submit")))}let WorkspaceItemsDeletePageComponent=(()=>{class WorkspaceItemsDeletePageComponent2{constructor(activatedRoute,router,routeService,workspaceItemService,notificationsService,translationService,location,modalService){this.activatedRoute=activatedRoute,this.router=router,this.routeService=routeService,this.workspaceItemService=workspaceItemService,this.notificationsService=notificationsService,this.translationService=translationService,this.location=location,this.modalService=modalService}ngOnInit(){this.wsi$=this.activatedRoute.data.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)(data=>data.wsi),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.Bo)()),this.dso$=this.activatedRoute.data.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)(data=>data.dso),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.Bo)()),this.previousQueryParameters=this.location.getState().previousQueryParams}previousPage(){this.routeService.getPreviousUrl().pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.take)(1)).subscribe(url=>{let params={};if(url||(url="/mydspace",params=this.previousQueryParameters),url.split("?").length>1)for(const param of url.split("?")[1].split("&"))params[param.split("=")[0]]=decodeURIComponent(param.split("=")[1]);this.router.navigate([url.split("?")[0]],{queryParams:params})})}confirmDelete(content){var _this=this;return(0,D_dspace_angular_dspace_8_0_node_modules_angular_builders_custom_webpack_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.A)(function*(){yield _this.modalService.open(content).result.then(result=>{"ok"===result&&_this.sendDeleteRequest()})})()}sendDeleteRequest(){this.wsi$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.switchMap)(wsi=>this.workspaceItemService.delete(wsi.id).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)()))).subscribe(response=>{if(response.hasSucceeded){const title=this.translationService.get("workspace-item.delete.notification.success.title"),content=this.translationService.get("workspace-item.delete.title");this.notificationsService.success(title,content),this.previousPage()}else{const title=this.translationService.get("workspace-item.delete.notification.error.title"),content=this.translationService.get("workspace-item.delete.notification.error.content");this.notificationsService.error(title,content)}})}static#_=this.\u0275fac=function(t){return new(t||WorkspaceItemsDeletePageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_8__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_8__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_services_route_service__WEBPACK_IMPORTED_MODULE_0__.v$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_submission_workspaceitem_data_service__WEBPACK_IMPORTED_MODULE_2__.WorkspaceitemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_common__WEBPACK_IMPORTED_MODULE_10__.aZ),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__.Bq))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:WorkspaceItemsDeletePageComponent2,selectors:[["ds-base-workspaceitems-delete-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:14,vars:12,consts:[["content",""],[1,"container"],[3,"item",4,"ngIf"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],["id","delete-modal"],[3,"item"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","id","delete_close","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","id","delete_cancel",1,"btn","btn-secondary",3,"click"],["type","button","id","delete_confirm",1,"btn","btn-danger",3,"click"]],template:function(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_5__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",1)(1,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(4,WorkspaceItemsDeletePageComponent_ds_modify_item_overview_4_Template,2,3,"ds-modify-item-overview",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(6,"button",3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function(){return _angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(ctx.previousPage())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(9,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("click",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_5__.eBV(_r1);const content_r3=_angular_core__WEBPACK_IMPORTED_MODULE_5__.sdS(13);return $event.preventDefault(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Njj(ctx.confirmDelete(content_r3))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(11,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(12,WorkspaceItemsDeletePageComponent_ng_template_12_Template,18,12,"ng-template",5,0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.C5r)}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(3,4,"workspace-item.delete.header")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(5,6,ctx.dso$)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(8,8,"workspace-item.delete.button.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(11,10,"workspace-item.delete.button.confirm")))},dependencies:[_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_3__.W,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.D9,_angular_common__WEBPACK_IMPORTED_MODULE_10__.MD,_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj],styles:["[_nghost-%COMP%]     ds-modify-item-overview table{display:inline-table!important}"]})}return WorkspaceItemsDeletePageComponent2})()},90444:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var authenticated_guard=__webpack_require__(98234),i18n_breadcrumb_resolver=__webpack_require__(21870),themed_full_item_page_component=__webpack_require__(89485),themed_submission_edit_component=__webpack_require__(99457),core=__webpack_require__(68014),submission_object_resolver=__webpack_require__(8695),workspaceitem_data_service=__webpack_require__(2402);const itemFromWorkspaceResolver=(route,state,workspaceItemService=(0,core.WQX)(workspaceitem_data_service.WorkspaceitemDataService))=>(0,submission_object_resolver.S)(route,state,workspaceItemService);var submission_parent_breadcrumb_resolver=__webpack_require__(75013),submission_parent_breadcrumb_service=__webpack_require__(89200);let ItemFromWorkspaceBreadcrumbResolver=(()=>{class ItemFromWorkspaceBreadcrumbResolver2 extends submission_parent_breadcrumb_resolver.q{constructor(dataService,breadcrumbService){super(dataService,breadcrumbService),this.dataService=dataService,this.breadcrumbService=breadcrumbService}static#_=this.\u0275fac=function(t){return new(t||ItemFromWorkspaceBreadcrumbResolver2)(core.KVO(workspaceitem_data_service.WorkspaceitemDataService),core.KVO(submission_parent_breadcrumb_service.i))};static#_2=this.\u0275prov=core.jDH({token:ItemFromWorkspaceBreadcrumbResolver2,factory:ItemFromWorkspaceBreadcrumbResolver2.\u0275fac,providedIn:"root"})}return ItemFromWorkspaceBreadcrumbResolver2})();var operators=__webpack_require__(82656),follow_link_config_model=__webpack_require__(32181),themed_component=__webpack_require__(31260);__webpack_require__(16e3);const _c0=["*"];function ThemedWorkspaceItemsDeletePageComponent_ng_template_0_Template(rf,ctx){}let ThemedWorkspaceItemsDeletePageComponent=(()=>{class ThemedWorkspaceItemsDeletePageComponent2 extends themed_component.J{getComponentName(){return"WorkspaceItemsDeletePageComponent"}importThemedComponent(themeName){return __webpack_require__(72447)(`./${themeName}/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,16e3))}static#_=this.\u0275fac=(()=>{let \u0275ThemedWorkspaceItemsDeletePageComponent_BaseFactory;return function(t){return(\u0275ThemedWorkspaceItemsDeletePageComponent_BaseFactory||(\u0275ThemedWorkspaceItemsDeletePageComponent_BaseFactory=core.xGo(ThemedWorkspaceItemsDeletePageComponent2)))(t||ThemedWorkspaceItemsDeletePageComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedWorkspaceItemsDeletePageComponent2,selectors:[["ds-workspace-items-delete"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedWorkspaceItemsDeletePageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedWorkspaceItemsDeletePageComponent2})();const ROUTES=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:":id",resolve:{breadcrumb:ItemFromWorkspaceBreadcrumbResolver,wsi:(route,state,workspaceItemService=(0,core.WQX)(workspaceitem_data_service.WorkspaceitemDataService))=>workspaceItemService.findById(route.params.id,!0,!1,(0,follow_link_config_model.s)("item")).pipe((0,operators.qD)())},children:[{canActivate:[authenticated_guard.t],path:"edit",component:themed_submission_edit_component.r,resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"submission.edit.title",breadcrumbKey:"submission.edit"}},{canActivate:[authenticated_guard.t],path:"view",component:themed_full_item_page_component.i,resolve:{dso:itemFromWorkspaceResolver,breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"workspace-item.view.title",breadcrumbKey:"workspace-item.view"}},{canActivate:[authenticated_guard.t],path:"delete",component:ThemedWorkspaceItemsDeletePageComponent,resolve:{dso:itemFromWorkspaceResolver,breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"workspace-item.delete",breadcrumbKey:"workspace-item.delete"}},{canActivate:[authenticated_guard.t],path:"delete",component:ThemedWorkspaceItemsDeletePageComponent,resolve:{dso:itemFromWorkspaceResolver,breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"workspace-item.delete",breadcrumbKey:"workspace-item.delete"}}]}]},81594:(module,__unused_webpack_exports,__webpack_require__)=>{var baseUniq=__webpack_require__(79226);module.exports=function uniq(array){return array&&array.length?baseUniq(array):[]}},42176:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/alerts/item-alerts.component":[46320,6320]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=42176,module.exports=webpackAsyncContext},63614:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[64932,4932]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=63614,module.exports=webpackAsyncContext},4872:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/full-item-page.component":[28168,8168]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=4872,module.exports=webpackAsyncContext},9048:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/edit/submission-edit.component":[98872,8872]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=9048,module.exports=webpackAsyncContext},28767:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/form/submission-upload-files/submission-upload-files.component.ts":[33046,3046]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=28767,module.exports=webpackAsyncContext},96682:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/sections/upload/file/section-upload-file.component":[23660,3660]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=96682,module.exports=webpackAsyncContext},72447:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component":[51249,1249]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=72447,module.exports=webpackAsyncContext}};