exports.id=1831,exports.ids=[1831],exports.modules={51831:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var authenticated_guard=__webpack_require__(98234),themed_component=__webpack_require__(31260),core=(__webpack_require__(46042),__webpack_require__(68014));const _c0=["*"];function ThemedSubmissionImportExternalComponent_ng_template_0_Template(rf,ctx){}const ROUTES=[{canActivate:[authenticated_guard.t],path:"",component:(()=>{class ThemedSubmissionImportExternalComponent2 extends themed_component.J{getComponentName(){return"SubmissionImportExternalComponent"}importThemedComponent(themeName){return __webpack_require__(83068)(`./${themeName}/app/submission/import-external/submission-import-external.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,46042))}static#_=this.\u0275fac=(()=>{let \u0275ThemedSubmissionImportExternalComponent_BaseFactory;return function(t){return(\u0275ThemedSubmissionImportExternalComponent_BaseFactory||(\u0275ThemedSubmissionImportExternalComponent_BaseFactory=core.xGo(ThemedSubmissionImportExternalComponent2)))(t||ThemedSubmissionImportExternalComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedSubmissionImportExternalComponent2,selectors:[["ds-submission-import-external"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedSubmissionImportExternalComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedSubmissionImportExternalComponent2})(),pathMatch:"full",data:{title:"submission.import-external.page.title"}}]},79301:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>SubmissionImportExternalSearchbarComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(28955),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(71781),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(43750),ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(52002),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10743),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(57699),_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(53973),_core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(97570),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12383),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82656),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59136),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77028),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29885),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(81307);const _c0=a0=>({"input-group-append":a0});function SubmissionImportExternalSearchbarComponent_div_0_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(0,"div",10)(1,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.bIt("keyup.enter",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.Njj(""===ctx_r1.searchString?null:ctx_r1.search())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.mxI("ngModelChange",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_6__.eBV(_r1);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.DH7(ctx_r1.searchString,$event)||(ctx_r1.searchString=$event),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Njj($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.FS9("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(2,3,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R50("ngModel",ctx_r1.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_6__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(3,5,"submission.import-external.search.placeholder"))}}function SubmissionImportExternalSearchbarComponent_input_3_Template(rf,ctx){if(1&rf){const _r3=_angular_core__WEBPACK_IMPORTED_MODULE_6__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(0,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.bIt("keyup.enter",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.eBV(_r3);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.Njj(""===ctx_r1.searchString?null:ctx_r1.search())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.mxI("ngModelChange",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_6__.eBV(_r3);const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.DH7(ctx_r1.searchString,$event)||(ctx_r1.searchString=$event),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Njj($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_6__.FS9("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(1,3,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R50("ngModel",ctx_r1.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_6__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(2,5,"submission.import-external.search.placeholder"))}}function SubmissionImportExternalSearchbarComponent_button_14_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_6__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(0,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_6__.bIt("click",function(){const source_r5=_angular_core__WEBPACK_IMPORTED_MODULE_6__.eBV(_r4).$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_6__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.Njj(ctx_r1.makeSourceSelection(source_r5))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()}if(2&rf){const source_r5=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(2,1,"submission.import-external.source."+(null==source_r5?null:source_r5.name)))}}function SubmissionImportExternalSearchbarComponent_div_15_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(0,"div",13)(1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(3,1,"submission.import-external.source.loading")))}let SubmissionImportExternalSearchbarComponent=(()=>{class SubmissionImportExternalSearchbarComponent2{constructor(externalService,cdr,windowService){this.externalService=externalService,this.cdr=cdr,this.windowService=windowService,this.sourceListLoading=!1,this.externalSourceData=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.bkB}ngOnInit(){this.selectedElement={id:"",name:"loading"},this.searchString="",this.sourceList=[],this.findListOptions=Object.assign({},new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_7__._,{elementsPerPage:5,currentPage:1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__.x("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.WL)(()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_3__.Q,paginatedList=(0,_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__.g)(pageInfo,[]),paginatedListRD=(0,_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_5__.SP)(paginatedList);return(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.of)(paginatedListRD)}),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ak)()).subscribe(externalSource=>{externalSource.page.forEach(element=>{this.sourceList.push({id:element.id,name:element.name}),this.initExternalSourceData.sourceId===element.id&&(this.selectedElement={id:element.id,name:element.name},this.searchString=this.initExternalSourceData.query)}),""===this.selectedElement.id&&(this.selectedElement=this.sourceList[0]),this.pageInfo=externalSource.pageInfo,this.cdr.detectChanges()}),this.isXsOrSm$=this.windowService.isXsOrSm()}makeSourceSelection(source){this.selectedElement=source}onScroll(){!this.sourceListLoading&&this.pageInfo.currentPage+1<=this.pageInfo.totalPages&&(this.sourceListLoading=!0,this.findListOptions=Object.assign({},new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_7__._,{elementsPerPage:5,currentPage:this.findListOptions.currentPage+1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__.x("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.WL)(()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_3__.Q,paginatedList=(0,_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__.g)(pageInfo,[]),paginatedListRD=(0,_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_5__.SP)(paginatedList);return(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.of)(paginatedListRD)}),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.yd)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Mi)(()=>this.sourceListLoading=!1)).subscribe(externalSource=>{externalSource.payload.page.forEach(element=>{this.sourceList.push({id:element.id,name:element.name})}),this.pageInfo=externalSource.payload.pageInfo,this.cdr.detectChanges()}))}search(){this.externalSourceData.emit({entity:this.initExternalSourceData.entity,sourceId:this.selectedElement.id,query:this.searchString})}ngOnDestroy(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(this.sub)&&this.sub.unsubscribe()}static#_=this.\u0275fac=function(t){return new(t||SubmissionImportExternalSearchbarComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.rXU(_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__.Q),_angular_core__WEBPACK_IMPORTED_MODULE_6__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_6__.gRc),_angular_core__WEBPACK_IMPORTED_MODULE_6__.rXU(_shared_host_window_service__WEBPACK_IMPORTED_MODULE_4__.CV))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_6__.VBU({type:SubmissionImportExternalSearchbarComponent2,selectors:[["ds-submission-import-external-searchbar"]],inputs:{initExternalSourceData:"initExternalSourceData"},outputs:{externalSourceData:"externalSourceData"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_6__.aNF],decls:20,vars:32,consts:[["class","input-group mb-2",4,"ngIf"],[1,"input-group","mb-5"],["type","text","class","form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange",4,"ngIf"],["ngbDropdown","","role","group",3,"ngClass"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary","w-fx",3,"title"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["infiniteScroll","",1,"scrollable-menu",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow"],["ngbDropdownItem","","class","dropdown-item text-truncate",3,"click",4,"ngFor","ngForOf"],["ngbDropdownItem","","class","scrollable-dropdown-loading text-center",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","title","disabled"],[1,"input-group","mb-2"],["type","text",1,"form-control",3,"keyup.enter","ngModelChange","ngModel","placeholder"],["ngbDropdownItem","",1,"dropdown-item","text-truncate",3,"click"],["ngbDropdownItem","",1,"scrollable-dropdown-loading","text-center"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.DNE(0,SubmissionImportExternalSearchbarComponent_div_0_Template,4,7,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.DNE(3,SubmissionImportExternalSearchbarComponent_input_3_Template,3,7,"input",2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(5,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(7,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(11,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(12,"ul",5)(13,"li",6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.bIt("scrolled",function(){return ctx.onScroll()}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.DNE(14,SubmissionImportExternalSearchbarComponent_button_14_Template,3,3,"button",7)(15,SubmissionImportExternalSearchbarComponent_div_15_Template,4,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.j41(16,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.bIt("click",function(){return ctx.search()}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_6__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.k0s()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(1,14,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("ngIf",!0!==_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(4,16,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.eq3(30,_c0,!0!==_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(6,18,ctx.isXsOrSm$))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.FS9("title",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(8,20,"submission.import-external.search.source.hint")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(9,22,"submission.import-external.search.source.hint")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(11,24,"submission.import-external.source."+(null==ctx.selectedElement?null:ctx.selectedElement.name))," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("ngForOf",ctx.sourceList),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("ngIf",ctx.sourceListLoading),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y8G("title",""===ctx.searchString?_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(17,26,"submission.import-external.search.button.hint"):"")("disabled",""===ctx.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_6__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_6__.bMT(19,28,"submission.import-external.search.button")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.MD,_angular_common__WEBPACK_IMPORTED_MODULE_12__.YU,_angular_common__WEBPACK_IMPORTED_MODULE_12__.Sq,_angular_common__WEBPACK_IMPORTED_MODULE_12__.bT,_angular_common__WEBPACK_IMPORTED_MODULE_12__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.D9,ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_14__.eO,ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_14__.DP,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.zH,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.tg,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.do,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.U0,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__._H,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.vS],styles:[".input-group-append[_ngcontent-%COMP%]:last-child > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle){margin-left:-1px;border-radius:0 .25rem .25rem 0}.input-group-append[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border-radius:0}.w-fx[_ngcontent-%COMP%]{min-width:200px}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:calc(var(--ds-dropdown-menu-max-height) / 2);overflow-x:hidden}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}"]})}return SubmissionImportExternalSearchbarComponent2})()},46042:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionImportExternalComponent:()=>SubmissionImportExternalComponent});var common=__webpack_require__(84739),router=__webpack_require__(64247),ngx_translate_core=__webpack_require__(43750),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),alert_type=__webpack_require__(82555),external_source_data_service=__webpack_require__(53973),paginated_list_model=__webpack_require__(12383),route_service=__webpack_require__(86759),context_model=__webpack_require__(34069),item_type_resource_type=__webpack_require__(27780),shared_operators=__webpack_require__(82656),page_info_model=__webpack_require__(59136),search_configuration_service=__webpack_require__(90435),alert_component=__webpack_require__(14467),fade=__webpack_require__(28107),empty_util=__webpack_require__(77028),themed_loading_component=__webpack_require__(32943),object_collection_component=__webpack_require__(60047),pagination_component_options_model=__webpack_require__(64694),remote_data_utils=__webpack_require__(81307),var_directive=__webpack_require__(45961),metadata_utils=(__webpack_require__(30119),__webpack_require__(10339)),notifications_service=__webpack_require__(10117),submission_service=__webpack_require__(77523),submission_import_external_collection_component=__webpack_require__(57107),core=__webpack_require__(68014),ng_bootstrap=__webpack_require__(71781);function SubmissionImportExternalPreviewComponent_div_17_ng_container_6_Template(rf,ctx){if(1&rf&&(core.qex(0),core.j41(1,"span"),core.EFF(2),core.k0s(),core.nrm(3,"br"),core.bVm()),2&rf){const metadatum_r1=ctx.$implicit;core.R7$(2),core.JRh(metadatum_r1.value)}}function SubmissionImportExternalPreviewComponent_div_17_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",5)(1,"p",6)(2,"strong",11),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.nrm(5,"br"),core.DNE(6,SubmissionImportExternalPreviewComponent_div_17_ng_container_6_Template,4,1,"ng-container",12),core.k0s()()),2&rf){const metadata_r2=ctx.$implicit;core.R7$(3),core.JRh(core.bMT(4,2,"item.preview."+metadata_r2.key)),core.R7$(3),core.Y8G("ngForOf",metadata_r2.values)}}let SubmissionImportExternalPreviewComponent=(()=>{class SubmissionImportExternalPreviewComponent2{constructor(activeModal,submissionService,modalService,router2,notificationService){this.activeModal=activeModal,this.submissionService=submissionService,this.modalService=modalService,this.router=router2,this.notificationService=notificationService}ngOnInit(){this.metadataList=[],Object.keys(this.externalSourceEntry.metadata).forEach(key=>{this.metadataList.push({key,values:metadata_utils.O.all(this.externalSourceEntry.metadata,key)})})}closeMetadataModal(){this.activeModal.dismiss(!1)}import(){this.modalRef=this.modalService.open(submission_import_external_collection_component.m,{size:"lg"}),this.modalRef.componentInstance.entityType=this.labelPrefix,this.closeMetadataModal(),this.modalRef.componentInstance.selectedEvent.pipe((0,operators.ZZ)(collectionListEntry=>this.submissionService.createSubmissionFromExternalSource(this.externalSourceEntry._links.self.href,collectionListEntry.collection.id))).subscribe(submissionObjects=>{let isValid=!1;1===submissionObjects.length&&null!==submissionObjects[0]&&(isValid=!0,this.router.navigateByUrl("/workspaceitems/"+submissionObjects[0].id+"/edit")),isValid||this.notificationService.error("submission.import-external.preview.error.import.title","submission.import-external.preview.error.import.body"),this.modalRef.close()})}static#_=this.\u0275fac=function(t){return new(t||SubmissionImportExternalPreviewComponent2)(core.rXU(ng_bootstrap.Lw),core.rXU(submission_service.E),core.rXU(ng_bootstrap.Bq),core.rXU(router.Ix),core.rXU(notifications_service.I))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionImportExternalPreviewComponent2,selectors:[["ds-submission-import-external-preview"]],inputs:{externalSourceEntry:"externalSourceEntry"},standalone:!0,features:[core.aNF],decls:27,vars:10,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-md-12"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-right"],["role","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-file-import"],[1,""],[4,"ngFor","ngForOf"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h2"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",1),core.bIt("click",function(){return ctx.closeMetadataModal()}),core.j41(5,"span",2),core.EFF(6,"\xd7"),core.k0s()()(),core.j41(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"p"),core.EFF(12),core.nI1(13,"translate"),core.k0s()()(),core.j41(14,"div",5)(15,"div",6),core.nrm(16,"hr"),core.k0s()(),core.DNE(17,SubmissionImportExternalPreviewComponent_div_17_Template,7,4,"div",7),core.j41(18,"div",5)(19,"div",6),core.nrm(20,"hr"),core.k0s()(),core.j41(21,"div",5)(22,"div",8)(23,"button",9),core.bIt("click",function(){return ctx.import()}),core.nrm(24,"i",10),core.EFF(25),core.nI1(26,"translate"),core.k0s()()()()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,4,"submission.import-external.preview.title."+ctx.labelPrefix)),core.R7$(10),core.JRh(core.bMT(13,6,"submission.import-external.preview.subtitle")),core.R7$(5),core.Y8G("ngForOf",ctx.metadataList),core.R7$(8),core.SpI(" ",core.bMT(26,8,"submission.import-external.preview.button.import")," "))},dependencies:[common.pM,ngx_translate_core.h,ngx_translate_core.D9],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]})}return SubmissionImportExternalPreviewComponent2})();var submission_import_external_searchbar_component=__webpack_require__(79301);const _c0=()=>["/mydspace"],_c1=(a0,a1)=>({repeatable:a0,listId:a1});function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h2_1_Template(rf,ctx){1&rf&&(core.j41(0,"h2"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"submission.sections.describe.relationship-lookup.selection-tab.title")))}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-viewable-collection",15),core.bIt("importObject",function($event){core.eBV(_r1);const ctx_r1=core.XpG(4);return core.Njj(ctx_r1.import($event))}),core.k0s()}if(2&rf){const entriesRD_r3=core.XpG().ngVar,ctx_r1=core.XpG(3);core.Y8G("@fadeIn",void 0)("objects",entriesRD_r3)("selectionConfig",core.l_i(8,_c1,ctx_r1.repeatable,ctx_r1.listId))("config",ctx_r1.initialPagination)("hideGear",!0)("context",ctx_r1.context)("importable",!0)("importConfig",ctx_r1.importConfig)}}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_loading_4_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",16),core.nI1(1,"translate")),2&rf&&core.FS9("message",core.bMT(1,1,"loading.search-results"))}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",17)(1,"ds-alert",18),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r1=core.XpG(4);core.R7$(),core.Y8G("type",ctx_r1.AlertType.Info),core.R7$(),core.JRh(core.bMT(3,2,"search.results.empty"))}}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",19)(1,"ds-alert",18),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r1=core.XpG(4);core.R7$(),core.Y8G("type",ctx_r1.AlertType.Info),core.R7$(),core.JRh(core.bMT(3,2,"search.results.response.500"))}}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h2_1_Template,3,3,"h2",10)(2,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template,1,11,"ds-viewable-collection",11),core.nI1(3,"async"),core.DNE(4,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_loading_4_Template,2,3,"ds-loading",12),core.nI1(5,"async"),core.DNE(6,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template,4,4,"div",13),core.nI1(7,"async"),core.DNE(8,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template,4,4,"div",14),core.nI1(9,"async"),core.bVm()),2&rf){const entriesRD_r3=ctx.ngVar,ctx_r1=core.XpG(3);core.R7$(),core.Y8G("ngIf",entriesRD_r3&&0!==(null==entriesRD_r3||null==entriesRD_r3.payload||null==entriesRD_r3.payload.page?null:entriesRD_r3.payload.page.length)),core.R7$(),core.Y8G("ngIf",(null==entriesRD_r3?null:entriesRD_r3.hasSucceeded)&&!0!==core.bMT(3,5,ctx_r1.isLoading$)&&(null==entriesRD_r3||null==entriesRD_r3.payload||null==entriesRD_r3.payload.page?null:entriesRD_r3.payload.page.length)>0),core.R7$(2),core.Y8G("ngIf",core.bMT(5,7,ctx_r1.isLoading$)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(7,9,ctx_r1.isLoading$)&&0===(null==entriesRD_r3||null==entriesRD_r3.payload||null==entriesRD_r3.payload.page?null:entriesRD_r3.payload.page.length)),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(9,11,ctx_r1.isLoading$)&&500===entriesRD_r3.statusCode)}}function SubmissionImportExternalComponent_div_7_div_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2),core.DNE(1,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template,10,13,"ng-container",9),core.nI1(2,"async"),core.k0s()),2&rf){const ctx_r1=core.XpG(2);core.R7$(),core.Y8G("ngVar",core.bMT(2,1,ctx_r1.entriesRD$))}}function SubmissionImportExternalComponent_div_7_div_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"ds-alert",18)(2,"p",20),core.EFF(3),core.nI1(4,"translate"),core.k0s()()()),2&rf){const ctx_r1=core.XpG(2);core.R7$(),core.Y8G("type",ctx_r1.AlertType.Info),core.R7$(2),core.JRh(core.bMT(4,2,"submission.import-external.page.hint"))}}function SubmissionImportExternalComponent_div_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1),core.DNE(1,SubmissionImportExternalComponent_div_7_div_1_Template,3,3,"div",8)(2,SubmissionImportExternalComponent_div_7_div_2_Template,5,4,"div",8),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("ngIf",""!==ctx_r1.reload$.value.sourceId),core.R7$(),core.Y8G("ngIf",""===ctx_r1.reload$.value.sourceId)}}let SubmissionImportExternalComponent=(()=>{class SubmissionImportExternalComponent2{constructor(searchConfigService,externalService,routeService,router2,modalService){this.searchConfigService=searchConfigService,this.externalService=externalService,this.routeService=routeService,this.router=router2,this.modalService=modalService,this.entriesRD$=new cjs.BehaviorSubject(null),this.isLoading$=new cjs.BehaviorSubject(!1),this.reload$=new cjs.BehaviorSubject({entity:"",query:"",sourceId:""}),this.initialPagination=Object.assign(new pagination_component_options_model.W,{id:"spc",pageSize:10}),this.subs=[],this.AlertType=alert_type.v}ngOnInit(){this.listId="list-submission-external-sources",this.context=context_model.o.EntitySearchModalWithNameVariants,this.repeatable=!1,this.routeData={entity:"",sourceId:"",query:""},this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label},this.entriesRD$=new cjs.BehaviorSubject((0,remote_data_utils.SP)((0,paginated_list_model.g)(new page_info_model.Q,[]))),this.isLoading$=new cjs.BehaviorSubject(!1),this.subs.push((0,cjs.combineLatest)([this.routeService.getQueryParameterValue("entity"),this.routeService.getQueryParameterValue("sourceId"),this.routeService.getQueryParameterValue("query")]).pipe((0,operators.s)(1)).subscribe(([entity,sourceId,query])=>{this.reload$.next({entity:entity||item_type_resource_type.k,query,sourceId}),this.selectLabel(entity),this.retrieveExternalSources()}))}getExternalSourceData(event){this.router.navigate([],{queryParams:event,replaceUrl:!0}).then(()=>{this.reload$.next(event),this.retrieveExternalSources()})}import(entry){this.modalRef=this.modalService.open(SubmissionImportExternalPreviewComponent,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.externalSourceEntry=entry,modalComp.labelPrefix=this.label}ngOnDestroy(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe()),(0,empty_util.a4)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe()}retrieveExternalSources(){(0,empty_util.a4)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe(),this.retrieveExternalSourcesSub=this.reload$.pipe((0,operators.pb)(sourceQueryObject=>(0,empty_util.hj)(sourceQueryObject.sourceId)&&(0,empty_util.hj)(sourceQueryObject.query)),(0,operators.nx)(sourceQueryObject=>{const query=sourceQueryObject.query;return this.routeData=sourceQueryObject,this.searchConfigService.paginatedSearchOptions.pipe((0,operators.Mi)(()=>this.isLoading$.next(!0)),(0,operators.pb)(searchOptions=>searchOptions.query===query),(0,operators.ZZ)(searchOptions=>this.externalService.getExternalSourceEntries(this.routeData.sourceId,searchOptions).pipe((0,shared_operators.D4)())))})).subscribe(rdData=>{this.entriesRD$.next(rdData),this.isLoading$.next(!1)})}selectLabel(entity){this.label=entity,this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}static#_=this.\u0275fac=function(t){return new(t||SubmissionImportExternalComponent2)(core.rXU(search_configuration_service.g),core.rXU(external_source_data_service.Q),core.rXU(route_service.v$),core.rXU(router.Ix),core.rXU(ng_bootstrap.Bq))};static#_2=this.\u0275cmp=core.VBU({type:SubmissionImportExternalComponent2,selectors:[["ds-base-submission-import-external"]],standalone:!0,features:[core.aNF],decls:15,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["id","header",1,"pb-2"],[3,"externalSourceData","initExternalSourceData"],["class","row",4,"ngIf"],["role","button",1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","col-md-12",4,"ngIf"],[4,"ngVar"],[4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["data-test","empty-external-entry-list",4,"ngIf"],["data-test","empty-external-error-500",4,"ngIf"],[3,"importObject","objects","selectionConfig","config","hideGear","context","importable","importConfig"],[3,"message"],["data-test","empty-external-entry-list"],[3,"type"],["data-test","empty-external-error-500"],[1,"lead","mb-0"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"ds-submission-import-external-searchbar",4),core.bIt("externalSourceData",function($event){return ctx.getExternalSourceData($event)}),core.k0s()()(),core.DNE(7,SubmissionImportExternalComponent_div_7_Template,3,2,"div",5),core.j41(8,"div",1)(9,"div",2),core.nrm(10,"hr"),core.j41(11,"a",6),core.nrm(12,"i",7),core.EFF(13),core.nI1(14,"translate"),core.k0s()()()()),2&rf&&(core.R7$(4),core.JRh(core.bMT(5,5,"submission.import-external.title"+(ctx.label?"."+ctx.label:""))),core.R7$(2),core.Y8G("initExternalSourceData",ctx.reload$.value),core.R7$(),core.Y8G("ngIf",ctx.reload$.value.entity),core.R7$(4),core.Y8G("routerLink",core.lJ4(9,_c0)),core.R7$(2),core.SpI(" ",core.bMT(14,7,"submission.import-external.back-to-my-dspace")," "))},dependencies:[object_collection_component.h,themed_loading_component.v,alert_component.C,common.bT,common.Jj,submission_import_external_searchbar_component.h,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r,router.Wk],data:{animation:[fade.qG]}})}return SubmissionImportExternalComponent2})()},83068:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/import-external/submission-import-external.component":[65950,5950]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=83068,module.exports=webpackAsyncContext}};