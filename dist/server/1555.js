"use strict";exports.id=1555,exports.ids=[1555,148],exports.modules={80148:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionDataService:()=>VersionDataService});var rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68134),_base_patch_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(75467),_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(84237),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014);let VersionDataService=(()=>{class VersionDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,comparator){super("versions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.comparator=comparator,this.patchData=new _base_patch_data__WEBPACK_IMPORTED_MODULE_5__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint)}getHistoryFromVersion(version,useCachedVersionIfAvailable=!1,reRequestOnStale=!0){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.hj)(version)?this.findById(version.id,useCachedVersionIfAvailable,reRequestOnStale,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()):rxjs__WEBPACK_IMPORTED_MODULE_11__.EMPTY}getHistoryIdFromVersion(version){return this.getHistoryFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(versionHistory=>versionHistory.id))}patch(object,operations){return this.patchData.patch(object,operations)}update(object){return this.patchData.update(object)}commitUpdates(method){this.patchData.commitUpdates(method)}createPatchFromCache(object){return this.patchData.createPatchFromCache(object)}static#_=this.\u0275fac=function(t){return new(t||VersionDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_6__.Y))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:VersionDataService2,factory:VersionDataService2.\u0275fac,providedIn:"root"})}return VersionDataService2})()},1555:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VersionHistoryDataService:()=>VersionHistoryDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(38068),rxjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10743),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77028),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(64694),_shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80780),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(32181),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86786),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40017),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91365),_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(82656),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68134),_request_models__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(87457),_request_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72744),_version_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(80148),_angular_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(68014);let VersionHistoryDataService=(()=>{class VersionHistoryDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,versionDataService){super("versionhistories",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.versionDataService=versionDataService,this.versionsEndpoint="versions"}getBrowseEndpoint(options={},linkPath){return this.halService.getEndpoint(this.linkPath)}getVersionsEndpoint(versionHistoryId){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(href=>this.halService.getEndpoint(this.versionsEndpoint,`${href}/${versionHistoryId}`)))}getVersions(versionHistoryId,searchOptions,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const hrefObs=this.getVersionsEndpoint(versionHistoryId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(href=>searchOptions?searchOptions.toRestUrl(href):href));return this.versionDataService.findListByHref(hrefObs,void 0,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}createVersion(itemHref,summary){const requestId=this.requestService.generateRequestId(),requestOptions=Object.create({});let requestHeaders=new _angular_common_http__WEBPACK_IMPORTED_MODULE_10__.Lr;return requestHeaders=requestHeaders.append("Content-Type","text/uri-list"),requestOptions.headers=requestHeaders,this.halService.getEndpoint(this.versionsEndpoint).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(endpointUrl=>summary?.length>0?`${endpointUrl}?summary=${summary}`:`${endpointUrl}`),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(href))).subscribe(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_6__.Qf(requestId,href,itemHref,requestOptions);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(this.responseMsToLive)&&(request.responseMsToLive=this.responseMsToLive),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,versionRD=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([this.requestService.setStaleByHrefSubstring(versionRD.payload._links.self.href),this.requestService.setStaleByHrefSubstring(versionRD.payload._links.versionhistory.href)])).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)())}getLatestVersionFromHistory$(versionHistory){const latestVersionOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_13__.W,{id:"item-newest-version-options",currentPage:1,pageSize:1}),latestVersionSearch=new _shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_0__.C({pagination:latestVersionOptions});return this.getVersions(versionHistory.id,latestVersionSearch,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("item")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.v7)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.pb)(versions=>versions.page.length>0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versions=>versions.page[0]))}getLatestVersion$(version){return version.id?this.versionDataService.findById(version.id,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>res.versionhistory),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionHistoryRD=>this.getLatestVersionFromHistory$(versionHistoryRD))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}isLatest$(version){return version?this.getLatestVersion$(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(latestVersion=>(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(version.version===latestVersion.version))):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(null)}hasDraftVersion$(versionHref){return this.versionDataService.findByHref(versionHref,!1,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("versionhistory")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(versionRD=>versionRD.hasSucceeded&&!versionRD.hasNoContent?versionRD.payload.versionhistory.pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(versionHistoryRD=>!(!versionHistoryRD.hasSucceeded||versionHistoryRD.hasNoContent)&&versionHistoryRD.payload.draftVersion)):(0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)(!1)))}getLatestVersionItemFromHistory$(versionHistory){return this.getLatestVersionFromHistory$(versionHistory).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(newLatestVersion=>newLatestVersion.item),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}getVersionHistoryFromVersion$(version){return this.versionDataService.getHistoryIdFromVersion(version).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.nx)(res=>this.findById(res)),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_4__.ak)())}invalidateVersionHistoryCache(versionHistoryID){this.requestService.setStaleByHrefSubstring("versioning/versionhistories/"+versionHistoryID)}static#_=this.\u0275fac=function(t){return new(t||VersionHistoryDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_7__.B),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_15__.KVO(_version_data_service__WEBPACK_IMPORTED_MODULE_8__.VersionDataService))};static#_2=this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_15__.jDH({token:VersionHistoryDataService2,factory:VersionHistoryDataService2.\u0275fac,providedIn:"root"})}return VersionHistoryDataService2})()}};