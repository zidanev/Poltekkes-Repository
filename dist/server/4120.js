exports.id=4120,exports.ids=[4120],exports.modules={479:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProfilePageMetadataFormComponent:()=>ProfilePageMetadataFormComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84739),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(71508),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(42768),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__),_environments_environment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72035),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(62120),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(1324),__webpack_require__(82656)),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(77028),_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(80152),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(49148),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10117),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(68014),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43750);function ProfilePageMetadataFormComponent_ds_form_0_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(0,"ds-form",1),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("formId","profile-page-metadata-form-id")("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}let ProfilePageMetadataFormComponent=(()=>{class ProfilePageMetadataFormComponent2{constructor(formBuilderService,translate,epersonService,notificationsService){this.formBuilderService=formBuilderService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"email",name:"email",readOnly:!0,disabled:!0}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"firstname",name:"eperson.firstname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"},autoComplete:"given-name"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"lastname",name:"eperson.lastname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"},autoComplete:"family-name"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"phone",name:"eperson.phone",autoComplete:"tel"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.z4z({id:"language",name:"eperson.language"})],this.LABEL_PREFIX="profile.metadata.form.label.",this.ERROR_PREFIX="profile.metadata.form.error.",this.NOTIFICATION_PREFIX="profile.metadata.form.notifications."}ngOnInit(){this.activeLangs=_environments_environment__WEBPACK_IMPORTED_MODULE_1__.c.languages.filter(MyLangConfig=>!0===MyLangConfig.active),this.setFormValues(),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()})}setFormValues(){this.formModel.forEach(fieldModel=>{fieldModel.value="email"===fieldModel.name?this.user.email:this.user.firstMetadataValue(fieldModel.name),"language"===fieldModel.id&&(fieldModel.options=this.activeLangs.map(langConfig=>Object.assign({value:langConfig.code,label:langConfig.label})))}),this.formGroup=this.formBuilderService.createFormGroup(this.formModel)}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.LABEL_PREFIX+fieldModel.id),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.hj)(fieldModel.validators)&&(fieldModel.errorMessages={},Object.keys(fieldModel.validators).forEach(key=>{fieldModel.errorMessages[key]=this.translate.instant(this.ERROR_PREFIX+fieldModel.id+"."+key)}))})}updateProfile(){if(!this.formGroup.valid)return!1;const newMetadata=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(this.user.metadata);let changed=!1;return this.formModel.filter(fieldModel=>"email"!==fieldModel.id).forEach(fieldModel=>{newMetadata.hasOwnProperty(fieldModel.name)&&newMetadata[fieldModel.name].length>0?(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(fieldModel.value)?newMetadata[fieldModel.name][0].value!==fieldModel.value&&(newMetadata[fieldModel.name][0].value=fieldModel.value,changed=!0):(newMetadata[fieldModel.name]=[],changed=!0):(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(fieldModel.value)&&(newMetadata[fieldModel.name]=[{value:fieldModel.value,language:null}],changed=!0)}),changed&&this.epersonService.update(Object.assign(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(this.user),{metadata:newMetadata})).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.yd)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Bo)()).subscribe(user=>{this.user=user,this.setFormValues(),this.notificationsService.success(this.translate.instant(this.NOTIFICATION_PREFIX+"success.title"),this.translate.instant(this.NOTIFICATION_PREFIX+"success.content"))}),changed}static#_=this.\u0275fac=function(t){return new(t||ProfilePageMetadataFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_5__.j),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_2__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.I))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ProfilePageMetadataFormComponent2,selectors:[["ds-base-profile-page-metadata-form"]],inputs:{user:"user"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:1,vars:1,consts:[[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(0,ProfilePageMetadataFormComponent_ds_form_0_Template,1,5,"ds-form",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngIf",ctx.formModel)},dependencies:[_shared_form_form_component__WEBPACK_IMPORTED_MODULE_6__.s,_angular_common__WEBPACK_IMPORTED_MODULE_12__.bT],encapsulation:2})}return ProfilePageMetadataFormComponent2})()},43475:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>ThemedProfilePageMetadataFormComponent}),__webpack_require__(1324);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31260),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(479),__webpack_require__(68014));const _c0=["*"];function ThemedProfilePageMetadataFormComponent_ng_template_0_Template(rf,ctx){}let ThemedProfilePageMetadataFormComponent=(()=>{class ThemedProfilePageMetadataFormComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["user"]}getComponentName(){return"ProfilePageMetadataFormComponent"}importThemedComponent(themeName){return __webpack_require__(46020)(`./${themeName}/app/profile-page/profile-page-metadata-form/profile-page-metadata-form.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,479))}static#_=this.\u0275fac=(()=>{let \u0275ThemedProfilePageMetadataFormComponent_BaseFactory;return function(t){return(\u0275ThemedProfilePageMetadataFormComponent_BaseFactory||(\u0275ThemedProfilePageMetadataFormComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedProfilePageMetadataFormComponent2)))(t||ThemedProfilePageMetadataFormComponent2)}})();static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedProfilePageMetadataFormComponent2,selectors:[["ds-profile-page-metadata-form"]],inputs:{user:"user"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedProfilePageMetadataFormComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}return ThemedProfilePageMetadataFormComponent2})()},89445:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>ProfilePageResearcherFormComponent});var common=__webpack_require__(84739),ngx_translate_core=__webpack_require__(43750),ngx_ui_switch=__webpack_require__(25702),cjs=__webpack_require__(74785),operators=__webpack_require__(10743),auth_service=__webpack_require__(41543),researcher_profile_data_service=(__webpack_require__(1324),__webpack_require__(64961)),shared_operators=__webpack_require__(82656),confirmation_modal_component=__webpack_require__(32007),empty_util=__webpack_require__(77028),notifications_service=__webpack_require__(10117),follow_link_config_model=__webpack_require__(32181),var_directive=__webpack_require__(45961),search_service=__webpack_require__(3435),remote_data_utils=__webpack_require__(81307),paginated_search_options_model=__webpack_require__(80780),core=__webpack_require__(68014);let ProfileClaimService=(()=>{class ProfileClaimService2{constructor(searchService){this.searchService=searchService}hasProfilesToSuggest(eperson){return this.searchForSuggestions(eperson).pipe((0,shared_operators.qD)(),(0,operators.Tj)(rd=>(0,empty_util.hj)(rd)&&rd.hasSucceeded&&rd.payload?.page?.length>0))}searchForSuggestions(eperson){const query=this.personQueryData(eperson);return(0,empty_util.Im)(query)?(0,cjs.of)((0,remote_data_utils.Wh)()):this.lookup(query)}lookup(query){return(0,empty_util.Im)(query)?(0,cjs.of)((0,remote_data_utils.Wh)()):this.searchService.search(new paginated_search_options_model.C({configuration:"eperson_claims",query}),null,!1,!0)}personQueryData(eperson){return eperson&&eperson.email?"person.email:"+eperson.email:null}static#_=this.\u0275fac=function(t){return new(t||ProfileClaimService2)(core.KVO(search_service.S))};static#_2=this.\u0275prov=core.jDH({token:ProfileClaimService2,factory:ProfileClaimService2.\u0275fac,providedIn:"root"})}return ProfileClaimService2})();var dso_name_service=__webpack_require__(91735),view_mode_model=(__webpack_require__(48168),__webpack_require__(97849)),item_page_routing_paths=__webpack_require__(63254),dso_selector_modal_wrapper_component=__webpack_require__(82180),collection_element_link_type=__webpack_require__(61064),listable_object_component_loader_component=__webpack_require__(95776),ng_bootstrap=__webpack_require__(71781),router=__webpack_require__(64247);function ProfileClaimItemModalComponent_div_14_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",9)(1,"button",16,0),core.bIt("click",function(){const listEntry_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG();return core.Njj(ctx_r2.selectItem(listEntry_r2.indexableObject))}),core.nrm(3,"ds-listable-object-component-loader",17),core.k0s()()}if(2&rf){const listEntry_r2=ctx.$implicit,ctx_r2=core.XpG();core.R7$(),core.FS9("title",ctx_r2.dsoNameService.getName(listEntry_r2.indexableObject)),core.R7$(2),core.Y8G("object",listEntry_r2)("viewMode",ctx_r2.viewMode)("linkType",ctx_r2.linkTypes.None)}}let ProfileClaimItemModalComponent=(()=>{class ProfileClaimItemModalComponent2 extends dso_selector_modal_wrapper_component.${constructor(activeModal,route,router2,profileClaimService,dsoNameService){super(activeModal,route),this.activeModal=activeModal,this.route=route,this.router=router2,this.profileClaimService=profileClaimService,this.dsoNameService=dsoNameService,this.listEntries$=new cjs.BehaviorSubject(null),this.viewMode=view_mode_model.n.ListElement,this.linkTypes=collection_element_link_type.n,this.checked=!1,this.create=new core.bkB}ngOnInit(){this.profileClaimService.searchForSuggestions(this.dso).pipe((0,shared_operators.qD)()).subscribe(result=>this.listEntries$.next(result))}selectItem(dso){this.close(),this.navigate(dso)}navigate(dso){this.router.navigate([(0,item_page_routing_paths._o)(dso)])}toggleCheckbox(){this.checked=!this.checked}createFromScratch(){this.create.emit(),this.close()}static#_=this.\u0275fac=function(t){return new(t||ProfileClaimItemModalComponent2)(core.rXU(ng_bootstrap.Lw),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(ProfileClaimService),core.rXU(dso_name_service.f))};static#_2=this.\u0275cmp=core.VBU({type:ProfileClaimItemModalComponent2,selectors:[["ds-profile-claim-item-modal"]],inputs:{dso:"dso"},outputs:{create:"create"},standalone:!0,features:[core.Vt3,core.aNF],decls:27,vars:17,consts:[["listEntryElement",""],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["role","alert",1,"alert","alert-info"],[1,"dropdown-divider"],[1,"scrollable-menu","list-group","container"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md","mt-2"],[1,"modal-footer"],[1,"mr-5"],["type","checkbox",3,"change","checked"],["type","submit",1,"btn","btn-primary","ml-5","mr-2",3,"click","disabled"],[1,"fas","fa-plus"],[1,"list-group-item","list-group-item-action","border-0","list-entry",3,"click","title"],[3,"object","viewMode","linkType"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"div",1)(2,"h4"),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"button",2),core.bIt("click",function(){return ctx.close()}),core.j41(6,"span",3),core.EFF(7,"\xd7"),core.k0s()()(),core.j41(8,"div",4)(9,"div",5),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.nrm(12,"div",6),core.j41(13,"div",7),core.DNE(14,ProfileClaimItemModalComponent_div_14_Template,4,4,"div",8),core.nI1(15,"async"),core.j41(16,"div",9),core.nrm(17,"div",10),core.k0s()()(),core.j41(18,"div",11)(19,"div",12)(20,"input",13),core.bIt("change",function(){return ctx.toggleCheckbox()}),core.k0s(),core.EFF(21),core.nI1(22,"translate"),core.k0s(),core.j41(23,"button",14),core.bIt("click",function(){return ctx.createFromScratch()}),core.nrm(24,"i",15),core.EFF(25),core.nI1(26,"translate"),core.k0s()()()),2&rf){let tmp_2_0;core.R7$(3),core.JRh(core.bMT(4,7,"dso-selector.claim.item.head")),core.R7$(7),core.SpI(" ",core.bMT(11,9,"dso-selector.claim.item.body")," "),core.R7$(4),core.Y8G("ngForOf",null==(tmp_2_0=core.bMT(15,11,ctx.listEntries$))?null:tmp_2_0.payload.page),core.R7$(6),core.Y8G("checked",ctx.checked),core.R7$(),core.SpI(" ",core.bMT(22,13,"dso-selector.claim.item.not-mine-label")," "),core.R7$(2),core.Y8G("disabled",!ctx.checked),core.R7$(2),core.SpI(" ",core.bMT(26,15,"dso-selector.claim.item.create-from-scratch")," ")}},dependencies:[listable_object_component_loader_component.v,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,common.Sq],encapsulation:2})}return ProfileClaimItemModalComponent2})();function ProfilePageResearcherFormComponent_div_0_div_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div")(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"p",3)(5,"span",4),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"ui-switch",5),core.nI1(9,"translate"),core.nI1(10,"translate"),core.bIt("change",function(){core.eBV(_r1);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.toggleProfileVisibility(researcherProfile_r2))}),core.k0s()()()}if(2&rf){const researcherProfile_r2=core.XpG().ngVar;core.R7$(2),core.JRh(core.bMT(3,5,"researcher.profile.associated")),core.R7$(4),core.JRh(core.bMT(7,7,"researcher.profile.status")),core.R7$(2),core.Y8G("checkedLabel",core.bMT(9,9,"researcher.profile.public.visibility"))("uncheckedLabel",core.bMT(10,11,"researcher.profile.private.visibility"))("checked",researcherProfile_r2.visible)}}function ProfilePageResearcherFormComponent_div_0_div_2_Template(rf,ctx){1&rf&&(core.j41(0,"div")(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,1,"researcher.profile.not.associated")))}function ProfilePageResearcherFormComponent_div_0_button_3_span_2_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",7),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"researcher.profile.action.processing")," "))}function ProfilePageResearcherFormComponent_div_0_button_3_span_4_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",8),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" \xa0",core.bMT(3,1,"researcher.profile.create.new")," "))}function ProfilePageResearcherFormComponent_div_0_button_3_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",6),core.nI1(1,"async"),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.createProfile())}),core.DNE(2,ProfilePageResearcherFormComponent_div_0_button_3_span_2_Template,4,3,"span",1),core.nI1(3,"async"),core.DNE(4,ProfilePageResearcherFormComponent_div_0_button_3_span_4_Template,4,3,"span",1),core.nI1(5,"async"),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.Y8G("disabled",core.bMT(1,3,ctx_r2.isProcessingCreate())),core.R7$(2),core.Y8G("ngIf",core.bMT(3,5,ctx_r2.isProcessingCreate())),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(5,7,ctx_r2.isProcessingCreate()))}}function ProfilePageResearcherFormComponent_div_0_ng_container_4_span_6_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",7),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"researcher.profile.action.processing")," "))}function ProfilePageResearcherFormComponent_div_0_ng_container_4_span_8_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",11),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" \xa0",core.bMT(3,1,"researcher.profile.delete")," "))}function ProfilePageResearcherFormComponent_div_0_ng_container_4_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.qex(0),core.j41(1,"button",6),core.bIt("click",function(){core.eBV(_r5);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.viewProfile(researcherProfile_r2))}),core.nrm(2,"i",9),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"button",10),core.bIt("click",function(){core.eBV(_r5);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.deleteProfile(researcherProfile_r2))}),core.DNE(6,ProfilePageResearcherFormComponent_div_0_ng_container_4_span_6_Template,4,3,"span",1),core.nI1(7,"async"),core.DNE(8,ProfilePageResearcherFormComponent_div_0_ng_container_4_span_8_Template,4,3,"span",1),core.nI1(9,"async"),core.k0s(),core.bVm()}if(2&rf){const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();core.R7$(),core.Y8G("disabled",!researcherProfile_r2),core.R7$(2),core.SpI(" ",core.bMT(4,5,"researcher.profile.view")," "),core.R7$(2),core.Y8G("disabled",!researcherProfile_r2),core.R7$(),core.Y8G("ngIf",core.bMT(7,7,ctx_r2.isProcessingDelete())),core.R7$(2),core.Y8G("ngIf",!0!==core.bMT(9,9,ctx_r2.isProcessingDelete()))}}function ProfilePageResearcherFormComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ProfilePageResearcherFormComponent_div_0_div_1_Template,11,13,"div",1)(2,ProfilePageResearcherFormComponent_div_0_div_2_Template,4,3,"div",1)(3,ProfilePageResearcherFormComponent_div_0_button_3_Template,6,9,"button",2)(4,ProfilePageResearcherFormComponent_div_0_ng_container_4_Template,10,11,"ng-container",1),core.k0s()),2&rf){const researcherProfile_r2=ctx.ngVar;core.R7$(),core.Y8G("ngIf",researcherProfile_r2),core.R7$(),core.Y8G("ngIf",!researcherProfile_r2),core.R7$(),core.Y8G("ngIf",!researcherProfile_r2),core.R7$(),core.Y8G("ngIf",researcherProfile_r2)}}let ProfilePageResearcherFormComponent=(()=>{class ProfilePageResearcherFormComponent2{constructor(researcherProfileService,profileClaimService,translationService,notificationService,authService,router2,modalService){this.researcherProfileService=researcherProfileService,this.profileClaimService=profileClaimService,this.translationService=translationService,this.notificationService=notificationService,this.authService=authService,this.router=router2,this.modalService=modalService,this.researcherProfile$=new cjs.BehaviorSubject(null),this.processingDelete$=new cjs.BehaviorSubject(!1),this.processingCreate$=new cjs.BehaviorSubject(!1)}ngOnInit(){this.initResearchProfile()}createProfile(){this.processingCreate$.next(!0),this.authService.getAuthenticatedUserFromStore().pipe((0,operators.s)(1),(0,operators.nx)(currentUser=>this.profileClaimService.hasProfilesToSuggest(currentUser))).subscribe(hasProfilesToSuggest=>{if(hasProfilesToSuggest){this.processingCreate$.next(!1);const modal=this.modalService.open(ProfileClaimItemModalComponent);modal.componentInstance.dso=this.user,modal.componentInstance.create.pipe((0,operators.s)(1)).subscribe(()=>{this.createProfileFromScratch()})}else this.createProfileFromScratch()})}viewProfile(researcherProfile){null!=this.researcherProfileItemId&&this.router.navigate(["items",this.researcherProfileItemId])}deleteProfile(researcherProfile){const modalRef=this.modalService.open(confirmation_modal_component.M);modalRef.componentInstance.headerLabel="confirmation-modal.delete-profile.header",modalRef.componentInstance.infoLabel="confirmation-modal.delete-profile.info",modalRef.componentInstance.cancelLabel="confirmation-modal.delete-profile.cancel",modalRef.componentInstance.confirmLabel="confirmation-modal.delete-profile.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe((0,operators.s)(1)).subscribe(confirm=>{confirm&&(this.processingDelete$.next(!0),this.researcherProfileService.delete(researcherProfile.id).pipe((0,shared_operators.qD)(),(0,operators.Tj)(response=>response.isSuccess)).subscribe(deleted=>{deleted&&(this.researcherProfile$.next(null),this.researcherProfileItemId=null),this.processingDelete$.next(!1)}))})}toggleProfileVisibility(researcherProfile){this.researcherProfileService.setVisibility(researcherProfile,!researcherProfile.visible).pipe((0,shared_operators.qD)()).subscribe(rd=>{rd.hasSucceeded?this.researcherProfile$.next(rd.payload):this.notificationService.error(null,this.translationService.get("researcher.profile.change-visibility.fail"))})}isProcessingDelete(){return this.processingDelete$.asObservable()}isProcessingCreate(){return this.processingCreate$.asObservable()}createProfileFromScratch(){this.processingCreate$.next(!0),this.researcherProfileService.create().pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processingCreate$.next(!1),remoteData.isSuccess?(this.initResearchProfile(),this.notificationService.success(null,this.translationService.get("researcher.profile.create.success"))):this.notificationService.error(null,this.translationService.get("researcher.profile.create.fail"))})}initResearchProfile(){this.researcherProfileService.findById(this.user.id,!1,!0,(0,follow_link_config_model.s)("item")).pipe((0,shared_operators.ak)(),(0,operators.Mi)(researcherProfile=>this.researcherProfile$.next(researcherProfile)),(0,operators.ZZ)(researcherProfile=>this.researcherProfileService.findRelatedItemId(researcherProfile))).subscribe(itemId=>{(0,empty_util.hj)(itemId)&&(this.researcherProfileItemId=itemId)})}static#_=this.\u0275fac=function(t){return new(t||ProfilePageResearcherFormComponent2)(core.rXU(researcher_profile_data_service.ResearcherProfileDataService),core.rXU(ProfileClaimService),core.rXU(ngx_translate_core.c$),core.rXU(notifications_service.I),core.rXU(auth_service.uR),core.rXU(router.Ix),core.rXU(ng_bootstrap.Bq))};static#_2=this.\u0275cmp=core.VBU({type:ProfilePageResearcherFormComponent2,selectors:[["ds-profile-page-researcher-form"]],inputs:{user:"user"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[4,"ngVar"],[4,"ngIf"],["class","btn btn-primary mr-2",3,"disabled","click",4,"ngIf"],[1,"align-items-center","researcher-profile-switch"],[1,"mr-3"],[3,"change","checkedLabel","uncheckedLabel","checked"],[1,"btn","btn-primary","mr-2",3,"click","disabled"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-plus"],[1,"fas","fa-info-circle"],[1,"btn","btn-danger",3,"click","disabled"],[1,"fas","fa-trash-alt"]],template:function(rf,ctx){1&rf&&(core.DNE(0,ProfilePageResearcherFormComponent_div_0_Template,5,4,"div",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.researcherProfile$))},dependencies:[common.bT,common.Jj,ngx_translate_core.h,ngx_translate_core.D9,ngx_ui_switch.z,ngx_ui_switch.S,var_directive.r],encapsulation:2})}return ProfilePageResearcherFormComponent2})()},74120:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(21870),themed_component=__webpack_require__(31260),core=(__webpack_require__(35469),__webpack_require__(68014));const _c0=["*"];function ThemedProfilePageComponent_ng_template_0_Template(rf,ctx){}const ROUTES=[{path:"",pathMatch:"full",component:(()=>{class ThemedProfilePageComponent2 extends themed_component.J{getComponentName(){return"ProfilePageComponent"}importThemedComponent(themeName){return __webpack_require__(86930)(`./${themeName}/app/profile-page/profile-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,35469))}static#_=this.\u0275fac=(()=>{let \u0275ThemedProfilePageComponent_BaseFactory;return function(t){return(\u0275ThemedProfilePageComponent_BaseFactory||(\u0275ThemedProfilePageComponent_BaseFactory=core.xGo(ThemedProfilePageComponent2)))(t||ThemedProfilePageComponent2)}})();static#_2=this.\u0275cmp=core.VBU({type:ThemedProfilePageComponent2,selectors:[["ds-profile-page"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedProfilePageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}return ThemedProfilePageComponent2})(),resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{breadcrumbKey:"profile",title:"profile.title"}}]},25501:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>ProfilePageSecurityFormComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(84739),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(68014),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(71508),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43750),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10743),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(62120),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(82656),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14467),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77028),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(49148),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10117);function ProfilePageSecurityFormComponent_ds_form_3_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-form",4),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("formId",ctx_r0.FORM_PREFIX)("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function ProfilePageSecurityFormComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.matching-passwords"))}}function ProfilePageSecurityFormComponent_div_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.empty-password"))}}let ProfilePageSecurityFormComponent=(()=>{class ProfilePageSecurityFormComponent2{constructor(formService,translate,epersonService,notificationsService){this.formService=formService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.isInvalid=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.passwordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.currentPasswordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"password",name:"password",inputType:"password",autoComplete:"new-password"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"passwordrepeat",name:"passwordrepeat",inputType:"password",autoComplete:"new-password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){"profile.security.form."===this.FORM_PREFIX&&this.formModel.unshift(new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"current-password",name:"current-password",inputType:"password",required:!0,autoComplete:"current-password"})),this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual]}:{validators:[this.checkPasswordsEqual,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(status=>"VALID"!==status)).subscribe(status=>this.isInvalid.emit(status))),this.subs.push(this.formGroup.valueChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300)).subscribe(valueChange=>{this.passwordValue.emit(valueChange.password),"profile.security.form."===this.FORM_PREFIX&&this.currentPasswordValue.emit(valueChange["current-password"])}))}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.FORM_PREFIX+"label."+fieldModel.id)})}checkPasswordsEqual(group){return group.get("password").value===group.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordEmpty(group){const pass=group.get("password").value;return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Im)(pass)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static#_=this.\u0275fac=function(t){return new(t||ProfilePageSecurityFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.J9r),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ProfilePageSecurityFormComponent2,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue",currentPasswordValue:"currentPasswordValue"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:6,vars:7,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(3,ProfilePageSecurityFormComponent_ds_form_3_Template,1,5,"ds-form",1)(4,ProfilePageSecurityFormComponent_div_4_Template,3,3,"div",2)(5,ProfilePageSecurityFormComponent_div_5_Template,3,3,"div",3)),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,ctx.FORM_PREFIX+"info")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",ctx.formModel),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",ctx.formGroup.hasError("notSame")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("ngIf",(ctx.formGroup.dirty||ctx.formGroup.touched)&&ctx.formGroup.hasError("emptyPassword")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.bT,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__.s,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__.C,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.D9],encapsulation:2})}return ProfilePageSecurityFormComponent2})()},35469:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProfilePageComponent:()=>ProfilePageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(84739),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(43750),rxjs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(74785),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(10743),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41543),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91735),_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(44994),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30289),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29321),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(62120),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82656),_notifications_suggestions_notification_suggestions_notification_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82618),_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(77028),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10117),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(32181),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(45961),_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43475),_profile_page_researcher_form_profile_page_researcher_form_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(89445),_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25501),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(68014);function ProfilePageComponent_ng_container_0_div_1_div_19_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"div",12)(1,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(4,"div",5)(5,"ds-profile-page-security-form",13),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bIt("isInvalid",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_12__.eBV(_r2);const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_12__.Njj(ctx_r2.setInvalid($event))})("passwordValue",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_12__.eBV(_r2);const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_12__.Njj(ctx_r2.setPasswordValue($event))})("currentPasswordValue",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_12__.eBV(_r2);const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_12__.Njj(ctx_r2.setCurrentPasswordValue($event))}),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(3,2,"profile.card.security")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("FORM_PREFIX","profile.security.form."))}function ProfilePageComponent_ng_container_0_div_1_ng_container_26_div_1_li_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"li",18),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()),2&rf){const group_r4=ctx.$implicit,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(ctx_r2.dsoNameService.getName(group_r4))}}function ProfilePageComponent_ng_container_0_div_1_ng_container_26_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"div")(1,"h2",15),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(4,"ul",16),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(5,ProfilePageComponent_ng_container_0_div_1_ng_container_26_div_1_li_5_Template,2,1,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()()),2&rf){const groups_r5=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(3,2,"profile.groups.head")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngForOf",groups_r5)}}function ProfilePageComponent_ng_container_0_div_1_ng_container_26_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(1,ProfilePageComponent_ng_container_0_div_1_ng_container_26_div_1_Template,6,4,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bVm()),2&rf){const groups_r5=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngIf",(null==groups_r5?null:groups_r5.length)>0)}}function ProfilePageComponent_ng_container_0_div_1_ng_container_28_div_1_li_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"li",18),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()),2&rf){const specialGroup_r6=ctx.$implicit,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.SpI(" ",ctx_r2.dsoNameService.getName(specialGroup_r6)," ")}}function ProfilePageComponent_ng_container_0_div_1_ng_container_28_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"div",20)(1,"h2",15),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(4,"ul",16),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(5,ProfilePageComponent_ng_container_0_div_1_ng_container_28_div_1_li_5_Template,2,1,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()()),2&rf){const specialGroups_r7=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(3,2,"profile.special.groups.head")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngForOf",specialGroups_r7)}}function ProfilePageComponent_ng_container_0_div_1_ng_container_28_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(1,ProfilePageComponent_ng_container_0_div_1_ng_container_28_div_1_Template,6,4,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bVm()),2&rf){const specialGroups_r7=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngIf",(null==specialGroups_r7?null:specialGroups_r7.length)>0)}}function ProfilePageComponent_ng_container_0_div_1_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_12__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(0,"div",2)(1,"h1"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.qex(4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(5,"div",3)(6,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(9,"div",5)(10,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nrm(11,"ds-profile-page-researcher-form",7),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nrm(12,"ds-suggestions-notification"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bVm(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(13,"div",3)(14,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(16,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(17,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nrm(18,"ds-profile-page-metadata-form",7),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(19,ProfilePageComponent_ng_container_0_div_1_div_19_Template,6,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(20,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.j41(21,"div",9)(22,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_12__.eBV(_r1);const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_12__.Njj(ctx_r2.updateProfile())}),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nrm(23,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_12__.EFF(24),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(26,ProfilePageComponent_ng_container_0_div_1_ng_container_26_Template,2,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(28,ProfilePageComponent_ng_container_0_div_1_ng_container_28_Template,2,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(29,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_12__.k0s()}if(2&rf){let tmp_10_0,tmp_11_0;const user_r8=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG().ngVar,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_12__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(3,9,"profile.title")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(8,11,"profile.card.researcher")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("user",user_r8),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_12__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(16,13,"profile.card.identify")),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("user",user_r8),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(20,15,ctx_r2.canChangePassword$)),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_12__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(25,17,"profile.form.submit"),""),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngVar",null==(tmp_10_0=_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(27,19,ctx_r2.groupsRD$))||null==tmp_10_0.payload?null:tmp_10_0.payload.page),_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngVar",null==(tmp_11_0=_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(29,21,ctx_r2.specialGroupsRD$))||null==tmp_11_0.payload?null:tmp_11_0.payload.page)}}function ProfilePageComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(1,ProfilePageComponent_ng_container_0_div_1_Template,30,23,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_12__.bVm()),2&rf){const user_r8=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_12__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngIf",user_r8)}}let ProfilePageComponent=(()=>{class ProfilePageComponent2{constructor(authService,notificationsService,translate,epersonService,authorizationService,configurationService,dsoNameService){this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.epersonService=epersonService,this.authorizationService=authorizationService,this.configurationService=configurationService,this.dsoNameService=dsoNameService,this.NOTIFICATIONS_PREFIX="profile.notifications.",this.PASSWORD_NOTIFICATIONS_PREFIX="profile.security.form.notifications.",this.isResearcherProfileEnabled$=new rxjs__WEBPACK_IMPORTED_MODULE_13__.BehaviorSubject(!1)}ngOnInit(){this.user$=this.authService.getAuthenticatedUserFromStore().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.pb)(user=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(user.id)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.nx)(user=>this.epersonService.findById(user.id,!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_16__.s)("groups"))),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.v7)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.Mi)(user=>this.currentUser=user)),this.groupsRD$=this.user$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.nx)(user=>user.groups)),this.canChangePassword$=this.user$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.nx)(user=>this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_4__._.CanChangePassword,user._links.self.href))),this.specialGroupsRD$=this.authService.getSpecialGroupsFromAuthStatus(),this.configurationService.findByPropertyName("researcher-profile.entity-type").pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.qD)()).subscribe(configRD=>{this.isResearcherProfileEnabled$.next(configRD.hasSucceeded&&configRD.payload.values.length>0)})}updateProfile(){const metadataChanged=this.metadataForm.compRef.instance.updateProfile(),securityChanged=this.updateSecurity();!metadataChanged&&!securityChanged&&this.notificationsService.warning(this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.content"))}setInvalid($event){this.invalidSecurity=$event}updateSecurity(){const passEntered=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.hj)(this.password);return this.invalidSecurity&&this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.general")),!this.invalidSecurity&&passEntered&&this.epersonService.patch(this.currentUser,[{op:"add",path:"/password",value:{new_password:this.password,current_password:this.currentPassword}}]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.qD)()).subscribe(response=>{response.hasSucceeded?this.notificationsService.success(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.title"),this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.content")):this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.title"),this.getPasswordErrorMessage(response))}),passEntered}setPasswordValue($event){this.password=$event}setCurrentPasswordValue($event){this.currentPassword=$event}submit(){this.updateProfile()}isResearcherProfileEnabled(){return this.isResearcherProfileEnabled$.asObservable()}getPasswordErrorMessage(response){return response.hasFailed&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.hj)(response.errorMessage)?this.translate.instant(response.errorMessage):this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.change-failed")}static#_=this.\u0275fac=function(t){return new(t||ProfilePageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.I),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_5__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_3__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_2__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_12__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_12__.VBU({type:ProfilePageComponent2,selectors:[["ds-base-profile-page"]],viewQuery:function(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_12__.GBs(_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_9__.O,5),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_12__.mGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_12__.lsd())&&(ctx.metadataForm=_t.first)}},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_12__.aNF],decls:2,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngIf"],[1,"container"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"mb-4"],[3,"user"],["class","card mb-4 security-section",4,"ngIf"],[1,"col-12","text-right","pr-0"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],[1,"card","mb-4","security-section"],[3,"isInvalid","passwordValue","currentPasswordValue","FORM_PREFIX"],[4,"ngIf"],[1,"mt-4"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["data-test","specialGroups",4,"ngIf"],["data-test","specialGroups"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_12__.DNE(0,ProfilePageComponent_ng_container_0_Template,2,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_12__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_12__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_12__.bMT(1,1,ctx.user$))},dependencies:[_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_9__.O,_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_11__.q,_angular_common__WEBPACK_IMPORTED_MODULE_18__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.D9,_profile_page_researcher_form_profile_page_researcher_form_component__WEBPACK_IMPORTED_MODULE_10__.g,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_19__.r,_angular_common__WEBPACK_IMPORTED_MODULE_18__.bT,_angular_common__WEBPACK_IMPORTED_MODULE_18__.Sq,_notifications_suggestions_notification_suggestions_notification_component__WEBPACK_IMPORTED_MODULE_7__.w]})}return ProfilePageComponent2})()},46020:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/profile-page/profile-page-metadata-form/profile-page-metadata-form.component":[85742,5742]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=46020,module.exports=webpackAsyncContext},86930:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/profile-page/profile-page.component":[85622,5622]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=86930,module.exports=webpackAsyncContext},25702:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>UiSwitchComponent,z:()=>UiSwitchModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(68014),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28955),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(84739);const _c0=["*"];function UiSwitchComponent_label_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"label",2)(1,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(3,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("checkedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("uncheckedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.uncheckedLabel)}}const UI_SWITCH_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.nKC("UI_SWITCH_OPTIONS"),UI_SWITCH_CONTROL_VALUE_ACCESSOR={provide:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.kq,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rfq)(()=>UiSwitchComponent),multi:!0};let UiSwitchComponent=(()=>{class UiSwitchComponent2{constructor(config={},cdr){this.cdr=cdr,this.change=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.changeEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.valueChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB,this.onTouchedCallback=v=>{},this.onChangeCallback=v=>{},this.size=config&&config.size||"medium",this.color=config&&config.color,this.switchOffColor=config&&config.switchOffColor,this.switchColor=config&&config.switchColor,this.defaultBgColor=config&&config.defaultBgColor,this.defaultBoColor=config&&config.defaultBoColor,this.checkedLabel=config&&config.checkedLabel,this.uncheckedLabel=config&&config.uncheckedLabel,this.checkedTextColor=config&&config.checkedTextColor,this.uncheckedTextColor=config&&config.uncheckedTextColor}set checked(v){this._checked=!1!==v}get checked(){return this._checked}set disabled(v){this._disabled=!1!==v}get disabled(){return this._disabled}set reverse(v){this._reverse=!1!==v}get reverse(){return this._reverse}set loading(v){this._loading=!1!==v}get loading(){return this._loading}getColor(flag=""){return"borderColor"===flag?this.defaultBoColor:"switchColor"===flag?this.reverse?this.checked&&this.switchOffColor||this.switchColor:this.checked?this.switchColor:this.switchOffColor||this.switchColor:"checkedTextColor"===flag?this.reverse?this.uncheckedTextColor:this.checkedTextColor:"uncheckedTextColor"===flag?this.reverse?this.checkedTextColor:this.uncheckedTextColor:this.reverse?this.checked?this.defaultBgColor:this.color:this.checked?this.color:this.defaultBgColor}onClick(event){this.disabled||(this.checked=!this.checked,this.change.emit(this.checked),this.valueChange.emit(this.checked),this.changeEvent.emit(event),this.onChangeCallback(this.checked),this.onTouchedCallback(this.checked),this.cdr.markForCheck())}onToggle(event){this.disabled||(this.beforeChange?this._beforeChange=this.beforeChange.subscribe(confirm=>{confirm&&this.onClick(event)}):this.onClick(event))}writeValue(obj){obj!==this.checked&&(this.checked=!!obj),this.onChangeCallback(this.checked),this.cdr&&this.cdr.markForCheck()}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}ngOnDestroy(){this._beforeChange&&this._beforeChange.unsubscribe()}}return UiSwitchComponent2.\u0275fac=function(t){return new(t||UiSwitchComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(UI_SWITCH_OPTIONS,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_0__.gRc))},UiSwitchComponent2.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.VBU({type:UiSwitchComponent2,selectors:[["ui-switch"]],hostBindings:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.bIt("click",function($event){return ctx.onToggle($event)})},inputs:{size:"size",color:"color",switchOffColor:"switchOffColor",switchColor:"switchColor",defaultBgColor:"defaultBgColor",defaultBoColor:"defaultBoColor",checkedLabel:"checkedLabel",uncheckedLabel:"uncheckedLabel",checkedTextColor:"checkedTextColor",uncheckedTextColor:"uncheckedTextColor",beforeChange:"beforeChange",ariaLabel:"ariaLabel",checked:"checked",disabled:"disabled",reverse:"reverse",loading:"loading"},outputs:{change:"change",changeEvent:"changeEvent",valueChange:"valueChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jv_([UI_SWITCH_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:4,vars:21,consts:[["type","button","role","switch",1,"switch"],["class","switch-pane",4,"ngIf"],[1,"switch-pane"],[1,"switch-label-checked"],[1,"switch-label-unchecked"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"button",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.DNE(1,UiSwitchComponent_label_1_Template,5,8,"label",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(2,"small"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.SdG(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background-color",ctx.getColor())("border-color",ctx.getColor("borderColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.AVh("checked",ctx.checked)("disabled",ctx.disabled)("loading",ctx.loading)("switch-large","large"===ctx.size)("switch-medium","medium"===ctx.size)("switch-small","small"===ctx.size),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-checked",ctx.checked)("aria-label",ctx.ariaLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y8G("ngIf",ctx.checkedLabel||ctx.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background",ctx.getColor("switchColor")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.bT],encapsulation:2}),UiSwitchComponent2})(),UiSwitchModule=(()=>{class UiSwitchModule2{static forRoot(config){return{ngModule:UiSwitchModule2,providers:[{provide:UI_SWITCH_OPTIONS,useValue:config||{}}]}}}return UiSwitchModule2.\u0275fac=function(t){return new(t||UiSwitchModule2)},UiSwitchModule2.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.$C({type:UiSwitchModule2}),UiSwitchModule2.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.G2t({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.MD,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN]}),UiSwitchModule2})()}};