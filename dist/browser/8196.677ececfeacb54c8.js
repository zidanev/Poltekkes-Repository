(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8196,238],{30238:(K,C,n)=>{"use strict";n.r(C),n.d(C,{NotifyRequestsStatusDataService:()=>E});var v=n(47947),i=n(37610),g=n(45122),u=n(25718),M=n(25744),I=n(2887),R=n(70210),D=n(9843),U=n(53107);let E=(()=>{class s extends I.W{constructor(F,c,O,N){super("notifyrequests",F,c,O,N),this.requestService=F,this.rdbService=c,this.objectCache=O,this.halService=N}getNotifyRequestsStatus(F){const c=this.getEndpoint().pipe((0,v.T)(O=>O+"/"+F));return c.pipe((0,i.s)(1)).subscribe(O=>{const N=new R.IP(this.requestService.generateRequestId(),O);this.requestService.send(N,!0)}),this.rdbService.buildFromHref(c)}static#t=this.\u0275fac=function(c){return new(c||s)(U.KVO(D.B),U.KVO(g.o),U.KVO(u.$),U.KVO(M.Y))};static#e=this.\u0275prov=U.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},6918:(K,C,n)=>{"use strict";n.d(C,{z:()=>R});var v=n(63016),i=n(17178),g=n(47947),u=n(18062),M=n(92600),I=n(53107);let R=(()=>{class D{constructor(E,s){this.appConfig=E,this.restService=s}getLinks(E){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${E}`).pipe((0,i.W)($=>(0,v.of)([])),(0,g.T)($=>200===$.statusCode?$.payload:[]))}static#t=this.\u0275fac=function(s){return new(s||D)(I.KVO(u.vQ),I.KVO(M.Y))};static#e=this.\u0275prov=I.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},83740:(K,C,n)=>{"use strict";n.r(C),n.d(C,{ItemAlertsComponent:()=>X});var v=n(54460),i=n(95968),g=n(69685),u=n(47947),M=n(76627),I=n(12007),R=n(77304),D=n(36556),E=(n(47376),n(59517)),s=n(96858),$=n(16700),F=n(21362),c=n(53107);function O(S,m){if(1&S&&(c.j41(0,"div",2),c.nrm(1,"ds-alert",3),c.nI1(2,"translate"),c.k0s()),2&S){const e=c.XpG();c.R7$(),c.Y8G("type",e.AlertTypeEnum.Warning)("content",c.bMT(2,2,"item.alerts.private"))}}function N(S,m){if(1&S){const e=c.RV6();c.j41(0,"a",11),c.bIt("click",function(){c.eBV(e);const h=c.XpG(2);return c.Njj(h.openReinstateModal())}),c.EFF(1),c.nI1(2,"translate"),c.k0s()}2&S&&(c.R7$(),c.JRh(c.bMT(2,1,"item.alerts.reinstate-request")))}function y(S,m){if(1&S&&(c.j41(0,"div",4)(1,"ds-alert",5)(2,"div",6)(3,"span",7),c.EFF(4),c.nI1(5,"translate"),c.k0s(),c.j41(6,"div",8)(7,"a",9),c.EFF(8),c.nI1(9,"translate"),c.k0s(),c.DNE(10,N,3,3,"a",10),c.nI1(11,"async"),c.k0s()()()()),2&S){const e=c.XpG();c.R7$(),c.Y8G("type",e.AlertTypeEnum.Warning),c.R7$(3),c.JRh(c.bMT(5,4,"item.alerts.withdrawn")),c.R7$(4),c.JRh(c.bMT(9,6,"404.link.home-page")),c.R7$(2),c.Y8G("ngIf",c.bMT(11,8,e.showReinstateButton$()))}}let X=(()=>{class S{constructor(e,l,h){this.authService=e,this.dsoWithdrawnReinstateModalService=l,this.correctionTypeDataService=h,this.AlertTypeEnum=$.v}showReinstateButton$(){const e=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,I.qD)(),(0,u.T)(h=>h.hasSucceeded?h.payload.page:[])),l=this.authService.isAuthorized(D._.AdministratorOf);return(0,M.z)([l,e]).pipe((0,u.T)(([h,W])=>!h&&W.some(z=>z.topic===F.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static#t=this.\u0275fac=function(l){return new(l||S)(c.rXU(R.AuthorizationDataService),c.rXU(F.Ee),c.rXU(E.CorrectionTypeDataService))};static#e=this.\u0275cmp=c.VBU({type:S,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[c.aNF],decls:3,vars:2,consts:[["class","private-warning",4,"ngIf"],["class","withdrawn-warning",4,"ngIf"],[1,"private-warning"],[3,"type","content"],[1,"withdrawn-warning"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home",1,"btn","btn-primary","btn-sm"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(l,h){1&l&&(c.j41(0,"div"),c.DNE(1,O,3,4,"div",0)(2,y,12,10,"div",1),c.k0s()),2&l&&(c.R7$(),c.Y8G("ngIf",h.item&&!h.item.isDiscoverable),c.R7$(),c.Y8G("ngIf",h.item&&h.item.isWithdrawn))},dependencies:[s.C,v.bT,g.h,g.D9,i.Wk,v.Jj]})}return S})()},54280:(K,C,n)=>{"use strict";n.d(C,{R:()=>R}),n(47376);var i=n(21124),u=(n(83740),n(53107));const M=["*"];function I(D,U){}let R=(()=>{class D extends i.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(E){return n(42176)(`./${E}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,83740))}static#t=this.\u0275fac=(()=>{let E;return function($){return(E||(E=u.xGo(D)))($||D)}})();static#e=this.\u0275cmp=u.VBU({type:D,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[u.Vt3,u.aNF],ngContentSelectors:M,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(s,$){1&s&&(u.NAR(),u.DNE(0,I,0,0,"ng-template",null,0,u.C5r),u.j41(2,"div",null,1),u.SdG(4),u.k0s())},encapsulation:2})}return D})()},1656:(K,C,n)=>{"use strict";n.r(C),n.d(C,{FullFileSectionComponent:()=>st});var v=n(54460),i=n(69685),g=n(22867),u=n(82040),M=n(18062),I=n(83116),R=n(78052),D=n(95438),E=(n(47376),n(72683)),s=n(60902),$=n(8460),F=n(79224),c=n(51661),O=n(67899),N=n(89351),y=n(24106),X=n(63524),S=n(7044),m=n(70789),e=n(53107);function l(P,j){if(1&P&&(e.qex(0),e.j41(1,"dt",12),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"dd",13),e.EFF(5),e.k0s(),e.bVm()),2&P){const f=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.description")),e.R7$(3),e.JRh(f.firstMetadataValue("dc.description"))}}function h(P,j){if(1&P&&(e.j41(0,"div",7)(1,"div",8),e.nrm(2,"ds-thumbnail",9),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",10)(5,"dl",11)(6,"dt",12),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"dd",13),e.EFF(10),e.k0s(),e.j41(11,"dt",12),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"dd",13),e.EFF(15),e.nI1(16,"dsFileSize"),e.k0s(),e.j41(17,"dt",12),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"dd",13),e.EFF(21),e.nI1(22,"async"),e.k0s(),e.DNE(23,l,6,4,"ng-container",2),e.k0s()(),e.j41(24,"div",14)(25,"ds-file-download-link",15),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()),2&P){let f,B;const V=j.$implicit,J=e.XpG(4);e.R7$(2),e.Y8G("thumbnail",null==(f=e.bMT(3,11,V.thumbnail))?null:f.payload),e.R7$(5),e.JRh(e.bMT(8,13,"item.page.filesection.name")),e.R7$(3),e.JRh(J.dsoNameService.getName(V)),e.R7$(2),e.JRh(e.bMT(13,15,"item.page.filesection.size")),e.R7$(3),e.JRh(e.bMT(16,17,V.sizeBytes)),e.R7$(3),e.JRh(e.bMT(19,19,"item.page.filesection.format")),e.R7$(3),e.JRh(null==(B=e.bMT(22,21,V.format))||null==B.payload?null:B.payload.description),e.R7$(2),e.Y8G("ngIf",V.hasMetadata("dc.description")),e.R7$(2),e.Y8G("bitstream",V)("item",J.item),e.R7$(),e.SpI(" ",e.bMT(27,23,"item.page.filesection.download")," ")}}function W(P,j){if(1&P&&(e.j41(0,"ds-pagination",5),e.DNE(1,h,28,25,"div",6),e.k0s()),2&P){const f=e.XpG(2).ngVar,B=e.XpG();e.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",B.originalOptions)("collectionSize",null==f?null:f.totalElements)("retainScrollPosition",!0),e.R7$(),e.Y8G("ngForOf",null==f?null:f.page)}}function z(P,j){if(1&P&&(e.j41(0,"div")(1,"h3",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,W,2,6,"ds-pagination",4),e.k0s()),2&P){const f=e.XpG().ngVar;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.original.bundle")),e.R7$(2),e.Y8G("ngIf",(null==f||null==f.page?null:f.page.length)>0)}}function it(P,j){if(1&P&&(e.j41(0,"div"),e.DNE(1,z,5,4,"div",2),e.k0s()),2&P){const f=j.ngVar,B=e.XpG();e.R7$(),e.Y8G("ngIf",B.hasValuesInBundle(f))}}function q(P,j){if(1&P&&(e.j41(0,"div",17)(1,"div",8),e.nrm(2,"ds-thumbnail",9),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",10)(5,"dl",11)(6,"dt",12),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"dd",13),e.EFF(10),e.k0s(),e.j41(11,"dt",12),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"dd",13),e.EFF(15),e.nI1(16,"dsFileSize"),e.k0s(),e.j41(17,"dt",12),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"dd",13),e.EFF(21),e.nI1(22,"async"),e.k0s(),e.j41(23,"dt",12),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"dd",13),e.EFF(27),e.k0s()()(),e.j41(28,"div",14)(29,"ds-file-download-link",15),e.EFF(30),e.nI1(31,"translate"),e.k0s()()()),2&P){let f,B;const V=j.$implicit,J=e.XpG(4);e.R7$(2),e.Y8G("thumbnail",null==(f=e.bMT(3,12,V.thumbnail))?null:f.payload),e.R7$(5),e.JRh(e.bMT(8,14,"item.page.filesection.name")),e.R7$(3),e.JRh(J.dsoNameService.getName(V)),e.R7$(2),e.JRh(e.bMT(13,16,"item.page.filesection.size")),e.R7$(3),e.JRh(e.bMT(16,18,V.sizeBytes)),e.R7$(3),e.JRh(e.bMT(19,20,"item.page.filesection.format")),e.R7$(3),e.JRh(null==(B=e.bMT(22,22,V.format))||null==B.payload?null:B.payload.description),e.R7$(3),e.JRh(e.bMT(25,24,"item.page.filesection.description")),e.R7$(3),e.JRh(V.firstMetadataValue("dc.description")),e.R7$(2),e.Y8G("bitstream",V)("item",J.item),e.R7$(),e.SpI(" ",e.bMT(31,26,"item.page.filesection.download")," ")}}function t(P,j){if(1&P&&(e.j41(0,"ds-pagination",5),e.DNE(1,q,32,28,"div",16),e.k0s()),2&P){const f=e.XpG(2).ngVar,B=e.XpG();e.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",B.licenseOptions)("collectionSize",null==f?null:f.totalElements)("retainScrollPosition",!0),e.R7$(),e.Y8G("ngForOf",null==f?null:f.page)}}function et(P,j){if(1&P&&(e.j41(0,"div")(1,"h3",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,t,2,6,"ds-pagination",4),e.k0s()),2&P){const f=e.XpG().ngVar;e.R7$(2),e.JRh(e.bMT(3,2,"item.page.filesection.license.bundle")),e.R7$(2),e.Y8G("ngIf",(null==f||null==f.page?null:f.page.length)>0)}}function k(P,j){if(1&P&&(e.j41(0,"div"),e.DNE(1,et,5,4,"div",2),e.k0s()),2&P){const f=j.ngVar,B=e.XpG();e.R7$(),e.Y8G("ngIf",B.hasValuesInBundle(f))}}let st=(()=>{class P extends m.FileSectionComponent{constructor(f,B,V,J,Q,p){super(f,B,V,Q,p),this.notificationsService=B,this.translateService=V,this.paginationService=J,this.dsoNameService=Q,this.appConfig=p,this.originalOptions=Object.assign(new O.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new O.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,g.n)(f=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:f.pageSize,currentPage:f.currentPage},!0,!0,(0,y.s)("format"),(0,y.s)("thumbnail"))),(0,u.M)(f=>{(0,E.a4)(f.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${f.statusCode} ${f.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,g.n)(f=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:f.pageSize,currentPage:f.currentPage},!0,!0,(0,y.s)("format"),(0,y.s)("thumbnail"))),(0,u.M)(f=>{(0,E.a4)(f.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${f.statusCode} ${f.errorMessage}`)}))}hasValuesInBundle(f){return(0,E.a4)(f)&&!(0,E.Im)(f.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static#t=this.\u0275fac=function(B){return new(B||P)(e.rXU(R.BitstreamDataService),e.rXU(F.I),e.rXU(i.c$),e.rXU(D.m),e.rXU(I.f),e.rXU(M.vQ))};static#e=this.\u0275cmp=e.VBU({type:P,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function(B,V){if(1&B&&(e.j41(0,"ds-metadata-field-wrapper",0),e.nI1(1,"translate"),e.DNE(2,it,2,1,"div",1),e.nI1(3,"async"),e.DNE(4,k,2,1,"div",1),e.nI1(5,"async"),e.k0s()),2&B){let J,Q;e.Y8G("label",e.bMT(1,3,V.label)),e.R7$(2),e.Y8G("ngVar",null==(J=e.bMT(3,5,V.originals$))?null:J.payload),e.R7$(2),e.Y8G("ngVar",null==(Q=e.bMT(5,7,V.licenses$))?null:Q.payload)}},dependencies:[c.e,v.bT,i.h,i.D9,v.Jj,X.r,S.T,v.Sq,s.z,N.s,$.Q],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}return P})()},43966:(K,C,n)=>{"use strict";n.d(C,{n:()=>R}),n(47376);var i=n(21124),u=(n(1656),n(53107));const M=["*"];function I(D,U){}let R=(()=>{class D extends i.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(E){return n(63614)(`./${E}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,1656))}static#t=this.\u0275fac=(()=>{let E;return function($){return(E||(E=u.xGo(D)))($||D)}})();static#e=this.\u0275cmp=u.VBU({type:D,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[u.Vt3,u.aNF],ngContentSelectors:M,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(s,$){1&s&&(u.NAR(),u.DNE(0,I,0,0,"ng-template",null,0,u.C5r),u.j41(2,"div",null,1),u.SdG(4),u.k0s())},encapsulation:2})}return D})()},74324:(K,C,n)=>{"use strict";n.r(C),n.d(C,{FullItemPageComponent:()=>Q});var v=n(54460),i=n(53107),g=n(95968),u=n(69685),M=n(47947),I=n(41483),R=n(94622),D=n(77304),U=n(17584),E=n(6918),s=n(86779),$=n(2566),F=n(4097),c=n(72683),O=n(96606),N=n(21548),y=n(63524),X=n(89096),S=n(54280),m=n(49842),e=n(41195),l=n(87277),h=n(32398),W=n(89940),z=n(43966),it=n(81455);const q=p=>[p];function t(p,G){if(1&p&&(i.j41(0,"div",18)(1,"a",19),i.nI1(2,"async"),i.EFF(3),i.nI1(4,"translate"),i.k0s()()),2&p){const r=i.XpG(5);i.R7$(),i.Y8G("routerLink",i.eq3(6,q,i.bMT(2,2,r.itemPageRoute$))),i.R7$(2),i.SpI(" ",i.bMT(4,4,"item.page.link.simple")," ")}}function et(p,G){if(1&p&&(i.j41(0,"tr")(1,"td"),i.EFF(2),i.k0s(),i.j41(3,"td"),i.EFF(4),i.k0s(),i.j41(5,"td"),i.EFF(6),i.k0s()()),2&p){const r=G.$implicit,b=i.XpG().$implicit;i.R7$(2),i.JRh(b.key),i.R7$(2),i.JRh(r.value),i.R7$(2),i.JRh(r.language)}}function k(p,G){if(1&p&&(i.qex(0),i.DNE(1,et,7,3,"tr",15),i.bVm()),2&p){const r=G.$implicit;i.R7$(),i.Y8G("ngForOf",r.value)}}function st(p,G){if(1&p){const r=i.RV6();i.j41(0,"div",20)(1,"div",21)(2,"button",22),i.bIt("click",function(){i.eBV(r);const L=i.XpG(5);return i.Njj(L.back())}),i.nrm(3,"i",23),i.EFF(4),i.nI1(5,"translate"),i.k0s()()()}2&p&&(i.R7$(4),i.SpI(" ",i.bMT(5,1,"item.page.return"),""))}function P(p,G){if(1&p&&(i.j41(0,"div",9)(1,"div",10),i.nrm(2,"ds-item-page-title-field",11)(3,"ds-dso-edit-menu"),i.k0s(),i.DNE(4,t,5,8,"div",12),i.j41(5,"div",13)(6,"table",14)(7,"tbody"),i.DNE(8,k,2,1,"ng-container",15),i.nI1(9,"async"),i.nI1(10,"keyvalue"),i.k0s()()(),i.nrm(11,"ds-item-page-full-file-section",6)(12,"ds-item-page-collections",6)(13,"ds-item-versions",16),i.DNE(14,st,6,3,"div",17),i.k0s()),2&p){const r=i.XpG().ngIf,b=i.XpG(3);i.R7$(2),i.Y8G("item",r),i.R7$(2),i.Y8G("ngIf",!b.fromSubmissionObject),i.R7$(4),i.Y8G("ngForOf",i.bMT(10,9,i.bMT(9,7,b.metadata$))),i.R7$(3),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("ngIf",b.fromSubmissionObject)}}function j(p,G){if(1&p&&(i.j41(0,"div"),i.nrm(1,"ds-item-alerts",6)(2,"ds-item-versions-notice",6)(3,"ds-view-tracker",7),i.DNE(4,P,15,11,"div",8),i.nI1(5,"async"),i.k0s()),2&p){const r=G.ngIf,b=i.XpG(3);i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("object",r),i.R7$(),i.Y8G("ngIf",!r.isWithdrawn||i.bMT(5,4,b.isAdmin$))}}function f(p,G){if(1&p&&(i.j41(0,"div",4),i.DNE(1,j,6,6,"div",5),i.k0s()),2&p){const r=i.XpG().ngVar;i.Y8G("@fadeInOut",void 0),i.R7$(),i.Y8G("ngIf",null==r?null:r.payload)}}function B(p,G){1&p&&(i.nrm(0,"ds-error",24),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"error.item"))}function V(p,G){1&p&&(i.nrm(0,"ds-loading",24),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"loading.item"))}function J(p,G){if(1&p&&(i.j41(0,"div",1),i.DNE(1,f,2,2,"div",2)(2,B,2,3,"ds-error",3)(3,V,2,3,"ds-loading",3),i.k0s()),2&p){const r=G.ngVar;i.R7$(),i.Y8G("ngIf",null==r?null:r.hasSucceeded),i.R7$(),i.Y8G("ngIf",null==r?null:r.hasFailed),i.R7$(),i.Y8G("ngIf",null==r?null:r.isLoading)}}let Q=(()=>{class p extends l.ItemPageComponent{constructor(r,b,L,H,Y,w,at,rt,lt,_t){super(r,b,L,H,w,at,rt,lt,_t),this.route=r,this.router=b,this.items=L,this.authorizationService=H,this._location=Y,this.responseService=w,this.signpostingDataService=at,this.linkHeadService=rt,this.notifyInfoService=lt,this.platformId=_t,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,M.T)(r=>r.payload),(0,I.p)(r=>(0,c.a4)(r)),(0,M.T)(r=>r.metadata)),this.subs.push(this.route.data.subscribe(r=>{this.fromSubmissionObject=(0,c.a4)(r.wfi)||(0,c.a4)(r.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(r=>(0,c.a4)(r)).forEach(r=>r.unsubscribe())}static#t=this.\u0275fac=function(b){return new(b||p)(i.rXU(g.nX),i.rXU(g.Ix),i.rXU(U.ItemDataService),i.rXU(D.AuthorizationDataService),i.rXU(v.aZ),i.rXU(s.w),i.rXU(E.z),i.rXU(it.m),i.rXU(R.P),i.rXU(i.Agw))};static#e=this.\u0275cmp=i.VBU({type:p,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[i.Vt3,i.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],["class","full-item-info",4,"ngIf"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],["class","simple-view-link my-3",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-right"],[1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function(b,L){1&b&&(i.DNE(0,J,4,3,"div",0),i.nI1(1,"async")),2&b&&i.Y8G("ngVar",i.bMT(1,1,L.itemRD$))},dependencies:[O.A,N.v,u.h,u.D9,z.n,m.r,h.I,v.bT,v.Sq,v.Jj,v.lG,g.Wk,e.V,F.T,W.s,X.H,S.R,y.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[$.Ws]},changeDetection:0})}return p})()},98196:(K,C,n)=>{"use strict";n.d(C,{i:()=>I});var v=n(21124),g=(n(74324),n(53107));const u=["*"];function M(R,D){}let I=(()=>{class R extends v.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(U){return n(4872)(`./${U}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(n,74324))}static#t=this.\u0275fac=(()=>{let U;return function(s){return(U||(U=g.xGo(R)))(s||R)}})();static#e=this.\u0275cmp=g.VBU({type:R,selectors:[["ds-full-item-page"]],standalone:!0,features:[g.Vt3,g.aNF],ngContentSelectors:u,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(E,s){1&E&&(g.NAR(),g.DNE(0,M,0,0,"ng-template",null,0,g.C5r),g.j41(2,"div",null,1),g.SdG(4),g.k0s())},encapsulation:2})}return R})()},87277:(K,C,n)=>{"use strict";n.r(C),n.d(C,{ItemPageComponent:()=>Q});var v=n(54460),i=n(53107),g=n(69685),u=n(76627),M=n(63016),I=n(47947),R=n(37610),D=n(22867),U=n(94622),E=n(77304),s=n(36556),$=n(17584),F=n(6918),c=n(86779),O=n(12007),N=n(88842),y=n(2566),X=n(72683),S=n(96606),m=n(21548),e=n(47637),l=n(63524),h=n(89096),W=n(54280),z=n(15497),it=n(32398),q=n(89940),t=n(83671),et=n(81146),k=n(95968),st=n(81455);function P(p,G){if(1&p&&i.nrm(0,"ds-listable-object-component-loader",11),2&p){const r=i.XpG().ngIf,b=i.XpG(3);i.Y8G("object",r)("viewMode",b.viewMode)}}function j(p,G){if(1&p&&(i.j41(0,"div"),i.nrm(1,"ds-item-alerts",6)(2,"ds-qa-event-notification",6)(3,"ds-notify-requests-status",7)(4,"ds-item-versions-notice",6)(5,"ds-view-tracker",8),i.DNE(6,P,1,2,"ds-listable-object-component-loader",9),i.nI1(7,"async"),i.nrm(8,"ds-item-versions",10),i.k0s()),2&p){const r=G.ngIf,b=i.XpG(3);i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("itemUuid",r.uuid),i.R7$(),i.Y8G("item",r),i.R7$(),i.Y8G("object",r),i.R7$(),i.Y8G("ngIf",!r.isWithdrawn||i.bMT(7,8,b.isAdmin$)),i.R7$(2),i.Y8G("item",r)("displayActions",!1)}}function f(p,G){if(1&p&&(i.j41(0,"div",4),i.DNE(1,j,9,10,"div",5),i.k0s()),2&p){const r=i.XpG().ngVar;i.Y8G("@fadeInOut",void 0),i.R7$(),i.Y8G("ngIf",null==r?null:r.payload)}}function B(p,G){1&p&&(i.nrm(0,"ds-error",12),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"error.item"))}function V(p,G){1&p&&(i.nrm(0,"ds-loading",12),i.nI1(1,"translate")),2&p&&i.FS9("message",i.bMT(1,1,"loading.item"))}function J(p,G){if(1&p&&(i.j41(0,"div",1),i.DNE(1,f,2,2,"div",2)(2,B,2,3,"ds-error",3)(3,V,2,3,"ds-loading",3),i.k0s()),2&p){const r=G.ngVar;i.R7$(),i.Y8G("ngIf",null==r?null:r.hasSucceeded),i.R7$(),i.Y8G("ngIf",null==r?null:r.hasFailed),i.R7$(),i.Y8G("ngIf",null==r?null:r.isLoading)}}let Q=(()=>{class p{constructor(r,b,L,H,Y,w,at,rt,lt){this.route=r,this.router=b,this.items=L,this.authorizationService=H,this.responseService=Y,this.signpostingDataService=w,this.linkHeadService=at,this.notifyInfoService=rt,this.platformId=lt,this.viewMode=N.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,I.T)(r=>r.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,O.Hz)(),(0,I.T)(r=>(0,z._o)(r))),this.isAdmin$=this.authorizationService.isAuthorized(s._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(r=>{(0,u.z)([this.signpostingDataService.getLinks(r.id).pipe((0,R.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([b,L])=>{let H="";if(this.signpostingLinks=b,b.forEach(Y=>{H=H+((0,X.hj)(H)?", ":"")+`<${Y.href}> ; rel="${Y.rel}"`+((0,X.hj)(Y.type)?` ; type="${Y.type}" `:" ");let w={href:Y.href,rel:Y.rel};(0,X.hj)(Y.type)&&(w=Object.assign(w,{type:Y.type})),this.linkHeadService.addTag(w)}),L.length>0){const Y=this.initPageInboxLinks(L);H=H+((0,X.hj)(H)?", ":"")+Y}(0,v.Vy)(this.platformId)&&this.responseService.setHeader("Link",H)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,D.n)(r=>r?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,M.of)([])))}initPageInboxLinks(r){const b=this.notifyInfoService.getInboxRelationLink();let L="";return r.forEach(H=>{const Y={href:H,rel:b};this.inboxTags.push(Y),this.linkHeadService.addTag(Y),L=L+((0,X.hj)(L)?", ":"")+`<${H}> ; rel="${b}"`}),L}ngOnDestroy(){this.signpostingLinks.forEach(r=>{this.linkHeadService.removeTag(`href='${r.href}'`)}),this.inboxTags.forEach(r=>{this.linkHeadService.removeTag(`href='${r.href}'`)})}static#t=this.\u0275fac=function(b){return new(b||p)(i.rXU(k.nX),i.rXU(k.Ix),i.rXU($.ItemDataService),i.rXU(E.AuthorizationDataService),i.rXU(c.w),i.rXU(F.z),i.rXU(st.m),i.rXU(U.P),i.rXU(i.Agw))};static#e=this.\u0275cmp=i.VBU({type:p,selectors:[["ds-base-item-page"]],standalone:!0,features:[i.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"itemUuid"],[3,"object"],[3,"object","viewMode",4,"ngIf"],[1,"mt-2",3,"item","displayActions"],[3,"object","viewMode"],[3,"message"]],template:function(b,L){1&b&&(i.DNE(0,J,4,3,"div",0),i.nI1(1,"async")),2&b&&i.Y8G("ngVar",i.bMT(1,1,L.itemRD$))},dependencies:[l.r,W.R,q.s,h.H,e.v,it.I,S.A,m.v,g.h,g.D9,v.Jj,v.bT,t.x,et.f],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[y.Ws]},changeDetection:0})}return p})()},83671:(K,C,n)=>{"use strict";n.d(C,{x:()=>S});var v=n(54460),i=n(41483),g=n(47947),u=n(30238),M=n(12007),I=n(72683),R=n(69685),D=n(37362),U=n(93527),E=function(m){return m.ACCEPTED="ACCEPTED",m.REJECTED="REJECTED",m.REQUESTED="REQUESTED",m}(E||{}),s=n(53107);const $=m=>({"align-items-center":m}),F=(m,e,l)=>({serviceName:m,serviceUrl:e,offerType:l});function c(m,e){if(1&m&&(s.qex(0),s.nrm(1,"div",7),s.nI1(2,"translate"),s.bVm()),2&m){const l=e.$implicit,h=s.XpG(2);s.R7$(),s.Y8G("innerHTML",s.i5U(2,1,h.displayOptions.text,s.sMw(4,F,l.serviceName,l.serviceUrl,l.offerType)),s.npT)}}function O(m,e){if(1&m&&(s.qex(0),s.j41(1,"div",1),s.nrm(2,"img",2),s.j41(3,"ds-truncatable",3)(4,"ds-truncatable-part",4)(5,"div",5),s.DNE(6,c,3,8,"ng-container",6),s.k0s()()()(),s.bVm()),2&m){const l=s.XpG();s.R7$(),s.ZvI("alert d-flex flex-row sections-gap ",l.displayOptions.alertType,""),s.Y8G("ngClass",s.eq3(8,$,1===l.data.length)),s.R7$(2),s.Y8G("id",l.status),s.R7$(),s.Y8G("id",l.status)("minLines",1),s.R7$(2),s.Y8G("ngForOf",l.data)}}let N=(()=>{class m{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case E.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case E.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case E.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static#t=this.\u0275fac=function(h){return new(h||m)};static#e=this.\u0275cmp=s.VBU({type:m,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[s.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(h,W){1&h&&s.DNE(0,O,7,10,"ng-container",0),2&h&&s.Y8G("ngIf",(null==W.data?null:W.data.length)>0&&W.displayOptions)},dependencies:[v.bT,U.W,D.d,v.Sq,R.h,R.D9,v.YU],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return m})();function y(m,e){if(1&m&&(s.qex(0),s.nrm(1,"ds-request-status-alert-box",2),s.bVm()),2&m){const l=e.$implicit;s.R7$(),s.Y8G("status",l.key)("data",l.value)}}function X(m,e){if(1&m&&(s.qex(0),s.DNE(1,y,2,2,"ng-container",1),s.nI1(2,"async"),s.nI1(3,"keyvalue"),s.bVm()),2&m){const l=s.XpG();s.R7$(),s.Y8G("ngForOf",s.bMT(3,3,s.bMT(2,1,l.requestMap$)))}}let S=(()=>{class m{constructor(l){this.notifyInfoService=l}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,M.qD)(),(0,i.p)(l=>(0,I.a4)(l)),(0,M.Bo)(),(0,i.p)(l=>(0,I.a4)(l)),(0,g.T)(l=>this.groupDataByStatus(l)))}groupDataByStatus(l){const h=new Map;return l.notifyStatus?.forEach(W=>{const z=W.status;h.has(z)||h.set(z,[]),h.get(z)?.push(W)}),h}static#t=this.\u0275fac=function(h){return new(h||m)(s.rXU(u.NotifyRequestsStatusDataService))};static#e=this.\u0275cmp=s.VBU({type:m,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[s.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"status","data"]],template:function(h,W){if(1&h&&(s.DNE(0,X,4,5,"ng-container",0),s.nI1(1,"async")),2&h){let z;s.Y8G("ngIf",(null==(z=s.bMT(1,1,W.requestMap$))?null:z.size)>0)}},dependencies:[N,v.Jj,v.lG,v.Sq,v.bT],changeDetection:0})}return m})()},81146:(K,C,n)=>{"use strict";n.d(C,{f:()=>S});var v=n(54460),i=n(95968),g=n(69685),u=n(47947),M=n(17178),I=n(56405),R=n(99120),D=n(61441),E=(n(47376),n(12007)),s=n(53107);let $=(()=>{class m{transform(l,h){return l.split(h)}static#t=this.\u0275fac=function(h){return new(h||m)};static#e=this.\u0275pipe=s.EJ8({name:"dsSplit",type:m,pure:!0,standalone:!0})}return m})();const F=m=>({num:m}),c=(m,e,l)=>[m,e,"target",l],O=()=>({forward:!0});function N(m,e){if(1&m&&(s.j41(0,"div",3)(1,"div",4),s.nrm(2,"img",5),s.nI1(3,"dsSplit"),s.k0s(),s.j41(4,"div",6)(5,"div",7),s.EFF(6),s.nI1(7,"translate"),s.k0s(),s.j41(8,"button",8),s.nI1(9,"dsSplit"),s.EFF(10),s.nI1(11,"translate"),s.k0s()()()),2&m){const l=s.XpG().$implicit,h=s.XpG(2);s.R7$(2),s.Mz_("src","assets/images/qa-",s.i5U(3,8,l.id,":")[0],"-logo.png",s.B4B),s.Mz_("alt","",l.id," logo"),s.R7$(4),s.SpI(" ",s.i5U(7,11,"item.qa-event-notification.check.notification-info",s.eq3(19,F,l.totalEvents))," "),s.R7$(2),s.Y8G("routerLink",s.sMw(21,c,h.getQualityAssuranceRoute(),s.i5U(9,14,l.id,":")[0],h.item.id))("queryParams",s.lJ4(25,O)),s.R7$(2),s.SpI(" ",s.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function y(m,e){if(1&m&&(s.qex(0),s.DNE(1,N,12,26,"div",2),s.bVm()),2&m){const l=e.$implicit;s.R7$(),s.Y8G("ngIf",l.totalEvents>0)}}function X(m,e){if(1&m&&(s.qex(0),s.DNE(1,y,2,1,"ng-container",1),s.bVm()),2&m){const l=e.ngIf;s.R7$(),s.Y8G("ngForOf",l)}}let S=(()=>{class m{constructor(l){this.qualityAssuranceSourceDataService=l}ngOnChanges(l){l.item&&l.item.currentValue.uuid!==l.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const l={searchParams:[new R.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(l,!1).pipe((0,E.qD)(),(0,u.T)(h=>h.hasSucceeded?h.payload.page:[]),(0,M.W)(()=>[]))}getQualityAssuranceRoute(){return(0,I.b7)()}static#t=this.\u0275fac=function(h){return new(h||m)(s.rXU(D.QualityAssuranceSourceDataService))};static#e=this.\u0275cmp=s.VBU({type:m,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[s.Jv_([D.QualityAssuranceSourceDataService]),s.OA$,s.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","alert alert-info d-flex flex-row",4,"ngIf"],[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"pl-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(h,W){1&h&&(s.DNE(0,X,2,1,"ng-container",0),s.nI1(1,"async")),2&h&&s.Y8G("ngIf",s.bMT(1,1,W.sources$))},dependencies:[v.bT,v.Sq,v.Jj,i.Wk,g.h,g.D9,$],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}return m})()},32398:(K,C,n)=>{"use strict";n.d(C,{I:()=>Ut});var v=n(54460),i=n(10936),g=n(69685),u=n(71217),M=n(76627),I=n(22867),R=n(47947),D=n(30593),U=n(37610),E=n(84195),s=n(77304),$=n(36556),F=n(26041),c=n(35130),O=n(95438),y=(n(47376),n(12007)),X=n(96858),S=n(16700),m=n(72683),e=n(79224),l=n(51661),h=n(67899),W=n(63496),z=n(24106),it=n(63524),q=n(15497),t=n(53107),et=n(95968),k=n(63016),st=n(81459),P=n(27035),j=n(82040),f=n(17584),V=(n(86429),n(91427)),J=n(71779),Q=n(2155);const p=a=>({version:a});let G=(()=>{class a{constructor(o){this.activeModal=o,this.response=new t.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static#t=this.\u0275fac=function(_){return new(_||a)(t.rXU(Q.Lw))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[t.aNF],decls:22,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(_,d){1&_&&(t.j41(0,"div")(1,"div",0),t.EFF(2),t.nI1(3,"translate"),t.j41(4,"button",1),t.bIt("click",function(){return d.onModalClose()}),t.j41(5,"span",2),t.EFF(6,"\xd7"),t.k0s()()(),t.j41(7,"div",3)(8,"p",4),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"div",5)(12,"button",6),t.nI1(13,"translate"),t.bIt("click",function(){return d.onModalClose()}),t.nrm(14,"i",7),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"button",8),t.nI1(18,"translate"),t.bIt("click",function(){return d.onModalSubmit()}),t.nrm(19,"i",9),t.EFF(20),t.nI1(21,"translate"),t.k0s()()()),2&_&&(t.R7$(2),t.SpI("",t.bMT(3,6,"item.version.delete.modal.header")," "),t.R7$(7),t.JRh(t.i5U(10,8,"item.version.delete.modal.text",t.eq3(19,p,d.versionNumber))),t.R7$(3),t.FS9("title",t.bMT(13,11,"item.version.delete.modal.button.cancel.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(16,13,"item.version.delete.modal.button.cancel")," "),t.R7$(2),t.FS9("title",t.bMT(18,15,"item.version.delete.modal.button.confirm.tooltip")),t.R7$(3),t.SpI(" ",t.bMT(21,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[g.h,g.D9]})}return a})();var r=n(45830),b=n(89788);function L(a,A){1&a&&t.nrm(0,"span")}function H(a,A){if(1&a&&(t.j41(0,"a",9),t.EFF(1),t.k0s()),2&a){const o=t.XpG();t.Y8G("routerLink",o.getVersionRoute(o.version.id)),t.R7$(),t.JRh(o.version.version)}}function Y(a,A){if(1&a&&t.EFF(0),2&a){const o=t.XpG();t.SpI(" ",o.version.version," ")}}function w(a,A){1&a&&(t.j41(0,"span"),t.EFF(1,"*"),t.k0s())}function at(a,A){1&a&&(t.j41(0,"span",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function rt(a,A){1&a&&(t.j41(0,"span",11),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"item.version.history.table.workflowItem")," "))}function lt(a,A){if(1&a){const o=t.RV6();t.j41(0,"button",14),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(2);return t.Njj(d.editWorkspaceItem(d.workspaceId$))}),t.nrm(2,"i",15),t.k0s()}2&a&&t.FS9("title",t.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function _t(a,A){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",16),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(2);return t.Njj(d.createNewVersion(d.version))}),t.nrm(3,"i",17),t.k0s(),t.bVm()}if(2&a){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,2,o.createVersionTitle)),t.Y8G("disabled",o.isAnyBeingEdited()||o.hasDraftVersion)}}function mt(a,A){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",18),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(2);return t.Njj(d.deleteVersion(d.version,d.version.id===d.itemVersion.id))}),t.nrm(3,"i",19),t.k0s(),t.bVm()}if(2&a){const o=t.XpG(2);t.R7$(),t.FS9("title",t.bMT(2,3,"item.version.history.table.action.deleteVersion")),t.Y8G("ngClass",o.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("disabled",o.isAnyBeingEdited())}}function pt(a,A){if(1&a&&(t.j41(0,"div",12),t.DNE(1,lt,3,3,"button",13),t.nI1(2,"async"),t.DNE(3,_t,4,4,"ng-container",4),t.nI1(4,"async"),t.DNE(5,mt,4,5,"ng-container",4),t.nI1(6,"async"),t.k0s()),2&a){const o=t.XpG();t.R7$(),t.Y8G("ngIf",t.bMT(2,3,o.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(4,5,o.canCreateVersion$)),t.R7$(2),t.Y8G("ngIf",t.bMT(6,7,o.canDeleteVersion$))}}let vt=(()=>{class a{constructor(o,_,d,T,x,Z,ot,ct,tt,nt,dt){this.workspaceItemDataService=o,this.workflowItemDataService=_,this.router=d,this.itemService=T,this.authorizationService=x,this.itemVersionShared=Z,this.versionHistoryService=ot,this.versionService=ct,this.notificationsService=tt,this.translateService=nt,this.modalService=dt,this.versionsHistoryChange=new t.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized($._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(o){return this.hasDraftVersion?o.pipe((0,y.ak)(),(0,R.T)(_=>_.uuid),(0,I.n)(_=>this.workspaceItemDataService.findByItem(_,!0)),(0,y.qD)(),(0,R.T)(_=>_?.payload?.id)):(0,k.of)(void 0)}getWorkflowId(o){return this.getWorkspaceId(o).pipe((0,st.H)(_=>_?(0,k.of)(void 0):o.pipe((0,y.ak)(),(0,R.T)(d=>d.uuid),(0,I.n)(d=>this.workflowItemDataService.findByItem(d,!0)),(0,y.qD)(),(0,R.T)(d=>d?.payload?.id))))}editWorkspaceItem(o){o.subscribe(_=>{this.router.navigateByUrl("workspaceitems/"+_+"/edit")})}canDeleteVersion(o){return this.authorizationService.isAuthorized($._.CanDeleteVersion,o.self)}getVersionRoute(o){return(0,q.vf)(o)}createNewVersion(o){const _=o.version,d=this.modalService.open(b.L);d.componentInstance.versionNumber=_,d.componentInstance.createVersionEvent.pipe((0,P.Z)(T=>(0,M.z)([(0,k.of)(T),o.item.pipe((0,y.ak)())])),(0,P.Z)(([T,x])=>this.versionHistoryService.createVersion(x._links.self.href,T)),(0,y.qD)(),(0,j.M)(()=>d.close()),(0,j.M)(T=>{if(this.itemVersionShared.notifyCreateNewVersion(T),T.hasSucceeded){const x=this.versionService.getHistoryFromVersion(o).pipe((0,j.M)(Z=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(Z.id)}));this.versionsHistoryChange.emit(x)}}),(0,y.ak)(),(0,I.n)(T=>this.itemService.findByHref(T._links.item.href)),(0,y.ak)(),(0,I.n)(T=>this.workspaceItemDataService.findByItem(T.uuid,!0,!1)),(0,y.ak)()).subscribe(T=>{this.router.navigateByUrl("workspaceitems/"+T.id+"/edit")})}deleteVersion(o,_){const x=o.version,Z=o.item,ot=this.modalService.open(G);ot.componentInstance.versionNumber=o.version,ot.componentInstance.firstVersion=!1,ot.componentInstance.response.pipe((0,U.s)(1)).subscribe(ct=>{ct&&Z.pipe((0,y.ak)(),(0,P.Z)(tt=>(0,M.z)([(0,k.of)(tt),this.versionHistoryService.getVersionHistoryFromVersion$(o)])),(0,P.Z)(([tt,nt])=>(0,M.z)([this.deleteItemAndGetResult$(tt),(0,k.of)(nt)])),(0,P.Z)(([tt,nt])=>(0,M.z)([(0,k.of)(tt),this.versionHistoryService.getLatestVersionItemFromHistory$(nt).pipe((0,j.M)(()=>{this.versionsHistoryChange.emit((0,k.of)(nt))}))]))).subscribe(([tt,nt])=>{if(tt?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:x})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:x})),_){const dt=(0,q.nF)(nt);this.router.navigateByUrl(dt)}})})}deleteItemAndGetResult$(o){return this.itemService.delete(o.id).pipe((0,y.qD)(),(0,R.T)(_=>_.hasSucceeded),(0,U.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static#t=this.\u0275fac=function(_){return new(_||a)(t.rXU(J.WorkspaceitemDataService),t.rXU(V.WorkflowItemDataService),t.rXU(et.Ix),t.rXU(f.ItemDataService),t.rXU(s.AuthorizationDataService),t.rXU(r.h),t.rXU(c.VersionHistoryDataService),t.rXU(F.VersionDataService),t.rXU(e.I),t.rXU(g.c$),t.rXU(Q.Bq))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[t.aNF],decls:15,vars:15,consts:[["versionNumberWithLink",""],["versionNumberWithoutLink",""],[1,"left-column"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf"],["class","text-light badge badge-primary ml-3",4,"ngIf"],["class","text-light badge badge-info ml-3",4,"ngIf"],[1,"right-column"],["class","btn-group edit-field space-children-mr",4,"ngIf"],[3,"routerLink"],[1,"text-light","badge","badge-primary","ml-3"],[1,"text-light","badge","badge-info","ml-3"],[1,"btn-group","edit-field","space-children-mr"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","disabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","disabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(_,d){if(1&_&&(t.j41(0,"div",2),t.DNE(1,L,1,0,"span",3),t.nI1(2,"async"),t.nI1(3,"async"),t.DNE(4,H,2,2,"ng-template",null,0,t.C5r)(6,Y,1,1,"ng-template",null,1,t.C5r)(8,w,2,0,"span",4)(9,at,3,3,"span",5),t.nI1(10,"async"),t.DNE(11,rt,3,3,"span",6),t.nI1(12,"async"),t.k0s(),t.j41(13,"div",7),t.DNE(14,pt,7,9,"div",8),t.k0s()),2&_){const T=t.sdS(5),x=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,7,d.workspaceId$)||t.bMT(3,9,d.workflowId$))("ngIfThen",x)("ngIfElse",T),t.R7$(7),t.Y8G("ngIf",(null==d.version?null:d.version.id)===(null==d.itemVersion?null:d.itemVersion.id)),t.R7$(),t.Y8G("ngIf",t.bMT(10,11,d.workspaceId$)),t.R7$(2),t.Y8G("ngIf",t.bMT(12,13,d.workflowId$)),t.R7$(3),t.Y8G("ngIf",d.displayActions)}},dependencies:[v.Jj,et.Wk,g.h,g.D9,v.YU,v.bT],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}return a})();const ut=a=>({version:a});function gt(a,A){1&a&&(t.j41(0,"h2",9),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.head")))}function ft(a,A){if(1&a&&(t.j41(0,"ds-alert",10),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a){const o=t.XpG(2).ngVar,_=t.XpG(2);t.Y8G("type",_.AlertTypeEnum.Info),t.R7$(),t.SpI(" ",t.i5U(2,2,"item.version.history.selected.alert",t.eq3(5,ut,o.version))," ")}}function ht(a,A){1&a&&(t.j41(0,"th",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"item.version.history.table.editor")))}function Et(a,A){if(1&a&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&a){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==o?null:o.submitterName," ")}}function It(a,A){1&a&&t.eu8(0)}function Dt(a,A){if(1&a&&t.EFF(0),2&a){const o=t.XpG().$implicit;t.JRh(null==o?null:o.summary)}}function Mt(a,A){if(1&a){const o=t.RV6();t.j41(0,"input",26),t.nI1(1,"translate"),t.mxI("ngModelChange",function(d){t.eBV(o);const T=t.XpG(6);return t.DH7(T.versionBeingEditedSummary,d)||(T.versionBeingEditedSummary=d),t.Njj(d)}),t.bIt("keyup.enter",function(){t.eBV(o);const d=t.XpG(6);return t.Njj(d.onSummarySubmit())}),t.k0s()}if(2&a){const o=t.XpG(6);t.R50("ngModel",o.versionBeingEditedSummary),t.BMQ("aria-label",t.bMT(1,2,"item.version.history.table.action.editSummary"))}}function Tt(a,A){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"button",29),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(7);return t.Njj(d.disableVersionEditing())}),t.nrm(3,"i",30),t.k0s(),t.bVm()}if(2&a){const o=t.XpG(2).$implicit,_=t.XpG(5);t.R7$(),t.FS9("title",t.bMT(2,2,"item.version.history.table.action.discardSummary")),t.Y8G("ngClass",_.isThisBeingEdited(o)?"btn-outline-warning":"btn-outline-primary")}}function Rt(a,A){if(1&a){const o=t.RV6();t.j41(0,"button",33),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(3).$implicit,T=t.XpG(5);return t.Njj(T.enableVersionEditing(d))}),t.nrm(2,"i",34),t.k0s()}if(2&a){const o=t.XpG(8);t.FS9("title",t.bMT(1,2,"item.version.history.table.action.editSummary")),t.Y8G("disabled",o.isAnyBeingEdited())}}function Pt(a,A){if(1&a){const o=t.RV6();t.j41(0,"button",35),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(o);const d=t.XpG(8);return t.Njj(d.onSummarySubmit())}),t.nrm(2,"i",36),t.k0s()}2&a&&t.FS9("title",t.bMT(1,1,"item.version.history.table.action.saveSummary"))}function yt(a,A){if(1&a&&(t.qex(0),t.DNE(1,Rt,3,4,"button",31)(2,Pt,3,3,"button",32),t.bVm()),2&a){const o=t.XpG(2).$implicit,_=t.XpG(5);t.R7$(),t.Y8G("ngIf",!_.isThisBeingEdited(o)),t.R7$(),t.Y8G("ngIf",_.isThisBeingEdited(o))}}function Ot(a,A){if(1&a&&(t.j41(0,"div",27),t.DNE(1,Tt,4,4,"ng-container",28),t.nI1(2,"async"),t.DNE(3,yt,3,2,"ng-container",28),t.nI1(4,"async"),t.k0s()),2&a){const o=t.XpG().$implicit,_=t.XpG(5);t.R7$(),t.Y8G("ngIf",t.bMT(2,2,_.canEditVersion$(o))&&_.isThisBeingEdited(o)),t.R7$(2),t.Y8G("ngIf",t.bMT(4,4,_.canEditVersion$(o)))}}function Ct(a,A){if(1&a){const o=t.RV6();t.j41(0,"tr",16)(1,"td",17)(2,"ds-item-versions-row-element-version",18),t.nI1(3,"async"),t.bIt("versionsHistoryChange",function(d){t.eBV(o);const T=t.XpG(5);return t.Njj(T.getAllVersions(d))}),t.k0s()(),t.DNE(4,Et,2,1,"td",19),t.nI1(5,"async"),t.j41(6,"td",20),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"td",21)(10,"div",22),t.DNE(11,It,1,0,"ng-container",23)(12,Dt,1,1,"ng-template",null,0,t.C5r)(14,Mt,2,4,"ng-template",null,1,t.C5r),t.k0s(),t.DNE(16,Ot,5,6,"div",24),t.k0s()()}if(2&a){const o=A.$implicit,_=t.sdS(13),d=t.sdS(15),T=t.XpG(3).ngVar,x=t.XpG(2);t.Y8G("id","version-row-"+o.id),t.R7$(2),t.Y8G("hasDraftVersion",t.bMT(3,13,x.hasDraftVersion$))("version",o)("item",x.item)("displayActions",x.displayActions)("itemVersion",T)("versionBeingEditedNumber",x.versionBeingEditedNumber),t.R7$(2),t.Y8G("ngIf",t.bMT(5,15,x.showSubmitter$)),t.R7$(3),t.SpI(" ",t.i5U(8,17,null==o?null:o.created,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.Y8G("ngIf",x.isThisBeingEdited(o))("ngIfThen",d)("ngIfElse",_),t.R7$(5),t.Y8G("ngIf",x.displayActions)}}function St(a,A){if(1&a){const o=t.RV6();t.j41(0,"ds-pagination",11),t.bIt("paginationChange",function(){t.eBV(o);const d=t.XpG(4);return t.Njj(d.onPageChange())}),t.j41(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.DNE(7,ht,3,3,"th",14),t.nI1(8,"async"),t.j41(9,"th",13),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th",13),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,Ct,17,20,"tr",15),t.k0s()(),t.j41(17,"div"),t.EFF(18),t.nI1(19,"translate"),t.k0s()()}if(2&a){const o=t.XpG(3).ngVar,_=t.XpG();t.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",_.options)("collectionSize",null==o?null:o.totalElements)("retainScrollPosition",!0),t.R7$(5),t.JRh(t.bMT(6,11,"item.version.history.table.version")),t.R7$(2),t.Y8G("ngIf",t.bMT(8,13,_.showSubmitter$)),t.R7$(3),t.JRh(t.bMT(11,15,"item.version.history.table.date")),t.R7$(3),t.JRh(t.bMT(14,17,"item.version.history.table.summary")),t.R7$(3),t.Y8G("ngForOf",null==o?null:o.page),t.R7$(2),t.SpI("*\xa0",t.bMT(19,19,"item.version.history.selected"),"")}}function bt(a,A){if(1&a&&t.nrm(0,"ds-alert",37),2&a){const o=t.XpG(4);t.Y8G("content","item.version.history.empty")("type",o.AlertTypeEnum.Info)}}function $t(a,A){if(1&a&&(t.j41(0,"div",4),t.DNE(1,gt,3,3,"h2",5)(2,ft,3,7,"ds-alert",6)(3,St,20,21,"ds-pagination",7)(4,bt,1,2,"ds-alert",8),t.k0s()),2&a){const o=t.XpG().ngVar,_=t.XpG().ngVar,d=t.XpG();t.R7$(),t.Y8G("ngIf",d.displayTitle),t.R7$(),t.Y8G("ngIf",o),t.R7$(),t.Y8G("ngIf",(null==_||null==_.page?null:_.page.length)>0),t.R7$(),t.Y8G("ngIf",!o||0===(null==_||null==_.page?null:_.page.length))}}function Bt(a,A){if(1&a&&(t.j41(0,"div"),t.DNE(1,$t,5,4,"div",3),t.k0s()),2&a){const o=t.XpG().ngVar,_=t.XpG();t.R7$(),t.Y8G("ngIf",(null==o||null==o.page?null:o.page.length)>0||_.displayWhenEmpty)}}function At(a,A){if(1&a&&(t.j41(0,"div"),t.DNE(1,Bt,2,1,"div",2),t.nI1(2,"async"),t.k0s()),2&a){let o;const _=t.XpG();t.R7$(),t.Y8G("ngVar",null==(o=t.bMT(2,1,_.versionRD$))?null:o.payload)}}let Ut=(()=>{class a{constructor(o,_,d,T,x,Z,ot){this.versionHistoryService=o,this.versionService=_,this.paginationService=d,this.notificationsService=T,this.translateService=x,this.authorizationService=Z,this.configurationService=ot,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=S.v,this.versionsRD$=new u.t(null),this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new h.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(o){return o?.version===this.versionBeingEditedNumber}enableVersionEditing(o){this.versionBeingEditedSummary=o?.summary,this.versionBeingEditedNumber=o?.version,this.versionBeingEditedId=o?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,y.yd)(),(0,I.n)(d=>{const Z=Object.assign({},d.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(Z).pipe((0,y.qD)())})).subscribe(d=>{d.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(o){return this.authorizationService.isAuthorized($._.CanEditVersion,o.self)}showSubmitter(){const o=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,y.ak)(),(0,R.T)(d=>d.values[0]),(0,D.Z)(!1)),_=(0,M.z)([this.authorizationService.isAuthorized($._.IsCollectionAdmin),this.authorizationService.isAuthorized($._.IsCommunityAdmin),this.authorizationService.isAuthorized($._.AdministratorOf)]).pipe((0,R.T)(([d,T,x])=>d||T||x),(0,U.s)(1));return(0,M.z)([o,_]).pipe((0,R.T)(([d,T])=>d&&T))}getAllVersions(o){const _=this.paginationService.getCurrentPagination(this.options.id,this.options);(0,M.z)([o,_]).pipe((0,I.n)(([d,T])=>this.versionHistoryService.getVersions(d.id,new W.C({pagination:Object.assign({},T,{currentPage:T.currentPage})}),!1,!0,(0,z.s)("item"),(0,z.s)("eperson"))),(0,y.qD)()).subscribe(d=>{this.versionsRD$.next(d)})}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,m.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,y.v7)(),(0,y.Bo)(),(0,m.Az)(),(0,I.n)(o=>o.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,y.ak)(),(0,m.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,y.ak)(),(0,R.T)(o=>!!o?.draftVersion)),this.getAllVersions(this.versionHistory$),this.hasEpersons$=this.versionsRD$.pipe((0,y.v7)(),(0,y.Bo)(),(0,m.Az)(),(0,R.T)(o=>o.page.filter(_=>void 0!==_.eperson).length>0),(0,D.Z)(!1)),this.itemPageRoutes$=this.versionsRD$.pipe((0,y.Hz)(),(0,I.n)(o=>(0,M.z)(o.page.map(_=>_.item.pipe((0,y.Hz)())))),(0,R.T)(o=>{const _={};return o.forEach(d=>_[d.uuid]=(0,q._o)(d)),_})))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(o=>(0,m.a4)(o)).forEach(o=>o.unsubscribe())}static#t=this.\u0275fac=function(_){return new(_||a)(t.rXU(c.VersionHistoryDataService),t.rXU(F.VersionDataService),t.rXU(O.m),t.rXU(e.I),t.rXU(g.c$),t.rXU(s.AuthorizationDataService),t.rXU(E.ConfigurationDataService))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["showSummary",""],["editSummary",""],[4,"ngVar"],["class","mb-2",4,"ngIf"],[1,"mb-2"],["class","h4",4,"ngIf"],[3,"type",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition","paginationChange",4,"ngIf"],[3,"content","type",4,"ngIf"],[1,"h4"],[3,"type"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],["scope","col",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],["class","version-row-element-editor",4,"ngIf"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-left"],[4,"ngIf","ngIfThen","ngIfElse"],["class","float-right btn-group edit-field space-children-mr",4,"ngIf"],[1,"version-row-element-editor"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"float-right","btn-group","edit-field","space-children-mr"],[4,"ngIf"],[1,"btn","btn-sm",3,"click","ngClass","title"],[1,"fas","fa-undo-alt","fa-fw"],["class","btn btn-outline-primary btn-sm version-row-element-edit",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","disabled","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[3,"content","type"]],template:function(_,d){if(1&_&&(t.DNE(0,At,3,3,"div",2),t.nI1(1,"async")),2&_){let T;t.Y8G("ngVar",null==(T=t.bMT(1,1,d.versionsRD$))?null:T.payload)}},dependencies:[it.r,v.bT,X.C,l.e,v.pM,v.YU,i.YN,i.me,i.BC,i.vS,v.Jj,v.vh,g.h,g.D9,vt]})}return a})()},89940:(K,C,n)=>{"use strict";n.d(C,{s:()=>X});var v=n(54460),i=n(69685),g=n(76564),u=n(63016),M=n(22867),I=n(47947),R=n(30593),D=n(35130),E=(n(47376),n(12007)),s=n(96858),$=n(16700),F=n(72683),c=n(15497),O=n(53107);const N=S=>({destination:S});function y(S,m){if(1&S&&(O.nrm(0,"ds-alert",1),O.nI1(1,"async"),O.nI1(2,"async"),O.nI1(3,"translate")),2&S){let e;const l=O.XpG();O.Y8G("content",O.i5U(3,7,"item.version.notice",O.eq3(10,N,l.getItemPage(null==(e=O.bMT(2,5,null==(e=O.bMT(1,3,l.latestVersion$))?null:e.item))?null:e.payload))))("dismissible",!1)("type",l.AlertTypeEnum.Warning)}}let X=(()=>{class S{constructor(e){this.versionHistoryService=e,this.AlertTypeEnum=$.v}ngOnInit(){(0,F.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,E.v7)(),(0,E.Bo)(),(0,F.Az)(),(0,M.n)(e=>e.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,E.qD)(),(0,M.n)(e=>e.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(e.payload):g.w)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,E.qD)(),(0,M.n)(e=>e.hasSucceeded?this.versionHistoryService.isLatest$(e.payload).pipe((0,I.T)(l=>null!=l&&!l)):(0,u.of)(!1)),(0,R.Z)(!1)))}getItemPage(e){if((0,F.a4)(e))return(0,c._o)(e)}static#t=this.\u0275fac=function(l){return new(l||S)(O.rXU(D.VersionHistoryDataService))};static#e=this.\u0275cmp=O.VBU({type:S,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[O.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type",4,"ngIf"],[3,"content","dismissible","type"]],template:function(l,h){1&l&&(O.DNE(0,y,4,12,"ds-alert",0),O.nI1(1,"async")),2&l&&O.Y8G("ngIf",!0===O.bMT(1,1,h.showLatestVersionNotice$))},dependencies:[v.bT,s.C,v.Jj,i.h,i.D9],encapsulation:2})}return S})()},89096:(K,C,n)=>{"use strict";n.d(C,{H:()=>R});var v=n(37610),g=(n(47587),n(72683)),u=n(53107),M=n(80687),I=n(59153);let R=(()=>{class D{constructor(E,s){this.angulartics2=E,this.referrerService=s}ngOnInit(){this.sub=this.referrerService.getReferrer().pipe((0,v.s)(1)).subscribe(E=>{this.angulartics2.eventTrack.next({action:"page_view",properties:{object:this.object,referrer:E}})})}ngOnDestroy(){(0,g.a4)(this.sub)&&this.sub.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||D)(u.rXU(M.il),u.rXU(I.f))};static#e=this.\u0275cmp=u.VBU({type:D,selectors:[["ds-view-tracker"]],inputs:{object:"object"},standalone:!0,features:[u.aNF],decls:1,vars:0,template:function(s,$){1&s&&u.EFF(0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})}return D})()},42176:(K,C,n)=>{var v={"./custom/app/item-page/alerts/item-alerts.component":[30041,41]};function i(g){if(!n.o(v,g))return Promise.resolve().then(()=>{var I=new Error("Cannot find module '"+g+"'");throw I.code="MODULE_NOT_FOUND",I});var u=v[g],M=u[0];return n.e(u[1]).then(()=>n(M))}i.keys=()=>Object.keys(v),i.id=42176,K.exports=i},63614:(K,C,n)=>{var v={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[66333,6333]};function i(g){if(!n.o(v,g))return Promise.resolve().then(()=>{var I=new Error("Cannot find module '"+g+"'");throw I.code="MODULE_NOT_FOUND",I});var u=v[g],M=u[0];return n.e(u[1]).then(()=>n(M))}i.keys=()=>Object.keys(v),i.id=63614,K.exports=i},4872:(K,C,n)=>{var v={"./custom/app/item-page/full/full-item-page.component":[39623,9623]};function i(g){if(!n.o(v,g))return Promise.resolve().then(()=>{var I=new Error("Cannot find module '"+g+"'");throw I.code="MODULE_NOT_FOUND",I});var u=v[g],M=u[0];return n.e(u[1]).then(()=>n(M))}i.keys=()=>Object.keys(v),i.id=4872,K.exports=i}}]);