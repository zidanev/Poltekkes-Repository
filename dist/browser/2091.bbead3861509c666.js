"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[2091],{32091:(Z,x,a)=>{a.r(x),a.d(x,{ROUTES:()=>Q});var h=a(32588),b=a(12720),v=a(53527),l=a(54460),m=a(95968),r=a(69685),T=a(71217),I=a(82653),p=a(47947),N=a(18062),$=a(12007),j=a(67811),u=a(3631),f=a(82506),M=a(67899),k=a(63496),g=a(88842),S=a(31635),t=a(53107),E=a(77789),B=a(64556),J=a(50999);const Y=i=>({"background-color":i}),G=i=>({color:i});function O(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",1),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.onClick(e.boxConfig))}),t.j41(2,"div",2)(3,"div",3),t.EFF(4),t.k0s(),t.j41(5,"div",4),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()}if(2&i){let n;const o=t.XpG();t.Y8G("ngStyle",t.eq3(10,Y,o.boxConfig.color))("dsHoverClass","shadow-lg")("title",t.bMT(1,6,o.boxConfig.description)),t.R7$(2),t.Y8G("ngStyle",t.eq3(12,G,o.boxConfig.textColor)),t.R7$(2),t.JRh(null!==(n=o.boxConfig.count)&&void 0!==n?n:0),t.R7$(2),t.JRh(t.bMT(7,8,o.boxConfig.title))}}let y=class C{constructor(){this.selectedBoxConfig=new t.bkB}onClick(c){this.selectedBoxConfig.emit(c.config)}static#t=this.\u0275fac=function(n){return new(n||C)};static#n=this.\u0275cmp=t.VBU({type:C,selectors:[["ds-notification-box"]],inputs:{boxConfig:"boxConfig"},outputs:{selectedBoxConfig:"selectedBoxConfig"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["role","button","class","w-100 h-100 pt-4 pb-3 px-2 box-container",3,"ngStyle","dsHoverClass","title","click",4,"ngIf"],["role","button",1,"w-100","h-100","pt-4","pb-3","px-2","box-container",3,"click","ngStyle","dsHoverClass","title"],[1,"d-flex","flex-column","justify-content-center","align-items-center",3,"ngStyle"],[1,"mb-3","font-weight-bold","box-counter"],[1,"font-weight-bold","d-flex","justify-content-center","w-100"]],template:function(n,o){1&n&&t.DNE(0,O,8,14,"div",0),2&n&&t.Y8G("ngIf",o.boxConfig)},dependencies:[l.B3,B.k,r.h,r.D9,l.bT],styles:[".box-container[_ngcontent-%COMP%]{min-width:max-content}.box-counter[_ngcontent-%COMP%]{font-size:calc(var(--bs-font-size-lg) * 1.5)}"]})};function P(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",5)(1,"ds-notification-box",6),t.bIt("selectedBoxConfig",function(e){t.eBV(n);const s=t.XpG(2);return t.Njj(s.navigateToSelectedSearchConfig(e))}),t.k0s()()}if(2&i){const n=c.$implicit;t.R7$(),t.Y8G("boxConfig",n)}}function U(i,c){if(1&i&&(t.j41(0,"div",1)(1,"div",2),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",3),t.DNE(5,P,2,1,"div",4),t.k0s()()),2&i){const n=c.$implicit;t.R7$(2),t.JRh(t.bMT(3,2,n.title)),t.R7$(3),t.Y8G("ngForOf",n.boxes)}}y=(0,S.Cg)([(0,J.VK)(E.o,g.n.ListElement)],y);let A=(()=>{class i{constructor(n){this.router=n,this.incomingConfiguration="NOTIFY.incoming",this.involvedItemsSuffix="involvedItems",this.inboundPath="/inbound",this.outboundPath="/outbound",this.adminSearchPath="/admin/search"}navigateToSelectedSearchConfig(n){if(n.endsWith(this.involvedItemsSuffix))return void this.router.navigate([this.adminSearchPath],{queryParams:{configuration:n,view:g.n.ListElement}});const s=n.startsWith(this.incomingConfiguration)?this.inboundPath:this.outboundPath;this.router.navigate([`${this.router.url}${s}`],{queryParams:{configuration:n,view:g.n.Table}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(m.Ix))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["ds-admin-notify-metrics"]],inputs:{boxesConfig:"boxesConfig"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["class","mb-5",4,"ngFor","ngForOf"],[1,"mb-5"],[1,"mb-2"],[1,"row","justify-content-between"],["class","col-sm",4,"ngFor","ngForOf"],[1,"col-sm"],[3,"selectedBoxConfig","boxConfig"]],template:function(o,e){1&o&&t.DNE(0,U,6,4,"div",0),2&o&&t.Y8G("ngForOf",e.boxesConfig)},dependencies:[y,r.h,r.D9,l.Sq],encapsulation:2})}return i})();const R=()=>({view:"table"});function L(i,c){if(1&i&&(t.nrm(0,"ds-admin-notify-metrics",11),t.nI1(1,"async")),2&i){const n=t.XpG();t.Y8G("boxesConfig",t.bMT(1,1,n.notifyMetricsRows$))}}let D=(()=>{class i{constructor(n,o){this.appConfig=n,this.searchService=o,this.notifyMetricsRows$=new T.t([]),this.singleResultOptions=Object.assign(new M.W,{id:"single-result-options",pageSize:1})}ngOnInit(){this.metricsConfig=this.appConfig.notifyMetrics;const n=this.metricsConfig.map(s=>s.boxes).map(s=>s.map(d=>d.config).filter(d=>!!d)),e=[].concat(...n.map(s=>s)).map(s=>Object.assign(new k.C({}),{configuration:s,pagination:this.singleResultOptions}));(0,I.p)(e.map(s=>this.searchService.search(s).pipe((0,$.qD)(),(0,p.T)(d=>this.mapSearchObjectsToMetricsBox(s.configuration,d.payload))))).pipe((0,p.T)(s=>this.mapUpdatedBoxesToMetricsRows(s))).subscribe(s=>{this.notifyMetricsRows$.next(s)})}mapSearchObjectsToMetricsBox(n,o){const e=o.pageInfo.totalElements;return{...[].concat(...this.metricsConfig.map(d=>d.boxes)).find(d=>d.config===n),count:e}}mapUpdatedBoxesToMetricsRows(n){return this.metricsConfig.map(o=>({...o,boxes:o.boxes.map(e=>n.find(s=>s.config===e.config))}))}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(N.vQ),t.rXU(j.S))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["ds-admin-notify-dashboard"]],standalone:!0,features:[t.Jv_([{provide:f.EN,useClass:u.g}]),t.aNF],decls:26,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"my-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","active"],[1,"nav-link",3,"routerLink","queryParams"],[1,"mt-2"],[3,"boxesConfig",4,"ngIf"],[3,"boxesConfig"]],template:function(o,e){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",4),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"div")(10,"ul",5)(11,"li",6)(12,"a",7),t.EFF(13),t.nI1(14,"translate"),t.k0s()(),t.j41(15,"li",6)(16,"a",8),t.EFF(17),t.nI1(18,"translate"),t.k0s()(),t.j41(19,"li",6)(20,"a",8),t.EFF(21),t.nI1(22,"translate"),t.k0s()()(),t.j41(23,"div",9),t.DNE(24,L,2,3,"ds-admin-notify-metrics",10),t.nI1(25,"async"),t.k0s()()()()()),2&o){let s;t.R7$(4),t.JRh(t.bMT(5,10,"admin-notify-dashboard.title")),t.R7$(3),t.JRh(t.bMT(8,12,"admin-notify-dashboard.description")),t.R7$(6),t.JRh(t.bMT(14,14,"admin-notify-dashboard.metrics")),t.R7$(3),t.Y8G("routerLink","inbound")("queryParams",t.lJ4(22,R)),t.R7$(),t.JRh(t.bMT(18,16,"admin.notify.dashboard.inbound-logs")),t.R7$(3),t.Y8G("routerLink","outbound")("queryParams",t.lJ4(23,R)),t.R7$(),t.JRh(t.bMT(22,18,"admin.notify.dashboard.outbound-logs")),t.R7$(3),t.Y8G("ngIf",null==(s=t.bMT(25,20,e.notifyMetricsRows$))?null:s.length)}},dependencies:[A,m.Wk,l.bT,r.h,r.D9,l.Jj],encapsulation:2})}return i})();var w=a(71526),V=a(77822),X=a(63226);function W(i,c){if(1&i){const n=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.resetDefaultConfiguration())}),t.EFF(1),t.nI1(2,"async"),t.nI1(3,"translate"),t.j41(4,"span"),t.EFF(5," \xd7"),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(),t.SpI(" ",t.bMT(3,3,"admin-notify-logs."+t.bMT(2,1,n.selectedSearchConfig$))," ")}}let F=(()=>{class i{constructor(n,o,e){this.searchConfigService=n,this.router=o,this.route=e,this.context=w.o.CoarNotify}ngOnInit(){this.selectedSearchConfig$=this.searchConfigService.getCurrentConfiguration(this.defaultConfiguration),this.isInbound$=this.selectedSearchConfig$.pipe((0,p.T)(n=>n.startsWith("NOTIFY.incoming")))}resetDefaultConfiguration(){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([this.getResolvedUrl(this.route.snapshot)],{queryParams:{configuration:this.defaultConfiguration,view:g.n.Table}})})}getResolvedUrl(n){return n.pathFromRoot.map(o=>o.url.map(e=>e.toString()).join("/")).join("/")}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(f.EN),t.rXU(m.Ix),t.rXU(m.nX))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["ds-admin-notify-logs-result"]],inputs:{defaultConfiguration:"defaultConfiguration"},standalone:!0,features:[t.Jv_([{provide:f.EN,useClass:u.g}]),t.aNF],decls:14,vars:15,consts:[[1,"container","my-4"],[1,"row"],[1,"col-12","col-md-3","text-left","h4"],[1,"col-md-9"],[1,"h4"],["class","badge badge-primary mr-1 mb-1",3,"click",4,"ngIf"],[3,"inPlaceSearch"],[3,"configuration","showViewModes","searchEnabled","context"],[1,"badge","badge-primary","mr-1","mb-1",3,"click"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.nI1(4,"async"),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",3)(7,"div",4),t.DNE(8,W,6,5,"button",5),t.nI1(9,"async"),t.k0s(),t.nrm(10,"ds-search-labels",6),t.k0s()()(),t.j41(11,"div"),t.nrm(12,"ds-search",7),t.nI1(13,"async"),t.k0s()),2&o&&(t.R7$(3),t.JRh(t.bMT(5,9,t.bMT(4,7,e.isInbound$)?"admin.notify.dashboard.inbound":"admin.notify.dashboard.outbound")),t.R7$(5),t.Y8G("ngIf",t.bMT(9,11,e.selectedSearchConfig$)!==e.defaultConfiguration),t.R7$(2),t.Y8G("inPlaceSearch",!0),t.R7$(2),t.Y8G("configuration",t.bMT(13,13,e.selectedSearchConfig$))("showViewModes",!1)("searchEnabled",!1)("context",e.context))},dependencies:[V.L,X.N,l.Jj,r.h,r.D9,l.bT],encapsulation:2})}return i})();const K=()=>({view:"table",configuration:"NOTIFY.outgoing"}),H=()=>({view:"table",configuration:"NOTIFY.incoming"}),Q=[{canActivate:[v.Y,b.x],path:"",resolve:{breadcrumb:h.S},component:D,pathMatch:"full",data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}},{path:"inbound",resolve:{breadcrumb:h.S},component:(()=>{class i{constructor(n){this.searchConfigService=n}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(f.EN))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["ds-admin-notify-incoming"]],standalone:!0,features:[t.Jv_([{provide:f.EN,useClass:u.g}]),t.aNF],decls:22,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link","active"],[1,"nav-link",3,"routerLink","queryParams"],[3,"defaultConfiguration"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div")(7,"div")(8,"ul",4)(9,"li",5)(10,"a",6),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"li",5)(14,"a",7),t.EFF(15),t.nI1(16,"translate"),t.k0s()(),t.j41(17,"li",5)(18,"a",8),t.EFF(19),t.nI1(20,"translate"),t.k0s()()(),t.nrm(21,"ds-admin-notify-logs-result",9),t.k0s()()()()()),2&o&&(t.R7$(4),t.JRh(t.bMT(5,8,"admin-notify-dashboard.title")),t.R7$(6),t.Y8G("routerLink","../"),t.R7$(),t.JRh(t.bMT(12,10,"admin-notify-dashboard.metrics")),t.R7$(4),t.JRh(t.bMT(16,12,"admin.notify.dashboard.inbound-logs")),t.R7$(3),t.Y8G("routerLink","../outbound")("queryParams",t.lJ4(16,K)),t.R7$(),t.JRh(t.bMT(20,14,"admin.notify.dashboard.outbound-logs")),t.R7$(2),t.Y8G("defaultConfiguration","NOTIFY.incoming"))},dependencies:[m.Wk,F,r.h,r.D9],encapsulation:2})}return i})(),canActivate:[v.Y,b.x],data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}},{path:"outbound",resolve:{breadcrumb:h.S},component:(()=>{class i{constructor(n){this.searchConfigService=n}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(f.EN))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["ds-admin-notify-outgoing"]],standalone:!0,features:[t.Jv_([{provide:f.EN,useClass:u.g}]),t.aNF],decls:22,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link",3,"routerLink","queryParams"],[1,"nav-link","active"],[3,"defaultConfiguration"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div")(7,"div")(8,"ul",4)(9,"li",5)(10,"a",6),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"li",5)(14,"a",7),t.EFF(15),t.nI1(16,"translate"),t.k0s()(),t.j41(17,"li",5)(18,"a",8),t.EFF(19),t.nI1(20,"translate"),t.k0s()()(),t.nrm(21,"ds-admin-notify-logs-result",9),t.k0s()()()()()),2&o&&(t.R7$(4),t.JRh(t.bMT(5,8,"admin-notify-dashboard.title")),t.R7$(6),t.Y8G("routerLink","../"),t.R7$(),t.JRh(t.bMT(12,10,"admin-notify-dashboard.metrics")),t.R7$(3),t.Y8G("routerLink","../inbound")("queryParams",t.lJ4(16,H)),t.R7$(),t.JRh(t.bMT(16,12,"admin.notify.dashboard.inbound-logs")),t.R7$(4),t.JRh(t.bMT(20,14,"admin.notify.dashboard.outbound-logs")),t.R7$(2),t.Y8G("defaultConfiguration","NOTIFY.outgoing"))},dependencies:[m.Wk,F,r.h,r.D9],encapsulation:2})}return i})(),canActivate:[v.Y,b.x],data:{title:"admin.notify.dashboard.page.title",breadcrumbKey:"admin.notify.dashboard"}}]}}]);