"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[6068,4064],{72463:(U,P,a)=>{a.d(P,{u:()=>S});var d=a(53107),I=a(63016),h=a(72553),O=a(69685);let y=(()=>{class F{constructor(R){this.translationService=R,this.QUALITY_ASSURANCE_BREADCRUMB_KEY="admin.quality-assurance.breadcrumbs"}getBreadcrumbs(R,j){const C=R.split(":"),$=C[0],i=C.length>2?C[C.length-1]:C[1];return(0,I.of)(i?[new h.Q(this.translationService.instant(this.QUALITY_ASSURANCE_BREADCRUMB_KEY),j),new h.Q($,`${j}${$}`),new h.Q(i,void 0)]:[new h.Q(this.translationService.instant(this.QUALITY_ASSURANCE_BREADCRUMB_KEY),j),new h.Q($,`${j}${$}`)])}static#t=this.\u0275fac=function(j){return new(j||F)(d.KVO(O.c$))};static#e=this.\u0275prov=d.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})();const S=(F,G,R=(0,d.WQX)(y))=>{const j=F.paramMap.get("sourceId"),C=F.paramMap.get("topicId");let $=j;C&&($+=`:${C}`);const i=G.url;return{provider:R,key:$,url:i.substring(0,i.indexOf(j))}}},64064:(U,P,a)=>{a.r(P),a.d(P,{QualityAssuranceEventDataService:()=>B});var d=a(27691),I=a(25814),h=a(37610),O=a(22867),y=a(72683),S=a(79224),F=a(45122),G=a(99120),R=a(25718),j=a(45926),C=a(83951),$=a(2887),i=a(2868),o=a(12350),N=a(82114),Q=a(70210),Y=a(9843),L=a(25744),n=a(53107);let B=(()=>{class x extends $.W{constructor(E,T,u,p,l,g){super("qualityassuranceevents",E,T,u,p),this.requestService=E,this.rdbService=T,this.objectCache=u,this.halService=p,this.notificationsService=l,this.comparator=g,this.createData=new j.V(this.linkPath,E,T,u,p,l,this.responseMsToLive),this.deleteData=new C.I(this.linkPath,E,T,u,p,l,this.responseMsToLive,this.constructIdEndpoint),this.patchData=new i.n(this.linkPath,E,T,u,p,g,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new o.X(this.linkPath,E,T,u,p,this.responseMsToLive)}getEventsByTopic(E,T={},...u){return T.searchParams=[new G.x("topic",E)],this.searchData.searchBy("findByTopic",T,!0,!0,...u)}searchEventsByTopic(E={},...T){return this.searchData.searchBy("findByTopic",E,!0,!0,...T)}clearFindByTopicRequests(){this.requestService.setStaleByHrefSubstring("findByTopic")}getEvent(E,...T){return this.findById(E,!0,!0,...T)}patchEvent(E,T,u){return this.patchData.patch(T,[{path:"/status",op:"replace",value:E}])}boundProject(E,T){return this.postOnRelated(E,T)}removeProject(E){return this.deleteOnRelated(E)}deleteOnRelated(E){const T=this.requestService.generateRequestId();return this.getIDHrefObs(E).pipe((0,I.I)(p=>(0,y.a4)(p))).subscribe(p=>{const l=new Q.Dk(T,p+"/related",E);(0,y.a4)(this.responseMsToLive)&&(l.responseMsToLive=this.responseMsToLive),this.requestService.send(l)}),this.rdbService.buildFromRequestUUID(T)}postOnRelated(E,T,u){const p=this.requestService.generateRequestId();return this.getIDHrefObs(E).pipe((0,h.s)(1)).subscribe(g=>{const b=new Q.Qf(p,g+"/related?item="+T,u);(0,y.a4)(this.responseMsToLive)&&(b.responseMsToLive=this.responseMsToLive),this.requestService.send(b)}),this.rdbService.buildFromRequestUUID(p)}postData(E,T,u,p){const l=this.requestService.generateRequestId();return this.getBrowseEndpoint().pipe((0,O.n)(b=>{const k=Object.create({});let J=new d.Lr;J=J.append("Content-Type","application/json"),k.headers=J;let V=new d.Nl;V=V.append("target",E).append("correctionType",T),k.params=V;const q=new Q.Qf(l,b,{reason:p},k);return(0,y.a4)(this.responseMsToLive)&&(q.responseMsToLive=this.responseMsToLive),this.requestService.send(q),this.rdbService.buildFromRequestUUID(l)}))}deleteQAEvent(E){return this.deleteData.delete(E.id)}static#t=this.\u0275fac=function(T){return new(T||x)(n.KVO(Y.B),n.KVO(F.o),n.KVO(R.$),n.KVO(L.Y),n.KVO(S.I),n.KVO(N.Y))};static#e=this.\u0275prov=n.jDH({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()},77205:(U,P,a)=>{a.d(P,{p:()=>u});var d=a(73958),I=a(47947),h=a(78380),O=a(97638),y=a(72683);function F(p,l){return(0,d.Mz)(p,g=>{if((0,y.a4)(g)&&(0,y.a4)(g[l]))return g[l]})}var G=a(93687);const R=(0,d.UX)("suggestionNotifications");const $=(0,d.Mz)(R,p=>p.qaTopic.loaded),i=(0,d.Mz)(R,p=>p.qaTopic.processing),o=(0,d.Mz)(R,p=>p.qaTopic.totalPages),N=(0,d.Mz)(R,p=>p.qaTopic.currentPage),Q=(0,d.Mz)(R,p=>p.qaTopic.totalElements);const n=(0,d.Mz)(R,p=>p.qaSource.loaded),B=(0,d.Mz)(R,p=>p.qaSource.processing),x=(0,d.Mz)(R,p=>p.qaSource.totalPages),X=(0,d.Mz)(R,p=>p.qaSource.currentPage),E=(0,d.Mz)(R,p=>p.qaSource.totalElements);var T=a(53107);let u=(()=>{class p{constructor(g){this.store=g}getQualityAssuranceTopics(){return this.store.pipe((0,d.Lt)(function C(){return F(function j(){return F(G.I,"qaTopic")}(),"topics")}()))}isQualityAssuranceTopicsLoading(){return this.store.pipe((0,d.Lt)($),(0,I.T)(g=>!g))}isQualityAssuranceTopicsLoaded(){return this.store.pipe((0,d.Lt)($))}isQualityAssuranceTopicsProcessing(){return this.store.pipe((0,d.Lt)(i))}getQualityAssuranceTopicsTotalPages(){return this.store.pipe((0,d.Lt)(o))}getQualityAssuranceTopicsCurrentPage(){return this.store.pipe((0,d.Lt)(N))}getQualityAssuranceTopicsTotals(){return this.store.pipe((0,d.Lt)(Q))}dispatchRetrieveQualityAssuranceTopics(g,b,k,J){this.store.dispatch(new O._v(g,b,k,J))}getQualityAssuranceSource(){return this.store.pipe((0,d.Lt)(function L(){return F(function Y(){return F(G.I,"qaSource")}(),"source")}()))}isQualityAssuranceSourceLoading(){return this.store.pipe((0,d.Lt)(n),(0,I.T)(g=>!g))}isQualityAssuranceSourceLoaded(){return this.store.pipe((0,d.Lt)(n))}isQualityAssuranceSourceProcessing(){return this.store.pipe((0,d.Lt)(B))}getQualityAssuranceSourceTotalPages(){return this.store.pipe((0,d.Lt)(x))}getQualityAssuranceSourceCurrentPage(){return this.store.pipe((0,d.Lt)(X))}getQualityAssuranceSourceTotals(){return this.store.pipe((0,d.Lt)(E))}dispatchRetrieveQualityAssuranceSource(g,b){this.store.dispatch(new h.lZ(g,b))}static#t=this.\u0275fac=function(b){return new(b||p)(T.KVO(d.il))};static#e=this.\u0275prov=T.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1961:(U,P,a)=>{a.d(P,{a:()=>T});var d=a(54460),I=a(95968),h=a(69685),O=a(37610),y=a(66645),S=a(95438),F=a(72683),G=a(21548),R=a(51661),j=a(67899),C=a(63297),$=a(12571),i=a(11816),o=a(53107);const N=u=>["/entities/person/",u],Q=u=>({total:u});function Y(u,p){1&u&&(o.nrm(0,"ds-loading",6),o.nI1(1,"translate")),2&u&&o.FS9("message",o.bMT(1,1,"suggestion.loading"))}function L(u,p){1&u&&o.nrm(0,"ds-loading",10)}function n(u,p){1&u&&(o.j41(0,"div",13),o.EFF(1),o.nI1(2,"translate"),o.k0s()),2&u&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"suggestion.noTargets")," "))}function B(u,p){if(1&u){const l=o.RV6();o.j41(0,"tr",16)(1,"td")(2,"a",19),o.EFF(3),o.k0s()(),o.j41(4,"td")(5,"div",20)(6,"button",21),o.nI1(7,"translate"),o.bIt("click",function(){const b=o.eBV(l).$implicit,k=o.XpG(4);return o.Njj(k.redirectToSuggestions(b.id))}),o.j41(8,"span"),o.EFF(9),o.nI1(10,"translate"),o.k0s(),o.nrm(11,"i",22),o.k0s()()()()}if(2&u){const l=p.$implicit,g=o.XpG(4);o.R7$(2),o.Y8G("routerLink",o.eq3(10,N,g.getTargetUuid(l))),o.R7$(),o.JRh(l.display),o.R7$(3),o.FS9("title",o.i5U(7,4,"suggestion.button.review.title",o.eq3(12,Q,l.total.toString()))+l.display),o.R7$(3),o.SpI("",o.i5U(10,7,"suggestion.button.review",o.eq3(14,Q,l.total.toString()))," ")}}function x(u,p){if(1&u&&(o.j41(0,"div",14)(1,"table",15)(2,"thead")(3,"tr",16)(4,"th",17),o.EFF(5),o.nI1(6,"translate"),o.k0s(),o.j41(7,"th",17),o.EFF(8),o.nI1(9,"translate"),o.k0s()()(),o.j41(10,"tbody"),o.DNE(11,B,12,16,"tr",18),o.nI1(12,"async"),o.k0s()()()),2&u){const l=o.XpG(3);o.R7$(5),o.JRh(o.bMT(6,3,"suggestion.table.name")),o.R7$(3),o.JRh(o.bMT(9,5,"suggestion.table.actions")),o.R7$(3),o.Y8G("ngForOf",o.bMT(12,7,l.targets$))}}function X(u,p){if(1&u&&(o.qex(0),o.DNE(1,n,3,3,"div",11),o.nI1(2,"async"),o.DNE(3,x,13,9,"div",12),o.nI1(4,"async"),o.bVm()),2&u){let l,g;const b=o.XpG(2);o.R7$(),o.Y8G("ngIf",0===(null==(l=o.bMT(2,2,b.targets$))?null:l.length)),o.R7$(2),o.Y8G("ngIf",0!==(null==(g=o.bMT(4,4,b.targets$))?null:g.length))}}function E(u,p){if(1&u){const l=o.RV6();o.j41(0,"ds-pagination",7),o.nI1(1,"async"),o.bIt("paginationChange",function(){o.eBV(l);const b=o.XpG();return o.Njj(b.getSuggestionTargets())}),o.DNE(2,L,1,0,"ds-loading",8),o.nI1(3,"async"),o.DNE(4,X,5,6,"ng-container",9),o.nI1(5,"async"),o.k0s()}if(2&u){const l=o.XpG();o.Y8G("paginationOptions",l.paginationConfig)("collectionSize",o.bMT(1,6,l.totalElements$))("hideGear",!1)("retainScrollPosition",!1),o.R7$(2),o.Y8G("ngIf",o.bMT(3,8,l.isTargetsProcessing())),o.R7$(2),o.Y8G("ngIf",!0!==o.bMT(5,10,l.isTargetsProcessing()))}}let T=(()=>{class u{constructor(l,g,b,k){this.paginationService=l,this.suggestionTargetsStateService=g,this.suggestionService=b,this.router=k,this.source="",this.paginationConfig=Object.assign(new j.W,{id:"stp_"+this.source,pageSizeOptions:[5,10,20,40,60]}),this.subs=[]}ngOnInit(){this.targets$=this.suggestionTargetsStateService.getSuggestionTargets(this.source),this.totalElements$=this.suggestionTargetsStateService.getSuggestionTargetsTotals(this.source)}ngAfterViewInit(){this.subs.push(this.suggestionTargetsStateService.isSuggestionTargetsLoaded(this.source).pipe((0,O.s)(1)).subscribe(()=>{this.getSuggestionTargets()}))}isTargetsLoading(){return this.suggestionTargetsStateService.isSuggestionTargetsLoading(this.source)}isTargetsProcessing(){return this.suggestionTargetsStateService.isSuggestionTargetsProcessing(this.source)}redirectToSuggestions(l){this.router.navigate([(0,C.jV)(l)])}ngOnDestroy(){this.suggestionTargetsStateService.dispatchClearSuggestionTargetsAction(this.source),this.subs.filter(l=>(0,F.a4)(l)).forEach(l=>l.unsubscribe())}getSuggestionTargets(){this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,y.F)(),(0,O.s)(1)).subscribe(l=>{this.suggestionTargetsStateService.dispatchRetrieveSuggestionTargets(this.source,l.pageSize,l.currentPage)})}getTargetUuid(l){return this.suggestionService.getTargetUuid(l)}static#t=this.\u0275fac=function(g){return new(g||u)(o.rXU(S.m),o.rXU(i.x),o.rXU($.F),o.rXU(I.Ix))};static#e=this.\u0275cmp=o.VBU({type:u,selectors:[["ds-publication-claim"]],inputs:{source:"source"},standalone:!0,features:[o.aNF],decls:10,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","retainScrollPosition","paginationChange",4,"ngIf"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","retainScrollPosition"],["class","container","message","'suggestion.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'suggestion.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],[1,"text-center"],["scope","col"],["class","text-center",4,"ngFor","ngForOf"],["target","_blank",3,"routerLink"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"click","title"],[1,"fas","fa-lightbulb"]],template:function(g,b){1&g&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o.EFF(4),o.nI1(5,"translate"),o.k0s(),o.DNE(6,Y,2,3,"ds-loading",4),o.nI1(7,"async"),o.DNE(8,E,6,12,"ds-pagination",5),o.nI1(9,"async"),o.k0s()()()),2&g&&(o.R7$(4),o.JRh(o.bMT(5,3,"suggestion.title")),o.R7$(2),o.Y8G("ngIf",o.bMT(7,5,b.isTargetsLoading())),o.R7$(2),o.Y8G("ngIf",!0!==o.bMT(9,7,b.isTargetsLoading())))},dependencies:[G.v,d.Jj,h.h,h.D9,R.e,d.bT,d.pM,I.Wk]})}return u})()},44013:(U,P,a)=>{a.d(P,{B:()=>I});var d=a(53107);let I=(()=>{class h{resolve(y,S){return{pageId:y.queryParams.pageId,pageSize:parseInt(y.queryParams.pageSize,10),currentPage:parseInt(y.queryParams.page,10)}}static#t=this.\u0275fac=function(S){return new(S||h)};static#e=this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},67625:(U,P,a)=>{a.d(P,{k:()=>ae});var d=a(54460),I=a(95968),h=a(2155),O=a(69685),y=a(71217),S=a(63016),F=a(33325),G=a(76627),R=a(82040),j=a(47947),C=a(37610),$=a(22867),i=a(66645),o=a(27035),N=a(44660),Q=a(70857),Y=a(86722),L=a(89632),n=a(77304),B=a(36556),x=a(36705),X=a(17584),E=a(64064),T=a(95438),u=a(84562),p=a(12007),l=a(15497),g=a(96858),b=a(72683),k=a(21548),J=a(79224),V=a(51661),q=a(67899),v=a(24106),t=a(53107),_=a(10936),A=a(71526),D=a(67811),H=a(79599),w=a(82219),Z=a(63496),nt=a(21049);const st=s=>({repeatable:!1,listId:s});function it(s,m){if(1&s&&(t.j41(0,"div")(1,"small"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",5)(5,"div",6)(6,"a",7),t.EFF(7),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,3,e.labelPrefix+e.label+".bountToLocal")),t.R7$(4),t.Y8G("routerLink","/items/{{externalSourceEntry.projectId}}"),t.R7$(),t.SpI(" ",e.externalSourceEntry.projectTitle," ")}}function at(s,m){1&s&&(t.nrm(0,"ds-loading",19),t.nI1(1,"translate")),2&s&&t.FS9("message",t.bMT(1,1,"loading.search-results"))}function ot(s,m){if(1&s){const e=t.RV6();t.j41(0,"ds-search-results",20),t.nI1(1,"async"),t.bIt("deselectObject",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.deselectEntity())})("selectObject",function(r){t.eBV(e);const f=t.XpG();return t.Njj(f.selectEntity(r))}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("searchResults",t.bMT(1,10,e.localEntitiesRD$))("sortConfig",null==e.searchOptions?null:e.searchOptions.sort)("searchConfig",e.searchOptions)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!1)("selectionConfig",t.eq3(12,st,e.entityListId))("showCsvExport",!1)("linkType",e.linkTypes.ExternalLink)("context",e.context)}}function rt(s,m){if(1&s&&(t.j41(0,"div")(1,"ds-alert",21)(2,"p",22),t.EFF(3),t.nI1(4,"translate"),t.k0s()()()),2&s){const e=t.XpG();t.R7$(),t.Y8G("type","alert-info"),t.R7$(2),t.JRh(t.bMT(4,2,e.labelPrefix+e.label+".notFound"))}}var z=function(s){return s.None="None",s.LocalEntity="LocalEntity",s.LocalAuthority="LocalAuthority",s.NewEntity="NewEntity",s.NewAuthority="NewAuthority",s}(z||{});let ct=(()=>{class s{constructor(e,c,r){this.modal=e,this.searchService=c,this.selectService=r,this.pageSize=3,this.labelPrefix="quality-assurance.event.modal.",this.configuration="funding",this.isLoading$=(0,S.of)(!0),this.context=A.o.EntitySearchModalWithNameVariants,this.entityListId="notifications-project-bound",this.authorityListId="notifications-project-bound-authority",this.importType=z,this.linkTypes=H.n,this.selectedImportType=z.None,this.importedObject=new t.bkB,this.subs=[]}ngOnInit(){this.pagination=Object.assign(new q.W,{id:"notifications-project-bound",pageSize:this.pageSize}),this.projectTitle=null!==this.externalSourceEntry.projectTitle?this.externalSourceEntry.projectTitle:this.externalSourceEntry.event.message.title,this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:this.projectTitle,pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,S.of)(!1)))}close(){this.deselectAllLists(),this.modal.close()}search(e){if((0,b.hj)(e)){const c=/[:]/g;this.isLoading$=(0,S.of)(!0),this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:e&&e.replace(c,""),pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,S.of)(!1)))}}bound(){void 0!==this.selectedEntity&&this.importedObject.emit(this.selectedEntity),this.selectedImportType=z.None,this.deselectAllLists(),this.close()}deselectEntity(){this.selectedEntity=void 0,this.selectedImportType===z.LocalEntity&&(this.selectedImportType=z.None)}selectEntity(e){this.selectedEntity=e,this.selectedImportType=z.LocalEntity}deselectAllLists(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}ngOnDestroy(){this.deselectAllLists(),this.subs.filter(e=>(0,b.a4)(e)).forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(c){return new(c||s)(t.rXU(h.Lw),t.rXU(D.S),t.rXU(w.K))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ds-project-entry-import-modal"]],inputs:{externalSourceEntry:"externalSourceEntry"},standalone:!0,features:[t.aNF],decls:47,vars:44,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-3"],[1,"text-truncate"],["target","_blank",3,"routerLink"],[4,"ngIf"],["id","project-entities",1,"mb-3"],["id","project-search",1,"input-group","mb-3"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"keyup.enter","ngModelChange","ngModel","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"message",4,"ngIf"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context","deselectObject","selectObject",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"message"],[3,"deselectObject","selectObject","searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context"],[3,"type"],[1,"lead","mb-0"]],template:function(c,r){if(1&c&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return r.close()}),t.j41(5,"span",3),t.EFF(6,"\xd7"),t.k0s()()(),t.j41(7,"div",4)(8,"small"),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",5)(12,"div",6)(13,"a",7),t.EFF(14),t.k0s()()(),t.DNE(15,it,8,5,"div",8),t.j41(16,"h4"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"div",9)(20,"div",10)(21,"input",11),t.nI1(22,"translate"),t.bIt("keyup.enter",function(){return r.search(r.projectTitle)}),t.mxI("ngModelChange",function(M){return t.DH7(r.projectTitle,M)||(r.projectTitle=M),M}),t.k0s(),t.j41(23,"div",12)(24,"button",13),t.bIt("click",function(){return r.projectTitle=""}),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"button",14),t.bIt("click",function(){return r.search(r.projectTitle)}),t.EFF(28),t.nI1(29,"translate"),t.k0s()()(),t.DNE(30,at,2,3,"ds-loading",15),t.nI1(31,"async"),t.DNE(32,ot,2,14,"ds-search-results",16),t.nI1(33,"async"),t.nI1(34,"async"),t.DNE(35,rt,5,4,"div",8),t.nI1(36,"async"),t.nI1(37,"async"),t.k0s()(),t.j41(38,"div",17)(39,"div")(40,"button",18),t.bIt("click",function(){return r.close()}),t.EFF(41),t.nI1(42,"translate"),t.k0s()(),t.j41(43,"div")(44,"button",14),t.bIt("click",function(){return r.bound()}),t.EFF(45),t.nI1(46,"translate"),t.k0s()()()),2&c){let f,M;t.R7$(2),t.JRh(t.bMT(3,18,r.labelPrefix+r.label+".title")),t.R7$(7),t.JRh(t.bMT(10,20,r.labelPrefix+r.label+".publication")),t.R7$(4),t.Y8G("routerLink","/items/{{(externalSourceEntry.event.target|async)?.payload?.id}}"),t.R7$(),t.SpI(" ",r.externalSourceEntry.title," "),t.R7$(),t.Y8G("ngIf",r.externalSourceEntry.projectTitle),t.R7$(2),t.JRh(t.bMT(18,22,r.labelPrefix+r.label+".select")),t.R7$(4),t.FS9("placeholder",t.bMT(22,24,r.labelPrefix+r.label+".placeholder")),t.R50("ngModel",r.projectTitle),t.R7$(3),t.Y8G("disabled",""===r.projectTitle),t.R7$(),t.JRh(t.bMT(26,26,r.labelPrefix+r.label+".clear")),t.R7$(2),t.Y8G("disabled",""===r.projectTitle),t.R7$(),t.JRh(t.bMT(29,28,r.labelPrefix+r.label+".search")),t.R7$(2),t.Y8G("ngIf",t.bMT(31,30,r.isLoading$)),t.R7$(2),t.Y8G("ngIf",(null==(f=t.bMT(33,32,r.localEntitiesRD$))||null==f.payload||null==f.payload.page?null:f.payload.page.length)>0&&!0!==t.bMT(34,34,r.isLoading$)),t.R7$(3),t.Y8G("ngIf",(null==(M=t.bMT(36,36,r.localEntitiesRD$))||null==M.payload||null==M.payload.page?null:M.payload.page.length)<1&&!0!==t.bMT(37,38,r.isLoading$)),t.R7$(6),t.JRh(t.bMT(42,40,r.labelPrefix+r.label+".cancel")),t.R7$(3),t.Y8G("disabled",r.selectedImportType===r.importType.None),t.R7$(),t.JRh(t.bMT(46,42,r.labelPrefix+r.label+".bound"))}},dependencies:[I.Wk,d.bT,_.YN,_.me,_.BC,_.vS,k.v,nt.N,g.C,d.Jj,O.h,O.D9],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}"]})}return s})();var lt=a(31363);function ut(s,m){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit,c=t.XpG().ngIf;t.R7$(),t.SpI(" ",c[e]," ")}}function pt(s,m){if(1&s&&(t.qex(0),t.DNE(1,ut,2,1,"span",0),t.nrm(2,"br"),t.bVm()),2&s){const e=m.$implicit,c=t.XpG().ngIf;t.R7$(),t.Y8G("ngIf",c[e])}}function dt(s,m){if(1&s&&(t.qex(0),t.DNE(1,pt,3,1,"ng-container",1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.properties)}}function _t(s,m){if(1&s&&(t.qex(0),t.DNE(1,dt,2,1,"ng-container",0),t.nI1(2,"async"),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngIf",t.bMT(2,1,e.getEPersonData$()))}}let gt=(()=>{class s{constructor(e){this.ePersonDataService=e}getEPersonData$(){if(this.ePersonId)return this.ePersonDataService.findById(this.ePersonId,!0).pipe((0,p.qD)(),(0,p.Bo)())}static#t=this.\u0275fac=function(c){return new(c||s)(t.rXU(lt.EPersonDataService))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ds-eperson-data"]],inputs:{ePersonId:"ePersonId",properties:"properties"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(c,r){1&c&&t.DNE(0,_t,3,3,"ng-container",0),2&c&&t.Y8G("ngIf",r.ePersonId)},dependencies:[d.bT,d.pM,d.Jj]})}return s})();const tt=(s,m)=>({topic:s,source:m}),et=s=>["/items",s],mt=()=>["email"];function ht(s,m){if(1&s&&(t.j41(0,"ds-alert",13),t.nrm(1,"span",14),t.nI1(2,"translate"),t.k0s()),2&s){const e=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,2,"quality-assurance.events.description",t.l_i(5,tt,e.selectedTopicName,e.sourceId)),t.npT)}}function vt(s,m){if(1&s&&(t.j41(0,"ds-alert",13),t.nrm(1,"span",14),t.nI1(2,"translate"),t.j41(3,"a",15),t.EFF(4),t.nI1(5,"async"),t.k0s()()),2&s){const e=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,4,"quality-assurance.events.description-with-topic-and-target",t.l_i(9,tt,e.selectedTopicName,e.sourceId)),t.npT),t.R7$(2),t.Y8G("routerLink",e.itemPageUrl),t.R7$(),t.JRh(t.bMT(5,7,e.getTargetItemTitle()))}}function ft(s,m){1&s&&(t.nrm(0,"ds-loading",16),t.nI1(1,"translate")),2&s&&t.FS9("message",t.bMT(1,1,"quality-assurance.loading"))}function bt(s,m){1&s&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.noEvents")," "))}function Et(s,m){1&s&&(t.j41(0,"th",29),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.event.table.project-details")," "))}function yt(s,m){1&s&&(t.qex(0),t.j41(1,"th",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"th",29),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.bVm()),2&s&&(t.R7$(2),t.SpI(" ",t.bMT(3,2,"quality-assurance.event.table.reasons")," "),t.R7$(3),t.SpI(" ",t.bMT(6,4,"quality-assurance.event.table.person-who-requested")," "))}function Tt(s,m){if(1&s&&(t.j41(0,"a",33),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(2,et,null==e||null==e.target?null:e.target.id)),t.R7$(),t.JRh(e.title)}}function It(s,m){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&s){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.title)}}function Rt(s,m){if(1&s&&(t.j41(0,"div")(1,"span",34),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",35)(5,"a",36),t.EFF(6),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.serviceUrl")),t.R7$(2),t.Y8G("title",e.event.message.serviceId),t.R7$(),t.Y8G("href",e.event.message.serviceId,t.B4B),t.R7$(),t.JRh(e.event.message.serviceId)}}function St(s,m){if(1&s&&(t.j41(0,"div",37)(1,"span",34),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",38)(5,"a",36),t.EFF(6),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.link")),t.R7$(2),t.Y8G("title",e.event.message.href),t.R7$(),t.Y8G("href",e.event.message.href,t.B4B),t.R7$(),t.JRh(e.event.message.href)}}function Mt(s,m){if(1&s&&(t.j41(0,"a",42),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit,c=t.XpG(3);t.FS9("href",c.getPIDHref(e.event.message),t.B4B),t.R7$(),t.SpI(" ",e.event.message.value," ")}}function jt(s,m){if(1&s&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(),t.JRh(e.event.message.value)}}function Ct(s,m){if(1&s&&(t.j41(0,"td")(1,"p")(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.EFF(5,"\xa0"),t.j41(6,"span",40),t.EFF(7),t.k0s()(),t.j41(8,"p")(9,"span",39),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.nrm(12,"br"),t.DNE(13,Mt,2,2,"a",41)(14,jt,2,1,"ng-template",null,4,t.C5r),t.k0s()()),2&s){const e=t.sdS(15),c=t.XpG().$implicit,r=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,5,"quality-assurance.event.table.pidtype")),t.R7$(4),t.JRh(c.event.message.type),t.R7$(3),t.JRh(t.bMT(11,7,"quality-assurance.event.table.pidvalue")),t.R7$(3),t.Y8G("ngIf",r.hasPIDHref(c.event.message))("ngIfElse",e)}}function $t(s,m){if(1&s&&(t.j41(0,"td")(1,"p")(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",40),t.EFF(7),t.k0s()()()),2&s){const e=t.XpG().$implicit;t.R7$(3),t.SpI("",t.bMT(4,2,"quality-assurance.event.table.subjectValue")," "),t.R7$(4),t.JRh(e.event.message.value)}}function Ft(s,m){1&s&&t.nrm(0,"i",48)}function Pt(s,m){1&s&&t.nrm(0,"i",49)}function At(s,m){if(1&s){const e=t.RV6();t.j41(0,"td")(1,"p",43)(2,"span",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",44),t.EFF(7),t.k0s()(),t.j41(8,"button",45),t.bIt("click",function(){t.eBV(e);const r=t.XpG(4);return t.Njj(r.showMore=!r.showMore)}),t.DNE(9,Ft,1,0,"i",46)(10,Pt,1,0,"i",47),t.EFF(11),t.nI1(12,"translate"),t.k0s()()}if(2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(),t.AVh("show",c.showMore),t.R7$(2),t.JRh(t.bMT(4,7,"quality-assurance.event.table.abstract")),t.R7$(4),t.JRh(e.event.message.abstract),t.R7$(2),t.Y8G("ngIf",!c.showMore),t.R7$(),t.Y8G("ngIf",c.showMore),t.R7$(),t.SpI(" ",t.bMT(12,9,c.showMore?"quality-assurance.event.table.less":"quality-assurance.event.table.more")," ")}}function Ot(s,m){if(1&s&&(t.j41(0,"span")(1,"span"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(e.event.message.reason)}}function Dt(s,m){if(1&s&&(t.j41(0,"span"),t.nrm(1,"ds-eperson-data",50),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(),t.Y8G("ePersonId",e.event.originalId)("properties",t.lJ4(2,mt))}}function Gt(s,m){if(1&s&&(t.qex(0),t.j41(1,"td")(2,"p"),t.DNE(3,Ot,4,1,"span",26),t.k0s()(),t.j41(4,"td")(5,"p"),t.DNE(6,Dt,2,3,"span",26),t.k0s()(),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(3),t.Y8G("ngIf",e.event.message),t.R7$(3),t.Y8G("ngIf",e.event.originalId)}}function xt(s,m){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.acronym")),t.R7$(4),t.JRh(e.event.message.acronym)}}function Qt(s,m){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.code")),t.R7$(4),t.JRh(e.event.message.code)}}function kt(s,m){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.funder")),t.R7$(4),t.JRh(e.event.message.funder)}}function Lt(s,m){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.fundingProgram")),t.R7$(4),t.JRh(e.event.message.fundingProgram)}}function Bt(s,m){if(1&s&&(t.j41(0,"span")(1,"span",39),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",40),t.EFF(6),t.k0s()()),2&s){const e=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.jurisdiction")),t.R7$(4),t.JRh(e.event.message.jurisdiction)}}function Ut(s,m){if(1&s&&(t.j41(0,"a",55),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2).$implicit;t.FS9("title",e.projectTitle),t.Y8G("routerLink",t.eq3(3,et,e.projectId)),t.R7$(),t.SpI("",e.handle," ")}}function Nt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",56),t.nI1(1,"translate"),t.bIt("click",function(r){t.eBV(e);const f=t.XpG(2).$implicit;return t.XpG(3).openModalLookup(f),t.Njj(r.stopPropagation())}),t.nrm(2,"i",57),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.select"))}}function Yt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",58),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,f=t.XpG(3);return t.Njj(f.removeProject(r))}),t.nrm(2,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.remove"))}}function Xt(s,m){if(1&s&&(t.j41(0,"td")(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p")(5,"span",39),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.nrm(8,"br"),t.j41(9,"a",42),t.EFF(10),t.k0s()(),t.j41(11,"p"),t.DNE(12,xt,8,4,"span",26)(13,Qt,8,4,"span",26)(14,kt,8,4,"span",26)(15,Lt,8,4,"span",26)(16,Bt,7,4,"span",26),t.k0s(),t.nrm(17,"hr"),t.j41(18,"div"),t.EFF(19),t.nI1(20,"translate"),t.DNE(21,Ut,2,5,"a",51),t.j41(22,"div",52),t.DNE(23,Nt,3,4,"button",53)(24,Yt,3,4,"button",54),t.k0s()()()),2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,15,"quality-assurance.event.table.suggestedProject")," "),t.R7$(4),t.JRh(t.bMT(7,17,"quality-assurance.event.table.project")),t.R7$(3),t.FCK("href","",c.sourceUrlForProjectSearch,"",e.event.message.sourceId,"",t.B4B),t.R7$(),t.JRh(e.event.message.title),t.R7$(2),t.Y8G("ngIf",e.event.message.acronym),t.R7$(),t.Y8G("ngIf",e.event.message.code),t.R7$(),t.Y8G("ngIf",e.event.message.funder),t.R7$(),t.Y8G("ngIf",e.event.message.fundingProgram),t.R7$(),t.Y8G("ngIf",e.event.message.jurisdiction),t.R7$(3),t.SpI(" ",t.bMT(20,19,e.hasProject?"quality-assurance.event.project.found":"quality-assurance.event.project.notFound")," "),t.R7$(2),t.Y8G("ngIf",e.hasProject),t.R7$(2),t.Y8G("ngIf",!e.hasProject),t.R7$(),t.Y8G("ngIf",e.hasProject)}}function Jt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",65),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,f=t.XpG(3),M=t.sdS(19);return t.Njj(f.modalChoice("ACCEPTED",r,M))}),t.nrm(3,"i",66),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.import")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.import"))}}function Vt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",65),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,f=t.XpG(3);return t.Njj(f.executeAction("ACCEPTED",r))}),t.nrm(3,"i",66),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.accept")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.accept"))}}function qt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",67),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,f=t.XpG(3),M=t.sdS(23);return t.Njj(f.openModal("REJECTED",r,M))}),t.nrm(3,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.reject")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.reject"))}}function zt(s,m){if(1&s){const e=t.RV6();t.j41(0,"button",67),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2).$implicit,f=t.XpG(3),M=t.sdS(25);return t.Njj(f.openModal("UNDO",r,M))}),t.nrm(3,"i",59),t.k0s()}if(2&s){const e=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.undo")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.undo"))}}function Wt(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",60),t.DNE(1,Jt,4,7,"button",61)(2,Vt,4,7,"button",61),t.j41(3,"button",62),t.nI1(4,"translate"),t.nI1(5,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,f=t.XpG(3),M=t.sdS(21);return t.Njj(f.openModal("DISCARDED",r,M))}),t.nrm(6,"i",63),t.k0s(),t.DNE(7,qt,4,7,"button",64),t.nI1(8,"async"),t.DNE(9,zt,4,7,"button",64),t.nI1(10,"async"),t.k0s()}if(2&s){const e=t.XpG().$implicit,c=t.XpG(3);t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PROJECT")),t.R7$(),t.Y8G("ngIf",-1===c.showTopic.indexOf("/PROJECT")),t.R7$(),t.FS9("ngbTooltip",t.bMT(4,7,"quality-assurance.event.action.ignore")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(5,9,"quality-assurance.event.action.ignore")),t.R7$(4),t.Y8G("ngIf",t.bMT(8,11,c.isAdmin$)),t.R7$(2),t.Y8G("ngIf",!1===t.bMT(10,13,c.isAdmin$))}}function Kt(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",60)(1,"button",67),t.nI1(2,"translate"),t.nI1(3,"translate"),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,f=t.XpG(3),M=t.sdS(25);return t.Njj(f.openModal("UNDO",r,M))}),t.nrm(4,"i",59),t.k0s()()}if(2&s){const e=t.XpG().$implicit;t.R7$(),t.FS9("ngbTooltip",t.bMT(2,3,"quality-assurance.event.action.undo")),t.Y8G("disabled",e.isRunning),t.BMQ("aria-label",t.bMT(3,5,"quality-assurance.event.action.undo"))}}function Ht(s,m){if(1&s&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,Tt,2,4,"a",30)(5,It,2,1,"span",26)(6,Rt,7,6,"div",26)(7,St,7,6,"div",31),t.k0s(),t.DNE(8,Ct,16,9,"td",26)(9,$t,8,4,"td",26)(10,At,13,11,"td",26)(11,Gt,7,2,"ng-container",26)(12,Xt,25,21,"td",26),t.j41(13,"td"),t.DNE(14,Wt,11,15,"div",32),t.nI1(15,"async"),t.DNE(16,Kt,5,7,"div",32),t.nI1(17,"async"),t.k0s()()),2&s){const e=m.$implicit,c=t.XpG(3);t.R7$(2),t.SpI("",null==e||null==e.event?null:e.event.trust," "),t.R7$(2),t.Y8G("ngIf",null==e?null:e.target),t.R7$(),t.Y8G("ngIf",!(null!=e&&e.target)),t.R7$(),t.Y8G("ngIf",null==e||null==e.event||null==e.event.message?null:e.event.message.serviceId),t.R7$(),t.Y8G("ngIf",null==e||null==e.event||null==e.event.message?null:e.event.message.href),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PID")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/SUBJECT")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/ABSTRACT")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/REINSTATE")||-1!==c.showTopic.indexOf("/WITHDRAWN")),t.R7$(),t.Y8G("ngIf",-1!==c.showTopic.indexOf("/PROJECT")),t.R7$(2),t.Y8G("ngIf",t.bMT(15,12,c.isAdmin$)||!c.isReinstateWithdrawnRequest),t.R7$(2),t.Y8G("ngIf",!0!==t.bMT(17,14,c.isAdmin$)&&c.isReinstateWithdrawnRequest)}}function wt(s,m){if(1&s&&(t.j41(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th",23),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th",24),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.DNE(10,Et,3,3,"th",25)(11,yt,7,6,"ng-container",26),t.j41(12,"th",27),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,Ht,18,16,"tr",28),t.nI1(17,"async"),t.k0s()()()),2&s){const e=t.XpG(2);t.R7$(5),t.JRh(t.bMT(6,6,"quality-assurance.event.table.trust")),t.R7$(3),t.JRh(t.bMT(9,8,"quality-assurance.event.table.publication")),t.R7$(2),t.Y8G("ngIf",e.hasDetailColumn()&&-1!==e.showTopic.indexOf("/PROJECT")),t.R7$(),t.Y8G("ngIf",e.hasDetailColumn()&&(-1!==e.showTopic.indexOf("/REINSTATE")||-1!==e.showTopic.indexOf("/WITHDRAWN"))),t.R7$(2),t.JRh(t.bMT(14,10,"quality-assurance.event.table.actions")),t.R7$(3),t.Y8G("ngForOf",t.bMT(17,12,e.eventsUpdated$))}}function Zt(s,m){if(1&s){const e=t.RV6();t.j41(0,"ds-pagination",17),t.nI1(1,"async"),t.bIt("paginationChange",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.getQualityAssuranceEvents())}),t.qex(2),t.DNE(3,bt,3,3,"div",18),t.nI1(4,"async"),t.DNE(5,wt,18,14,"div",19),t.nI1(6,"async"),t.bVm(),t.k0s()}if(2&s){let e,c;const r=t.XpG();t.Y8G("paginationOptions",r.paginationConfig)("collectionSize",t.bMT(1,5,r.totalElements$))("sortOptions",r.paginationSortConfig),t.R7$(3),t.Y8G("ngIf",0===(null==(e=t.bMT(4,7,r.eventsUpdated$))?null:e.length)),t.R7$(2),t.Y8G("ngIf",0!==(null==(c=t.bMT(6,9,r.eventsUpdated$))?null:c.length))}}function te(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h4",69),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",71),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",66),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.accept.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.import"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function ee(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h4",75),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.ignore.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.ignore"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function ne(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h4",77),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.reject.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.reject"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function se(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",68)(1,"h4",78),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",70)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",76),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("do"))}),t.nrm(9,"i",59),t.j41(10,"span",72),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("cancel"))}),t.nrm(14,"i",74),t.j41(15,"span",72),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&s&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.undo.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.undo"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}let ie=(()=>{class s{constructor(e,c,r,f,M,K,W,oe){this.activatedRoute=e,this.modalService=c,this.notificationsService=r,this.qualityAssuranceEventRestService=f,this.paginationService=M,this.translateService=K,this.authorizationService=W,this.itemService=oe,this.paginationConfig=Object.assign(new q.W,{id:"bep",currentPage:1,pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.paginationSortConfig=new L.z("trust",L.U.DESC),this.eventsUpdated$=new y.t([]),this.totalElements$=new y.t(null),this.isEventPageLoading=new y.t(!1),this.showMore=!1,this.defaultConfig=Object.assign(new x._,{sort:this.paginationSortConfig}),this.subs=[]}ngOnInit(){this.isEventPageLoading.next(!0),this.isAdmin$=this.authorizationService.isAuthorized(B._.AdministratorOf),this.activatedRoute.paramMap.pipe((0,R.M)(e=>{this.sourceUrlForProjectSearch=Y.c.qualityAssuranceConfig.sourceUrlMapForProjectSearch[e.get("sourceId")],this.sourceId=e.get("sourceId")}),(0,j.T)(e=>e.get("topicId")),(0,C.s)(1),(0,$.n)(e=>{this.showTopic=e.replace(/!/g,"/"),this.topic=e;const r=this.showTopic?.split(":");return this.targetId=r.length>2?r.pop():null,this.selectedTopicName=r[1],this.sourceId=r[0],this.getQualityAssuranceEvents()})).subscribe({next:e=>{this.eventsUpdated$.next(e),this.isEventPageLoading.next(!1)},error:e=>{this.isEventPageLoading.next(!1)}})}hasDetailColumn(){return-1!==this.showTopic.indexOf("/PROJECT")||-1!==this.showTopic.indexOf("/PID")||-1!==this.showTopic.indexOf("/SUBJECT")||-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")||-1!==this.showTopic.indexOf("/ABSTRACT")}get isReinstateWithdrawnRequest(){return-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")}modalChoice(e,c,r){c.hasProject?this.executeAction(e,c):this.openModal(e,c,r)}openModal(e,c,r){this.modalService.open(r,{ariaLabelledBy:"modal-basic-title"}).result.then(f=>{"do"===f&&(c.reason=this.selectedReason,this.executeAction(e,c)),this.selectedReason=null},f=>{this.selectedReason=null})}openModalLookup(e){this.modalRef=this.modalService.open(ct,{size:"lg"});const c=this.modalRef.componentInstance;c.externalSourceEntry=e,c.label="project",this.subs.push(c.importedObject.pipe((0,C.s)(1)).subscribe(r=>{const f=u.O.first(r.indexableObject.metadata,"dc.title");this.boundProject(e,r.indexableObject.id,f.value,r.indexableObject.handle)}))}executeAction(e,c){let r;c.isRunning=!0,r="UNDO"===e?this.delete(c):this.qualityAssuranceEventRestService.patchEvent(e,c.event,c.reason),this.subs.push(r.pipe((0,p.qD)(),(0,$.n)(f=>f.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.action.saved")),this.getQualityAssuranceEvents()):(this.notificationsService.error(this.translateService.instant("quality-assurance.event.action.error")),(0,S.of)(this.eventsUpdated$.value)))).subscribe(f=>{this.eventsUpdated$.next(f),c.isRunning=!1}))}boundProject(e,c,r,f){e.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.boundProject(e.id,c).pipe((0,p.qD)()).subscribe(M=>{M.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.bounded")),e.hasProject=!0,e.projectTitle=r,e.handle=f,e.projectId=c):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),e.isRunning=!1}))}removeProject(e){e.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.removeProject(e.id).pipe((0,p.qD)()).subscribe(c=>{c.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.removed")),e.hasProject=!1,e.projectTitle=null,e.handle=null,e.projectId=null):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),e.isRunning=!1}))}hasPIDHref(e){return null!==this.getPIDHref(e)}getPIDHref(e){return e.pidHref}getQualityAssuranceEvents(){return this.paginationService.getFindListOptions(this.paginationConfig.id,this.defaultConfig).pipe((0,i.F)(),(0,$.n)(e=>this.qualityAssuranceEventRestService.getEventsByTopic(this.topic,e,(0,v.s)("target"),(0,v.s)("related"))),(0,p.qD)(),(0,$.n)(e=>{if(e.hasSucceeded)return this.totalElements$.next(e.payload.totalElements),e.payload?.page?.length>0?this.fetchEvents(e.payload.page):(0,S.of)([]);throw new Error("Can't retrieve Quality Assurance events from the Broker events REST service")}),(0,C.s)(1),(0,R.M)(()=>{this.qualityAssuranceEventRestService.clearFindByTopicRequests()}))}ngOnDestroy(){this.subs.filter(e=>(0,b.a4)(e)).forEach(e=>e.unsubscribe())}fetchEvents(e){return(0,F.H)(e).pipe((0,o.Z)(c=>{const r=c.related.pipe((0,p.qD)()),f=c.target.pipe((0,p.qD)());return(0,G.z)([r,f]).pipe((0,j.T)(([M,K])=>{const W={event:c,id:c.id,title:c.title,hasProject:!1,projectTitle:null,projectId:null,handle:null,reason:null,isRunning:!1,target:K?.hasSucceeded?K.payload:null};return M?.hasSucceeded&&M?.payload?.id&&(W.hasProject=!0,W.projectTitle=c.message.title,W.projectId=M?.payload?.id,W.handle=M?.payload?.handle),W}))}),(0,N.S)((c,r)=>[...c,r],[]),(0,Q.H)())}delete(e){return this.qualityAssuranceEventRestService.deleteQAEvent(e)}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,C.s)(1),(0,p.qD)(),(0,p.Bo)(),(0,R.M)(e=>this.itemPageUrl=(0,l._o)(e)),(0,j.T)(e=>e.firstMetadataValue("dc.title")))}static#t=this.\u0275fac=function(c){return new(c||s)(t.rXU(I.nX),t.rXU(h.Bq),t.rXU(J.I),t.rXU(E.QualityAssuranceEventDataService),t.rXU(T.m),t.rXU(O.c$),t.rXU(n.AuthorizationDataService),t.rXU(X.ItemDataService))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ds-quality-assurance-events"]],standalone:!0,features:[t.aNF],decls:26,vars:15,consts:[["acceptModal",""],["ignoreModal",""],["rejectModal",""],["undoModal",""],["noPID",""],[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between"],[3,"type",4,"ngIf"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","sortOptions","paginationChange",4,"ngIf"],[3,"type"],[3,"innerHTML"],["target","_blank",3,"routerLink"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","sortOptions"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","events",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"trust-col"],["scope","col",1,"title-col"],["scope","col","class","content-col",4,"ngIf"],[4,"ngIf"],["scope","col",1,"button-col"],[4,"ngFor","ngForOf"],["scope","col",1,"content-col"],["target","_blank","rel","noopener noreferrer",3,"routerLink",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],["class","btn-group button-width",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],[1,"small","pr-1"],[3,"title"],["target","_blank",3,"href"],[1,"d-flex","align-items-center"],[1,"text-truncate","d-inline-block","w-75",3,"title"],[1,"small"],[1,"badge","badge-info"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf","ngIfElse"],["rel","noopener noreferrer","target","_blank",3,"href"],[1,"abstract-container"],[1,"text-ellipsis"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","fas fa-angle-down",4,"ngIf"],["class","fas fa-angle-up",4,"ngIf"],[1,"fas","fa-angle-down"],[1,"fas","fa-angle-up"],[3,"ePersonId","properties"],["target","_blank","rel","noopener noreferrer",3,"title","routerLink",4,"ngIf"],[1,"btn-group"],["class","btn btn-outline-primary btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"title","routerLink"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-search"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"fas","fa-trash-alt"],[1,"btn-group","button-width"],["class","btn btn-outline-success btn-sm button-width","container","body",3,"ngbTooltip","disabled","click",4,"ngIf"],["container","body",1,"btn","btn-outline-dark","btn-sm","button-width",3,"click","ngbTooltip","disabled"],[1,"fas","fa-ban"],["class","btn btn-outline-danger btn-sm button-width","container","body",3,"ngbTooltip","disabled","click",4,"ngIf"],["container","body",1,"btn","btn-outline-success","btn-sm","button-width",3,"click","ngbTooltip","disabled"],[1,"fas","fa-check"],["container","body",1,"btn","btn-outline-danger","btn-sm","button-width",3,"click","ngbTooltip","disabled"],[1,"modal-header"],["id","acceptModal",1,"modal-title"],[1,"modal-body"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"d-none","d-sm-inline"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-close"],["id","ignoreModal",1,"modal-title"],[1,"btn","btn-outline-danger","float-right",3,"click"],["id","rejectModal",1,"modal-title"],["id","undoModal",1,"modal-title"]],template:function(c,r){1&c&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"h2",8)(4,"div",9),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.DNE(7,ht,3,8,"ds-alert",10)(8,vt,6,12,"ds-alert",10),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"h4",8),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.DNE(14,ft,2,3,"ds-loading",11),t.nI1(15,"async"),t.DNE(16,Zt,7,11,"ds-pagination",12),t.nI1(17,"async"),t.k0s()()(),t.DNE(18,te,18,12,"ng-template",null,0,t.C5r)(20,ee,18,12,"ng-template",null,1,t.C5r)(22,ne,18,12,"ng-template",null,2,t.C5r)(24,se,18,12,"ng-template",null,3,t.C5r)),2&c&&(t.R7$(5),t.SpI(" ",t.bMT(6,7,"notifications.events.title")," "),t.R7$(2),t.Y8G("ngIf",!r.targetId),t.R7$(),t.Y8G("ngIf",r.targetId),t.R7$(4),t.Lme(" ",t.bMT(13,9,"quality-assurance.events.topic")," ",r.showTopic," "),t.R7$(2),t.Y8G("ngIf",t.bMT(15,11,r.isEventPageLoading)),t.R7$(2),t.Y8G("ngIf",!0!==t.bMT(17,13,r.isEventPageLoading)))},dependencies:[g.C,d.bT,k.v,V.e,d.pM,I.Wk,h.n8,h.md,d.Jj,O.h,O.D9,gt],styles:[".button-col[_ngcontent-%COMP%], .trust-col[_ngcontent-%COMP%]{width:15%}.title-col[_ngcontent-%COMP%]{width:30%}.content-col[_ngcontent-%COMP%]{width:40%}.button-width[_ngcontent-%COMP%]{width:100%}.abstract-container[_ngcontent-%COMP%]{height:76px;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis}.show[_ngcontent-%COMP%]{overflow:visible;height:auto}"]})}return s})(),ae=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["ds-quality-assurance-events-page"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(c,r){1&c&&t.nrm(0,"ds-quality-assurance-events")},dependencies:[ie],encapsulation:2})}return s})()},24301:(U,P,a)=>{a.d(P,{h:()=>d});const d=(I,h)=>({pageId:I.queryParams.pageId,pageSize:parseInt(I.queryParams.pageSize,10),currentPage:parseInt(I.queryParams.page,10)})},15482:(U,P,a)=>{a.d(P,{c:()=>S});var d=a(53107),I=a(95968),h=a(47947),O=a(18062),y=a(58620);const S=(G,R,j=(0,d.WQX)(I.Ix),C=(0,d.WQX)(y.p),$=(0,d.WQX)(O.vQ))=>C.getSources($.qualityAssuranceConfig.pageSize,0).pipe((0,h.T)(o=>(1===o.page.length&&j.navigate([F(G)+"/"+o.page[0].id]),o.page)));function F(G){return G.pathFromRoot.map(R=>R.url.map(j=>j.toString()).join("/")).join("/")}},84467:(U,P,a)=>{a.d(P,{t:()=>I});var d=a(53107);let I=(()=>{class h{resolve(y,S){return{pageId:y.queryParams.pageId,pageSize:parseInt(y.queryParams.pageSize,10),currentPage:parseInt(y.queryParams.page,10)}}static#t=this.\u0275fac=function(S){return new(S||h)};static#e=this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},36952:(U,P,a)=>{a.d(P,{E:()=>T});var d=a(54460),I=a(95968),h=a(69685),O=a(37610),y=a(66645),S=a(95438),F=a(96858),G=a(72683),R=a(21548),j=a(51661),C=a(67899),$=a(77205),i=a(53107);const o=u=>({param:u}),N=u=>[u];function Q(u,p){1&u&&(i.nrm(0,"ds-loading",7),i.nI1(1,"translate")),2&u&&i.FS9("message",i.bMT(1,1,"quality-assurance.loading"))}function Y(u,p){1&u&&i.nrm(0,"ds-loading",11)}function L(u,p){1&u&&(i.j41(0,"div",14),i.EFF(1),i.nI1(2,"translate"),i.k0s()),2&u&&(i.R7$(),i.SpI(" ",i.bMT(2,1,"quality-assurance.noSource")," "))}function n(u,p){if(1&u&&(i.j41(0,"tr")(1,"td"),i.EFF(2),i.k0s(),i.j41(3,"td"),i.EFF(4),i.nI1(5,"date"),i.k0s(),i.j41(6,"td")(7,"div",19)(8,"button",20),i.nI1(9,"translate"),i.j41(10,"span",21),i.EFF(11),i.k0s(),i.nrm(12,"i",22),i.k0s()()()()),2&u){const l=p.$implicit;i.R7$(2),i.JRh(l.id),i.R7$(2),i.JRh(i.i5U(5,5,l.lastEvent,"dd/MM/yyyy hh:mm")),i.R7$(4),i.FS9("title",i.i5U(9,8,"quality-assurance.source-list.button.detail",i.eq3(11,o,l.id))),i.Y8G("routerLink",i.eq3(13,N,l.id)),i.R7$(3),i.JRh(l.totalEvents)}}function B(u,p){if(1&u&&(i.j41(0,"div",15)(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),i.EFF(5),i.nI1(6,"translate"),i.k0s(),i.j41(7,"th",17),i.EFF(8),i.nI1(9,"translate"),i.k0s(),i.j41(10,"th",17),i.EFF(11),i.nI1(12,"translate"),i.k0s()()(),i.j41(13,"tbody"),i.DNE(14,n,13,15,"tr",18),i.nI1(15,"async"),i.k0s()()()),2&u){const l=i.XpG(3);i.R7$(5),i.JRh(i.bMT(6,4,"quality-assurance.table.source")),i.R7$(3),i.JRh(i.bMT(9,6,"quality-assurance.table.last-event")),i.R7$(3),i.JRh(i.bMT(12,8,"quality-assurance.table.actions")),i.R7$(3),i.Y8G("ngForOf",i.bMT(15,10,l.sources$))}}function x(u,p){if(1&u&&(i.qex(0),i.DNE(1,L,3,3,"div",12),i.nI1(2,"async"),i.DNE(3,B,16,12,"div",13),i.nI1(4,"async"),i.bVm()),2&u){let l,g;const b=i.XpG(2);i.R7$(),i.Y8G("ngIf",0===(null==(l=i.bMT(2,2,b.sources$))?null:l.length)),i.R7$(2),i.Y8G("ngIf",0!==(null==(g=i.bMT(4,4,b.sources$))?null:g.length))}}function X(u,p){if(1&u){const l=i.RV6();i.j41(0,"ds-pagination",8),i.nI1(1,"async"),i.bIt("paginationChange",function(){i.eBV(l);const b=i.XpG();return i.Njj(b.getQualityAssuranceSource())}),i.DNE(2,Y,1,0,"ds-loading",9),i.nI1(3,"async"),i.DNE(4,x,5,6,"ng-container",10),i.nI1(5,"async"),i.k0s()}if(2&u){const l=i.XpG();i.Y8G("paginationOptions",l.paginationConfig)("collectionSize",i.bMT(1,6,l.totalElements$))("hideGear",!1)("hideSortOptions",!0),i.R7$(2),i.Y8G("ngIf",i.bMT(3,8,l.isSourceProcessing())),i.R7$(2),i.Y8G("ngIf",!0!==i.bMT(5,10,l.isSourceProcessing()))}}let E=(()=>{class u{constructor(l,g){this.paginationService=l,this.notificationsStateService=g,this.paginationConfig=Object.assign(new C.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[]}ngOnInit(){this.sources$=this.notificationsStateService.getQualityAssuranceSource(),this.totalElements$=this.notificationsStateService.getQualityAssuranceSourceTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceSourceLoaded().pipe((0,O.s)(1)).subscribe(()=>{this.getQualityAssuranceSource()}))}isSourceLoading(){return this.notificationsStateService.isQualityAssuranceSourceLoading()}isSourceProcessing(){return this.notificationsStateService.isQualityAssuranceSourceProcessing()}getQualityAssuranceSource(){this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,y.F)()).subscribe(l=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceSource(l.pageSize,l.currentPage)})}updatePaginationFromRouteParams(l){l.currentPage&&(this.paginationConfig.currentPage=l.currentPage),l.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(l.pageSize)?l.pageSize:this.paginationConfig.pageSizeOptions[0])}ngOnDestroy(){this.subs.filter(l=>(0,G.a4)(l)).forEach(l=>l.unsubscribe())}static#t=this.\u0275fac=function(g){return new(g||u)(i.rXU(S.m),i.rXU($.p))};static#e=this.\u0275cmp=i.VBU({type:u,selectors:[["ds-quality-assurance-source"]],standalone:!0,features:[i.aNF],decls:16,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type","content"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions","paginationChange",4,"ngIf"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["class","container","message","'quality-assurance.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'quality-assurance.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","routerLink"],[1,"badge","badge-info"],[1,"fas","fa-info","fa-fw"]],template:function(g,b){1&g&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i.EFF(4),i.nI1(5,"translate"),i.k0s(),i.nrm(6,"ds-alert",4),i.k0s()(),i.j41(7,"div",1)(8,"div",2)(9,"h4",3),i.EFF(10),i.nI1(11,"translate"),i.k0s(),i.DNE(12,Q,2,3,"ds-loading",5),i.nI1(13,"async"),i.DNE(14,X,6,12,"ds-pagination",6),i.nI1(15,"async"),i.k0s()()()),2&g&&(i.R7$(4),i.JRh(i.bMT(5,6,"quality-assurance.title")),i.R7$(2),i.Y8G("type","alert-info")("content","quality-assurance.source.description"),i.R7$(4),i.JRh(i.bMT(11,8,"quality-assurance.source")),i.R7$(2),i.Y8G("ngIf",i.bMT(13,10,b.isSourceLoading())),i.R7$(2),i.Y8G("ngIf",!0!==i.bMT(15,12,b.isSourceLoading())))},dependencies:[F.C,d.bT,R.v,j.e,d.pM,I.Wk,d.Jj,h.h,h.D9,d.vh]})}return u})(),T=(()=>{class u{static#t=this.\u0275fac=function(g){return new(g||u)};static#e=this.\u0275cmp=i.VBU({type:u,selectors:[["ds-quality-assurance-source-page-component"]],standalone:!0,features:[i.aNF],decls:1,vars:0,template:function(g,b){1&g&&i.nrm(0,"ds-quality-assurance-source")},dependencies:[E],encapsulation:2})}return u})()},87017:(U,P,a)=>{a.d(P,{G:()=>I});var d=a(53107);let I=(()=>{class h{resolve(y,S){return{pageId:y.queryParams.pageId,pageSize:parseInt(y.queryParams.pageSize,10),currentPage:parseInt(y.queryParams.page,10)}}static#t=this.\u0275fac=function(S){return new(S||h)};static#e=this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},15562:(U,P,a)=>{a.d(P,{V:()=>q});var d=a(54460),I=a(95968),h=a(69685),O=a(82040),y=a(37610),S=a(66645),F=a(47947),G=a(56405),R=a(17584),j=a(95438),C=a(12007),$=a(15497),i=a(96858),o=a(72683),N=a(21548),Q=a(51661),Y=a(67899),L=a(77205),n=a(53107);const B=v=>({source:v}),x=v=>({param:v}),X=(v,t,_)=>[v,t,_];function E(v,t){if(1&v&&(n.j41(0,"ds-alert",7),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&v){const _=n.XpG();n.Y8G("type","alert-info"),n.R7$(),n.JRh(n.i5U(2,2,"quality-assurance.topics.description",n.eq3(5,B,_.sourceId)))}}function T(v,t){if(1&v&&(n.j41(0,"ds-alert",7),n.EFF(1),n.nI1(2,"translate"),n.j41(3,"a",8),n.EFF(4),n.nI1(5,"async"),n.k0s()()),2&v){const _=n.XpG();n.Y8G("type","alert-info"),n.R7$(),n.SpI(" ",n.i5U(2,4,"quality-assurance.topics.description-with-target",n.eq3(9,B,_.sourceId))," "),n.R7$(2),n.Y8G("routerLink",_.itemPageUrl),n.R7$(),n.JRh(n.bMT(5,7,_.getTargetItemTitle()))}}function u(v,t){1&v&&(n.nrm(0,"ds-loading",9),n.nI1(1,"translate")),2&v&&n.FS9("message",n.bMT(1,1,"quality-assurance.loading"))}function p(v,t){1&v&&n.nrm(0,"ds-loading",13)}function l(v,t){1&v&&(n.j41(0,"div",16),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&v&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"quality-assurance.noTopics")," "))}function g(v,t){if(1&v&&(n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.nI1(5,"date"),n.k0s(),n.j41(6,"td")(7,"div",21)(8,"button",22),n.nI1(9,"translate"),n.j41(10,"span",23),n.EFF(11),n.k0s(),n.nrm(12,"i",24),n.k0s()()()()),2&v){const _=t.$implicit,A=n.XpG(4);n.R7$(2),n.JRh(_.name),n.R7$(2),n.JRh(n.i5U(5,5,_.lastEvent,"dd/MM/yyyy hh:mm")),n.R7$(4),n.FS9("title",n.i5U(9,8,"quality-assurance.topics-list.button.detail",n.eq3(11,x,_.name))),n.Y8G("routerLink",n.sMw(13,X,A.getQualityAssuranceRoute(),A.sourceId,_.id)),n.R7$(3),n.JRh(_.totalEvents)}}function b(v,t){if(1&v&&(n.j41(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th",19),n.EFF(5),n.nI1(6,"translate"),n.k0s(),n.j41(7,"th",19),n.EFF(8),n.nI1(9,"translate"),n.k0s(),n.j41(10,"th",19),n.EFF(11),n.nI1(12,"translate"),n.k0s()()(),n.j41(13,"tbody"),n.DNE(14,g,13,17,"tr",20),n.nI1(15,"async"),n.k0s()()()),2&v){const _=n.XpG(3);n.R7$(5),n.JRh(n.bMT(6,4,"quality-assurance.table.topic")),n.R7$(3),n.JRh(n.bMT(9,6,"quality-assurance.table.last-event")),n.R7$(3),n.JRh(n.bMT(12,8,"quality-assurance.table.actions")),n.R7$(3),n.Y8G("ngForOf",n.bMT(15,10,_.topics$))}}function k(v,t){if(1&v&&(n.qex(0),n.DNE(1,l,3,3,"div",14),n.nI1(2,"async"),n.DNE(3,b,16,12,"div",15),n.nI1(4,"async"),n.bVm()),2&v){let _,A;const D=n.XpG(2);n.R7$(),n.Y8G("ngIf",0===(null==(_=n.bMT(2,2,D.topics$))?null:_.length)),n.R7$(2),n.Y8G("ngIf",0!==(null==(A=n.bMT(4,4,D.topics$))?null:A.length))}}function J(v,t){if(1&v){const _=n.RV6();n.j41(0,"ds-pagination",10),n.nI1(1,"async"),n.bIt("paginationChange",function(){n.eBV(_);const D=n.XpG();return n.Njj(D.getQualityAssuranceTopics(D.sourceId,D.targetId))}),n.DNE(2,p,1,0,"ds-loading",11),n.nI1(3,"async"),n.DNE(4,k,5,6,"ng-container",12),n.nI1(5,"async"),n.k0s()}if(2&v){const _=n.XpG();n.Y8G("paginationOptions",_.paginationConfig)("collectionSize",n.bMT(1,6,_.totalElements$))("hideGear",!1)("hideSortOptions",!0),n.R7$(2),n.Y8G("ngIf",n.bMT(3,8,_.isTopicsProcessing())),n.R7$(2),n.Y8G("ngIf",!0!==n.bMT(5,10,_.isTopicsProcessing()))}}let V=(()=>{class v{constructor(_,A,D,H,w){this.paginationService=_,this.activatedRoute=A,this.itemService=D,this.notificationsStateService=H,this.router=w,this.paginationConfig=Object.assign(new Y.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[],this.sourceId=this.activatedRoute.snapshot.params.sourceId,this.targetId=this.activatedRoute.snapshot.params.targetId}ngOnInit(){this.topics$=this.notificationsStateService.getQualityAssuranceTopics().pipe((0,O.M)(_=>{1===_.length&&"true"===this.activatedRoute.snapshot.queryParams?.forward&&this.router.navigate([this.getQualityAssuranceRoute(),this.sourceId,_[0].id])})),this.totalElements$=this.notificationsStateService.getQualityAssuranceTopicsTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceTopicsLoaded().pipe((0,y.s)(1)).subscribe(()=>{this.getQualityAssuranceTopics(this.sourceId,this.targetId)}))}isTopicsLoading(){return this.notificationsStateService.isQualityAssuranceTopicsLoading()}isTopicsProcessing(){return this.notificationsStateService.isQualityAssuranceTopicsProcessing()}getQualityAssuranceTopics(_,A){this.subs.push(this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,S.F)()).subscribe(D=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceTopics(D.pageSize,D.currentPage,_,A)}))}updatePaginationFromRouteParams(_){_.currentPage&&(this.paginationConfig.currentPage=_.currentPage),_.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(_.pageSize)?_.pageSize:this.paginationConfig.pageSizeOptions[0])}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,y.s)(1),(0,C.qD)(),(0,C.Bo)(),(0,O.M)(_=>this.itemPageUrl=(0,$._o)(_)),(0,F.T)(_=>_.firstMetadataValue("dc.title")))}getItemPageRoute(_){return(0,$._o)(_)}getQualityAssuranceRoute(){return(0,G.b7)()}ngOnDestroy(){this.subs.filter(_=>(0,o.a4)(_)).forEach(_=>_.unsubscribe())}static#t=this.\u0275fac=function(A){return new(A||v)(n.rXU(j.m),n.rXU(I.nX),n.rXU(R.ItemDataService),n.rXU(L.p),n.rXU(I.Ix))};static#e=this.\u0275cmp=n.VBU({type:v,selectors:[["ds-quality-assurance-topic"]],standalone:!0,features:[n.aNF],decls:17,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type",4,"ngIf"],["class","container",3,"message",4,"ngIf"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions","paginationChange",4,"ngIf"],[3,"type"],[3,"routerLink"],[1,"container",3,"message"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["class","container","message","'quality-assurance.loading' | translate",4,"ngIf"],[4,"ngIf"],["message","'quality-assurance.loading' | translate",1,"container"],["class","alert alert-info w-100 mb-2 mt-2","role","alert",4,"ngIf"],["class","table-responsive mt-2",4,"ngIf"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","routerLink"],[1,"badge","badge-info"],[1,"fas","fa-info","fa-fw"]],template:function(A,D){1&A&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.DNE(6,E,3,7,"ds-alert",4)(7,T,6,11,"ds-alert",4),n.k0s()(),n.j41(8,"div",1)(9,"div",2)(10,"h4",3),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.DNE(13,u,2,3,"ds-loading",5),n.nI1(14,"async"),n.DNE(15,J,6,12,"ds-pagination",6),n.nI1(16,"async"),n.k0s()()()),2&A&&(n.R7$(4),n.JRh(n.bMT(5,6,"quality-assurance.title")),n.R7$(2),n.Y8G("ngIf",!D.targetId),n.R7$(),n.Y8G("ngIf",D.targetId),n.R7$(4),n.JRh(n.bMT(12,8,"quality-assurance.topics")),n.R7$(2),n.Y8G("ngIf",n.bMT(14,10,D.isTopicsLoading())),n.R7$(2),n.Y8G("ngIf",!0!==n.bMT(16,12,D.isTopicsLoading())))},dependencies:[i.C,d.bT,N.v,Q.e,d.pM,I.Wk,d.Jj,h.h,h.D9,d.vh]})}return v})(),q=(()=>{class v{static#t=this.\u0275fac=function(A){return new(A||v)};static#e=this.\u0275cmp=n.VBU({type:v,selectors:[["ds-notification-qa-page"]],standalone:!0,features:[n.aNF],decls:1,vars:0,template:function(A,D){1&A&&n.nrm(0,"ds-quality-assurance-topic")},dependencies:[V],encapsulation:2})}return v})()}}]);