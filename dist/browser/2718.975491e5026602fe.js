"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[2718],{72553:(M,b,o)=>{o.d(b,{Q:()=>S});class S{constructor(c,e){this.text=c,this.url=e}}},32588:(M,b,o)=>{o.d(b,{S:()=>g});var S=o(53107),F=o(72683),c=o(67044),e=o(63016),_=o(72553);let I=(()=>{class h{getBreadcrumbs(f,T){return(0,e.of)([new _.Q(f+".breadcrumbs",T)])}static#e=this.\u0275fac=function(T){return new(T||h)};static#t=this.\u0275prov=S.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const g=(h,U,f=(0,S.WQX)(I))=>{const T=h.data.breadcrumbKey;if((0,F.Tn)(T))throw new Error('You provided an i18nBreadcrumbResolver for url "'+h.url+"\" but no breadcrumbKey in the route's data");return{provider:f,key:T,url:(0,c.F)(h)}}},2718:(M,b,o)=>{o.r(b),o.d(b,{ROUTES:()=>ms});var S=o(21709),F=o(32588),c=o(54460),e=o(53107),_=o(95968),p=o(69685),I=o(71217),g=o(22867),h=o(41483),U=o(25814),f=o(47947),T=o(30593),C=o(82040),V=o(37610),L=o(24447),J=o(21706),A=o(83116),ae=o(78052),P=o(58268),H=o(37330),oe=o(47587),v=o(12007),le=o(87913),ce=o(16700),m=o(72683),pe=o(60902),z=o(21548),G=o(79224),ue=o(89351),de=o(73204),E=o(63524),w=o(24106);const K=[(0,w.s)("files")];var Q=o(39942),y=o(33707);const fe=["*"];let he=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},standalone:!0,features:[e.aNF],ngContentSelectors:fe,decls:4,vars:3,consts:[[1,"h3","mt-4"]],template:function(n,r){1&n&&(e.NAR(),e.j41(0,"h2",0),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.SdG(3)),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,r.title)))},dependencies:[p.h,p.D9],encapsulation:2})}return s})();var ve=o(27691),D=o(2155);const _e=(s,a)=>({id:s,name:a}),ge=s=>({id:s});function be(s,a){1&s&&(e.j41(0,"div",20),e.EFF(1),e.nI1(2,"translate"),e.nrm(3,"i",21),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.refreshing")," "))}function Se(s,a){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.Lme("",null==t?null:t.name," ",null==t?null:t.value,"")}}function Ie(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",22),e.DNE(1,Se,2,2,"div",23),e.k0s()),2&s){const t=e.XpG().ngIf;e.Y8G("title","process.detail.arguments"),e.R7$(),e.Y8G("ngForOf",null==t?null:t.parameters)}}function Te(s,a){if(1&s&&(e.j41(0,"ds-file-download-link",28)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"dsFileSize"),e.k0s()()),2&s){const t=a.$implicit,n=e.XpG(4);e.Y8G("bitstream",t),e.R7$(2),e.JRh(n.getFileName(t)),e.R7$(2),e.SpI("(",e.bMT(5,3,null==t?null:t.sizeBytes),")")}}function Re(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",25)(1,"div",26),e.DNE(2,Te,6,5,"ds-file-download-link",27),e.k0s()()),2&s){const t=e.XpG().ngVar;e.Y8G("title","process.detail.output-files"),e.R7$(2),e.Y8G("ngForOf",t)}}function Fe(s,a){if(1&s&&(e.j41(0,"div"),e.DNE(1,Re,3,2,"ds-process-detail-field",24),e.k0s()),2&s){const t=a.ngVar;e.R7$(),e.Y8G("ngIf",t&&(null==t?null:t.length)>0)}}function Pe(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",29),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&s){const t=e.XpG().ngIf,n=e.XpG();e.Y8G("title",e.bMT(1,2,"process.detail.start-time")),e.R7$(3),e.JRh(e.brH(4,4,t.startTime,n.dateFormat,"UTC"))}}function Ve(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",30),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&s){const t=e.XpG().ngIf,n=e.XpG();e.Y8G("title",e.bMT(1,2,"process.detail.end-time")),e.R7$(3),e.JRh(e.brH(4,4,t.endTime,n.dateFormat,"UTC"))}}function ye(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",31),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.k0s()()),2&s){const t=e.XpG().ngIf;e.Y8G("title",e.bMT(1,2,"process.detail.status")),e.R7$(3),e.JRh(t.processStatus)}}function Ce(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const r=e.XpG(3);return e.Njj(r.showProcessOutputLogs())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.logs.button")," "))}function De(s,a){1&s&&(e.nrm(0,"ds-loading",38),e.nI1(1,"translate")),2&s&&e.FS9("message",e.bMT(1,1,"process.detail.logs.loading"))}function $e(s,a){if(1&s&&(e.j41(0,"pre",39),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,t.outputLogs$))}}function je(s,a){1&s&&(e.j41(0,"p",40),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.logs.none")," "))}function Me(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",32),e.DNE(1,Ce,3,3,"button",33)(2,De,2,3,"ds-loading",34),e.nI1(3,"async"),e.DNE(4,$e,3,3,"pre",35),e.nI1(5,"async"),e.DNE(6,je,3,3,"p",36),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"dsHasNoValue"),e.nI1(10,"async"),e.k0s()),2&s){let t,n;const r=e.XpG().ngIf,i=e.XpG();e.Y8G("title","process.detail.output"),e.R7$(),e.Y8G("ngIf",!i.showOutputLogs&&void 0!==(null==r||null==r._links||null==r._links.output?null:r._links.output.href)),e.R7$(),e.Y8G("ngIf",e.bMT(3,5,i.retrievingOutputLogs$)),e.R7$(2),e.Y8G("ngIf",i.showOutputLogs&&(null==(t=e.bMT(5,7,i.outputLogs$))?null:t.length)>0),e.R7$(2),e.Y8G("ngIf",!0!==e.bMT(7,9,i.retrievingOutputLogs$)&&i.showOutputLogs&&e.bMT(9,13,e.bMT(8,11,i.outputLogs$))||0===(null==(n=e.bMT(10,15,i.outputLogs$))?null:n.length)||!r._links.output)}}function Ge(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2),i=e.sdS(3);return e.Njj(r.openDeleteModal(i))}),e.nrm(1,"i",42),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&s&&(e.R7$(2),e.SpI("",e.bMT(3,1,"process.detail.delete.button")," "))}function Ee(s,a){if(1&s&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.DNE(6,be,4,3,"div",6),e.nI1(7,"async"),e.k0s(),e.j41(8,"ds-process-detail-field",7)(9,"div"),e.EFF(10),e.k0s()(),e.DNE(11,Ie,2,2,"ds-process-detail-field",8)(12,Fe,2,1,"div",9),e.nI1(13,"async"),e.DNE(14,Pe,5,8,"ds-process-detail-field",10)(15,Ve,5,8,"ds-process-detail-field",11)(16,ye,4,4,"ds-process-detail-field",12)(17,Me,11,17,"ds-process-detail-field",13),e.j41(18,"ds-process-detail-field",14)(19,"button",15),e.nrm(20,"i",16),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.DNE(23,Ge,4,3,"button",17),e.k0s(),e.j41(24,"div",18)(25,"a",19),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()),2&s){let t;const n=a.ngIf,r=e.XpG();e.R7$(4),e.SpI(" ",e.i5U(5,16,"process.detail.title",e.l_i(27,_e,null==n?null:n.processId,null==n?null:n.scriptName))," "),e.R7$(2),e.Y8G("ngIf",e.bMT(7,19,r.isRefreshing$)),e.R7$(2),e.Y8G("title","process.detail.script"),e.R7$(2),e.JRh(null==n?null:n.scriptName),e.R7$(),e.Y8G("ngIf",(null==n?null:n.parameters)&&(null==n||null==n.parameters?null:n.parameters.length)>0),e.R7$(),e.Y8G("ngVar",null==(t=e.bMT(13,21,r.filesRD$))||null==t.payload?null:t.payload.page),e.R7$(2),e.Y8G("ngIf",n&&n.startTime),e.R7$(),e.Y8G("ngIf",n&&n.endTime),e.R7$(),e.Y8G("ngIf",n&&n.processStatus),e.R7$(),e.Y8G("ngIf",r.isProcessFinished(n)),e.R7$(),e.Y8G("title","process.detail.actions"),e.R7$(),e.Y8G("queryParams",e.eq3(30,ge,null==n?null:n.processId)),e.R7$(2),e.JRh(e.bMT(22,23,"process.detail.create")),e.R7$(2),e.Y8G("ngIf",r.isProcessFinished(n)),e.R7$(2),e.Y8G("routerLink","/processes"),e.R7$(),e.JRh(e.bMT(27,25,"process.detail.back"))}}function we(s,a){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",44)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",45),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.closeModal())}),e.j41(7,"span",46),e.EFF(8,"\xd7"),e.k0s()()(),e.j41(9,"div",47)(10,"div"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",48)(14,"button",49),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.closeModal())}),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"button",50),e.bIt("click",function(){const r=e.eBV(t).ngIf,i=e.XpG(2);return e.Njj(i.deleteProcess(r))}),e.EFF(18),e.nI1(19,"translate"),e.k0s()()()()}2&s&&(e.R7$(4),e.JRh(e.bMT(5,4,"process.detail.delete.header")),e.R7$(7),e.JRh(e.bMT(12,6,"process.detail.delete.body")),e.R7$(4),e.JRh(e.bMT(16,8,"process.detail.delete.cancel")),e.R7$(3),e.SpI("",e.bMT(19,10,"process.detail.delete.confirm")," "))}function ke(s,a){if(1&s&&(e.DNE(0,we,20,12,"div",43),e.nI1(1,"async")),2&s){let t;const n=e.XpG();e.Y8G("ngIf",null==(t=e.bMT(1,1,n.processRD$))?null:t.payload)}}let Oe=(()=>{class s{constructor(t,n,r,i,u,d,B,N,Y,X,fs,hs){this.platformId=t,this.route=n,this.router=r,this.processService=i,this.bitstreamDataService=u,this.nameService=d,this.zone=B,this.authService=N,this.http=Y,this.modalService=X,this.notificationsService=fs,this.translateService=hs,this.AlertTypeEnum=ce.v,this.outputLogs$=new I.t(void 0),this.showOutputLogs=!1,this.retrievingOutputLogs$=new I.t(!1),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.processRD$=this.route.data.pipe((0,g.n)(t=>(0,c.UE)(this.platformId)?(this.autoRefreshingID=this.route.snapshot.params.id,this.processService.autoRefreshUntilCompletion(this.autoRefreshingID,5e3,...K)):[t.process]),(0,h.p)(()=>!this.isDeleting),(0,H.QD)(this.router,this.authService)),this.isRefreshing$=this.processRD$.pipe((0,U.I)(t=>P.ProcessDataService.hasCompletedOrFailed(t.payload)),(0,f.T)(()=>!1),(0,T.Z)(!0)),this.filesRD$=this.processRD$.pipe((0,v.Hz)(),(0,g.n)(t=>t.files))}ngOnDestroy(){(0,m.a4)(this.autoRefreshingID)&&this.processService.stopAutoRefreshing(this.autoRefreshingID)}getFileName(t){return t instanceof oe.M?this.nameService.getName(t):"unknown"}showProcessOutputLogs(){this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const t=this.processRD$.pipe((0,v.ak)(),(0,g.n)(n=>this.bitstreamDataService.findByHref(n._links.output.href,!1)));this.outputLogFileUrl$=t.pipe((0,v.yd)(),(0,C.M)(n=>{204===n.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,g.n)(n=>{const r=n.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,V.s)(1),(0,f.T)(i=>(0,m.a4)(i)?new le.t(r,`?authentication-token=${i}`).toString():r))}))}),this.outputLogFileUrl$.pipe((0,V.s)(1),(0,g.n)(t=>this.getTextFile(t)),(0,L.j)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(t=>{this.outputLogs$.next(t)})}getTextFile(t){return this.http.get(t,{responseType:"text"}).pipe((0,L.j)(()=>{this.showOutputLogs=!0}))}isProcessFinished(t){return(0,m.a4)(t)&&(0,m.a4)(t.processStatus)&&(t.processStatus.toString()===y.K[y.K.COMPLETED].toString()||t.processStatus.toString()===y.K[y.K.FAILED].toString())}deleteProcess(t){this.isDeleting=!0,this.processService.delete(t.processId).pipe((0,v.qD)()).subscribe(n=>{n.hasSucceeded?(this.notificationsService.success(this.translateService.get("process.detail.delete.success")),this.closeModal(),this.router.navigateByUrl((0,Q.JO)())):(this.notificationsService.error(this.translateService.get("process.detail.delete.error")),this.isDeleting=!1)})}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(e.Agw),e.rXU(_.nX),e.rXU(_.Ix),e.rXU(P.ProcessDataService),e.rXU(ae.BitstreamDataService),e.rXU(A.f),e.rXU(e.SKi),e.rXU(J.uR),e.rXU(ve.Qq),e.rXU(D.Bq),e.rXU(G.I),e.rXU(p.c$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-detail"]],standalone:!0,features:[e.aNF],decls:4,vars:3,consts:[["deleteModal",""],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-10"],[1,"flex-grow-1"],["class","col-2 refresh-counter",4,"ngIf"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],["id","process-actions",3,"title"],["routerLink","/processes/new",1,"btn","btn-success","mr-2",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","delete","class","btn btn-danger",3,"click",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],[1,"col-2","refresh-counter"],[1,"fas","fa-sync-alt","fa-spin"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[1,"d-flex","flex-column"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-themed-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3","tabindex","0",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-themed-loading",3,"message"],["tabindex","0",1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"],["id","delete",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","pr-2"],[4,"ngIf"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(n,r){if(1&n&&(e.DNE(0,Ee,28,32,"div",1),e.nI1(1,"async"),e.DNE(2,ke,2,3,"ng-template",null,0,e.C5r)),2&n){let i;e.Y8G("ngIf",null==(i=e.bMT(1,1,r.processRD$))?null:i.payload)}},dependencies:[c.bT,he,c.pM,E.r,pe.z,z.v,_.Wk,c.Jj,c.vh,ue.s,p.h,p.D9,de.n],encapsulation:2})}return s})();var xe=o(66559),Be=o(25138),l=o(10936),W=o(72578),Ne=o(2249),k=(o(29437),o(88476));function R(s){return s}var O=function(s){return s.STRING="String",s.DATE="date",s.BOOLEAN="boolean",s.FILE="InputStream",s.OUTPUT="OutputStream",s}(O||{});let $=(()=>{class s{constructor(){this.updateValue=new e.bkB}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:function(n,r){},encapsulation:2})}return s})(),Ye=(()=>{class s extends ${ngOnInit(){this.updateValue.emit(!0)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(s)))(r||s)}})();static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-boolean-value-input"]],standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:2,vars:7,consts:[["type","hidden","value","true",3,"name","id"]],template:function(n,r){1&n&&(e.nrm(0,"input",0),e.nI1(1,"translate")),2&n&&(e.Mz_("name","boolean-value-",r.index,""),e.Mz_("id","boolean-value-",r.index,""),e.BMQ("aria-label",e.bMT(1,5,"process.new.parameter.label")))},dependencies:[p.h,p.D9]})}return s})();function Xe(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.string.required")," "))}function Ue(s,a){if(1&s&&(e.j41(0,"div",3),e.DNE(1,Xe,3,3,"div",4),e.k0s()),2&s){e.XpG();const t=e.sdS(1);e.R7$(),e.Y8G("ngIf",t.errors.required)}}let Le=(()=>{class s extends ${ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(s)))(r||s)}})();static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error mb-0",4,"ngIf"],[1,"alert","alert-danger","validation-error","mb-0"],[4,"ngIf"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"input",1,0),e.nI1(2,"translate"),e.bIt("ngModelChange",function(d){return e.eBV(i),e.Njj(r.setValue(d))}),e.k0s(),e.DNE(3,Ue,2,1,"div",2)}if(2&n){const i=e.sdS(1);e.Mz_("name","date-value-",r.index,""),e.Mz_("id","date-value-",r.index,""),e.Y8G("ngModel",r.value),e.BMQ("aria-label",e.bMT(2,7,"process.new.parameter.label")),e.R7$(3),e.Y8G("ngIf",i.invalid&&(i.dirty||i.touched))}},dependencies:[l.YN,l.me,l.BC,l.YS,l.vS,c.bT,p.h,p.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}return s})(),Je=(()=>{class s{constructor(){this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=e.FsC({type:s,selectors:[["input","type","file"]],hostBindings:function(n,r){1&n&&e.bIt("change",function(u){return r.onChange(u.target.files)})("blur",function(){return r.onTouched()})},standalone:!0,features:[e.Jv_([{provide:l.kq,useExisting:s,multi:!0}])]})}return s})();var Ae=o(13044);function He(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.file.required")," "))}function ze(s,a){if(1&s&&(e.j41(0,"div",6),e.DNE(1,He,3,3,"div",7),e.k0s()),2&s){e.XpG();const t=e.sdS(7);e.R7$(),e.Y8G("ngIf",t.errors.required)}}let Ke=(()=>{class s extends ${setFile(t){this.fileObject=t.length>0?t[0]:void 0,this.updateValue.emit(this.fileObject)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(s)))(r||s)}})();static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-file-value-input"]],standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:9,vars:12,consts:[["file","ngModel"],[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-primary"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"label",1)(1,"span",2),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"span",3),e.EFF(5),e.k0s()(),e.j41(6,"input",4,0),e.bIt("ngModelChange",function(d){return e.eBV(i),e.Njj(r.setFile(d))}),e.k0s(),e.DNE(8,ze,2,1,"div",5)}if(2&n){const i=e.sdS(7);e.Mz_("for","file-upload-",r.index,""),e.R7$(2),e.SpI(" ",e.bMT(3,10,"process.new.parameter.file.upload-button")," "),e.R7$(3),e.JRh(null==r.fileObject?null:r.fileObject.name),e.R7$(),e.Mz_("name","file-upload-",r.index,""),e.Mz_("id","file-upload-",r.index,""),e.Y8G("ngModel",r.fileObject),e.R7$(2),e.Y8G("ngIf",i.invalid&&(i.dirty||i.touched))}},dependencies:[Je,l.YN,l.me,l.BC,l.vS,Ae.R,c.bT,p.h,p.D9],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return s})();function Qe(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.string.required")," "))}function We(s,a){if(1&s&&(e.j41(0,"div",3),e.DNE(1,Qe,3,3,"div",4),e.k0s()),2&s){e.XpG();const t=e.sdS(1);e.R7$(),e.Y8G("ngIf",t.errors.required)}}let Ze=(()=>{class s extends ${ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(s)))(r||s)}})();static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],["class","alert alert-danger validation-error mb-0",4,"ngIf"],[1,"alert","alert-danger","validation-error","mb-0"],[4,"ngIf"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"input",1,0),e.nI1(2,"translate"),e.bIt("ngModelChange",function(d){return e.eBV(i),e.Njj(r.setValue(d))}),e.k0s(),e.DNE(3,We,2,1,"div",2)}if(2&n){const i=e.sdS(1);e.Mz_("name","string-value-",r.index,""),e.Mz_("id","string-value-",r.index,""),e.Y8G("ngModel",r.value),e.BMQ("aria-label",e.bMT(2,7,"process.new.parameter.label")),e.R7$(3),e.Y8G("ngIf",i.invalid&&(i.dirty||i.touched))}},dependencies:[l.YN,l.me,l.BC,l.YS,l.vS,c.bT,p.h,p.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}return s})();function qe(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-string-value-input",3),e.bIt("updateValue",function(r){e.eBV(t);const i=e.XpG();return e.Njj(i.updateValue.emit(r))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function et(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-string-value-input",3),e.bIt("updateValue",function(r){e.eBV(t);const i=e.XpG();return e.Njj(i.updateValue.emit(r))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function tt(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-date-value-input",3),e.bIt("updateValue",function(r){e.eBV(t);const i=e.XpG();return e.Njj(i.updateValue.emit(r))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function st(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-file-value-input",4),e.bIt("updateValue",function(r){e.eBV(t);const i=e.XpG();return e.Njj(i.updateValue.emit(r))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("index",t.index)}}function nt(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-boolean-value-input",4),e.bIt("updateValue",function(r){e.eBV(t);const i=e.XpG();return e.Njj(i.updateValue.emit(r))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("index",t.index)}}let rt=(()=>{class s{constructor(){this.updateValue=new e.bkB,this.parameterTypes=O}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"updateValue","initialValue","index"],[3,"updateValue","index"]],template:function(n,r){1&n&&(e.j41(0,"div",0),e.DNE(1,qe,1,2,"ds-string-value-input",1)(2,et,1,2,"ds-string-value-input",1)(3,tt,1,2,"ds-date-value-input",1)(4,st,1,1,"ds-file-value-input",2)(5,nt,1,1,"ds-boolean-value-input",2),e.k0s()),2&n&&(e.Y8G("ngSwitch",null==r.parameter?null:r.parameter.type),e.R7$(),e.Y8G("ngSwitchCase",r.parameterTypes.STRING),e.R7$(),e.Y8G("ngSwitchCase",r.parameterTypes.OUTPUT),e.R7$(),e.Y8G("ngSwitchCase",r.parameterTypes.DATE),e.R7$(),e.Y8G("ngSwitchCase",r.parameterTypes.FILE),e.R7$(),e.Y8G("ngSwitchCase",r.parameterTypes.BOOLEAN))},dependencies:[c.ux,c.e1,Ze,Le,Ke,Ye]})}return s})();function it(s,a){if(1&s&&(e.j41(0,"option",3),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("ngValue",t.name),e.R7$(),e.SpI(" ",t.nameLong||t.name," ")}}function at(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",8),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.removeParameter.emit(r.parameterValue))}),e.nrm(2,"i",9),e.k0s()}2&s&&e.BMQ("aria-label",e.bMT(1,1,"process.new.delete-parameter"))}function ot(s,a){1&s&&e.nrm(0,"span",10)}let lt=(()=>{class s{constructor(){this.parameterValue=new k.p,this.removeParameter=new e.bkB,this.changeParameter=new e.bkB}get selectedScriptParameter(){return this.parameters.find(t=>t.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(t){this.parameterValue.name=t,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(t){this.parameterValue.value=t,this.changeParameter.emit(this.parameterValue)}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:11,vars:16,consts:[["param","ngModel"],[1,"form-row","gap-2","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"ngModelChange","name","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col","px-0",3,"updateValue","initialValue","parameter","index"],["class","btn btn-danger col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-danger","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"div",1)(1,"select",2,0),e.nI1(3,"translate"),e.mxI("ngModelChange",function(d){return e.eBV(i),e.DH7(r.selectedParameter,d)||(r.selectedParameter=d),e.Njj(d)}),e.j41(4,"option",3),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.DNE(7,it,2,2,"option",4),e.k0s(),e.j41(8,"ds-parameter-value-input",5),e.bIt("updateValue",function(d){return e.eBV(i),e.Njj(r.selectedParameterValue=d)}),e.k0s(),e.DNE(9,at,3,3,"button",6)(10,ot,1,0,"span",7),e.k0s()}2&n&&(e.R7$(),e.Mz_("name","parameter-",r.index,""),e.R50("ngModel",r.selectedParameter),e.BMQ("aria-label",e.bMT(3,12,"process.new.select-parameter")),e.R7$(3),e.Y8G("ngValue",void 0),e.R7$(),e.JRh(e.bMT(6,14,"process.new.add-parameter")),e.R7$(2),e.Y8G("ngForOf",r.parameters),e.R7$(),e.Y8G("initialValue",r.parameterValue.value)("parameter",r.selectedScriptParameter)("index",r.index),e.R7$(),e.Y8G("ngIf",r.removable),e.R7$(),e.Y8G("ngIf",!r.removable))},dependencies:[l.YN,l.xH,l.y7,l.wz,l.BC,l.vS,c.pM,rt,c.bT,p.h,p.D9]})}return s})();function ct(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-parameter-select",3),e.bIt("removeParameter",function(){const r=e.eBV(t).index,i=e.XpG(2);return e.Njj(i.removeParameter(r))})("changeParameter",function(r){const i=e.eBV(t).index,u=e.XpG(2);return e.Njj(u.updateParameter(r,i))}),e.k0s()}if(2&s){const t=a.$implicit,n=a.index,r=a.last,i=e.XpG(2);e.Y8G("parameters",i.script.parameters)("parameterValue",t)("removable",!r)("index",n)}}function pt(s,a){if(1&s&&(e.j41(0,"div",1)(1,"label"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,ct,1,4,"ds-parameter-select",2),e.k0s()),2&s){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"process.new.select-parameters")),e.R7$(2),e.Y8G("ngForOf",t.parameterValues)}}let ut=(()=>{class s{constructor(){this.updateParameters=new e.bkB}ngOnInit(){(0,m.a4)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(t){t.script&&this.initParameters()}initParameters(){(0,m.a4)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(t,n){this.parameterValues[n]=t,n===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(r=>(0,m.a4)(r.name)))}removeParameter(t){this.parameterValues=this.parameterValues.filter((n,r)=>r!==t),this.updateParameters.emit(this.parameterValues.filter(n=>(0,m.a4)(n.name)))}initializeParameter(){(0,m.a4)(this.script)&&(this.parameterValues=this.script.parameters.filter(t=>t.mandatory).map(t=>Object.assign(new k.p,{name:t.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new k.p]}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.OA$,e.aNF],decls:1,vars:1,consts:[["class","form-group","data-testID","parameters-select-container",4,"ngIf"],["data-testID","parameters-select-container",1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"removeParameter","changeParameter","parameters","parameterValue","removable","index"]],template:function(n,r){1&n&&e.DNE(0,pt,5,4,"div",0),2&n&&e.Y8G("ngIf",null==r.script||null==r.script.parameters?null:r.script.parameters.length)},dependencies:[c.bT,c.pM,lt,p.h,p.D9]})}return s})();function dt(s,a){1&s&&e.eu8(0)}function mt(s,a){if(1&s&&(e.j41(0,"tr")(1,"td",4),e.EFF(2),e.DNE(3,dt,1,0,"ng-container",5),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s()()),2&s){const t=a.$implicit;e.XpG();const n=e.sdS(8);e.R7$(2),e.Lme("",t.name," ",t.nameLong," "),e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t),e.R7$(2),e.JRh(t.description)}}function ft(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function ht(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function vt(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function _t(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.file"),">"))}function gt(s,a){if(1&s&&(e.qex(0,6),e.DNE(1,ft,3,3,"span",7)(2,ht,3,3,"span",7)(3,vt,3,3,"span",7)(4,_t,3,3,"span",7),e.bVm()),2&s){const t=a.type,n=e.XpG();e.Y8G("ngSwitch",t),e.R7$(),e.Y8G("ngSwitchCase",n.parameterTypes.DATE),e.R7$(),e.Y8G("ngSwitchCase",n.parameterTypes.STRING),e.R7$(),e.Y8G("ngSwitchCase",n.parameterTypes.OUTPUT),e.R7$(),e.Y8G("ngSwitchCase",n.parameterTypes.FILE)}}let bt=(()=>{class s{constructor(){this.parameterTypes=O}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-script-help"]],inputs:{script:"script"},standalone:!0,features:[e.aNF],decls:9,vars:3,consts:[["type",""],[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(n,r){1&n&&(e.j41(0,"div",1)(1,"h2"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"table",2),e.DNE(6,mt,6,5,"tr",3),e.k0s()(),e.DNE(7,gt,5,5,"ng-template",null,0,e.C5r)),2&n&&(e.R7$(2),e.JRh(null==r.script?null:r.script.name),e.R7$(2),e.JRh(null==r.script?null:r.script.description),e.R7$(2),e.Y8G("ngForOf",null==r.script?null:r.script.parameters))},dependencies:[c.pM,c.T3,c.ux,c.e1,p.h,p.D9]})}return s})();var St=o(66645);function It(s,a){if(1&s&&(e.j41(0,"option",5),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("ngValue",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Tt(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.select-script.required")," "))}function Rt(s,a){if(1&s&&(e.j41(0,"div",8),e.DNE(1,Tt,3,3,"div",9),e.k0s()),2&s){e.XpG();const t=e.sdS(5);e.R7$(),e.Y8G("ngIf",t.errors.required)}}function Ft(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",2)(1,"label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"select",4,0),e.mxI("ngModelChange",function(r){e.eBV(t);const i=e.XpG();return e.DH7(i.selectedScript,r)||(i.selectedScript=r),e.Njj(r)}),e.j41(6,"option",5),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.DNE(9,It,2,2,"option",6),e.nI1(10,"async"),e.k0s(),e.DNE(11,Rt,2,1,"div",7),e.k0s()}if(2&s){const t=e.sdS(5),n=e.XpG();e.R7$(2),e.JRh(e.bMT(3,6,"process.new.select-script")),e.R7$(2),e.R50("ngModel",n.selectedScript),e.R7$(2),e.Y8G("ngValue",void 0),e.R7$(),e.JRh(e.bMT(8,8,"process.new.select-script.placeholder")),e.R7$(2),e.Y8G("ngForOf",e.bMT(10,10,n.scripts$)),e.R7$(2),e.Y8G("ngIf",t.invalid&&(t.dirty||t.touched))}}const Z="script";let Pt=(()=>{class s{constructor(t,n,r){this.scriptService=t,this.router=n,this.route=r,this.select=new e.bkB}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,v.yd)(),(0,v.Bo)(),(0,f.T)(t=>t.page)),this.routeSub=this.route.queryParams.pipe((0,h.p)(t=>(0,m.Tn)(t.id)),(0,f.T)(t=>t[Z]),(0,St.F)(),(0,g.n)(t=>this.scripts$.pipe((0,V.s)(1),(0,f.T)(n=>n.find(r=>r.id===t))))).subscribe(t=>{this._selectedScript=t,this.select.emit(t)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(t){this.router.navigate([],{queryParams:{[Z]:t}})}set script(t){this._selectedScript=t}ngOnDestroy(){(0,m.a4)(this.routeSub)&&this.routeSub.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(W.ScriptDataService),e.rXU(_.Ix),e.rXU(_.nX))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:R,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:2,vars:3,consts:[["script","ngModel"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(n,r){1&n&&(e.DNE(0,Ft,12,12,"div",1),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,r.scripts$))},dependencies:[c.bT,l.YN,l.xH,l.y7,l.wz,l.BC,l.YS,l.vS,c.pM,c.Jj,p.h,p.D9]})}return s})();const Vt=()=>["/processes"];function yt(s,a){if(1&s&&e.nrm(0,"ds-script-help",13),2&s){const t=e.XpG();e.Y8G("script",t.selectedScript)}}function Ct(s,a){if(1&s&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.JRh(t)}}function Dt(s,a){if(1&s&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"translate"),e.j41(3,"ul"),e.DNE(4,Ct,2,1,"li",15),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,2,"process.new.parameter.required.missing")," "),e.R7$(3),e.Y8G("ngForOf",t.missingParameters)}}let $t=(()=>{class s{constructor(t,n,r,i){this.scriptService=t,this.notificationsService=n,this.translationService=r,this.router=i,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new Ne.M}submitForm(t){if((0,m.Im)(this.parameters)&&(this.parameters=[]),!this.validateForm(t)||this.isRequiredMissing())return;const n=this.parameters.map(r=>({name:r.name,value:this.checkValue(r)}));this.scriptService.invoke(this.selectedScript.id,n,this.files).pipe((0,v.qD)()).subscribe(r=>{if(r.hasSucceeded){const i=this.translationService.get("process.new.notification.success.title"),u=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(i,u),this.sendBack(r.payload)}else{const i=this.translationService.get("process.new.notification.error.title"),u=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(i,u)}})}checkValue(t){return"object"==typeof t.value?(this.files=[...this.files,t.value],t.value.name):t.value}validateForm(t){let n=!0;return Object.keys(t.controls).forEach(r=>{t.controls[r].invalid&&(t.controls[r].markAsDirty(),n=!1)}),n}isRequiredMissing(){this.missingParameters=[];const t=this.parameters.map(r=>r.name),n=this.selectedScript.parameters.filter(r=>r.mandatory);for(const r of n)t.includes(r.name)||this.missingParameters.push(r.name);return this.missingParameters.length>0}sendBack(t){const n={queryParams:{new_process_id:t.processId}};this.router.navigate([(0,Q.JO)()],n)}updateScript(t){this.selectedScript=t,this.parameters=void 0}get generatedProcessName(){const t=this.parameters?.map(n=>{const r=this.parseValue(n.value);return(0,m.Im)(r)?n.name:`${n.name} ${r}`}).join(" ")||"";return(0,m.Im)(t)?this.selectedScript.name:`${this.selectedScript.name} ${t}`}parseValue(t){if("boolean"!=typeof t)return t instanceof File?t.name:t?.toString()}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(W.ScriptDataService),e.rXU(G.I),e.rXU(p.c$),e.rXU(_.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},standalone:!0,features:[e.aNF],decls:19,vars:16,consts:[["form","ngForm"],[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6","mb-2"],[3,"ngSubmit"],[3,"select","script"],[3,"updateParameters","initialParams","script"],[1,"btn","btn-danger","float-left",3,"routerLink"],["type","submit",1,"btn","btn-primary","float-right"],[1,"col-12","col-md-6"],[3,"script",4,"ngIf"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[3,"script"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h1",3),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",4)(6,"form",5,0),e.bIt("ngSubmit",function(){e.eBV(i);const d=e.sdS(7);return e.Njj(r.submitForm(d))}),e.j41(8,"ds-scripts-select",6),e.bIt("select",function(d){return e.eBV(i),r.selectedScript=d,e.Njj(r.parameters=void 0)}),e.k0s(),e.j41(9,"ds-process-parameters",7),e.bIt("updateParameters",function(d){return e.eBV(i),e.Njj(r.parameters=d)}),e.k0s(),e.j41(10,"a",8),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"button",9),e.EFF(14),e.nI1(15,"translate"),e.k0s()()(),e.j41(16,"div",10),e.DNE(17,yt,1,1,"ds-script-help",11),e.k0s()(),e.DNE(18,Dt,5,4,"div",12),e.k0s()}2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,9,r.headerKey)," "),e.R7$(5),e.Y8G("script",r.selectedScript),e.R7$(),e.Y8G("initialParams",r.parameters)("script",r.selectedScript),e.R7$(),e.Y8G("routerLink",e.lJ4(15,Vt)),e.R7$(),e.JRh(e.bMT(12,11,"process.new.cancel")),e.R7$(3),e.JRh(e.bMT(15,13,"process.new.submit")),e.R7$(3),e.Y8G("ngIf",r.selectedScript),e.R7$(),e.Y8G("ngIf",r.missingParameters.length>0))},dependencies:[l.YN,l.qT,l.cb,l.cV,Pt,ut,_.Wk,bt,c.bT,c.pM,p.h,p.D9]})}return s})();function jt(s,a){if(1&s&&(e.nrm(0,"ds-process-form",3),e.nI1(1,"async")),2&s){const t=a.ngVar,n=e.XpG(2);e.Y8G("selectedScript",e.bMT(1,2,n.script$))("parameters",t.parameters)}}function Mt(s,a){if(1&s&&(e.qex(0),e.DNE(1,jt,2,4,"ds-process-form",2),e.nI1(2,"async"),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngVar",e.bMT(2,1,t.fromExisting$))}}function Gt(s,a){1&s&&e.nrm(0,"ds-process-form",4)}let Et=(()=>{class s{constructor(t,n,r){this.route=t,this.processService=n,this.linkService=r}ngOnInit(){const t=this.route.snapshot.queryParams.id;t&&(this.fromExisting$=this.processService.findById(t).pipe((0,v.ak)()),this.script$=this.fromExisting$.pipe((0,f.T)(n=>this.linkService.resolveLink(n,(0,w.s)("script"))),(0,g.n)(n=>n.script),(0,v.ak)()))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(_.nX),e.rXU(P.ProcessDataService),e.rXU(xe._))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-new-process"]],standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[["newProcess",""],[4,"ngIf","ngIfElse"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:function(n,r){if(1&n&&(e.DNE(0,Mt,3,3,"ng-container",1),e.nI1(1,"async"),e.nI1(2,"dsHasValue"),e.DNE(3,Gt,1,0,"ng-template",null,0,e.C5r)),2&n){const i=e.sdS(4);e.Y8G("ngIf",e.bMT(2,4,e.bMT(1,2,r.fromExisting$)))("ngIfElse",i)}},dependencies:[c.bT,E.r,$t,c.Jj,Be.a]})}return s})();var q=o(33325),wt=o(81215),Ot=o(81459);let ee=(()=>{class s{constructor(t,n,r){this.processDataService=t,this.notificationsService=n,this.translateService=r,this.processesToDelete=[],this.isProcessingBehaviorSubject=new I.t(!1)}toggleDelete(t){this.isToBeDeleted(t)?this.processesToDelete.splice(this.processesToDelete.indexOf(t),1):this.processesToDelete.push(t)}isToBeDeleted(t){return this.processesToDelete.includes(t)}clearAllProcesses(){this.processesToDelete.splice(0)}getAmountOfSelectedProcesses(){return this.processesToDelete.length}isProcessing$(){return this.isProcessingBehaviorSubject}hasSelected(){return(0,m.hj)(this.processesToDelete)}deleteSelectedProcesses(){this.isProcessingBehaviorSubject.next(!0),(0,q.H)([...this.processesToDelete]).pipe((0,Ot.H)(t=>this.processDataService.delete(t).pipe((0,v.qD)(),(0,C.M)(n=>{n.hasFailed?this.notificationsService.error(this.translateService.get("process.bulk.delete.error.head"),this.translateService.get("process.bulk.delete.error.body",{processId:t})):this.toggleDelete(t)}))),(0,h.p)(t=>t.hasSucceeded),function kt(s){return(0,wt.T)((a,t,n)=>!s||s(t,n)?a+1:a,0)}()).subscribe(t=>{this.notificationsService.success(this.translateService.get("process.bulk.delete.success",{count:t})),this.isProcessingBehaviorSubject.next(!1)})}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(P.ProcessDataService),e.KVO(G.I),e.KVO(p.c$))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var xt=o(99120),te=o(89632),se=o(36705),x=function(s){return s.creationTime="creationTime",s.startTime="startTime",s.endTime="endTime",s}(x||{});let ne=(()=>{class s{constructor(t){this.processDataService=t,this.dateFormat="yyyy-MM-dd HH:mm:ss",this.datePipe=new c.vh("en-US"),this.timeCreated=n=>this.datePipe.transform(n.creationTime,this.dateFormat,"UTC"),this.timeCompleted=n=>this.datePipe.transform(n.endTime,this.dateFormat,"UTC"),this.timeStarted=n=>this.datePipe.transform(n.startTime,this.dateFormat,"UTC")}getProcessesByProcessStatus(t,n,r=null){const i=new xt.x("processStatus",t),u=Object.assign(new se._,{searchParams:[i],elementsPerPage:5},n);return(0,m.a4)(r)&&r>0?(this.processDataService.stopAutoRefreshing(t),this.processDataService.autoRefreshingSearchBy(t,"byProperty",u,r)):this.processDataService.searchBy("byProperty",u)}stopAutoRefreshing(t){this.processDataService.stopAutoRefreshing(t)}getFindListOptions(t,n){const r=new te.z(n,te.U.DESC);return Object.assign(new se._,{currentPage:t.currentPage,elementsPerPage:t.pageSize,sort:r})}static#e=this.\u0275fac=function(n){return new(n||s)(e.KVO(P.ProcessDataService))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Bt=o(27035),Nt=o(42267),Yt=o(95438),Xt=o(5338),Ut=o(31363),Lt=o(98985),Jt=o(51661),At=o(67899);const re=s=>["/processes/",s];function Ht(s,a){if(1&s&&(e.j41(0,"span",9),e.EFF(1),e.k0s()),2&s){const t=a.ngIf;e.R7$(),e.SpI(" ",null==t||null==t.payload?null:t.payload.totalElements," ")}}function zt(s,a){1&s&&e.nrm(0,"ds-loading")}function Kt(s,a){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"a",21),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"a",21),e.EFF(6),e.k0s()(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"button",22),e.nI1(13,"translate"),e.bIt("click",function(){const r=e.eBV(t).$implicit,i=e.XpG(3);return e.Njj(i.processBulkDeleteService.toggleDelete(r.process.processId))}),e.nrm(14,"i",23),e.k0s()()()}if(2&s){const t=a.$implicit,n=e.XpG(3);e.HbH(n.getRowClass(t.process)),e.R7$(2),e.Y8G("routerLink",e.eq3(11,re,t.process.processId)),e.R7$(),e.JRh(t.process.processId),e.R7$(2),e.Y8G("routerLink",e.eq3(13,re,t.process.processId)),e.R7$(),e.JRh(t.process.scriptName),e.R7$(2),e.JRh(t.user),e.R7$(2),e.JRh(t.info),e.R7$(2),e.BMQ("aria-label",e.bMT(13,9,"process.overview.delete-process"))}}function Qt(s,a){if(1&s&&(e.j41(0,"ds-pagination",12),e.nI1(1,"async"),e.j41(2,"div",13)(3,"table",14)(4,"thead")(5,"tr")(6,"th",15),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th",16),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"th",17),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"th",18),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"th",19),e.EFF(19),e.nI1(20,"translate"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,Kt,15,15,"tr",20),e.k0s()()()()),2&s){const t=e.XpG().ngVar,n=e.XpG();e.Y8G("paginationOptions",e.bMT(1,10,n.paginationOptions$))("collectionSize",null==t||null==t.payload?null:t.payload.totalElements)("retainScrollPosition",!0)("hideGear",!0),e.R7$(7),e.JRh(e.bMT(8,12,"process.overview.table.id")),e.R7$(3),e.JRh(e.bMT(11,14,"process.overview.table.name")),e.R7$(3),e.JRh(e.bMT(14,16,"process.overview.table.user")),e.R7$(3),e.JRh(e.bMT(17,18,"process.overview.table."+n.processStatus.toLowerCase()+".info")),e.R7$(3),e.JRh(e.bMT(20,20,"process.overview.table.actions")),e.R7$(3),e.Y8G("ngForOf",null==t||null==t.payload?null:t.payload.page)}}function Wt(s,a){1&s&&(e.j41(0,"div")(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"process.overview.table.empty")))}function Zt(s,a){if(1&s&&(e.qex(0),e.DNE(1,zt,1,0,"ds-loading",10)(2,Qt,23,22,"ds-pagination",11)(3,Wt,4,3,"div",10),e.bVm()),2&s){const t=a.ngVar;e.R7$(),e.Y8G("ngIf",!t||t.isLoading),e.R7$(),e.Y8G("ngIf",(null==t||null==t.payload?null:t.payload.totalElements)>0),e.R7$(),e.Y8G("ngIf",0===(null==t||null==t.payload?null:t.payload.totalElements))}}let es=(()=>{class s{constructor(t,n,r,i,u,d,B,N,Y,X){this.processOverviewService=t,this.processBulkDeleteService=n,this.ePersonDataService=r,this.dsoNameService=i,this.paginationService=u,this.routeService=d,this.router=B,this.auth=N,this.translateService=Y,this.platformId=X,this.sortField=x.creationTime,this.useAutoRefreshingSearchBy=!1,this.autoRefreshInterval=5e3,this.isCollapsed=!1,this.subs=[]}ngOnInit(){(0,c.UE)(this.platformId)||(this.useAutoRefreshingSearchBy=!1),this.routeService.getQueryParameterValue("new_process_id").pipe((0,V.s)(1)).subscribe(n=>{this.newProcessId=n}),this.paginationId=this.processStatus.toLowerCase().substring(0,2);const t=Object.assign(new At.W,{id:this.paginationId,pageSize:5});this.paginationOptions$=this.paginationService.getCurrentPagination(this.paginationId,t),this.processesRD$=new I.t(void 0),this.subs.push(this.paginationOptions$.pipe((0,f.T)(n=>this.processOverviewService.getFindListOptions(n,this.sortField)),(0,g.n)(n=>this.processOverviewService.getProcessesByProcessStatus(this.processStatus,n,this.useAutoRefreshingSearchBy?this.autoRefreshInterval:null)),(0,H.QD)(this.router,this.auth),(0,v.bD)(),(0,g.n)(n=>(0,q.H)(n.payload.page).pipe((0,Bt.Z)(r=>this.getEPersonName(r.userId).pipe((0,f.T)(i=>({process:r,user:i,info:this.getInfoValueMethod(r)})))),(0,Nt.$)(),(0,f.T)(r=>{const i=Object.assign(new Xt.O,n.payload,{page:r});return Object.assign({},n,{payload:i})})))).subscribe(n=>{this.processesRD$.next(n)})),this.subs.push(this.processesRD$.pipe((0,h.p)(n=>(0,m.a4)(n)),(0,V.s)(1)).subscribe(n=>{n.payload.totalElements>0||(this.isCollapsed=!0)}))}getEPersonName(t){return(0,m.hj)(t)?this.ePersonDataService.findById(t).pipe((0,v.qD)(),(0,g.n)(n=>n.hasSucceeded?[this.dsoNameService.getName(n.payload)]:this.translateService.get("process.overview.unknown.user"))):this.translateService.get("process.overview.unknown.user")}getRowClass(t){return this.processBulkDeleteService.isToBeDeleted(t.processId)?"table-danger":this.newProcessId===t.processId?"table-info":""}ngOnDestroy(){this.subs.filter(t=>(0,m.a4)(t)).forEach(t=>t.unsubscribe()),this.processOverviewService.stopAutoRefreshing(this.processStatus)}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(ne),e.rXU(ee),e.rXU(Ut.EPersonDataService),e.rXU(A.f),e.rXU(Yt.m),e.rXU(Lt.v$),e.rXU(_.Ix),e.rXU(J.uR),e.rXU(p.c$),e.rXU(e.Agw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-overview-table"]],inputs:{processStatus:"processStatus",sortField:"sortField",useAutoRefreshingSearchBy:"useAutoRefreshingSearchBy",autoRefreshInterval:"autoRefreshInterval",getInfoValueMethod:"getInfoValueMethod"},standalone:!0,features:[e.aNF],decls:13,vars:12,consts:[["collapse","ngbCollapse"],[1,"mb-4"],["role","button",1,"d-flex",3,"click"],[1,"flex-grow-1"],["class","badge badge-pill badge-primary badge-nb-processes",4,"ngIf"],[1,"ml-2","toggle-icon"],[1,"fas",3,"ngClass"],["ngbCollapse","",3,"ngbCollapse"],[4,"ngVar"],[1,"badge","badge-pill","badge-primary","badge-nb-processes"],[4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive","mt-1"],[1,"table","table-striped","table-hover"],["scope","col",1,"id-header"],["scope","col",1,"name-header"],["scope","col",1,"user-header"],["scope","col",1,"info-header"],["scope","col",1,"actions-header"],[3,"class",4,"ngFor","ngForOf"],[3,"routerLink"],["aria-hidden","true",1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"]],template:function(n,r){if(1&n){const i=e.RV6();e.j41(0,"div",1)(1,"div",2),e.bIt("click",function(){e.eBV(i);const d=e.sdS(10);return e.Njj(d.toggle())}),e.j41(2,"h2",3),e.EFF(3),e.nI1(4,"translate"),e.DNE(5,Ht,2,1,"span",4),e.nI1(6,"async"),e.j41(7,"span",5),e.nrm(8,"i",6),e.k0s()()(),e.j41(9,"div",7,0),e.DNE(11,Zt,4,3,"ng-container",8),e.nI1(12,"async"),e.k0s()()}if(2&n){const i=e.sdS(10);e.R7$(),e.BMQ("aria-expanded",!i.collapsed),e.R7$(2),e.SpI(" ",e.bMT(4,6,"process.overview.table."+r.processStatus.toLowerCase()+".title")," "),e.R7$(2),e.Y8G("ngIf",e.bMT(6,8,r.processesRD$)),e.R7$(3),e.Y8G("ngClass",i.collapsed?"fa-angle-right":"fa-angle-down"),e.R7$(),e.Y8G("ngbCollapse",r.isCollapsed),e.R7$(2),e.Y8G("ngVar",e.bMT(12,10,r.processesRD$))}},dependencies:[c.YU,D.HC,D.$G,c.Jj,p.h,p.D9,Jt.e,_.Wk,c.Sq,c.bT,z.v,E.r],styles:[".toggle-icon[_ngcontent-%COMP%]{font-size:calc(var(--bs-small-font-size) * .6)}.badge-nb-processes[_ngcontent-%COMP%]{font-size:var(--ds-process-overview-table-nb-processes-badge-size);vertical-align:middle}.id-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-id-column-width)}.name-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-name-column-width)}.user-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-user-column-width)}.info-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-info-column-width)}.actions-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-actions-column-width)}"]})}return s})();const j=s=>({count:s});function ts(s,a){1&s&&e.eu8(0)}function ss(s,a){1&s&&e.eu8(0)}function ns(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.processBulkDeleteService.clearAllProcesses())}),e.nrm(1,"i",15),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&s&&(e.R7$(2),e.SpI("",e.bMT(3,1,"process.overview.delete.clear")," "))}function rs(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2),i=e.sdS(15);return e.Njj(r.openDeleteModal(i))}),e.nrm(1,"i",17),e.EFF(2),e.nI1(3,"translate"),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.i5U(3,1,"process.overview.delete",e.eq3(4,j,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}function is(s,a){if(1&s&&(e.j41(0,"div",9),e.DNE(1,ns,4,3,"button",10)(2,rs,4,6,"button",11),e.j41(3,"button",12),e.nrm(4,"i",13),e.EFF(5),e.nI1(6,"translate"),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.processBulkDeleteService.hasSelected()),e.R7$(),e.Y8G("ngIf",t.processBulkDeleteService.hasSelected()),e.R7$(3),e.JRh(e.bMT(6,3,"process.overview.new"))}}function as(s,a){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,"process.overview.delete.body",e.eq3(4,j,t.processBulkDeleteService.getAmountOfSelectedProcesses())))}}function os(s,a){if(1&s&&(e.j41(0,"div",27),e.nrm(1,"span",28),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.i5U(4,1,"process.overview.delete.processing",e.eq3(4,j,t.processBulkDeleteService.getAmountOfSelectedProcesses())),"")}}function ls(s,a){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",18)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",19),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeModal())}),e.j41(7,"span",20),e.EFF(8,"\xd7"),e.k0s()()(),e.j41(9,"div",21),e.DNE(10,as,3,6,"div",22),e.nI1(11,"async"),e.DNE(12,os,5,6,"div",23),e.nI1(13,"async"),e.j41(14,"div",24)(15,"button",25),e.nI1(16,"async"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeModal())}),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"button",26),e.nI1(20,"async"),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.deleteSelected())}),e.EFF(21),e.nI1(22,"translate"),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,7,"process.overview.delete.header")),e.R7$(6),e.Y8G("ngIf",!0!==e.bMT(11,9,t.processBulkDeleteService.isProcessing$())),e.R7$(2),e.Y8G("ngIf",e.bMT(13,11,t.processBulkDeleteService.isProcessing$())),e.R7$(3),e.Y8G("disabled",e.bMT(16,13,t.processBulkDeleteService.isProcessing$())),e.R7$(2),e.JRh(e.bMT(18,15,"process.detail.delete.cancel")),e.R7$(2),e.Y8G("disabled",e.bMT(20,17,t.processBulkDeleteService.isProcessing$())),e.R7$(2),e.SpI("",e.i5U(22,19,"process.overview.delete",e.eq3(22,j,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}let cs=(()=>{class s{constructor(t,n,r){this.processOverviewService=t,this.modalService=n,this.processBulkDeleteService=r,this.ProcessStatus=y.K,this.ProcessSortField=x}ngOnInit(){this.processBulkDeleteService.clearAllProcesses()}ngOnDestroy(){(0,m.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}deleteSelected(){this.processBulkDeleteService.deleteSelectedProcesses(),(0,m.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe(),this.isProcessingSub=this.processBulkDeleteService.isProcessing$().subscribe(t=>{t||this.closeModal()})}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(ne),e.rXU(D.Bq),e.rXU(ee))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-overview"]],standalone:!0,features:[e.aNF],decls:16,vars:19,consts:[["buttons",""],["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[4,"ngTemplateOutlet"],[1,"sections"],[3,"processStatus","useAutoRefreshingSearchBy","getInfoValueMethod"],[3,"processStatus","sortField","useAutoRefreshingSearchBy","getInfoValueMethod"],[1,"d-flex","justify-content-end","mb-2"],["class","btn btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-danger mr-2",3,"click",4,"ngIf"],["routerLink","/processes/new",1,"btn","btn-success"],[1,"fas","fa-plus","pr-2"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-undo","pr-2"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"fas","fa-trash","pr-2"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click","disabled"],["id","delete-confirm",1,"btn","btn-danger",3,"click","disabled"],[1,"alert","alert-info"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"]],template:function(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h1",4),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.DNE(5,ts,1,0,"ng-container",5),e.j41(6,"div",6),e.nrm(7,"ds-process-overview-table",7)(8,"ds-process-overview-table",7)(9,"ds-process-overview-table",8)(10,"ds-process-overview-table",8),e.k0s(),e.DNE(11,ss,1,0,"ng-container",5),e.k0s(),e.DNE(12,is,7,5,"ng-template",null,0,e.C5r)(14,ls,23,24,"ng-template",null,1,e.C5r)),2&n){const i=e.sdS(13);e.R7$(3),e.JRh(e.bMT(4,17,"process.overview.title")),e.R7$(2),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("processStatus",r.ProcessStatus.RUNNING)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",r.processOverviewService.timeStarted),e.R7$(),e.Y8G("processStatus",r.ProcessStatus.SCHEDULED)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",r.processOverviewService.timeCreated),e.R7$(),e.Y8G("processStatus",r.ProcessStatus.COMPLETED)("sortField",r.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",r.processOverviewService.timeCompleted),e.R7$(),e.Y8G("processStatus",r.ProcessStatus.FAILED)("sortField",r.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",r.processOverviewService.timeCompleted),e.R7$(),e.Y8G("ngTemplateOutlet",i)}},dependencies:[c.bT,_.Wk,c.Jj,p.h,p.D9,c.T3,es],encapsulation:2})}return s})();var ie=o(63016),ps=o(72553);let us=(()=>{class s{getBreadcrumbs(t,n){return(0,m.a4)(t)?(0,ie.of)([new ps.Q(t.processId+" - "+t.scriptName,n)]):(0,ie.of)([])}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const ms=[{path:"",resolve:{breadcrumb:F.S},data:{breadcrumbKey:"process.overview"},canActivate:[S.t],children:[{path:"",component:cs,data:{title:"process.overview.title"}},{path:"new",component:Et,resolve:{breadcrumb:F.S},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:Oe,resolve:{process:(s,a,t=(0,e.WQX)(P.ProcessDataService))=>t.findById(s.params.id,!1,!0,...K).pipe((0,v.qD)()),breadcrumb:(s,a,t=(0,e.WQX)(us),n=(0,e.WQX)(P.ProcessDataService))=>{const r=s.params.id;return n.findById(s.params.id,!0,!1,(0,w.s)("script")).pipe((0,v.qD)(),(0,f.T)(i=>{const u=a.url,d=u.substring(0,u.indexOf(r)).concat(r);return{provider:t,key:i.payload,url:d}}))}}}]}]},25138:(M,b,o)=>{o.d(b,{a:()=>c});var S=o(72683),F=o(53107);let c=(()=>{class e{transform(p){return(0,S.a4)(p)}static#e=this.\u0275fac=function(I){return new(I||e)};static#t=this.\u0275pipe=F.EJ8({name:"dsHasValue",type:e,pure:!0,standalone:!0})}return e})()}}]);