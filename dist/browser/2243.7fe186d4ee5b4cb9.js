"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[2243],{72553:(P,_,i)=>{i.d(_,{Q:()=>T});class T{constructor(b,f){this.text=b,this.url=f}}},92243:(P,_,i)=>{i.r(_),i.d(_,{ROUTES:()=>st});var T=i(21709),e=i(53107),b=i(76627),f=i(47947),E=i(72553),B=i(77304),O=i(36556),Y=i(17584),S=i(12007),N=i(83116),u=i(69685);let V=(()=>{class n{constructor(t,s,o,c){this.dataService=t,this.dsoNameService=s,this.tranlsateService=o,this.authorizationService=c,this.ADMIN_PUBLICATION_CLAIMS_PATH="admin/notifications/publication-claim",this.ADMIN_PUBLICATION_CLAIMS_BREADCRUMB_KEY="admin.notifications.publicationclaim.page.title"}getBreadcrumbs(t){return(0,b.z)([this.dataService.findById(t).pipe((0,S.qD)()),this.authorizationService.isAuthorized(O._.AdministratorOf)]).pipe((0,f.T)(([s,o])=>{const c=this.dsoNameService.getName(s.payload);return o?[new E.Q(this.tranlsateService.instant(this.ADMIN_PUBLICATION_CLAIMS_BREADCRUMB_KEY),this.ADMIN_PUBLICATION_CLAIMS_PATH),new E.Q(this.tranlsateService.instant("suggestion.suggestionFor.breadcrumb",{name:c}),void 0)]:[new E.Q(this.tranlsateService.instant("suggestion.suggestionFor.breadcrumb",{name:c}),void 0)]}))}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(Y.ItemDataService),e.KVO(N.f),e.KVO(u.c$),e.KVO(B.AuthorizationDataService))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g=i(54460),I=i(95968),k=i(71217),m=i(82040),h=i(22867),U=i(66645),z=i(21706),j=i(89632),H=i(36705),K=i(95438),J=i(37330),W=i(71779),v=i(2155),Q=i(37610),r=i(31635),p=i(47817),w=i(52727),y=i(64953),Z=i(98573),G=i(2494),q=i(92504);let d=class{static#e=this.type=q.P};(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",String)],d.prototype,"id",void 0),(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",String)],d.prototype,"display",void 0),(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",String)],d.prototype,"source",void 0),(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",String)],d.prototype,"externalSourceUri",void 0),(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",String)],d.prototype,"score",void 0),(0,r.Cg)([p.autoserialize,(0,r.Sn)("design:type",Object)],d.prototype,"evidences",void 0),(0,r.Cg)([G.aK,(0,p.autoserializeAs)(y.Of),(0,r.Sn)("design:type",y.Cr)],d.prototype,"metadata",void 0),(0,r.Cg)([G.aK,p.autoserialize,(0,r.Sn)("design:type",Z.v)],d.prototype,"type",void 0),(0,r.Cg)([p.deserialize,(0,r.Sn)("design:type",Object)],d.prototype,"_links",void 0),d=(0,r.Cg)([w.gV],d);var ee=i(48364),te=i(76938);function ne(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.approveAndImportCollectionFixed())}),e.nrm(1,"i",8),e.EFF(2),e.nI1(3,"translate"),e.k0s()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,1,t.approveAndImportLabel())," ")}}function se(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",9),e.nrm(1,"i",8),e.EFF(2),e.nI1(3,"translate"),e.nrm(4,"span",10),e.k0s(),e.j41(5,"div",11)(6,"ds-entity-dropdown",12),e.bIt("selectionChange",function(o){e.eBV(t);const c=e.XpG();return e.Njj(c.openDialog(o))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,1,t.approveAndImportLabel())," ")}}function ie(n,a){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"suggestion.seeEvidence"),""))}function oe(n,a){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"suggestion.hideEvidence"),""))}function ae(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleSeeEvidences())}),e.nrm(1,"i",14),e.DNE(2,ie,3,3,"ng-container",15)(3,oe,3,3,"ng-container",15),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("disabled",!t.hasEvidence),e.R7$(2),e.Y8G("ngIf",!t.seeEvidence),e.R7$(),e.Y8G("ngIf",t.seeEvidence)}}let F=(()=>{class n{constructor(t){this.modalService=t,this.isBulk=!1,this.hasEvidence=!1,this.seeEvidence=!1,this.isCollectionFixed=!1,this.ignoreSuggestionClicked=new e.bkB,this.approveAndImport=new e.bkB,this.seeEvidences=new e.bkB}openDialog(t){const s=this.modalService.open(ee.L);s.componentInstance.emitOnly=!0,s.componentInstance.entityType=t.label,s.componentInstance.select.pipe((0,Q.s)(1)).subscribe(o=>{this.approveAndImport.emit({suggestion:this.isBulk?void 0:this.object,collectionId:o.id})})}approveAndImportCollectionFixed(){this.approveAndImport.emit({suggestion:this.isBulk?void 0:this.object,collectionId:null})}ignoreSuggestion(){this.ignoreSuggestionClicked.emit(this.isBulk?void 0:this.object.id)}toggleSeeEvidences(){this.seeEvidences.emit(!this.seeEvidence)}ignoreSuggestionLabel(){return this.isBulk?"suggestion.ignoreSuggestion.bulk":"suggestion.ignoreSuggestion"}approveAndImportLabel(){return this.isBulk?"suggestion.approveAndImport.bulk":"suggestion.approveAndImport"}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Bq))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-suggestion-actions"]],inputs:{object:"object",isBulk:"isBulk",hasEvidence:"hasEvidence",seeEvidence:"seeEvidence",isCollectionFixed:"isCollectionFixed"},outputs:{ignoreSuggestionClicked:"ignoreSuggestionClicked",approveAndImport:"approveAndImport",seeEvidences:"seeEvidences"},standalone:!0,features:[e.aNF],decls:10,vars:6,consts:[["chooseCollection",""],[1,"d-inline"],["ngbDropdown","",1,"d-inline"],["class","btn btn-success","type","button",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"fa","fa-ban"],["class","btn btn-info ml-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-check"],["id","dropdownSubmission","ngbDropdownToggle","","type","button",1,"btn","btn-success"],[1,"caret"],["ngbDropdownMenu","","id","entityControlsDropdownMenu","aria-labelledby","dropdownSubmission",1,"dropdown-menu"],[3,"selectionChange"],[1,"btn","btn-info","ml-2",3,"click","disabled"],[1,"fa","fa-eye"],[4,"ngIf"]],template:function(s,o){if(1&s){const c=e.RV6();e.j41(0,"div",1)(1,"div",2),e.DNE(2,ne,4,3,"button",3)(3,se,7,3,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return e.eBV(c),e.Njj(o.ignoreSuggestion())}),e.nrm(6,"i",5),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.DNE(9,ae,4,3,"button",6),e.k0s()}if(2&s){const c=e.sdS(4);e.R7$(2),e.Y8G("ngIf",o.isCollectionFixed)("ngIfElse",c),e.R7$(5),e.SpI(" ",e.bMT(8,4,o.ignoreSuggestionLabel()),""),e.R7$(2),e.Y8G("ngIf",!o.isBulk)}},dependencies:[te.Y,u.h,u.D9,g.bT,v.zH,v.tg,v.do,v.U0]})}return n})();var x=i(71526),A=i(88842),ce=i(767),re=i(95364),$=i(50999),le=i(70876),ge=i(37362),de=i(93527),ue=i(7044);const M=n=>[n],L=()=>["dc.contributor.author","dc.creator","dc.contributor.*"];function pe(n,a){if(1&n&&(e.j41(0,"a",9),e.nrm(1,"ds-thumbnail",10),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("target",t.linkType===t.linkTypes.ExternalLink?"_blank":"_self")("routerLink",e.eq3(7,M,t.itemPageRoute)),e.BMQ("rel",t.linkType===t.linkTypes.ExternalLink?"noopener noreferrer":null),e.R7$(),e.Y8G("thumbnail",e.bMT(2,5,null==t.dso?null:t.dso.thumbnail))("limitWidth",!0)}}function me(n,a){if(1&n&&(e.j41(0,"span",11),e.nrm(1,"ds-thumbnail",10),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("thumbnail",e.bMT(2,2,null==t.dso?null:t.dso.thumbnail))("limitWidth",!0)}}function he(n,a){if(1&n&&(e.j41(0,"div",6),e.DNE(1,pe,3,9,"a",7)(2,me,3,4,"span",8),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.linkType!==t.linkTypes.None),e.R7$(),e.Y8G("ngIf",t.linkType===t.linkTypes.None)}}function ve(n,a){if(1&n&&e.nrm(0,"ds-badges",12),2&n){const t=e.XpG();e.Y8G("object",t.dso)("context",t.context)("showAccessStatus",!0)}}function fe(n,a){if(1&n&&e.nrm(0,"a",21),2&n){const t=e.XpG(2);e.Y8G("target",t.linkType===t.linkTypes.ExternalLink?"_blank":"_self")("routerLink",e.eq3(4,M,t.itemPageRoute))("innerHTML",t.dsoTitle,e.npT),e.BMQ("rel",t.linkType===t.linkTypes.ExternalLink?"noopener noreferrer":null)}}function Se(n,a){if(1&n&&e.nrm(0,"span",22),2&n){const t=e.XpG(2);e.Y8G("innerHTML",t.dsoTitle,e.npT)}}function _e(n,a){if(1&n&&e.nrm(0,"span",25),2&n){const t=e.XpG(3);e.Y8G("innerHTML",t.firstMetadataValue("dc.publisher"),e.npT)}}function be(n,a){1&n&&(e.j41(0,"span"),e.EFF(1,", "),e.k0s())}function Ie(n,a){if(1&n&&e.nrm(0,"span",26),2&n){const t=e.XpG(3);e.Y8G("innerHTML",t.firstMetadataValue("dc.date.issued"),e.npT)}}function Ce(n,a){if(1&n&&(e.qex(0),e.EFF(1," ("),e.DNE(2,_e,1,1,"span",23)(3,be,2,0,"span",18)(4,Ie,1,1,"span",24),e.EFF(5,") "),e.bVm()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.dso.firstMetadataValue("dc.publisher")),e.R7$(),e.Y8G("ngIf",t.dso.firstMetadataValue("dc.publisher")&&t.dso.firstMetadataValue("dc.date.issued")),e.R7$(),e.Y8G("ngIf",t.dso.firstMetadataValue("dc.date.issued"))}}function Te(n,a){1&n&&(e.j41(0,"span"),e.EFF(1,"; "),e.k0s())}function Ee(n,a){if(1&n&&(e.j41(0,"span")(1,"span",29),e.nrm(2,"span",29),e.k0s(),e.DNE(3,Te,2,0,"span",18),e.k0s()),2&n){const t=a.$implicit,s=a.last;e.R7$(),e.Y8G("innerHTML",t,e.npT),e.R7$(),e.Y8G("innerHTML",t,e.npT),e.R7$(),e.Y8G("ngIf",!s)}}function Re(n,a){if(1&n&&(e.j41(0,"span",27),e.DNE(1,Ee,4,3,"span",28),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.allMetadataValues(e.lJ4(1,L)))}}function ke(n,a){if(1&n&&(e.j41(0,"div",30)(1,"ds-truncatable-part",17),e.nrm(2,"span",29),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("id",t.dso.id)("minLines",3),e.R7$(),e.Y8G("innerHTML",t.firstMetadataValue("dc.description.abstract"),e.npT)}}function je(n,a){if(1&n&&(e.j41(0,"ds-truncatable",13),e.DNE(1,fe,1,6,"a",14)(2,Se,1,1,"span",15),e.j41(3,"span",16)(4,"ds-truncatable-part",17),e.DNE(5,Ce,6,3,"ng-container",18)(6,Re,2,2,"span",19),e.k0s()(),e.DNE(7,ke,3,3,"div",20),e.k0s()),2&n){const t=e.XpG();e.Y8G("id",t.dso.id),e.R7$(),e.Y8G("ngIf",t.linkType!==t.linkTypes.None),e.R7$(),e.Y8G("ngIf",t.linkType===t.linkTypes.None),e.R7$(2),e.Y8G("id",t.dso.id)("minLines",1),e.R7$(),e.Y8G("ngIf",t.dso.firstMetadataValue("dc.publisher")||t.dso.firstMetadataValue("dc.date.issued")),e.R7$(),e.Y8G("ngIf",t.dso.allMetadata(e.lJ4(8,L)).length>0),e.R7$(),e.Y8G("ngIf",t.dso.firstMetadataValue("dc.description.abstract"))}}let R=class C extends le.k{static#e=this.\u0275fac=(()=>{let a;return function(s){return(a||(a=e.xGo(C)))(s||C)}})();static#t=this.\u0275cmp=e.VBU({type:C,selectors:[["ds-item-search-result-list-element"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:4,consts:[[1,"row"],["class","col-3 col-md-2",4,"ngIf"],[3,"ngClass"],[1,"d-flex"],[3,"object","context","showAccessStatus",4,"ngIf"],[3,"id",4,"ngIf"],[1,"col-3","col-md-2"],["class","dont-break-out",3,"target","routerLink",4,"ngIf"],["class","dont-break-out",4,"ngIf"],[1,"dont-break-out",3,"target","routerLink"],[3,"thumbnail","limitWidth"],[1,"dont-break-out"],[3,"object","context","showAccessStatus"],[3,"id"],["class","lead item-list-title dont-break-out",3,"target","routerLink","innerHTML",4,"ngIf"],["class","lead item-list-title dont-break-out",3,"innerHTML",4,"ngIf"],[1,"text-muted"],[3,"id","minLines"],[4,"ngIf"],["class","item-list-authors",4,"ngIf"],["class","item-list-abstract",4,"ngIf"],[1,"lead","item-list-title","dont-break-out",3,"target","routerLink","innerHTML"],[1,"lead","item-list-title","dont-break-out",3,"innerHTML"],["class","item-list-publisher",3,"innerHTML",4,"ngIf"],["class","item-list-date",3,"innerHTML",4,"ngIf"],[1,"item-list-publisher",3,"innerHTML"],[1,"item-list-date",3,"innerHTML"],[1,"item-list-authors"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"item-list-abstract"]],template:function(t,s){1&t&&(e.j41(0,"div",0),e.DNE(1,he,3,2,"div",1),e.j41(2,"div",2)(3,"div",3),e.DNE(4,ve,1,3,"ds-badges",4),e.k0s(),e.DNE(5,je,8,9,"ds-truncatable",5),e.k0s()()),2&t&&(e.R7$(),e.Y8G("ngIf",s.showThumbnails),e.R7$(),e.Y8G("ngClass",s.showThumbnails?"col-9":"col-md-12"),e.R7$(2),e.Y8G("ngIf",s.showLabel),e.R7$(),e.Y8G("ngIf",null!=s.object))},dependencies:[g.bT,I.Wk,ue.T,g.YU,ce.F,ge.d,de.W,g.pM,g.Jj],styles:[".item-list-supervision[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}"]})};R=(0,r.Cg)([(0,$.VK)("PublicationSearchResult",A.n.ListElement,x.o.Any,"custom"),(0,$.VK)(re.H,A.n.ListElement,x.o.Any,"custom")],R);var ye=i(47376),D=i(2566),Ge=i(72683);let Fe=(()=>{class n{transform(t){const s=[];return Object.keys(t).forEach(o=>s.push(o)),s}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275pipe=e.EJ8({name:"dsObjectKeys",type:n,pure:!0,standalone:!0})}return n})();function xe(n,a){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s()()),2&n){const t=a.$implicit,s=e.XpG(2);e.R7$(2),e.JRh(s.evidences[t].score),e.R7$(2),e.JRh(e.bMT(5,3,t)),e.R7$(3),e.JRh(s.evidences[t].notes)}}function Ae(n,a){if(1&n&&(e.j41(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th"),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,xe,8,5,"tr",3),e.nI1(15,"dsObjectKeys"),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(e.bMT(6,4,"suggestion.evidence.score")),e.R7$(3),e.JRh(e.bMT(9,6,"suggestion.evidence.type")),e.R7$(3),e.JRh(e.bMT(12,8,"suggestion.evidence.notes")),e.R7$(3),e.Y8G("ngForOf",e.bMT(15,10,t.evidences))}}let $e=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-suggestion-evidences"]],inputs:{evidences:"evidences"},standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(s,o){1&s&&(e.j41(0,"div"),e.DNE(1,Ae,16,12,"div",0),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngIf",o.evidences))},dependencies:[u.h,u.D9,g.bT,g.pM,Fe],data:{animation:[D.qG]}})}return n})();function Me(n,a){if(1&n&&(e.j41(0,"div",11)(1,"div",12),e.nrm(2,"ds-suggestion-evidences",13),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("evidences",t.object.evidences)}}let Le=(()=>{class n{constructor(t){this.modalService=t,this.isSelected=!1,this.isCollectionFixed=!1,this.seeEvidence=!1,this.ignoreSuggestionClicked=new e.bkB,this.approveAndImport=new e.bkB,this.selected=new e.bkB}ngOnInit(){this.listableObject={indexableObject:Object.assign(new ye.q,{id:this.object.id,metadata:this.object.metadata}),hitHighlights:{}}}onApproveAndImport(t){this.approveAndImport.emit(t)}onIgnoreSuggestion(t){this.ignoreSuggestionClicked.emit(t)}changeSelected(t){this.isSelected=t.target.checked,this.selected.next(this.isSelected)}hasEvidences(){return(0,Ge.hj)(this.object.evidences)}onSeeEvidences(t){this.seeEvidence=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(v.Bq))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-suggestion-list-item"]],inputs:{object:"object",isSelected:"isSelected",isCollectionFixed:"isCollectionFixed"},outputs:{ignoreSuggestionClicked:"ignoreSuggestionClicked",approveAndImport:"approveAndImport",selected:"selected"},standalone:!0,features:[e.aNF],decls:18,vars:15,consts:[[1,"container"],[1,"row"],[1,"col-1","text-center","align-self-center"],[1,""],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"col-2","text-center","align-self-center"],[1,"suggestion-score"],[1,"col"],[3,"showLabel","showThumbnails","object","linkType"],[1,"parent","mt-2",3,"approveAndImport","seeEvidences","ignoreSuggestionClicked","hasEvidence","seeEvidence","object","isCollectionFixed"],["class","mt-2 row",4,"ngIf"],[1,"mt-2","row"],[1,"col","offset-3"],[3,"evidences"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.bIt("change",function(l){return o.changeSelected(l)}),e.k0s()()(),e.j41(5,"div",5)(6,"div",3)(7,"div")(8,"strong"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.j41(11,"span",6),e.EFF(12),e.k0s()()(),e.j41(13,"div",7),e.nrm(14,"ds-item-search-result-list-element",8),e.j41(15,"ds-suggestion-actions",9),e.bIt("approveAndImport",function(l){return o.onApproveAndImport(l)})("seeEvidences",function(l){return o.onSeeEvidences(l)})("ignoreSuggestionClicked",function(l){return o.onIgnoreSuggestion(l)}),e.k0s()()(),e.DNE(16,Me,3,1,"div",10),e.k0s(),e.nrm(17,"hr")),2&s&&(e.R7$(4),e.Y8G("checked",o.isSelected),e.BMQ("aria-label",o.object.display),e.R7$(5),e.SpI(" ",e.bMT(10,13,"suggestion.totalScore"),""),e.R7$(3),e.JRh(o.object.score),e.R7$(2),e.Y8G("showLabel",!1)("showThumbnails",!1)("object",o.listableObject)("linkType",0),e.R7$(),e.Y8G("hasEvidence",o.hasEvidences())("seeEvidence",o.seeEvidence)("object",o.object)("isCollectionFixed",o.isCollectionFixed),e.R7$(),e.Y8G("ngIf",o.seeEvidence))},dependencies:[g.bT,u.h,u.D9,R,F,$e],styles:[".issue-date[_ngcontent-%COMP%]{color:#c8c8c8}.parent[_ngcontent-%COMP%]{display:flex;gap:10px}.import[_ngcontent-%COMP%]{flex:initial}.suggestion-score[_ngcontent-%COMP%]{font-size:1.5rem}"],data:{animation:[D.qG]}})}return n})();var De=i(11816),Pe=i(12571),Be=i(96858),Oe=i(21548),Ye=i(79224),Ne=i(51661),Ve=i(67899),Xe=i(63524),Ue=i(55817);const ze=n=>["/entities/person/",n],He=n=>[n];function Ke(n,a){1&n&&e.nrm(0,"ds-loading")}function Je(n,a){if(1&n){const t=e.RV6();e.j41(0,"ds-suggestion-actions",12),e.bIt("approveAndImport",function(o){e.eBV(t);const c=e.XpG(3);return e.Njj(c.approveAndImportAllSelected(o))})("ignoreSuggestionClicked",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.ignoreSuggestionAllSelected())}),e.k0s()}if(2&n){const t=e.XpG(2).ngVar,s=e.XpG();e.Y8G("isBulk",!0)("isCollectionFixed",s.isCollectionFixed(t.page))}}function We(n,a){1&n&&e.nrm(0,"i",13)}function Qe(n,a){if(1&n){const t=e.RV6();e.j41(0,"li",17)(1,"ds-suggestion-list-item",18),e.bIt("ignoreSuggestionClicked",function(o){e.eBV(t);const c=e.XpG(4);return e.Njj(c.ignoreSuggestion(o))})("selected",function(o){const c=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.onSelected(c,o))})("approveAndImport",function(o){e.eBV(t);const c=e.XpG(4);return e.Njj(c.approveAndImport(o))}),e.k0s()()}if(2&n){const t=a.$implicit,s=e.XpG(4);e.R7$(),e.Y8G("object",t)("isSelected",!!s.selectedSuggestions[t.id])("isCollectionFixed",s.isCollectionFixed(e.eq3(3,He,t)))}}function we(n,a){if(1&n){const t=e.RV6();e.j41(0,"ds-pagination",14),e.bIt("paginationChange",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onPaginationChange())}),e.j41(1,"ul",15),e.DNE(2,Qe,2,5,"li",16),e.k0s()()}if(2&n){const t=e.XpG(2).ngVar,s=e.XpG();e.Y8G("paginationOptions",s.paginationOptions)("sortOptions",s.paginationSortConfig)("collectionSize",null==t||null==t.pageInfo?null:t.pageInfo.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!1)("hidePaginationDetail",!1),e.R7$(2),e.Y8G("ngForOf",null==t?null:t.page)}}function Ze(n,a){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"h1"),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"a",6),e.EFF(5),e.k0s(),e.EFF(6),e.nI1(7,"translate"),e.nI1(8,"translate"),e.k0s(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){e.eBV(t);const o=e.XpG().ngVar,c=e.XpG();return e.Njj(c.onToggleSelectAll(o.page))}),e.EFF(11,"Select / Deselect All"),e.k0s(),e.j41(12,"em"),e.EFF(13),e.k0s(),e.DNE(14,Je,1,2,"ds-suggestion-actions",9)(15,We,1,0,"i",10),e.k0s(),e.DNE(16,we,3,7,"ds-pagination",11),e.nI1(17,"async"),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,9,"suggestion.suggestionFor")," "),e.R7$(2),e.Y8G("routerLink",e.eq3(17,ze,t.researcherUuid)),e.R7$(),e.JRh(t.researcherName),e.R7$(),e.Lme(" ",e.bMT(7,11,"suggestion.from.source")," ",e.bMT(8,13,t.translateSuggestionSource())," "),e.R7$(7),e.SpI("(",t.getSelectedSuggestionsCount(),")"),e.R7$(),e.Y8G("ngIf",t.getSelectedSuggestionsCount()>0),e.R7$(),e.Y8G("ngIf",t.isBulkOperationPending),e.R7$(),e.Y8G("ngIf",!0!==e.bMT(17,15,t.processing$))}}function qe(n,a){1&n&&(e.j41(0,"ds-alert",19),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.Y8G("type","alert-info"),e.R7$(),e.SpI(" ",e.bMT(2,2,"suggestion.count.missing")," "))}function et(n,a){if(1&n&&(e.qex(0),e.DNE(1,Ke,1,0,"ds-loading",4),e.nI1(2,"async"),e.DNE(3,Ze,18,19,"div",4),e.nI1(4,"async"),e.DNE(5,qe,3,4,"ds-alert",5),e.nI1(6,"async"),e.bVm()),2&n){const t=a.ngVar,s=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,3,s.processing$)),e.R7$(2),e.Y8G("ngIf",!0!==e.bMT(4,5,s.processing$)&&(null==t||null==t.pageInfo?null:t.pageInfo.totalElements)>0),e.R7$(2),e.Y8G("ngIf",!0!==e.bMT(6,7,s.processing$)&&(0===(null==t||null==t.pageInfo?null:t.pageInfo.totalElements)||!t))}}let tt=(()=>{class n{constructor(t,s,o,c,l,it,ot,at,ct){this.authService=t,this.notificationService=s,this.paginationService=o,this.route=c,this.router=l,this.suggestionService=it,this.suggestionTargetsStateService=ot,this.translateService=at,this.workspaceItemService=ct,this.paginationOptions=Object.assign(new Ve.W,{id:"sp",pageSizeOptions:[5,10,20,40,60]}),this.paginationSortConfig=new j.z("trust",j.U.DESC),this.defaultConfig=Object.assign(new H._,{sort:this.paginationSortConfig}),this.processing$=new k.t(!1),this.suggestionsRD$=new k.t({}),this.selectedSuggestions={},this.isBulkOperationPending=!1}ngOnInit(){this.targetRD$=this.route.data.pipe((0,f.T)(t=>t.suggestionTargets),(0,J.QD)(this.router,this.authService)),this.targetId$=this.targetRD$.pipe((0,S.ak)(),(0,f.T)(t=>t.id)),this.targetRD$.pipe((0,S.ak)(),(0,m.M)(t=>{this.suggestionTarget=t,this.suggestionId=t.id,this.researcherName=t.display,this.suggestionSource=t.source,this.researcherUuid=this.suggestionService.getTargetUuid(t)}),(0,h.n)(()=>this.updatePage())).subscribe(),this.suggestionTargetsStateService.dispatchMarkUserSuggestionsAsVisitedAction()}onPaginationChange(){this.updatePage().subscribe()}updatePage(){this.processing$.next(!0);const t=this.paginationService.getFindListOptions(this.paginationOptions.id,this.defaultConfig).pipe((0,U.F)());return(0,b.z)([this.targetId$,t]).pipe((0,h.n)(([s,o])=>this.suggestionService.getSuggestions(s,o.elementsPerPage,o.currentPage,o.sort)),(0,S.qD)(),(0,m.M)(s=>{this.processing$.next(!1),this.suggestionsRD$.next(s.hasSucceeded?s.payload:null),this.suggestionService.clearSuggestionRequests()}))}ignoreSuggestion(t){this.suggestionService.ignoreSuggestion(t).pipe((0,m.M)(()=>this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction()),(0,h.n)(()=>this.updatePage())).subscribe()}ignoreSuggestionAllSelected(){this.isBulkOperationPending=!0,this.suggestionService.ignoreSuggestionMultiple(Object.values(this.selectedSuggestions)).pipe((0,m.M)(t=>{this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction(),this.isBulkOperationPending=!1,this.selectedSuggestions={},t.success>0&&this.notificationService.success(this.translateService.get("suggestion.ignoreSuggestion.bulk.success",{count:t.success})),t.fails>0&&this.notificationService.error(this.translateService.get("suggestion.ignoreSuggestion.bulk.error",{count:t.fails}))}),(0,h.n)(()=>this.updatePage())).subscribe()}approveAndImport(t){this.suggestionService.approveAndImport(this.workspaceItemService,t.suggestion,t.collectionId).pipe((0,m.M)(s=>{const o=this.translateService.instant("suggestion.approveAndImport.success",{url:(0,Ue.Uf)(s.id)});this.notificationService.success("",o,{timeOut:0},!0),this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction()}),(0,h.n)(()=>this.updatePage())).subscribe()}approveAndImportAllSelected(t){this.isBulkOperationPending=!0,this.suggestionService.approveAndImportMultiple(this.workspaceItemService,Object.values(this.selectedSuggestions),t.collectionId).pipe((0,m.M)(s=>{this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction(),this.isBulkOperationPending=!1,this.selectedSuggestions={},s.success>0&&this.notificationService.success(this.translateService.get("suggestion.approveAndImport.bulk.success",{count:s.success})),s.fails>0&&this.notificationService.error(this.translateService.get("suggestion.approveAndImport.bulk.error",{count:s.fails}))}),(0,h.n)(()=>this.updatePage())).subscribe()}onSelected(t,s){s?this.selectedSuggestions[t.id]=t:delete this.selectedSuggestions[t.id]}onToggleSelectAll(t){this.getSelectedSuggestionsCount()>0?this.selectedSuggestions={}:t.forEach(s=>{this.selectedSuggestions[s.id]=s})}getSelectedSuggestionsCount(){return Object.keys(this.selectedSuggestions).length}isCollectionFixed(t){return this.suggestionService.isCollectionFixed(t)}translateSuggestionSource(){return this.suggestionService.translateSuggestionSource(this.suggestionSource)}translateSuggestionType(){return this.suggestionService.translateSuggestionType(this.suggestionSource)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(z.uR),e.rXU(Ye.I),e.rXU(K.m),e.rXU(I.nX),e.rXU(I.Ix),e.rXU(Pe.F),e.rXU(De.x),e.rXU(u.c$),e.rXU(W.WorkspaceitemDataService))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["ds-suggestion-page"]],standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-12"],[4,"ngVar"],[4,"ngIf"],[3,"type",4,"ngIf"],["target","_blank",3,"routerLink"],[1,"mb-3","mt-3"],[1,"btn","mr-2","btn-light",3,"click"],["class","m-2",3,"isBulk","isCollectionFixed","approveAndImport","ignoreSuggestionClicked",4,"ngIf"],["class","fas fa-circle-notch fa-spin",4,"ngIf"],[3,"paginationOptions","sortOptions","collectionSize","hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationChange",4,"ngIf"],[1,"m-2",3,"approveAndImport","ignoreSuggestionClicked","isBulk","isCollectionFixed"],[1,"fas","fa-circle-notch","fa-spin"],[3,"paginationChange","paginationOptions","sortOptions","collectionSize","hideGear","hidePagerWhenSinglePage","hidePaginationDetail"],[1,"list-unstyled"],["class","mt-4 mb-4",4,"ngFor","ngForOf"],[1,"mt-4","mb-4"],[3,"ignoreSuggestionClicked","selected","approveAndImport","object","isSelected","isCollectionFixed"],[3,"type"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,et,7,9,"ng-container",3),e.nI1(4,"async"),e.k0s()()()),2&s&&(e.R7$(3),e.Y8G("ngVar",e.bMT(4,1,o.suggestionsRD$)))},dependencies:[g.Jj,Xe.r,g.bT,I.Wk,u.h,u.D9,F,Oe.v,Ne.e,Le,g.Sq,Be.C]})}return n})();var nt=i(14181);const st=[{path:":targetId",resolve:{suggestionTargets:(n,a,t=(0,e.WQX)(nt.SuggestionTargetDataService))=>t.getTargetById(n.params.targetId).pipe((0,S.qD)()),breadcrumb:(n,a,t=(0,e.WQX)(V))=>({provider:t,key:n.paramMap.get("targetId").split(":")[1]})},data:{title:"admin.notifications.publicationclaim.page.title",breadcrumbKey:"admin.notifications.publicationclaim",showBreadcrumbsFluid:!1},canActivate:[T.t],runGuardsAndResolvers:"always",component:tt}]}}]);