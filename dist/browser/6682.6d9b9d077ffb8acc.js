(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[6682],{94693:(b,v,t)=>{"use strict";t.r(v),t.d(v,{WorkspaceItemsDeletePageComponent:()=>R});var m=t(73014),r=t(54460),d=t(69685),p=t(47947),a=t(37610),_=t(22867),f=t(98985),u=t(12007),E=t(71779),P=t(34199),I=t(79224),e=t(53107),g=t(95968),k=t(2155);function T(c,D){if(1&c&&(e.nrm(0,"ds-modify-item-overview",6),e.nI1(1,"async")),2&c){const o=e.XpG();e.Y8G("item",e.bMT(1,1,o.dso$))}}function M(c,D){if(1&c){const o=e.RV6();e.j41(0,"div",7)(1,"h4",8),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"button",9),e.bIt("click",function(){const n=e.eBV(o).dismiss;return e.Njj(n("cancel"))}),e.j41(5,"span",10),e.EFF(6,"\xd7"),e.k0s()()(),e.j41(7,"div",11)(8,"p"),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.j41(11,"div",12)(12,"button",13),e.bIt("click",function(){const n=e.eBV(o).close;return e.Njj(n("cancel"))}),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"button",14),e.bIt("click",function(){const n=e.eBV(o).close;return e.Njj(n("ok"))}),e.EFF(16),e.nI1(17,"translate"),e.k0s()()}2&c&&(e.R7$(2),e.JRh(e.bMT(3,4,"workspace-item.delete.header")),e.R7$(7),e.JRh(e.bMT(10,6,"submission.general.discard.confirm.info")),e.R7$(4),e.JRh(e.bMT(14,8,"submission.general.discard.confirm.cancel")),e.R7$(3),e.JRh(e.bMT(17,10,"submission.general.discard.confirm.submit")))}let R=(()=>{class c{constructor(o,s,n,i,l,h,C,O){this.activatedRoute=o,this.router=s,this.routeService=n,this.workspaceItemService=i,this.notificationsService=l,this.translationService=h,this.location=C,this.modalService=O}ngOnInit(){this.wsi$=this.activatedRoute.data.pipe((0,p.T)(o=>o.wsi),(0,u.Bo)()),this.dso$=this.activatedRoute.data.pipe((0,p.T)(o=>o.dso),(0,u.Bo)()),this.previousQueryParameters=this.location.getState().previousQueryParams}previousPage(){this.routeService.getPreviousUrl().pipe((0,a.s)(1)).subscribe(o=>{let s={};if(o||(o="/mydspace",s=this.previousQueryParameters),o.split("?").length>1)for(const n of o.split("?")[1].split("&"))s[n.split("=")[0]]=decodeURIComponent(n.split("=")[1]);this.router.navigate([o.split("?")[0]],{queryParams:s})})}confirmDelete(o){var s=this;return(0,m.A)(function*(){yield s.modalService.open(o).result.then(n=>{"ok"===n&&s.sendDeleteRequest()})})()}sendDeleteRequest(){this.wsi$.pipe((0,_.n)(o=>this.workspaceItemService.delete(o.id).pipe((0,u.qD)()))).subscribe(o=>{if(o.hasSucceeded){const s=this.translationService.get("workspace-item.delete.notification.success.title"),n=this.translationService.get("workspace-item.delete.title");this.notificationsService.success(s,n),this.previousPage()}else{const s=this.translationService.get("workspace-item.delete.notification.error.title"),n=this.translationService.get("workspace-item.delete.notification.error.content");this.notificationsService.error(s,n)}})}static#e=this.\u0275fac=function(s){return new(s||c)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(f.v$),e.rXU(E.WorkspaceitemDataService),e.rXU(I.I),e.rXU(d.c$),e.rXU(r.aZ),e.rXU(k.Bq))};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["ds-base-workspaceitems-delete-page"]],standalone:!0,features:[e.aNF],decls:14,vars:12,consts:[["content",""],[1,"container"],[3,"item",4,"ngIf"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],["id","delete-modal"],[3,"item"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","id","delete_close","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","id","delete_cancel",1,"btn","btn-secondary",3,"click"],["type","button","id","delete_confirm",1,"btn","btn-danger",3,"click"]],template:function(s,n){if(1&s){const i=e.RV6();e.j41(0,"div",1)(1,"h2"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,T,2,3,"ds-modify-item-overview",2),e.nI1(5,"async"),e.j41(6,"button",3),e.bIt("click",function(){return e.eBV(i),e.Njj(n.previousPage())}),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"button",4),e.bIt("click",function(h){e.eBV(i);const C=e.sdS(13);return h.preventDefault(),e.Njj(n.confirmDelete(C))}),e.EFF(10),e.nI1(11,"translate"),e.k0s()(),e.DNE(12,M,18,12,"ng-template",5,0,e.C5r)}2&s&&(e.R7$(2),e.JRh(e.bMT(3,4,"workspace-item.delete.header")),e.R7$(2),e.Y8G("ngIf",e.bMT(5,6,n.dso$)),e.R7$(3),e.JRh(e.bMT(8,8,"workspace-item.delete.button.cancel")),e.R7$(3),e.JRh(e.bMT(11,10,"workspace-item.delete.button.confirm")))},dependencies:[P.W,d.h,d.D9,r.MD,r.bT,r.Jj],styles:["[_nghost-%COMP%]     ds-modify-item-overview table{display:inline-table!important}"]})}return c})()},6682:(b,v,t)=>{"use strict";t.r(v),t.d(v,{ROUTES:()=>o});var m=t(21709),r=t(32588),d=t(98196),p=t(40756),a=t(53107),_=t(87504),f=t(71779);const u=(s,n,i=(0,a.WQX)(f.WorkspaceitemDataService))=>(0,_.S)(s,n,i);var E=t(80155),P=t(47225);let I=(()=>{class s extends E.q{constructor(i,l){super(i,l),this.dataService=i,this.breadcrumbService=l}static#e=this.\u0275fac=function(l){return new(l||s)(a.KVO(f.WorkspaceitemDataService),a.KVO(P.i))};static#t=this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var e=t(12007),g=t(24106),T=t(21124);t(94693);const R=["*"];function c(s,n){}let D=(()=>{class s extends T.J{getComponentName(){return"WorkspaceItemsDeletePageComponent"}importThemedComponent(i){return t(72447)(`./${i}/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component`)}importUnthemedComponent(){return Promise.resolve().then(t.bind(t,94693))}static#e=this.\u0275fac=(()=>{let i;return function(h){return(i||(i=a.xGo(s)))(h||s)}})();static#t=this.\u0275cmp=a.VBU({type:s,selectors:[["ds-workspace-items-delete"]],standalone:!0,features:[a.Vt3,a.aNF],ngContentSelectors:R,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(l,h){1&l&&(a.NAR(),a.DNE(0,c,0,0,"ng-template",null,0,a.C5r),a.j41(2,"div",null,1),a.SdG(4),a.k0s())},encapsulation:2})}return s})();const o=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:":id",resolve:{breadcrumb:I,wsi:(s,n,i=(0,a.WQX)(f.WorkspaceitemDataService))=>i.findById(s.params.id,!0,!1,(0,g.s)("item")).pipe((0,e.qD)())},children:[{canActivate:[m.t],path:"edit",component:p.r,resolve:{breadcrumb:r.S},data:{title:"submission.edit.title",breadcrumbKey:"submission.edit"}},{canActivate:[m.t],path:"view",component:d.i,resolve:{dso:u,breadcrumb:r.S},data:{title:"workspace-item.view.title",breadcrumbKey:"workspace-item.view"}},{canActivate:[m.t],path:"delete",component:D,resolve:{dso:u,breadcrumb:r.S},data:{title:"workspace-item.delete",breadcrumbKey:"workspace-item.delete"}},{canActivate:[m.t],path:"delete",component:D,resolve:{dso:u,breadcrumb:r.S},data:{title:"workspace-item.delete",breadcrumbKey:"workspace-item.delete"}}]}]},72447:(b,v,t)=>{var m={"./custom/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component":[33824,3824]};function r(d){if(!t.o(m,d))return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+d+"'");throw _.code="MODULE_NOT_FOUND",_});var p=m[d],a=p[0];return t.e(p[1]).then(()=>t(a))}r.keys=()=>Object.keys(m),r.id=72447,b.exports=r}}]);