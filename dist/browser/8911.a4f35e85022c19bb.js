"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8911],{88911:($e,k,s)=>{s.r(k),s.d(k,{ROUTES:()=>je});var G=s(32588),e=s(53107),D=s(63016),E=s(72553);let N=(()=>{class r{getBreadcrumbs(t,o){const n=t.split(":"),i=o.split(":"),l=n.map((c,p)=>new E.Q(c+".breadcrumbs",i[p]));return(0,D.of)(l.reverse())}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const R=(r,a,t=(0,e.WQX)(N))=>{const o=[];P(r,o);const n=r.data.relatedRoutes,i=o.map(m=>m.routeConfig?.path),l=n.filter(m=>i.includes(m.path)),c=r.parent.url[r.parent.url.length-1].path,p=a.url.substring(0,a.url.lastIndexOf(c)+c.length);return{provider:t,key:l.reduce((m,w)=>`${m}:${w.data.breadcrumbKey}`,r.data.breadcrumbKey),url:l.reduce((m,w)=>`${m}:${p}${w.path}`,a.url)}};function P(r,a){r.parent&&(a.push(r.parent),P(r.parent,a))}var b=s(71204),f=s(54460),d=s(10936),u=s(2155),h=s(69685),V=s(64476),C=s(36705),y=s(95438),v=s(12007),T=s(79224);let j=(()=>{class r{validate(t){const n=t.value,i=n?.split(".");return/^(\d{1,3}\.){3}\d{1,3}$/.test(n)&&i.every(l=>parseInt(l,10)<=255)?null:{isValidIp:!1}}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275dir=e.FsC({type:r,selectors:[["","ipV4format",""]],standalone:!0,features:[e.Jv_([{provide:d.cz,useExisting:r,multi:!0}])]})}return r})();var B=s(93776),$=s(76772),X=s(91967),g=s(31635),I=s(47817);class _{}(0,g.Cg)([I.autoserialize,(0,g.Sn)("design:type",String)],_.prototype,"pattern",void 0),(0,g.Cg)([I.autoserialize,(0,g.Sn)("design:type",String)],_.prototype,"constraint",void 0),(0,g.Cg)([I.autoserialize,(0,g.Sn)("design:type",String)],_.prototype,"automatic",void 0);const U=["request-endorsement","request-ingest","request-review","announce-relationship"];var S=s(95968);const A=["confirmModal"],Y=["resetFormModal"],z=[[["","before",""]]],J=["[before]"];function Q(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",37)(1,"label",38),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div"),e.nrm(5,"input",39),e.j41(6,"div",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleEnabled())}),e.nrm(7,"div",41),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"ldn-service-status")),e.R7$(4),e.AVh("checked",t.formModel.get("enabled").value)}}function W(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.name")," "))}function K(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.url")," "))}function H(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.score")," "))}function Z(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ipRange")," "))}function q(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ldnurl")," "))}function ee(r,a){1&r&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ldnurl.ldnUrlAlreadyAssociated")," "))}function te(r,a){if(1&r&&(e.j41(0,"div"),e.DNE(1,q,3,3,"div",11)(2,ee,3,3,"div",11),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.formModel.get("ldnUrl").errors.required),e.R7$(),e.Y8G("ngIf",t.formModel.get("ldnUrl").errors.ldnUrlAlreadyAssociated)}}function ne(r,a){1&r&&(e.qex(0),e.j41(1,"div",44)(2,"label",45),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",47)(6,"label",45),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.bVm()),2&r&&(e.R7$(3),e.JRh(e.bMT(4,2,"ldn-new-service.form.label.ItemFilter")),e.R7$(4),e.JRh(e.bMT(8,4,"ldn-new-service.form.label.automatic")))}function re(r,a){if(1&r&&(e.j41(0,"div",43)(1,"div",44)(2,"label",45),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.DNE(5,ne,9,6,"ng-container",29),e.nrm(6,"div",46),e.k0s()),2&r){let t;const o=e.XpG();e.R7$(3),e.SpI("",e.bMT(4,2,"ldn-new-service.form.label.inboundPattern")," "),e.R7$(2),e.Y8G("ngIf",null==(t=o.formModel.get("notifyServiceInboundPatterns").controls[0])||null==t.value?null:t.value.pattern)}}function oe(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",64),e.nI1(1,"translate"),e.bIt("click",function(n){const i=e.eBV(t).$implicit,l=e.XpG().index;return e.XpG(2).selectInboundPattern(i,l),e.Njj(n.stopPropagation())}),e.j41(2,"div"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}if(2&r){const t=a.$implicit;e.Y8G("title",e.bMT(1,2,"ldn-service.form.pattern."+t+".description")),e.R7$(3),e.JRh(e.bMT(4,4,"ldn-service.form.pattern."+t+".label"))}}function ie(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",70),e.bIt("click",function(n){const i=e.eBV(t).$implicit,l=e.XpG(2).index;return e.XpG(2).selectInboundItemFilter(i.id,l),e.Njj(n.stopPropagation())}),e.j41(1,"div"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&r){const t=a.$implicit;e.R7$(2),e.JRh(e.bMT(3,1,t.id+".label"))}}function ae(r,a){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"div",65,2)(3,"div",66),e.nrm(4,"i",54)(5,"input",67),e.nI1(6,"translate"),e.j41(7,"input",68),e.nI1(8,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.sdS(2);return e.Njj(n.open())}),e.k0s(),e.j41(9,"div",69)(10,"div",57)(11,"button",70),e.bIt("click",function(n){e.eBV(t);const i=e.XpG().index;return e.XpG(2).selectInboundItemFilter("",i),e.Njj(n.stopPropagation())}),e.j41(12,"span"),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.DNE(15,ie,4,3,"button",71),e.nI1(16,"async"),e.k0s()()()(),e.bVm()}if(2&r){let t;const o=e.XpG().index,n=e.XpG(2);e.R7$(),e.Mz_("id","constraint",o,""),e.R7$(4),e.Y8G("readonly",!0),e.BMQ("aria-label",e.bMT(6,8,"ldn-service-input-inbound-item-filter-dropdown")),e.R7$(2),e.Y8G("readonly",!0),e.BMQ("aria-label",e.bMT(8,10,"ldn-service-input-inbound-item-filter-dropdown")),e.R7$(6),e.SpI(" ",e.bMT(14,12,"ldn-service.control-constaint-select-none")," "),e.R7$(2),e.Y8G("ngForOf",null==(t=e.bMT(16,14,n.itemFiltersRD$))||null==t.payload?null:t.payload.page)}}function le(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",72),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,i=e.XpG(2);return e.Njj(i.unmarkForInboundPatternDeletion(n))}),e.nrm(2,"i",73),e.k0s()}2&r&&e.Y8G("title",e.bMT(1,1,"ldn-service-button-unmark-inbound-deletion"))}function se(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",49),e.qex(1,50),e.j41(2,"div",51)(3,"div",44)(4,"div",52,1)(6,"div",53),e.nrm(7,"i",54),e.j41(8,"input",55),e.nI1(9,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.sdS(5);return e.Njj(n.open())}),e.k0s(),e.j41(10,"div",56)(11,"div",57),e.DNE(12,oe,5,6,"button",58),e.k0s()()()()(),e.j41(13,"div",44),e.DNE(14,ae,17,16,"ng-container",29),e.k0s(),e.j41(15,"div",47),e.nrm(16,"input",59),e.j41(17,"div",40),e.bIt("click",function(){const n=e.eBV(t).index,i=e.XpG(2);return e.Njj(i.toggleAutomatic(n))}),e.nrm(18,"div",41),e.k0s()(),e.j41(19,"div",46)(20,"div",60)(21,"button",61),e.nI1(22,"translate"),e.bIt("click",function(){const n=e.eBV(t).index,i=e.XpG(2);return e.Njj(i.markForInboundPatternDeletion(n))}),e.nrm(23,"i",62),e.k0s(),e.DNE(24,le,3,3,"button",63),e.k0s()()(),e.bVm(),e.k0s()}if(2&r){const t=a.index,o=e.XpG(2);e.AVh("marked-for-deletion",o.markedForDeletionInboundPattern.includes(t)),e.R7$(),e.Y8G("formGroupName",t),e.R7$(3),e.Mz_("id","additionalInboundPattern",t,""),e.R7$(4),e.Y8G("readonly",!0)("value",o.selectedInboundPatterns),e.BMQ("aria-label",e.bMT(9,20,"ldn-service-input-inbound-pattern-dropdown")),e.R7$(4),e.Y8G("ngForOf",o.inboundPatterns),e.R7$(2),e.Y8G("ngIf",o.formModel.get("notifyServiceInboundPatterns").controls[t].value.pattern),e.R7$(),e.xc7("visibility",o.formModel.get("notifyServiceInboundPatterns").controls[t].value.pattern?"visible":"hidden"),e.R7$(),e.Mz_("id","automatic",t,""),e.Mz_("name","automatic",t,""),e.R7$(),e.AVh("checked",o.formModel.get("notifyServiceInboundPatterns."+t+".automatic").value),e.R7$(4),e.Y8G("title",e.bMT(22,22,"ldn-service-button-mark-inbound-deletion")),e.R7$(3),e.Y8G("ngIf",o.markedForDeletionInboundPattern.includes(t))}}function ce(r,a){if(1&r&&(e.j41(0,"div"),e.DNE(1,se,25,24,"div",48),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.formModel.get("notifyServiceInboundPatterns").controls)}}function de(r,a){1&r&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.JRh(e.bMT(2,1,"service.overview.edit.modal")))}function pe(r,a){1&r&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.JRh(e.bMT(2,1,"service.overview.create.modal")))}function me(r,a){1&r&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"service.overview.edit.body")," "))}function ue(r,a){1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"service.overview.create.body")," "))}function ve(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",81),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.patchService())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&r&&(e.R7$(),e.SpI("",e.bMT(2,1,"service.detail.update")," "))}function be(r,a){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"button",79),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.closeModal())}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,ve,3,3,"button",80),e.k0s()}if(2&r){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"service.detail.return")," "),e.R7$(2),e.Y8G("ngIf",!t.isNewService)}}function fe(r,a){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"button",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.closeModal())}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"button",81),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createService())}),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&r&&(e.R7$(2),e.SpI("",e.bMT(3,2,"service.refuse.create")," "),e.R7$(3),e.SpI("",e.bMT(6,4,"service.confirm.create")," "))}function he(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",74),e.DNE(1,de,3,3,"h4",29)(2,pe,3,3,"h4",29),e.j41(3,"button",75),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.j41(4,"span",76),e.EFF(5,"\xd7"),e.k0s()()(),e.j41(6,"div",77),e.DNE(7,me,3,3,"div",29)(8,ue,3,3,"span",29),e.k0s(),e.j41(9,"div",78),e.DNE(10,be,5,4,"div",29)(11,fe,7,6,"div",29),e.k0s()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.isNewService),e.R7$(),e.Y8G("ngIf",t.isNewService),e.R7$(5),e.Y8G("ngIf",!t.isNewService),e.R7$(),e.Y8G("ngIf",t.isNewService),e.R7$(2),e.Y8G("ngIf",!t.isNewService),e.R7$(),e.Y8G("ngIf",t.isNewService)}}let x=(()=>{class r{constructor(t,o,n,i,l,c,p,M,F,m){this.ldnServicesService=t,this.ldnItemFiltersService=o,this.formBuilder=n,this.router=i,this.route=l,this.cdRef=c,this.modalService=p,this.notificationService=M,this.translateService=F,this.paginationService=m,this.inboundPatterns=U,this.config=Object.assign(new C._,{elementsPerPage:20}),this.markedForDeletionInboundPattern=[],this.deletedInboundPatterns=[],this.selectPatternDefaultLabelI18Key="ldn-service.form.label.placeholder.default-select",this.formModel=this.formBuilder.group({id:[""],name:["",d.k0.required],description:[""],url:["",d.k0.required],ldnUrl:["",d.k0.required],lowerIp:["",[d.k0.required,new j]],upperIp:["",[d.k0.required,new j]],score:["",[d.k0.required,d.k0.pattern("^0*(.[0-9]+)?$|^1(.0+)?$")]],inboundPattern:[""],constraintPattern:[""],enabled:[""],type:X.zd.value})}ngOnInit(){this.routeSubscription=this.route.params.pipe((0,V.v)(this.route.url)).subscribe(([t,o])=>{this.serviceId=t.serviceId,this.isNewService="new"===o[0].path,this.formModel.addControl("notifyServiceInboundPatterns",this.formBuilder.array([this.createInboundPatternFormGroup()])),this.areControlsInitialized=!0,this.serviceId&&!this.isNewService&&this.fetchServiceData(this.serviceId)}),this.setItemFilters()}ngOnDestroy(){this.routeSubscription.unsubscribe()}setItemFilters(){this.itemFiltersRD$=this.ldnItemFiltersService.findAll().pipe((0,v.qD)())}createService(){if(this.formModel.markAllAsTouched(),this.formModel.invalid)return void this.closeModal();this.formModel.value.notifyServiceInboundPatterns=this.formModel.value.notifyServiceInboundPatterns.map(n=>{const{patternLabel:i,...l}=n;return delete l.constraintFormatted,l});const t={...this.formModel.value,enabled:!0};this.ldnServicesService.create(t).pipe((0,v.qD)()).subscribe(n=>{n.hasSucceeded?(this.notificationService.success(this.translateService.get("ldn-service-notification.created.success.title"),this.translateService.get("ldn-service-notification.created.success.body")),this.closeModal(),this.sendBack()):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("ldn-service-notification.created.failure.title"),this.translateService.get("ldn-service-notification.created.failure.body")),this.closeModal())})}checkPatterns(t){for(let o=0;o<t.length;o++)if(t.at(o).get("pattern").value)return!0;return!1}fetchServiceData(t){this.ldnServicesService.findById(t).pipe((0,v.qD)()).subscribe(o=>{o.hasSucceeded&&(this.ldnService=o.payload,this.formModel.patchValue({id:this.ldnService.id,name:this.ldnService.name,description:this.ldnService.description,url:this.ldnService.url,score:this.ldnService.score,ldnUrl:this.ldnService.ldnUrl,type:this.ldnService.type,enabled:this.ldnService.enabled,lowerIp:this.ldnService.lowerIp,upperIp:this.ldnService.upperIp}),this.filterPatternObjectsAndAssignLabel("notifyServiceInboundPatterns"),this.formModel.get("notifyServiceInboundPatterns").controls.forEach(i=>{const l=i,c=l.get("constraint").value;l.patchValue({constraintFormatted:c?this.translateService.instant(c+".label"):""})}))})}filterPatternObjectsAndAssignLabel(t){const o=this.formModel.get(t);o.clear();const n=[...this.ldnService.notifyServiceInboundPatterns];0===n.length&&n.push({pattern:"",constraint:"",automatic:"false"}),n.forEach(i=>{const l=this.initializeInboundPatternFormGroup(),c=i?.pattern?"ldn-service.form.pattern."+i?.pattern+".label":"ldn-service.form.label.placeholder.default-select",p=Object.assign(new _,{...i,patternLabel:this.translateService.instant(c)});l.patchValue(p),o.push(l),this.cdRef.detectChanges()})}generatePatchOperations(){const t=[];return this.createReplaceOperation(t,"name","/name"),this.createReplaceOperation(t,"description","/description"),this.createReplaceOperation(t,"ldnUrl","/ldnurl"),this.createReplaceOperation(t,"url","/url"),this.createReplaceOperation(t,"score","/score"),this.createReplaceOperation(t,"lowerIp","/lowerIp"),this.createReplaceOperation(t,"upperIp","/upperIp"),this.handlePatterns(t,"notifyServiceInboundPatterns"),this.deletedInboundPatterns.forEach(o=>{t.push({op:"remove",path:`notifyServiceInboundPatterns[${o}]`})}),t}onSubmit(){this.openConfirmModal(this.confirmModal)}addInboundPattern(){this.formModel.get("notifyServiceInboundPatterns").push(this.createInboundPatternFormGroup())}selectInboundPattern(t,o){const n=this.formModel.get("notifyServiceInboundPatterns");n.controls[o].patchValue({pattern:t}),n.controls[o].patchValue({patternLabel:this.translateService.instant("ldn-service.form.pattern."+t+".label")})}selectInboundItemFilter(t,o){const n=this.formModel.get("notifyServiceInboundPatterns");n.controls[o].patchValue({constraint:t,constraintFormatted:this.translateService.instant((""!==t?t:"ldn.no-filter")+".label")}),n.markAllAsTouched()}toggleAutomatic(t){const o=this.formModel.get(`notifyServiceInboundPatterns.${t}.automatic`);o&&(o.markAsTouched(),o.setValue(!o.value))}toggleEnabled(){const t=!this.formModel.get("enabled").value;this.ldnServicesService.patch(this.ldnService,[{op:"replace",path:"/enabled",value:t}]).pipe((0,v.qD)()).subscribe(()=>{this.formModel.get("enabled").setValue(t),this.cdRef.detectChanges()})}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}openConfirmModal(t){this.modalRef=this.modalService.open(t)}patchService(){this.deleteMarkedInboundPatterns();const t=this.generatePatchOperations();this.formModel.markAllAsTouched(),this.formModel.invalid?this.closeModal():this.ldnServicesService.patch(this.ldnService,t).pipe((0,v.qD)()).subscribe(o=>{o.hasSucceeded?(this.closeModal(),this.sendBack(),this.notificationService.success(this.translateService.get("admin.registries.services-formats.modify.success.head"),this.translateService.get("admin.registries.services-formats.modify.success.content"))):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("admin.registries.services-formats.modify.failure.head"),this.translateService.get("admin.registries.services-formats.modify.failure.content")),this.closeModal())})}resetFormAndLeave(){this.sendBack()}markForInboundPatternDeletion(t){this.markedForDeletionInboundPattern.includes(t)||this.markedForDeletionInboundPattern.push(t)}unmarkForInboundPatternDeletion(t){const o=this.markedForDeletionInboundPattern.indexOf(t);-1!==o&&this.markedForDeletionInboundPattern.splice(o,1)}deleteMarkedInboundPatterns(){this.markedForDeletionInboundPattern.sort((o,n)=>n-o);const t=this.formModel.get("notifyServiceInboundPatterns");for(const o of this.markedForDeletionInboundPattern)o>=0&&o<t.length&&(t.at(o).value.isNew?t.removeAt(o):this.deletedInboundPatterns.push(o));this.markedForDeletionInboundPattern=[]}createReplaceOperation(t,o,n){this.formModel.get(o).dirty&&t.push({op:"replace",path:n,value:this.formModel.get(o).value.toString()})}handlePatterns(t,o){const n=this.formModel.get(o);for(let i=0;i<n.length;i++){const l=n.at(i),c=l.value;delete c.constraintFormatted,l.touched&&l.valid&&(delete c?.patternLabel,c.isNew?(delete c.isNew,t.push({op:"add",path:`${o}/-`,value:c})):t.push({op:"replace",path:`${o}[${i}]`,value:c}))}}sendBack(){this.router.navigateByUrl("admin/ldn/services")}createInboundPatternFormGroup(){const t={pattern:"",patternLabel:this.translateService.instant(this.selectPatternDefaultLabelI18Key),constraint:"",constraintFormatted:"",automatic:!1,isNew:!0};return this.isNewService&&delete t.isNew,this.formBuilder.group(t)}initializeInboundPatternFormGroup(){return this.formBuilder.group({pattern:"",patternLabel:"",constraint:"",constraintFormatted:"",automatic:""})}setLdnUrlError(){const t=this.formModel.controls.ldnUrl;t.setErrors({...t.errors||{},ldnUrlAlreadyAssociated:!0})}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU($.LdnServicesService),e.rXU(B.LdnItemfiltersService),e.rXU(d.ok),e.rXU(S.Ix),e.rXU(S.nX),e.rXU(e.gRc),e.rXU(u.Bq),e.rXU(T.I),e.rXU(h.c$),e.rXU(y.m))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["ds-ldn-service-form"]],viewQuery:function(o,n){if(1&o&&(e.GBs(A,7),e.GBs(Y,7)),2&o){let i;e.mGM(i=e.lsd())&&(n.confirmModal=i.first),e.mGM(i=e.lsd())&&(n.resetFormModal=i.first)}},standalone:!0,features:[e.aNF],ngContentSelectors:J,decls:77,vars:77,consts:[["confirmModal",""],["inboundPatternDropdown","ngbDropdown"],["inboundItemfilterDropdown","ngbDropdown"],[1,"container"],[3,"ngSubmit","formGroup"],[1,"d-flex"],[1,"flex-grow-1"],["class","toggle-switch-container",4,"ngIf"],[1,"mb-5"],["for","name",1,"font-weight-bold"],["formControlName","name","id","name","name","name","type","text",1,"form-control",3,"placeholder"],["class","error-text",4,"ngIf"],[1,"mb-5","mt-5","d-flex","flex-column"],["for","description",1,"font-weight-bold"],["formControlName","description","id","description","name","description",1,"form-control",3,"placeholder"],[1,"mb-5","mt-5"],[1,"d-flex","align-items-center"],[1,"d-flex","flex-column","w-50","mr-2"],["for","url",1,"font-weight-bold"],["formControlName","url","id","url","name","url","type","text",1,"form-control",3,"placeholder"],[1,"d-flex","flex-column","w-50"],["for","score",1,"font-weight-bold"],["formControlName","score","id","score","name","score","min","0","max","1","step",".01","type","number",1,"form-control",3,"placeholder"],["for","lowerIp",1,"font-weight-bold"],["formControlName","lowerIp","id","lowerIp","name","lowerIp","type","text",1,"form-control","mr-2",3,"placeholder"],["formControlName","upperIp","id","upperIp","name","upperIp","type","text",1,"form-control",3,"placeholder"],[1,"text-muted"],["for","ldnUrl",1,"font-weight-bold"],["formControlName","ldnUrl","id","ldnUrl","name","ldnUrl","type","text",1,"form-control",3,"placeholder"],[4,"ngIf"],["class","row mb-1 mt-5",4,"ngIf"],[1,"add-pattern-link","mb-2",3,"click"],[1,"form-group","row"],[1,"col","text-right","space-children-mr"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"toggle-switch-container"],["for","enabled",1,"status-label","font-weight-bold"],["formControlName","enabled","hidden","","id","enabled","name","enabled","type","checkbox"],[1,"toggle-switch",3,"click"],[1,"slider"],[1,"error-text"],[1,"row","mb-1","mt-5"],[1,"col"],[1,"font-weight-bold"],[1,"col-sm-2"],[1,"col-sm-1"],["formGroupName","notifyServiceInboundPatterns",3,"marked-for-deletion",4,"ngFor","ngForOf"],["formGroupName","notifyServiceInboundPatterns"],[3,"formGroupName"],[1,"row","mb-1","align-items-center"],["display","dynamic","ngbDropdown","","placement","top-start",1,"w-80",3,"id"],["role","combobox","aria-expanded","false","aria-controls","inboundPatternDropdownButton",1,"position-relative","right-addon"],["aria-hidden","true","ngbDropdownToggle","",1,"position-absolute","scrollable-dropdown-toggle"],["formControlName","patternLabel","id","inboundPatternDropdownButton","ngbDropdownAnchor","","type","text",1,"form-control","w-80","scrollable-dropdown-input",3,"click","readonly","value"],["aria-labelledby","inboundPatternDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-top","w-100"],["role","listbox",1,"scrollable-menu"],["class","dropdown-item collection-item text-truncate w-100","ngbDropdownItem","","type","button",3,"title","click",4,"ngFor","ngForOf"],["formControlName","automatic","hidden","","type","checkbox",3,"id","name"],[1,"btn-group"],["type","button",1,"btn","btn-outline-dark","trash-button",3,"click","title"],[1,"fas","fa-trash"],["class","btn btn-warning ","type","button",3,"title","click",4,"ngIf"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click","title"],["ngbDropdown","","placement","top-start",1,"w-100",3,"id"],["aria-expanded","false","aria-controls","inboundItemfilterDropdown","role","combobox",1,"position-relative","right-addon"],["formControlName","constraint","id","inboundItemfilterDropdown","ngbDropdownAnchor","","type","text",1,"form-control","d-none","w-100","scrollable-dropdown-input",3,"readonly"],["formControlName","constraintFormatted","id","inboundItemfilterDropdownPrettified","ngbDropdownAnchor","","type","text",1,"form-control","w-100","scrollable-dropdown-input",3,"click","readonly"],["aria-labelledby","inboundItemfilterDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click"],["class","dropdown-item collection-item text-truncate w-100","ngbDropdownItem","","type","button",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-warning",3,"click","title"],[1,"fas","fa-undo"],[1,"modal-header"],["aria-label","Close","type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["id","delete-confirm-edit",1,"btn","btn-outline-secondary","mr-2",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["id","delete-confirm-new",1,"btn","btn-outline-secondary","mr-2",3,"click"]],template:function(o,n){if(1&o){const i=e.RV6();e.NAR(z),e.j41(0,"div",3)(1,"form",4),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.onSubmit())}),e.j41(2,"div",5)(3,"h1",6),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()(),e.DNE(7,Q,8,5,"div",7),e.j41(8,"div",8)(9,"label",9),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.nrm(12,"input",10),e.nI1(13,"translate"),e.DNE(14,W,3,3,"div",11),e.k0s(),e.j41(15,"div",12)(16,"label",13),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.nrm(19,"textarea",14),e.nI1(20,"translate"),e.k0s(),e.j41(21,"div",15)(22,"div",16)(23,"div",17)(24,"label",18),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.nrm(27,"input",19),e.nI1(28,"translate"),e.DNE(29,K,3,3,"div",11),e.k0s(),e.j41(30,"div",20)(31,"label",21),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"input",22),e.nI1(35,"translate"),e.DNE(36,H,3,3,"div",11),e.k0s()()(),e.j41(37,"div",15)(38,"label",23),e.EFF(39),e.nI1(40,"translate"),e.k0s(),e.j41(41,"div",5),e.nrm(42,"input",24),e.nI1(43,"translate"),e.nrm(44,"input",25),e.nI1(45,"translate"),e.k0s(),e.DNE(46,Z,3,3,"div",11),e.j41(47,"div",26),e.EFF(48),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",15)(51,"label",27),e.EFF(52),e.nI1(53,"translate"),e.k0s(),e.nrm(54,"input",28),e.nI1(55,"translate"),e.DNE(56,te,3,2,"div",29),e.k0s(),e.DNE(57,re,7,4,"div",30)(58,ce,2,1,"div",29),e.j41(59,"span",31),e.bIt("click",function(){return e.eBV(i),e.Njj(n.addInboundPattern())}),e.EFF(60),e.nI1(61,"translate"),e.k0s(),e.nrm(62,"hr"),e.j41(63,"div",32)(64,"div",33),e.SdG(65),e.j41(66,"button",34),e.bIt("click",function(){return e.eBV(i),e.Njj(n.resetFormAndLeave())}),e.j41(67,"span"),e.EFF(68),e.nI1(69,"translate"),e.k0s()(),e.j41(70,"button",35)(71,"span"),e.nrm(72,"i",36),e.EFF(73),e.nI1(74,"translate"),e.k0s()()()()()(),e.DNE(75,he,12,6,"ng-template",null,0,e.C5r)}2&o&&(e.R7$(),e.Y8G("formGroup",n.formModel),e.R7$(3),e.JRh(n.isNewService?e.bMT(5,39,"ldn-create-service.title"):e.bMT(6,41,"ldn-edit-registered-service.title")),e.R7$(3),e.Y8G("ngIf",!n.isNewService),e.R7$(3),e.JRh(e.bMT(11,43,"ldn-new-service.form.label.name")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("name").invalid&&n.formModel.get("name").touched),e.Y8G("placeholder",e.bMT(13,45,"ldn-new-service.form.placeholder.name")),e.R7$(2),e.Y8G("ngIf",n.formModel.get("name").invalid&&n.formModel.get("name").touched),e.R7$(3),e.JRh(e.bMT(18,47,"ldn-new-service.form.label.description")),e.R7$(2),e.Y8G("placeholder",e.bMT(20,49,"ldn-new-service.form.placeholder.description")),e.R7$(6),e.JRh(e.bMT(26,51,"ldn-new-service.form.label.url")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("url").invalid&&n.formModel.get("url").touched),e.Y8G("placeholder",e.bMT(28,53,"ldn-new-service.form.placeholder.url")),e.R7$(2),e.Y8G("ngIf",n.formModel.get("url").invalid&&n.formModel.get("url").touched),e.R7$(3),e.JRh(e.bMT(33,55,"ldn-new-service.form.label.score")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("score").invalid&&n.formModel.get("score").touched),e.Y8G("placeholder",e.bMT(35,57,"ldn-new-service.form.placeholder.score")),e.R7$(2),e.Y8G("ngIf",n.formModel.get("score").invalid&&n.formModel.get("score").touched),e.R7$(3),e.JRh(e.bMT(40,59,"ldn-new-service.form.label.ip-range")),e.R7$(3),e.AVh("invalid-field",n.formModel.get("lowerIp").invalid&&n.formModel.get("lowerIp").touched),e.Y8G("placeholder",e.bMT(43,61,"ldn-new-service.form.placeholder.lowerIp")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("upperIp").invalid&&n.formModel.get("upperIp").touched),e.Y8G("placeholder",e.bMT(45,63,"ldn-new-service.form.placeholder.upperIp")),e.R7$(2),e.Y8G("ngIf",n.formModel.get("lowerIp").invalid&&n.formModel.get("lowerIp").touched||n.formModel.get("upperIp").invalid&&n.formModel.get("upperIp").touched),e.R7$(2),e.SpI(" ",e.bMT(49,65,"ldn-new-service.form.hint.ipRange")," "),e.R7$(4),e.JRh(e.bMT(53,67,"ldn-new-service.form.label.ldnUrl")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("ldnUrl").invalid&&n.formModel.get("ldnUrl").touched),e.Y8G("placeholder",e.bMT(55,69,"ldn-new-service.form.placeholder.ldnUrl")),e.R7$(2),e.Y8G("ngIf",n.formModel.get("ldnUrl").invalid&&n.formModel.get("ldnUrl").touched),e.R7$(),e.Y8G("ngIf",n.areControlsInitialized),e.R7$(),e.Y8G("ngIf",n.areControlsInitialized),e.R7$(2),e.JRh(e.bMT(61,71,"ldn-new-service.form.label.addPattern")),e.R7$(8),e.SpI("\xa0",e.bMT(69,73,"submission.general.back.submit"),""),e.R7$(5),e.SpI("\xa0",e.bMT(74,75,"ldn-new-service.form.label.submit"),""))},dependencies:[d.X1,d.qT,d.me,d.Q0,d.Zm,d.BC,d.cb,d.VZ,d.zX,d.j4,d.JD,d.$R,h.h,h.D9,f.bT,u.zH,u.tg,u.E5,u.do,u.U0,u._H,f.Sq,f.Jj],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.scrollable-dropdown-input[readonly][_ngcontent-%COMP%]{background-color:#fff}.toggle-icon[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}form[_ngcontent-%COMP%]{font-size:14px;position:relative}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{max-width:100%;width:100%;padding:8px;font-size:14px}option[_ngcontent-%COMP%]:not(:first-child){font-weight:700}.trash-button[_ngcontent-%COMP%]{width:40px;height:40px}textarea[_ngcontent-%COMP%]{height:200px;resize:none}.add-pattern-link[_ngcontent-%COMP%]{color:#0048ff;cursor:pointer}.remove-pattern-link[_ngcontent-%COMP%]{color:#e34949;cursor:pointer;margin-left:10px}.status-checkbox[_ngcontent-%COMP%]{margin-top:5px}.invalid-field[_ngcontent-%COMP%]{border:1px solid red;color:#000}.error-text[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:5px}.toggle-switch[_ngcontent-%COMP%]{display:flex;align-items:center;opacity:.8;position:relative;width:60px;height:30px;background-color:#ccc;border-radius:15px;cursor:pointer;transition:background-color .3s}.toggle-switch.checked[_ngcontent-%COMP%]{background-color:#24cc9a}.slider[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;border-radius:50%;background-color:#fff;transition:transform .3s}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;margin:0 auto}.toggle-switch.checked[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{transform:translate(30px)}.toggle-switch-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;margin-top:10px}.small-text[_ngcontent-%COMP%]{font-size:.7em;color:#888}.toggle-switch[_ngcontent-%COMP%]{cursor:pointer;margin-top:3px;margin-right:3px}.label-box[_ngcontent-%COMP%]{margin-left:11px}.label-box-2[_ngcontent-%COMP%]{margin-left:14px}.label-box-3[_ngcontent-%COMP%]{margin-left:5px}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:calc(var(--ds-submission-footer-z-index) + 1)}.marked-for-deletion[_ngcontent-%COMP%]{background-color:#f3b7bd}.dropdown-menu-top[_ngcontent-%COMP%], .scrollable-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-footer-z-index)}"],data:{animation:[(0,b.hZ)("toggleAnimation",[(0,b.wk)("true",(0,b.iF)({})),(0,b.wk)("false",(0,b.iF)({})),(0,b.kY)("true <=> false",(0,b.i0)("300ms ease-in"))])]}})}return r})();var ge=s(22867),_e=s(47947),Ie=s(72683),Se=s(51661),Me=s(67899),Fe=s(37362),we=s(93527);const ke=["deleteModal"],Re=(r,a)=>({"status-enabled":r,"status-disabled":a}),Pe=r=>["/admin/ldn/services/edit/",r];function Ce(r,a){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td",13),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ds-truncatable",14)(5,"ds-truncatable-part",15)(6,"div"),e.EFF(7),e.k0s()()()(),e.j41(8,"td")(9,"span",16),e.nI1(10,"translate"),e.nI1(11,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.toggleStatus(n,i.ldnServicesService))}),e.EFF(12),e.nI1(13,"translate"),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"td")(16,"div",17)(17,"button",18),e.nI1(18,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.selectServiceToDelete(n.id))}),e.nrm(19,"i",19),e.k0s(),e.j41(20,"button",20),e.nI1(21,"translate"),e.nrm(22,"i",21),e.k0s()()()()}if(2&r){const t=a.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("id",t.id),e.R7$(),e.Y8G("id",t.id)("minLines",2),e.R7$(2),e.SpI(" ",t.description," "),e.R7$(2),e.Y8G("ngClass",e.l_i(23,Re,t.enabled,!t.enabled))("title",t.enabled?e.bMT(10,11,"ldn-service.overview.table.clickToDisable"):e.bMT(11,13,"ldn-service.overview.table.clickToEnable")),e.R7$(3),e.SpI(" ",t.enabled?e.bMT(13,15,"ldn-service.overview.table.enabled"):e.bMT(14,17,"ldn-service.overview.table.disabled")," "),e.R7$(5),e.BMQ("aria-label",e.bMT(18,19,"ldn-service-overview-select-delete")),e.R7$(3),e.Y8G("routerLink",e.eq3(26,Pe,t.id)),e.BMQ("aria-label",e.bMT(21,21,"ldn-service-overview-select-edit"))}}function ye(r,a){if(1&r&&(e.j41(0,"ds-pagination",8),e.nI1(1,"async"),e.j41(2,"div",9)(3,"table",10)(4,"thead")(5,"tr")(6,"th",11),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th",11),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"th",11),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"th",11),e.EFF(16),e.nI1(17,"translate"),e.k0s()()(),e.j41(18,"tbody"),e.DNE(19,Ce,23,28,"tr",12),e.nI1(20,"async"),e.k0s()()()()),2&r){let t,o;const n=e.XpG();e.Y8G("collectionSize",null==(t=e.bMT(1,9,n.ldnServicesRD$))||null==t.payload?null:t.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",n.pageConfig),e.R7$(7),e.JRh(e.bMT(8,11,"service.overview.table.name")),e.R7$(3),e.JRh(e.bMT(11,13,"service.overview.table.description")),e.R7$(3),e.JRh(e.bMT(14,15,"service.overview.table.status")),e.R7$(3),e.JRh(e.bMT(17,17,"service.overview.table.actions")),e.R7$(3),e.Y8G("ngForOf",null==(o=e.bMT(20,19,n.ldnServicesRD$))||null==o.payload?null:o.payload.page)}}function Te(r,a){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",22)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",23),e.nI1(7,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.j41(8,"span",24),e.EFF(9,"\xd7"),e.k0s()()(),e.j41(10,"div",25)(11,"div"),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"div",26)(15,"button",27),e.nI1(16,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"button",28),e.nI1(20,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteSelected(n.selectedServiceId.toString(),n.ldnServicesService))}),e.EFF(21),e.nI1(22,"translate"),e.k0s()()()()}2&r&&(e.R7$(4),e.JRh(e.bMT(5,7,"service.overview.delete.header")),e.R7$(2),e.BMQ("aria-label",e.bMT(7,9,"ldn-service-overview-close-modal")),e.R7$(6),e.SpI(" ",e.bMT(13,11,"service.overview.delete.body")," "),e.R7$(3),e.BMQ("aria-label",e.bMT(16,13,"ldn-service-overview-close-modal")),e.R7$(2),e.JRh(e.bMT(18,15,"service.detail.delete.cancel")),e.R7$(2),e.BMQ("aria-label",e.bMT(20,17,"ldn-service-overview-select-delete")),e.R7$(2),e.SpI("",e.bMT(22,19,"service.overview.delete")," "))}const O=[{path:"",pathMatch:"full",component:(()=>{class r{constructor(t,o,n,i,l,c){this.ldnServicesService=t,this.paginationService=o,this.modalService=n,this.cdRef=i,this.notificationService=l,this.translateService=c,this.selectedServiceId=null,this.servicesData=[],this.config=Object.assign(new C._,{elementsPerPage:10}),this.pageConfig=Object.assign(new Me.W,{id:"po",pageSize:10})}ngOnInit(){this.setLdnServices()}setLdnServices(){this.ldnServicesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,ge.n)(t=>this.ldnServicesService.findAll(t,!1,!1).pipe((0,v.qD)())))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id),(0,Ie.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}selectServiceToDelete(t){this.selectedServiceId=t,this.openDeleteModal(this.deleteModal)}deleteSelected(t,o){null!==this.selectedServiceId&&o.delete(t).pipe((0,v.qD)()).subscribe(n=>{n.hasSucceeded?(this.servicesData=this.servicesData.filter(i=>i.id!==t),this.ldnServicesRD$=this.ldnServicesRD$.pipe((0,_e.T)(i=>(i.hasSucceeded&&(i.payload.page=i.payload.page.filter(l=>l.id.toString()!==t)),i))),this.cdRef.detectChanges(),this.closeModal(),this.notificationService.success(this.translateService.get("ldn-service-delete.notification.success.title"),this.translateService.get("ldn-service-delete.notification.success.content"))):(this.notificationService.error(this.translateService.get("ldn-service-delete.notification.error.title"),this.translateService.get("ldn-service-delete.notification.error.content")),this.cdRef.detectChanges())})}toggleStatus(t,o){const n=!t.enabled,i=t.enabled;o.patch(t,[{op:"replace",path:"/enabled",value:n}]).pipe((0,v.qD)()).subscribe(c=>{c.hasSucceeded?(t.enabled=n,this.notificationService.success(this.translateService.get("ldn-enable-service.notification.success.title"),this.translateService.get("ldn-enable-service.notification.success.content"))):(t.enabled=i,this.notificationService.error(this.translateService.get("ldn-enable-service.notification.error.title"),this.translateService.get("ldn-enable-service.notification.error.content")))})}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU($.LdnServicesService),e.rXU(y.m),e.rXU(u.Bq),e.rXU(e.gRc),e.rXU(T.I),e.rXU(h.c$))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["ds-ldn-services-directory"]],viewQuery:function(o,n){if(1&o&&e.GBs(ke,7),2&o){let i;e.mGM(i=e.lsd())&&(n.deleteModal=i.first)}},standalone:!0,features:[e.aNF],decls:14,vars:9,consts:[["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","justify-content-end"],["routerLink","/admin/ldn/services/new",1,"btn","btn-success"],[1,"fas","fa-plus","pr-2"],[3,"collectionSize","hideGear","hidePagerWhenSinglePage","paginationOptions",4,"ngIf"],[3,"collectionSize","hideGear","hidePagerWhenSinglePage","paginationOptions"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"col-3"],[3,"id"],[3,"id","minLines"],[1,"status-indicator",3,"click","ngClass","title"],[1,"btn-group"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-outline-dark",3,"routerLink"],[1,"fas","fa-edit"],[1,"modal-header"],["aria-label","Close","type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4","text-right"],[1,"btn","btn-outline-secondary","mr-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(o,n){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"h1",3),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.nrm(7,"i",6),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.DNE(10,ye,21,21,"ds-pagination",7),e.nI1(11,"async"),e.k0s(),e.DNE(12,Te,23,21,"ng-template",null,0,e.C5r)),2&o){let i;e.R7$(3),e.JRh(e.bMT(4,3,"ldn-registered-services.title")),e.R7$(5),e.JRh(e.bMT(9,5,"process.overview.new")),e.R7$(2),e.Y8G("ngIf",(null==(i=e.bMT(11,7,n.ldnServicesRD$))||null==i.payload?null:i.payload.totalElements)>0)}},dependencies:[f.bT,f.pM,h.h,h.D9,f.Jj,Se.e,Fe.d,we.W,f.YU,S.Wk],styles:[".status-indicator[_ngcontent-%COMP%]{padding:2.5px 25px;border-radius:4px;cursor:pointer;transition:background-color .5s}.status-enabled[_ngcontent-%COMP%]{background-color:#daf7a6;color:#4f5359;font-size:85%;font-weight:700}.status-enabled[_ngcontent-%COMP%]:hover{background-color:#faa0a0}.status-disabled[_ngcontent-%COMP%]{background-color:#faa0a0;color:#4f5359;font-size:85%;font-weight:700}.status-disabled[_ngcontent-%COMP%]:hover{background-color:#daf7a6}"]})}return r})(),resolve:{breadcrumb:G.S},data:{title:"ldn-registered-services.title",breadcrumbKey:"ldn-registered-services.new"}},{path:"new",resolve:{breadcrumb:R},component:x,data:{title:"ldn-register-new-service.title",breadcrumbKey:"ldn-register-new-service"}},{path:"edit/:serviceId",resolve:{breadcrumb:R},component:x,data:{title:"ldn-edit-service.title",breadcrumbKey:"ldn-edit-service"}}],je=O.map(r=>({...r,data:{...r.data,relatedRoutes:O.filter(a=>a.path!==r.path).map(a=>({path:a.path,data:a.data}))}}))}}]);