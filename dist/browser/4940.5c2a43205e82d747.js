"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[4940,4752,9901],{29901:(S,f,t)=>{t.r(f),t.d(f,{MetadataFieldDataService:()=>K});var c=t(37610),u=t(72683),L=t(79224),T=t(45122),O=t(99120),h=t(25718),v=t(25744),A=t(45926),I=t(83951),R=t(2887),p=t(24265),U=t(12350),l=t(36705),P=t(9843),o=t(53107);let K=(()=>{class r extends R.W{constructor(a,s,d,i,m){super("metadatafields",a,s,d,i),this.requestService=a,this.rdbService=s,this.objectCache=d,this.halService=i,this.notificationsService=m,this.searchBySchemaLinkPath="bySchema",this.searchByFieldNameLinkPath="byFieldName",this.createData=new A.V(this.linkPath,a,s,d,i,m,this.responseMsToLive),this.searchData=new U.X(this.linkPath,a,s,d,i,this.responseMsToLive),this.putData=new p.W(this.linkPath,a,s,d,i,this.responseMsToLive),this.deleteData=new I.I(this.linkPath,a,s,d,i,m,this.responseMsToLive,this.constructIdEndpoint)}findBySchema(a,s={},d=!0,i=!0,...m){const e=Object.assign(new l._,s,{searchParams:[new O.x("schema",a.prefix)]});return this.searchBy(this.searchBySchemaLinkPath,e,d,i,...m)}searchByFieldNameParams(a,s,d,i,m,e={},_=!0,M=!0,...E){const D=Object.assign(new l._,e,{searchParams:[new O.x("schema",(0,u.a4)(a)?a:""),new O.x("element",(0,u.a4)(s)?s:""),new O.x("qualifier",(0,u.a4)(d)?d:""),new O.x("query",(0,u.a4)(i)?i:""),new O.x("exactName",(0,u.a4)(m)?m:"")]});return this.searchBy(this.searchByFieldNameLinkPath,D,_,M,...E)}findByExactFieldName(a){return this.searchByFieldNameParams(null,null,null,null,a,null)}clearRequests(){this.getBrowseEndpoint().pipe((0,c.s)(1)).subscribe(a=>{this.requestService.setStaleByHrefSubstring(a)})}delete(a,s){return this.deleteData.delete(a,s)}deleteByHref(a,s){return this.deleteData.deleteByHref(a,s)}put(a){return this.putData.put(a)}create(a,...s){return this.createData.create(a,...s)}searchBy(a,s,d,i,...m){return this.searchData.searchBy(a,s,d,i,...m)}static#t=this.\u0275fac=function(s){return new(s||r)(o.KVO(P.B),o.KVO(T.o),o.KVO(h.$),o.KVO(v.Y),o.KVO(L.I))};static#e=this.\u0275prov=o.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},44752:(S,f,t)=>{t.r(f),t.d(f,{MetadataSchemaDataService:()=>P});var c=t(82040),u=t(72683),L=t(79224),T=t(45122),O=t(25718),h=t(25744),v=t(45926),A=t(83951),I=t(94937),R=t(2887),p=t(24265),U=t(9843),l=t(53107);let P=(()=>{class o extends R.W{constructor(r,n,a,s,d){super("metadataschemas",r,n,a,s),this.requestService=r,this.rdbService=n,this.objectCache=a,this.halService=s,this.notificationsService=d,this.createData=new v.V(this.linkPath,r,n,a,s,d,this.responseMsToLive),this.putData=new p.W(this.linkPath,r,n,a,s,this.responseMsToLive),this.deleteData=new A.I(this.linkPath,r,n,a,s,d,this.responseMsToLive,this.constructIdEndpoint),this.findAllData=new I.H(this.linkPath,r,n,a,s,this.responseMsToLive)}createOrUpdateMetadataSchema(r){return(0,u.a4)(r.id)?this.putData.put(r):this.createData.create(r)}clearRequests(){return this.getBrowseEndpoint().pipe((0,c.M)(r=>this.requestService.removeByHrefSubstring(r)))}findAll(r,n,a,...s){return this.findAllData.findAll(r,n,a,...s)}delete(r,n){return this.deleteData.delete(r,n)}deleteByHref(r,n){return this.deleteData.deleteByHref(r,n)}static#t=this.\u0275fac=function(n){return new(n||o)(l.KVO(U.B),l.KVO(T.o),l.KVO(O.$),l.KVO(h.Y),l.KVO(L.I))};static#e=this.\u0275prov=l.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},84940:(S,f,t)=>{t.d(f,{x:()=>d});var c=t(73958),u=t(76627),L=t(47947),T=t(27035),O=t(82040),h=t(94782),v=t(72683),A=t(79224),I=t(99120),R=t(36705),p=t(29901),U=t(44752),l=t(12007),P=t(53107),o=t(69685);const K=i=>i.metadataRegistry,r=(0,c.Mz)(K,i=>i.editSchema),n=(0,c.Mz)(K,i=>i.selectedSchemas),a=(0,c.Mz)(K,i=>i.editField),s=(0,c.Mz)(K,i=>i.selectedFields);let d=(()=>{class i{constructor(e,_,M,E,D){this.store=e,this.notificationsService=_,this.translateService=M,this.metadataSchemaService=E,this.metadataFieldService=D}getMetadataSchemas(e={},_=!0,M=!0,...E){return this.metadataSchemaService.findAll(e,_,M,...E)}getMetadataSchemaByPrefix(e,_=!0,M=!0,...E){const D=Object.assign(new R._,{elementsPerPage:1e4});return this.getMetadataSchemas(D).pipe((0,l.ak)(),(0,L.T)(B=>B.page),(0,v.VT)(),(0,L.T)(B=>B.filter(W=>W.prefix===e)[0]),(0,T.Z)(B=>this.metadataSchemaService.findById(`${B.id}`,_,M,...E)))}getMetadataFieldsBySchema(e,_={},M=!0,E=!0,...D){return this.metadataFieldService.findBySchema(e,_,M,E,...D)}editMetadataSchema(e){this.store.dispatch(new h.w2(e))}cancelEditMetadataSchema(){this.store.dispatch(new h.Wi)}getActiveMetadataSchema(){return this.store.pipe((0,c.Lt)(r))}selectMetadataSchema(e){this.store.dispatch(new h.Q6(e))}deselectMetadataSchema(e){this.store.dispatch(new h.zn(e))}deselectAllMetadataSchema(){this.store.dispatch(new h.Gr)}getSelectedMetadataSchemas(){return this.store.pipe((0,c.Lt)(n))}editMetadataField(e){this.store.dispatch(new h.dF(e))}cancelEditMetadataField(){this.store.dispatch(new h.Tf)}getActiveMetadataField(){return this.store.pipe((0,c.Lt)(a))}selectMetadataField(e){this.store.dispatch(new h.jC(e))}deselectMetadataField(e){this.store.dispatch(new h.yb(e))}deselectAllMetadataField(){this.store.dispatch(new h.TE)}getSelectedMetadataFields(){return this.store.pipe((0,c.Lt)(s))}createOrUpdateMetadataSchema(e){const _=(0,v.a4)(e.id);return this.metadataSchemaService.createOrUpdateMetadataSchema(e).pipe((0,l.ak)(),(0,v.Az)(),(0,O.M)(()=>{this.showNotifications(!0,_,!1,{prefix:e.prefix})}))}deleteMetadataSchema(e){return this.metadataSchemaService.delete(`${e}`)}clearMetadataSchemaRequests(){return this.metadataSchemaService.clearRequests()}createMetadataField(e,_){return e.qualifier||(e.qualifier=null),this.metadataFieldService.create(e,new I.x("schemaId",_.id)).pipe((0,l.ak)(),(0,v.Az)(),(0,O.M)(()=>{this.showNotifications(!0,!1,!0,{field:e.toString()})}))}updateMetadataField(e){return e.qualifier||(e.qualifier=null),this.metadataFieldService.put(e).pipe((0,l.ak)(),(0,v.Az)(),(0,O.M)(()=>{this.showNotifications(!0,!0,!0,{field:e.toString()})}))}deleteMetadataField(e){return this.metadataFieldService.delete(`${e}`)}clearMetadataFieldRequests(){this.metadataFieldService.clearRequests()}showNotifications(e,_,M,E){const D="admin.registries.schema.notification",W=_?"edited":"created";(0,u.z)(this.translateService.get(`${D}.${e?"success":"failure"}`),this.translateService.get(`${D}${M?".field":""}.${W}`,E)).subscribe(([y,C])=>{e?this.notificationsService.success(y,C):this.notificationsService.error(y,C)})}queryMetadataFields(e,_={},M=!0,E=!0,...D){return this.metadataFieldService.searchByFieldNameParams(null,null,null,e,null,_,M,E,...D)}static#t=this.\u0275fac=function(_){return new(_||i)(P.KVO(c.il),P.KVO(A.I),P.KVO(o.c$),P.KVO(U.MetadataSchemaDataService),P.KVO(p.MetadataFieldDataService))};static#e=this.\u0275prov=P.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);